/*! release#17.55.1.3 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("bundle.nemo.modules", [], factory);
	else if(typeof exports === 'object')
		exports["bundle.nemo.modules"] = factory();
	else
		root["bundle.nemo.modules"] = factory();
})(this, function() {
return webpackJsonpbundle__name_([1],[
/* 0 */,
/* 1 */,
/* 2 */,
/* 3 */,
/* 4 */,
/* 5 */,
/* 6 */,
/* 7 */,
/* 8 */,
/* 9 */,
/* 10 */,
/* 11 */,
/* 12 */
/*!************************************************************!*\
  !*** ./js/app/module/pattern-matching/pattern-matching.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 *
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 *
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {};
		 //reference to the global eventEmitter
		__.eventBus = null;
		__.registered = {};

		/**
		 * extract url pattern params
		 * @param  {String} url
		 * @returns {Array} of pattern
		 **/
		__.extractUrlParams = function(url_) {
			var pattern = [];
			if(url_ && url_.indexOf('{{')>0) {
				pattern = url_.match(/{{\s*(=)?[(\w|_)\.|:]+\s*}}/g).map(function(x) { return x.match(/(=)?[\w\.|:]+/)[0]; });
			}
			return pattern;
		};
		/**
		 * get replaced url
		 * @param  {String} patternUrl_ - String
		 * @returns {Promise} url - String wrapped in Promise
		 **/
		exports.getReplacedUrl = function(patternUrl_,fallbackUrl_) {
			var urlParams,
				promiseArray = [];

			urlParams = __.extractUrlParams(patternUrl_);
			urlParams.forEach(function(pattern) {
				promiseArray.push(__.replaceUrl(pattern));
			});
			return Promise.all(promiseArray).then(function (array) {
				return __.buildPatchedUrl(array, patternUrl_);
			}).catch(function(err){
				console.log(err);
				return Promise.resolve(fallbackUrl_);
			});
		};

		/**
		 * build patched url
		 * @param  {String} patternUrl_ - String
		 * @returns {void}
		 **/
		__.buildPatchedUrl = function(array_, patternUrl_) {
			var url = patternUrl_,patchedValue,
				key;
			array_.forEach(function(data) {
				key = Object.keys(data);
				//URL encode value to avoid url conflicts with special chars
				patchedValue=encodeURIComponent(data[key]);
				url = url.replace('{{' + key[0] + '}}',patchedValue);
			});
			return Promise.resolve(url);
		};

		/**
		 * replace url
		 * @param  {String} patternUrl_ - String
		 * @returns {void}
		 **/
		__.replaceUrl = function (pattern_) {
			var func,mandatory,patternKey = pattern_.replace(":mandatory", ""), returnObject;
			return new Promise(function (resolve, reject) {
				func = __.registered[patternKey];
				returnObject = {};
				mandatory = !!pattern_.match(/:mandatory/);
				//check if registered function exists and is a promise
				if (func && typeof func === 'function') {
					console.log("pattern-matching.js --> replaceUrl() --> mandatory: ", pattern_);
					func(patternKey).then(function (data) {
						if (!data && mandatory) {
							reject();
						} else {
							returnObject[pattern_] = data;
							resolve(returnObject);
						}
					}).catch(function(err){
						if (mandatory) {
							reject(err);
						}
						else {
							returnObject[pattern_] = "";
							resolve(returnObject);
						}

					});
				} else {
					console.warn("no matching module found for pattern: " + pattern_);
					if (mandatory) {
						reject();
					}
					else {
						//check if registered function exists and is a promise
						returnObject[pattern_] = "";
						resolve(returnObject);
					}
				}
			});
		};

		/**
		 * public register method
		 * @param {String} pattern_ - matching pattern string
		 * @param {function} promiseCallback_ - callback function returns promise
		 * @returns {void}
		 **/
		exports.register = function(pattern_, promiseCallback_) {
			if(__.registered[pattern_]) {
				console.warn("pattern ist already registered: ",pattern_);
			}
			else {
				__.registered[pattern_] = promiseCallback_;
			}
		};

        /**
         * public initialize method
         * @param {EventEmitter2} globalEventBus - Event Bus
         * @return {Promise} returns Promise
         */
        exports.initializePromise = function(globalEventBus) {
            return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
                resolve('pattern-matching/pattern-matching.js');
            });
        };
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 13 */,
/* 14 */,
/* 15 */,
/* 16 */,
/* 17 */,
/* 18 */,
/* 19 */,
/* 20 */,
/* 21 */,
/* 22 */,
/* 23 */,
/* 24 */
/*!************************************!*\
  !*** ./js/app/core/page/pg-dom.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
  __webpack_require__(/*! jquery */ 1),
  __webpack_require__(/*! events */ 0),
  __webpack_require__(/*! utils/dom */ 2)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, DOM_UTILS) {
    "use strict";
    var __, exports;
    __ = {};
    exports = {
        __: __
    };
    __.eventBus = null;
    __.navURLs = null;
    __.oDefaults = {
        sClassAnimate: 'animate',
        sClassDirectionForward: 'forward',
        sClassDirectionBackward: 'backward',

        sSelectorPageTitle: '#nm-page-title',

        sSelectorContent: '.nm-content',
        sSelectorContentElem: '.nm-wrapper-content .nm-area-content',
        sSelectorGlobalWrapper: '.nm-wrapper-content',
        sSelectorNavigation: '#nm-navigation'
    };

    __.addClassToSelector = function(selector, classToAdd) {
        DOM_UTILS.getElement(selector).classList.add(classToAdd);
    };
    __.removeClassFromSelector = function(selector, classToRemove) {
        DOM_UTILS.getElement(selector).classList.remove(classToRemove);
    };
    __.removeElement = function(selector) {
        jQuery(selector).remove();
    };
    __.append = function(selector, html) {
        jQuery(selector).append(html);
    };
    __.extractNavigationURLs = function(navLIs, replaceFilter) {
        var tmpElem;
        __.navURLs = [];
        navLIs.each(function() {
            tmpElem = $(this).find('a').attr('data-href');
            if (typeof tmpElem !== "undefined") {
                tmpElem = tmpElem.replace(replaceFilter, '');
                __.navURLs.push(tmpElem);
            }
        });
        return __.navURLs;
    };


    exports.isBackwardsAnimation = function(newPageUrl, currentUrl) {

        if (typeof currentUrl !== "undefined") {
            currentUrl = currentUrl.replace(SETUPS.get('nemo.core.router.pathBase'), '');
        } else {
            currentUrl = window.location.pathname.replace(SETUPS.get('nemo.core.router.pathBase'), '');
        }
        newPageUrl = newPageUrl.replace(SETUPS.get('nemo.core.router.pathBase'), '');

        if (__.navURLs === null) {
          exports.extractNavUrls(jQuery(__.oDefaults.sSelectorContentElem));
        }

        return __.navURLs.indexOf(newPageUrl) < __.navURLs.indexOf(currentUrl);
    };
    /**
     * Check whether we're currently in NOMO context
     */
     exports.isNomo = function() {
        var _contentEl = document.querySelector(__.oDefaults.sSelectorContent);
        return (!!_contentEl && _contentEl.getAttribute('data-type') === 'nomo');
     };
     /**
      * Extract nav URLs for current page
      * @returns {Array} - "keyified" page URLs to preload content for
      */
     exports.extractNavUrls = function(contentAreaObj) {
        return __.extractNavigationURLs(contentAreaObj.find(__.oDefaults.sSelectorNavigation + ' li'), SETUPS.get('nemo.core.router.pathBase'));
     };
    /**
     * Get guid of current page
     * @returns {String} - GUID of current page
     */
    exports.getCurrentPageId = function() {
        return DOM_UTILS.getElement(__.oDefaults.sSelectorContent).getAttribute('data-guid');//eslint-disable-line new-cap
    };
    /**
     * Set document title
     */
    exports.setPageTitle = function(title) {
        document.title = title;
    };
    /**
     * Extract page title from DOM
     */
    exports.extractPageTitle = function(contentAreaObj) {
        var titleElem = contentAreaObj.find(__.oDefaults.sSelectorPageTitle);
        var toReturn = '';
        if (titleElem !== null && typeof titleElem[0] !== "undefined") {
            toReturn = titleElem[0].innerHTML;
        }
        return toReturn;
    };
    /**
     * Insert new page content
     * @param {String} content - HTML string
     */
    exports.insertNewPageContent = function(content) {
        __.append(__.oDefaults.sSelectorGlobalWrapper, content);
        return jQuery(__.oDefaults.sSelectorContentElem + ':last-child');
    };
    /**
     * Prepare the page transition (set classes to reset positions), dependent on direction
     * @param {Boolean} backwardAnimation - whether a backwards animation should be prepared
     */
    exports.preparePageTransition = function(backwardAnimation) {
        var directionClass = backwardAnimation ? __.oDefaults.sClassDirectionBackward : __.oDefaults.sClassDirectionForward;
        __.addClassToSelector(__.oDefaults.sSelectorGlobalWrapper, directionClass);
    };
    /**
     * Trigger the page transition (by setting the animation class)
     */
    exports.triggerPageTranstion = function() {
        __.addClassToSelector(__.oDefaults.sSelectorGlobalWrapper, __.oDefaults.sClassAnimate);
    };
    /**
     * Finish page transition (remove animation classes and remove prev page element), scroll to top
     */
    exports.finishPageTransition = function() {
        __.removeClassFromSelector(__.oDefaults.sSelectorGlobalWrapper, __.oDefaults.sClassAnimate);
        __.removeClassFromSelector(__.oDefaults.sSelectorGlobalWrapper, __.oDefaults.sClassDirectionBackward);
        __.removeClassFromSelector(__.oDefaults.sSelectorGlobalWrapper, __.oDefaults.sClassDirectionForward);
        __.removeElement(__.oDefaults.sSelectorContentElem+':first-child');

        jQuery('body').removeClass("nm-nav-fixed nm-page-nav-is-open");

        jQuery('html, body').animate({scrollTop:0}, 400);
    };

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			resolve("core/page/pg-dom.js");
		});
	};
    return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 25 */
/*!*********************************!*\
  !*** ./js/app/module/device.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Utility module to identify which kind of device
 * is displaying Video and dynamically manipulate 
 * video controls (NEMOBA-6340)
 *
 * author:  Luca Marzano <lm@dasburo.com>
 * version: 0.5
 * ticket:  https://imt.dasburo.com/browse/NEMOBA-6340
 *
 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS) {

        "use strict";

        var __, exports;
        __ = {};
        exports = {
            __: __
        };

        __.oDefaults = {
            classIsIOS: 'nm-is-ios',
            classIsIPad: 'nm-is-ipad',
            classIsIPhone: 'nm-is-iphone'
        };
        __.device = null;
        __.eventBus = null;

        __.addEvents = function() {
            __.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
        };

        /*
         * is-iPhone
         */
        exports.isiPhone = function() {
            return ( __.getDevice() === "iphone" );
        };
        /*
         * is-iPod
         */
        exports.isiPod = function() {
            return ( __.getDevice() === "ipod" );
        };
        /*
         * is-iPad
         */
        exports.isiPad = function() {
            return ( __.getDevice() === "ipad" );
        };
        /*
         * isAndroid
         */
        exports.isAndroid = function() {
            return ( __.getDevice() === "android" );
        };
        /*
         * isiOS
         */
        exports.isiOS = function() {
            return ( exports.isiPhone() || exports.isiPad() );
        };
        /*
         * isMobile
         */
        exports.isMobile = function() {
            return ( exports.isiOS() || exports.isAndroid() );
        };

        //handle page updates
        __.handlePageLoaded = function(event_) {
            if (exports.isiOS()) {
                document.querySelector('body').classList.add(__.oDefaults.classIsIOS);

                if (exports.isiPhone()) {
                    document.querySelector('body').classList.add(__.oDefaults.classIsIPhone);
                }
                else if (exports.isiPad()) {
                    document.querySelector('body').classList.add(__.oDefaults.classIsIPad);
                }
            }
        };

        /*
         * getDevice
         */
        __.getDevice = function() {

            __.device = window.navigator.userAgent.toLowerCase();
            if (__.device.match(/ipod/i) !== null) { __.device = "ipod"; }
            if (__.device.match(/ipad/i) !== null) { __.device = "ipad"; }
            else if (__.device.match(/iphone/i) !== null) { __.device = "iphone"; }
            else if (__.device.match(/android/i) !== null) {
                if (__.device.match(/mobile/i) !== null) {
                    __.device = "android";
                }
            } else {
                __.device = "default";
            }
            return __.device;
        };

        /*
         * initializePromise
         */
        exports.initializePromise = function(eventBus_) {
            return new Promise(function(resolve) {
                __.eventBus = eventBus_;
                __.handlePageLoaded();
                resolve("module/device.js");
            });
        };

        return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 26 */
/*!*****************************************!*\
  !*** ./js/app/mediagallery/mg-model.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! core/signal */ 4)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, SIGNAL) {
        'use strict';
        //Private Methods
        var __ = {},
            //Public API
            exports = {
                __: __
            };
        /**
         * @property {object} store for all Model values
         */
        __.categories = [];
        __.items = [];
        __.selectedItem = null;
        __.selectedCategory = '';
        //get global EventEmitter Instance
        __.eventBus = SIGNAL.getEmitter();
        //get all items filteres by the current slected category
        __.getCurrentItems = function() {
            if (__.selectedCategory === "all") {
                return __.items;
            }
            var filteredItems = [];
            for (var i = 0, len = __.items.length; i < len; i++) {
                if (__.items[i].category === __.selectedCategory) {
                    filteredItems.push(__.items[i]);
                }
            }
            return filteredItems;
        };
        exports.setAllCategories = function(catArr) {
        	__.selectedCategory='';
            __.categories = catArr;
        };
        exports.getCategories = function() {
            return __.categories;
        };
        exports.setAllItems = function(itemsArr) {
        	__.selectedItem=null;
            __.items = itemsArr;
        };
        exports.getAllItems = function() {
            return __.items;
        };
        exports.getSelectedCategory = function() {
            return __.selectedCategory;
        };
        exports.setSelectedCategory = function(category_) {
            var changed = false;
            var previousCategory = __.selectedCategory;
            if (category_ === __.selectedCategory) {
                changed = false;
            } else {
                __.selectedCategory = category_;
                changed = true;
            }
            //first run…
            if (!previousCategory) {
                changed = false;
            }
            console.log("category_", category_, 'changed' + changed, __.eventBus);
            __.eventBus.emit(EVENTS.MEDIAGALLERY_CATEGORY_CHANGED, {
                category: category_,
                changed: changed
            });
        };
        exports.getSelectedItem = function() {
            return __.selectedItem;
        };
        exports.setSelectedItem = function(item_) {
            var changed = false;
            var previousItem = __.selectedItem;
            if (item_ === __.selectedItem) {
                changed = false;
            } else {
                __.selectedItem = item_;
                changed = true;
            }
            //first run…
            if (!previousItem) {
                changed = false;
            }
            var index = exports.getItemIndex();
            var previousIndex = (!!previousItem) ? exports.getItemIndex(previousItem) : index;
            var maxIndex = exports.getMaxIndex();
            var direction = (previousIndex < index) ? 'next' : 'back';
            if (!changed || index === previousIndex) {
                direction = "none";
            }
            __.eventBus.emit(EVENTS.MEDIAGALLERY_ITEM_CHANGED, {
                'item': item_,
                'index': index,
                'maxIndex': maxIndex,
                'direction': direction,
                'changed': changed
            });
        };
        exports.getMaxIndex = function() {
            return __.getCurrentItems().length - 1;
        };
        //get an item by its id
        exports.getItemById = function(id_) {
            return __.getItemByAttributeValue("id", id_);
        };
        //get an item by its image URL
        exports.getItemByImageurl = function(imageUrl_) {
            return __.getItemByAttributeValue("imageurl", imageUrl_);
        };
        //get an item by a specific attribute nad value
        __.getItemByAttributeValue = function(attr_, value_) {
            for (var i = 0, len = __.items.length; i < len; i++) {
                if (__.items[i][attr_] === value_) {
                    return __.items[i];
                }
            }
            return null;
        };
        exports.getNextItem = function(index_) {
            var maxIndex = exports.getMaxIndex();
            if (index_ < maxIndex) {
                index_++;
            } else {
                index_ = 0;
            }
            return exports.getItemByIndex(index_);
        };
        exports.getPreviousItem = function(index_) {
            var maxIndex = exports.getMaxIndex();
            if (index_ > 0) {
                index_--;
            } else {
                index_ = maxIndex;
            }
            return exports.getItemByIndex(index_);
        };
        //get an item by its index
        exports.getItemByIndex = function(index_) {
            var items = __.getCurrentItems();
            if (!items || items.length < 1 || items.length < index_) {
                return null;
            }
            return items[index_] || null;
        };
        //get the index of the current selected item
        exports.getItemIndex = function(item_) {
            var currentItem = item_ || __.selectedItem;
            var index = -1;
            var curentItems = __.getCurrentItems();
            for (var i = 0, len = curentItems.length; i < len; i++) {
                if (curentItems[i].id === currentItem.id) {
                    index = i;
                    return index;
                }
            }
            return index;
        };
        return exports;
    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 27 */,
/* 28 */,
/* 29 */,
/* 30 */,
/* 31 */,
/* 32 */
/*!***********************************!*\
  !*** ./js/lib/markerclusterer.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// @externs_url http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/maps/google_maps_api_v3_3.js
// ==/ClosureCompiler==

/**
 * @name MarkerClusterer for Google Maps v3
 * @version version 1.0.1
 * @author Luke Mahe
 * @fileoverview
 * The library creates and manages per-zoom-level clusters for large amounts of
 * markers.
 * <br/>
 * This is a v3 implementation of the
 * <a href="http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/"
 * >v2 MarkerClusterer</a>.
 */

/**
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


/**
 * A Marker Clusterer that clusters markers.
 *
 * @param {google.maps.Map} map The Google map to attach to.
 * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to
 *   the cluster.
 * @param {Object=} opt_options support the following options:
 *     'gridSize': (number) The grid size of a cluster in pixels.
 *     'maxZoom': (number) The maximum zoom level that a marker can be part of a
 *                cluster.
 *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a
 *                    cluster is to zoom into it.
 *     'averageCenter': (boolean) Wether the center of each cluster should be
 *                      the average of all markers in the cluster.
 *     'minimumClusterSize': (number) The minimum number of markers to be in a
 *                           cluster before the markers are hidden and a count
 *                           is shown.
 *     'styles': (object) An object that has style properties:
 *       'url': (string) The image url.
 *       'height': (number) The image height.
 *       'width': (number) The image width.
 *       'anchor': (Array) The anchor position of the label text.
 *       'textColor': (string) The text color.
 *       'textSize': (number) The text size.
 *       'backgroundPosition': (string) The position of the backgound x, y.
 * @constructor
 * @extends google.maps.OverlayView
 */
function MarkerClusterer(map, opt_markers, opt_options) {
  // MarkerClusterer implements google.maps.OverlayView interface. We use the
  // extend function to extend MarkerClusterer with google.maps.OverlayView
  // because it might not always be available when the code is defined so we
  // look for it at the last possible moment. If it doesn't exist now then
  // there is no point going ahead :)
  this.extend(MarkerClusterer, google.maps.OverlayView);
  this.map_ = map;

  /**
   * @type {Array.<google.maps.Marker>}
   * @private
   */
  this.markers_ = [];

  /**
   *  @type {Array.<Cluster>}
   */
  this.clusters_ = [];

  this.sizes = [53, 56, 66, 78, 90];

  /**
   * @private
   */
  this.styles_ = [];

  /**
   * @type {boolean}
   * @private
   */
  this.ready_ = false;

  var options = opt_options || {};

  /**
   * @type {number}
   * @private
   */
  this.gridSize_ = options['gridSize'] || 60;

  /**
   * @private
   */
  this.minClusterSize_ = options['minimumClusterSize'] || 2;


  /**
   * @type {?number}
   * @private
   */
  this.maxZoom_ = options['maxZoom'] || null;

  this.styles_ = options['styles'] || [];

  /**
   * @type {string}
   * @private
   */
  this.imagePath_ = options['imagePath'] ||
      this.MARKER_CLUSTER_IMAGE_PATH_;

  /**
   * @type {string}
   * @private
   */
  this.imageExtension_ = options['imageExtension'] ||
      this.MARKER_CLUSTER_IMAGE_EXTENSION_;

  /**
   * @type {boolean}
   * @private
   */
  this.zoomOnClick_ = true;

  if (options['zoomOnClick'] != undefined) {
    this.zoomOnClick_ = options['zoomOnClick'];
  }

  /**
   * @type {boolean}
   * @private
   */
  this.averageCenter_ = false;

  if (options['averageCenter'] != undefined) {
    this.averageCenter_ = options['averageCenter'];
  }

  this.setupStyles_();

  this.setMap(map);

  /**
   * @type {number}
   * @private
   */
  this.prevZoom_ = this.map_.getZoom();

  // Add the map event listeners
  var that = this;
  google.maps.event.addListener(this.map_, 'zoom_changed', function() {
    // Determines map type and prevent illegal zoom levels
    var zoom = that.map_.getZoom();
    var minZoom = that.map_.minZoom || 0;
    var maxZoom = Math.min(that.map_.maxZoom || 100,
                         that.map_.mapTypes[that.map_.getMapTypeId()].maxZoom);
    zoom = Math.min(Math.max(zoom,minZoom),maxZoom);

    if (that.prevZoom_ != zoom) {
      that.prevZoom_ = zoom;
      that.resetViewport();
    }
  });

  google.maps.event.addListener(this.map_, 'idle', function() {
    that.redraw();
  });

  // Finally, add the markers
  if (opt_markers && (opt_markers.length || Object.keys(opt_markers).length)) {
    this.addMarkers(opt_markers, false);
  }
}


/**
 * The marker cluster image path.
 *
 * @type {string}
 * @private
 */
MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ =
    'http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/' +
    'images/m';


/**
 * The marker cluster image path.
 *
 * @type {string}
 * @private
 */
MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';


/**
 * Extends a objects prototype by anothers.
 *
 * @param {Object} obj1 The object to be extended.
 * @param {Object} obj2 The object to extend with.
 * @return {Object} The new extended object.
 * @ignore
 */
MarkerClusterer.prototype.extend = function(obj1, obj2) {
  return (function(object) {
    for (var property in object.prototype) {
      this.prototype[property] = object.prototype[property];
    }
    return this;
  }).apply(obj1, [obj2]);
};


/**
 * Implementaion of the interface method.
 * @ignore
 */
MarkerClusterer.prototype.onAdd = function() {
  this.setReady_(true);
};

/**
 * Implementaion of the interface method.
 * @ignore
 */
MarkerClusterer.prototype.draw = function() {};

/**
 * Sets up the styles object.
 *
 * @private
 */
MarkerClusterer.prototype.setupStyles_ = function() {
  if (this.styles_.length) {
    return;
  }

  for (var i = 0, size; size = this.sizes[i]; i++) {
    this.styles_.push({
      url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,
      height: size,
      width: size
    });
  }
};

/**
 *  Fit the map to the bounds of the markers in the clusterer.
 */
MarkerClusterer.prototype.fitMapToMarkers = function() {
  var markers = this.getMarkers();
  var bounds = new google.maps.LatLngBounds();
  for (var i = 0, marker; marker = markers[i]; i++) {
    bounds.extend(marker.getPosition());
  }

  this.map_.fitBounds(bounds);
};


/**
 *  Sets the styles.
 *
 *  @param {Object} styles The style to set.
 */
MarkerClusterer.prototype.setStyles = function(styles) {
  this.styles_ = styles;
};


/**
 *  Gets the styles.
 *
 *  @return {Object} The styles object.
 */
MarkerClusterer.prototype.getStyles = function() {
  return this.styles_;
};


/**
 * Whether zoom on click is set.
 *
 * @return {boolean} True if zoomOnClick_ is set.
 */
MarkerClusterer.prototype.isZoomOnClick = function() {
  return this.zoomOnClick_;
};

/**
 * Whether average center is set.
 *
 * @return {boolean} True if averageCenter_ is set.
 */
MarkerClusterer.prototype.isAverageCenter = function() {
  return this.averageCenter_;
};


/**
 *  Returns the array of markers in the clusterer.
 *
 *  @return {Array.<google.maps.Marker>} The markers.
 */
MarkerClusterer.prototype.getMarkers = function() {
  return this.markers_;
};


/**
 *  Returns the number of markers in the clusterer
 *
 *  @return {Number} The number of markers.
 */
MarkerClusterer.prototype.getTotalMarkers = function() {
  return this.markers_.length;
};


/**
 *  Sets the max zoom for the clusterer.
 *
 *  @param {number} maxZoom The max zoom level.
 */
MarkerClusterer.prototype.setMaxZoom = function(maxZoom) {
  this.maxZoom_ = maxZoom;
};


/**
 *  Gets the max zoom for the clusterer.
 *
 *  @return {number} The max zoom level.
 */
MarkerClusterer.prototype.getMaxZoom = function() {
  return this.maxZoom_;
};


/**
 *  The function for calculating the cluster icon image.
 *
 *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.
 *  @param {number} numStyles The number of styles available.
 *  @return {Object} A object properties: 'text' (string) and 'index' (number).
 *  @private
 */
MarkerClusterer.prototype.calculator_ = function(markers, numStyles) {
  var index = 0;
  var count = markers.length;
  var dv = count;
  while (dv !== 0) {
    dv = parseInt(dv / 10, 10);
    index++;
  }

  index = Math.min(index, numStyles);
  return {
    text: count,
    index: index
  };
};


/**
 * Set the calculator function.
 *
 * @param {function(Array, number)} calculator The function to set as the
 *     calculator. The function should return a object properties:
 *     'text' (string) and 'index' (number).
 *
 */
MarkerClusterer.prototype.setCalculator = function(calculator) {
  this.calculator_ = calculator;
};


/**
 * Get the calculator function.
 *
 * @return {function(Array, number)} the calculator function.
 */
MarkerClusterer.prototype.getCalculator = function() {
  return this.calculator_;
};


/**
 * Add an array of markers to the clusterer.
 *
 * @param {Array.<google.maps.Marker>} markers The markers to add.
 * @param {boolean=} opt_nodraw Whether to redraw the clusters.
 */
MarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {
  if (markers.length) {
    for (var i = 0, marker; marker = markers[i]; i++) {
      this.pushMarkerTo_(marker);
    }
  } else if (Object.keys(markers).length) {
    for (var marker in markers) {
      this.pushMarkerTo_(markers[marker]);
    }
  }
  if (!opt_nodraw) {
    this.redraw();
  }
};


/**
 * Pushes a marker to the clusterer.
 *
 * @param {google.maps.Marker} marker The marker to add.
 * @private
 */
MarkerClusterer.prototype.pushMarkerTo_ = function(marker) {
  marker.isAdded = false;
  if (marker['draggable']) {
    // If the marker is draggable add a listener so we update the clusters on
    // the drag end.
    var that = this;
    google.maps.event.addListener(marker, 'dragend', function() {
      marker.isAdded = false;
      that.repaint();
    });
  }
  this.markers_.push(marker);
};


/**
 * Adds a marker to the clusterer and redraws if needed.
 *
 * @param {google.maps.Marker} marker The marker to add.
 * @param {boolean=} opt_nodraw Whether to redraw the clusters.
 */
MarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {
  this.pushMarkerTo_(marker);
  if (!opt_nodraw) {
    this.redraw();
  }
};


/**
 * Removes a marker and returns true if removed, false if not
 *
 * @param {google.maps.Marker} marker The marker to remove
 * @return {boolean} Whether the marker was removed or not
 * @private
 */
MarkerClusterer.prototype.removeMarker_ = function(marker) {
  var index = -1;
  if (this.markers_.indexOf) {
    index = this.markers_.indexOf(marker);
  } else {
    for (var i = 0, m; m = this.markers_[i]; i++) {
      if (m == marker) {
        index = i;
        break;
      }
    }
  }

  if (index == -1) {
    // Marker is not in our list of markers.
    return false;
  }

  marker.setMap(null);

  this.markers_.splice(index, 1);

  return true;
};


/**
 * Remove a marker from the cluster.
 *
 * @param {google.maps.Marker} marker The marker to remove.
 * @param {boolean=} opt_nodraw Optional boolean to force no redraw.
 * @return {boolean} True if the marker was removed.
 */
MarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {
  var removed = this.removeMarker_(marker);

  if (!opt_nodraw && removed) {
    this.resetViewport();
    this.redraw();
    return true;
  } else {
   return false;
  }
};


/**
 * Removes an array of markers from the cluster.
 *
 * @param {Array.<google.maps.Marker>} markers The markers to remove.
 * @param {boolean=} opt_nodraw Optional boolean to force no redraw.
 */
MarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {
  var removed = false;

  for (var i = 0, marker; marker = markers[i]; i++) {
    var r = this.removeMarker_(marker);
    removed = removed || r;
  }

  if (!opt_nodraw && removed) {
    this.resetViewport();
    this.redraw();
    return true;
  }
};


/**
 * Sets the clusterer's ready state.
 *
 * @param {boolean} ready The state.
 * @private
 */
MarkerClusterer.prototype.setReady_ = function(ready) {
  if (!this.ready_) {
    this.ready_ = ready;
    this.createClusters_();
  }
};


/**
 * Returns the number of clusters in the clusterer.
 *
 * @return {number} The number of clusters.
 */
MarkerClusterer.prototype.getTotalClusters = function() {
  return this.clusters_.length;
};


/**
 * Returns the google map that the clusterer is associated with.
 *
 * @return {google.maps.Map} The map.
 */
MarkerClusterer.prototype.getMap = function() {
  return this.map_;
};


/**
 * Sets the google map that the clusterer is associated with.
 *
 * @param {google.maps.Map} map The map.
 */
MarkerClusterer.prototype.setMap = function(map) {
  this.map_ = map;
};


/**
 * Returns the size of the grid.
 *
 * @return {number} The grid size.
 */
MarkerClusterer.prototype.getGridSize = function() {
  return this.gridSize_;
};


/**
 * Sets the size of the grid.
 *
 * @param {number} size The grid size.
 */
MarkerClusterer.prototype.setGridSize = function(size) {
  this.gridSize_ = size;
};


/**
 * Returns the min cluster size.
 *
 * @return {number} The grid size.
 */
MarkerClusterer.prototype.getMinClusterSize = function() {
  return this.minClusterSize_;
};

/**
 * Sets the min cluster size.
 *
 * @param {number} size The grid size.
 */
MarkerClusterer.prototype.setMinClusterSize = function(size) {
  this.minClusterSize_ = size;
};


/**
 * Extends a bounds object by the grid size.
 *
 * @param {google.maps.LatLngBounds} bounds The bounds to extend.
 * @return {google.maps.LatLngBounds} The extended bounds.
 */
MarkerClusterer.prototype.getExtendedBounds = function(bounds) {
  var projection = this.getProjection();

  // Turn the bounds into latlng.
  var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),
      bounds.getNorthEast().lng());
  var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),
      bounds.getSouthWest().lng());

  // Convert the points to pixels and the extend out by the grid size.
  var trPix = projection.fromLatLngToDivPixel(tr);
  trPix.x += this.gridSize_;
  trPix.y -= this.gridSize_;

  var blPix = projection.fromLatLngToDivPixel(bl);
  blPix.x -= this.gridSize_;
  blPix.y += this.gridSize_;

  // Convert the pixel points back to LatLng
  var ne = projection.fromDivPixelToLatLng(trPix);
  var sw = projection.fromDivPixelToLatLng(blPix);

  // Extend the bounds to contain the new bounds.
  bounds.extend(ne);
  bounds.extend(sw);

  return bounds;
};


/**
 * Determins if a marker is contained in a bounds.
 *
 * @param {google.maps.Marker} marker The marker to check.
 * @param {google.maps.LatLngBounds} bounds The bounds to check against.
 * @return {boolean} True if the marker is in the bounds.
 * @private
 */
MarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {
  return bounds.contains(marker.getPosition());
};


/**
 * Clears all clusters and markers from the clusterer.
 */
MarkerClusterer.prototype.clearMarkers = function() {
  this.resetViewport(true);

  // Set the markers a empty array.
  this.markers_ = [];
};


/**
 * Clears all existing clusters and recreates them.
 * @param {boolean} opt_hide To also hide the marker.
 */
MarkerClusterer.prototype.resetViewport = function(opt_hide) {
  // Remove all the clusters
  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {
    cluster.remove();
  }

  // Reset the markers to not be added and to be invisible.
  for (var i = 0, marker; marker = this.markers_[i]; i++) {
    marker.isAdded = false;
    if (opt_hide) {
      marker.setMap(null);
    }
  }

  this.clusters_ = [];
};

/**
 *
 */
MarkerClusterer.prototype.repaint = function() {
  var oldClusters = this.clusters_.slice();
  this.clusters_.length = 0;
  this.resetViewport();
  this.redraw();

  // Remove the old clusters.
  // Do it in a timeout so the other clusters have been drawn first.
  window.setTimeout(function() {
    for (var i = 0, cluster; cluster = oldClusters[i]; i++) {
      cluster.remove();
    }
  }, 0);
};


/**
 * Redraws the clusters.
 */
MarkerClusterer.prototype.redraw = function() {
  this.createClusters_();
};


/**
 * Calculates the distance between two latlng locations in km.
 * @see http://www.movable-type.co.uk/scripts/latlong.html
 *
 * @param {google.maps.LatLng} p1 The first lat lng point.
 * @param {google.maps.LatLng} p2 The second lat lng point.
 * @return {number} The distance between the two points in km.
 * @private
*/
MarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {
  if (!p1 || !p2) {
    return 0;
  }

  var R = 6371; // Radius of the Earth in km
  var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;
  var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;
  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *
    Math.sin(dLon / 2) * Math.sin(dLon / 2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  var d = R * c;
  return d;
};


/**
 * Add a marker to a cluster, or creates a new cluster.
 *
 * @param {google.maps.Marker} marker The marker to add.
 * @private
 */
MarkerClusterer.prototype.addToClosestCluster_ = function(marker) {
  var distance = 40000; // Some large number
  var clusterToAddTo = null;
  var pos = marker.getPosition();
  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {
    var center = cluster.getCenter();
    if (center) {
      var d = this.distanceBetweenPoints_(center, marker.getPosition());
      if (d < distance) {
        distance = d;
        clusterToAddTo = cluster;
      }
    }
  }

  if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {
    clusterToAddTo.addMarker(marker);
  } else {
    var cluster = new Cluster(this);
    cluster.addMarker(marker);
    this.clusters_.push(cluster);
  }
};


/**
 * Creates the clusters.
 *
 * @private
 */
MarkerClusterer.prototype.createClusters_ = function() {
  if (!this.ready_) {
    return;
  }

  // Get our current map view bounds.
  // Create a new bounds object so we don't affect the map.
  var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),
      this.map_.getBounds().getNorthEast());
  var bounds = this.getExtendedBounds(mapBounds);

  for (var i = 0, marker; marker = this.markers_[i]; i++) {
    if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {
      this.addToClosestCluster_(marker);
    }
  }
};


/**
 * A cluster that contains markers.
 *
 * @param {MarkerClusterer} markerClusterer The markerclusterer that this
 *     cluster is associated with.
 * @constructor
 * @ignore
 */
function Cluster(markerClusterer) {
  this.markerClusterer_ = markerClusterer;
  this.map_ = markerClusterer.getMap();
  this.gridSize_ = markerClusterer.getGridSize();
  this.minClusterSize_ = markerClusterer.getMinClusterSize();
  this.averageCenter_ = markerClusterer.isAverageCenter();
  this.center_ = null;
  this.markers_ = [];
  this.bounds_ = null;
  this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),
      markerClusterer.getGridSize());
}

/**
 * Determins if a marker is already added to the cluster.
 *
 * @param {google.maps.Marker} marker The marker to check.
 * @return {boolean} True if the marker is already added.
 */
Cluster.prototype.isMarkerAlreadyAdded = function(marker) {
  if (this.markers_.indexOf) {
    return this.markers_.indexOf(marker) != -1;
  } else {
    for (var i = 0, m; m = this.markers_[i]; i++) {
      if (m == marker) {
        return true;
      }
    }
  }
  return false;
};


/**
 * Add a marker the cluster.
 *
 * @param {google.maps.Marker} marker The marker to add.
 * @return {boolean} True if the marker was added.
 */
Cluster.prototype.addMarker = function(marker) {
  if (this.isMarkerAlreadyAdded(marker)) {
    return false;
  }

  if (!this.center_) {
    this.center_ = marker.getPosition();
    this.calculateBounds_();
  } else {
    if (this.averageCenter_) {
      var l = this.markers_.length + 1;
      var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;
      var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;
      this.center_ = new google.maps.LatLng(lat, lng);
      this.calculateBounds_();
    }
  }

  marker.isAdded = true;
  this.markers_.push(marker);

  var len = this.markers_.length;
  if (len < this.minClusterSize_ && marker.getMap() != this.map_) {
    // Min cluster size not reached so show the marker.
    marker.setMap(this.map_);
  }

  if (len == this.minClusterSize_) {
    // Hide the markers that were showing.
    for (var i = 0; i < len; i++) {
      this.markers_[i].setMap(null);
    }
  }

  if (len >= this.minClusterSize_) {
    marker.setMap(null);
  }

  this.updateIcon();
  return true;
};


/**
 * Returns the marker clusterer that the cluster is associated with.
 *
 * @return {MarkerClusterer} The associated marker clusterer.
 */
Cluster.prototype.getMarkerClusterer = function() {
  return this.markerClusterer_;
};


/**
 * Returns the bounds of the cluster.
 *
 * @return {google.maps.LatLngBounds} the cluster bounds.
 */
Cluster.prototype.getBounds = function() {
  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);
  var markers = this.getMarkers();
  for (var i = 0, marker; marker = markers[i]; i++) {
    bounds.extend(marker.getPosition());
  }
  return bounds;
};


/**
 * Removes the cluster
 */
Cluster.prototype.remove = function() {
  this.clusterIcon_.remove();
  this.markers_.length = 0;
  delete this.markers_;
};


/**
 * Returns the center of the cluster.
 *
 * @return {number} The cluster center.
 */
Cluster.prototype.getSize = function() {
  return this.markers_.length;
};


/**
 * Returns the center of the cluster.
 *
 * @return {Array.<google.maps.Marker>} The cluster center.
 */
Cluster.prototype.getMarkers = function() {
  return this.markers_;
};


/**
 * Returns the center of the cluster.
 *
 * @return {google.maps.LatLng} The cluster center.
 */
Cluster.prototype.getCenter = function() {
  return this.center_;
};


/**
 * Calculated the extended bounds of the cluster with the grid.
 *
 * @private
 */
Cluster.prototype.calculateBounds_ = function() {
  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);
  this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);
};


/**
 * Determines if a marker lies in the clusters bounds.
 *
 * @param {google.maps.Marker} marker The marker to check.
 * @return {boolean} True if the marker lies in the bounds.
 */
Cluster.prototype.isMarkerInClusterBounds = function(marker) {
  return this.bounds_.contains(marker.getPosition());
};


/**
 * Returns the map that the cluster is associated with.
 *
 * @return {google.maps.Map} The map.
 */
Cluster.prototype.getMap = function() {
  return this.map_;
};


/**
 * Updates the cluster icon
 */
Cluster.prototype.updateIcon = function() {
  var zoom = this.map_.getZoom();
  var mz = this.markerClusterer_.getMaxZoom();

  if (mz && zoom > mz) {
    // The zoom is greater than our max zoom so show all the markers in cluster.
    for (var i = 0, marker; marker = this.markers_[i]; i++) {
      marker.setMap(this.map_);
    }
    return;
  }

  if (this.markers_.length < this.minClusterSize_) {
    // Min cluster size not yet reached.
    this.clusterIcon_.hide();
    return;
  }

  var numStyles = this.markerClusterer_.getStyles().length;
  var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);
  this.clusterIcon_.setCenter(this.center_);
  this.clusterIcon_.setSums(sums);
  this.clusterIcon_.show();
};


/**
 * A cluster icon
 *
 * @param {Cluster} cluster The cluster to be associated with.
 * @param {Object} styles An object that has style properties:
 *     'url': (string) The image url.
 *     'height': (number) The image height.
 *     'width': (number) The image width.
 *     'anchor': (Array) The anchor position of the label text.
 *     'textColor': (string) The text color.
 *     'textSize': (number) The text size.
 *     'backgroundPosition: (string) The background postition x, y.
 * @param {number=} opt_padding Optional padding to apply to the cluster icon.
 * @constructor
 * @extends google.maps.OverlayView
 * @ignore
 */
function ClusterIcon(cluster, styles, opt_padding) {
  cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);

  this.styles_ = styles;
  this.padding_ = opt_padding || 0;
  this.cluster_ = cluster;
  this.center_ = null;
  this.map_ = cluster.getMap();
  this.div_ = null;
  this.sums_ = null;
  this.visible_ = false;

  this.setMap(this.map_);
}


/**
 * Triggers the clusterclick event and zoom's if the option is set.
 */
ClusterIcon.prototype.triggerClusterClick = function() {
  var markerClusterer = this.cluster_.getMarkerClusterer();

  // Trigger the clusterclick event.
  google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_);

  if (markerClusterer.isZoomOnClick()) {
    // Zoom into the cluster.
    this.map_.fitBounds(this.cluster_.getBounds());
  }
};


/**
 * Adding the cluster icon to the dom.
 * @ignore
 */
ClusterIcon.prototype.onAdd = function() {
  this.div_ = document.createElement('DIV');
  if (this.visible_) {
    var pos = this.getPosFromLatLng_(this.center_);
    this.div_.style.cssText = this.createCss(pos);
    this.div_.innerHTML = this.sums_.text;
  }

  var panes = this.getPanes();
  panes.overlayMouseTarget.appendChild(this.div_);

  var that = this;
  google.maps.event.addDomListener(this.div_, 'click', function() {
    that.triggerClusterClick();
  });
};


/**
 * Returns the position to place the div dending on the latlng.
 *
 * @param {google.maps.LatLng} latlng The position in latlng.
 * @return {google.maps.Point} The position in pixels.
 * @private
 */
ClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {
  var pos = this.getProjection().fromLatLngToDivPixel(latlng);
  pos.x -= parseInt(this.width_ / 2, 10);
  pos.y -= parseInt(this.height_ / 2, 10);
  return pos;
};


/**
 * Draw the icon.
 * @ignore
 */
ClusterIcon.prototype.draw = function() {
  if (this.visible_) {
    var pos = this.getPosFromLatLng_(this.center_);
    this.div_.style.top = pos.y + 'px';
    this.div_.style.left = pos.x + 'px';
  }
};


/**
 * Hide the icon.
 */
ClusterIcon.prototype.hide = function() {
  if (this.div_) {
    this.div_.style.display = 'none';
  }
  this.visible_ = false;
};


/**
 * Position and show the icon.
 */
ClusterIcon.prototype.show = function() {
  if (this.div_) {
    var pos = this.getPosFromLatLng_(this.center_);
    this.div_.style.cssText = this.createCss(pos);
    this.div_.style.display = '';
  }
  this.visible_ = true;
};


/**
 * Remove the icon from the map
 */
ClusterIcon.prototype.remove = function() {
  this.setMap(null);
};


/**
 * Implementation of the onRemove interface.
 * @ignore
 */
ClusterIcon.prototype.onRemove = function() {
  if (this.div_ && this.div_.parentNode) {
    this.hide();
    this.div_.parentNode.removeChild(this.div_);
    this.div_ = null;
  }
};


/**
 * Set the sums of the icon.
 *
 * @param {Object} sums The sums containing:
 *   'text': (string) The text to display in the icon.
 *   'index': (number) The style index of the icon.
 */
ClusterIcon.prototype.setSums = function(sums) {
  this.sums_ = sums;
  this.text_ = sums.text;
  this.index_ = sums.index;
  if (this.div_) {
    this.div_.innerHTML = sums.text;
  }

  this.useStyle();
};


/**
 * Sets the icon to the the styles.
 */
ClusterIcon.prototype.useStyle = function() {
  var index = Math.max(0, this.sums_.index - 1);
  index = Math.min(this.styles_.length - 1, index);
  var style = this.styles_[index];
  this.url_ = style['url'];
  this.height_ = style['height'];
  this.width_ = style['width'];
  this.textColor_ = style['textColor'];
  this.anchor_ = style['anchor'];
  this.textSize_ = style['textSize'];
  this.backgroundPosition_ = style['backgroundPosition'];
};


/**
 * Sets the center of the icon.
 *
 * @param {google.maps.LatLng} center The latlng to set as the center.
 */
ClusterIcon.prototype.setCenter = function(center) {
  this.center_ = center;
};


/**
 * Create the css text based on the position of the icon.
 *
 * @param {google.maps.Point} pos The position.
 * @return {string} The css style text.
 */
ClusterIcon.prototype.createCss = function(pos) {
  var style = [];
  style.push('background-image:url(' + this.url_ + ');');
  var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';
  style.push('background-position:' + backgroundPosition + ';');

  if (typeof this.anchor_ === 'object') {
    if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&
        this.anchor_[0] < this.height_) {
      style.push('height:' + (this.height_ - this.anchor_[0]) +
          'px; padding-top:' + this.anchor_[0] + 'px;');
    } else {
      style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +
          'px;');
    }
    if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&
        this.anchor_[1] < this.width_) {
      style.push('width:' + (this.width_ - this.anchor_[1]) +
          'px; padding-left:' + this.anchor_[1] + 'px;');
    } else {
      style.push('width:' + this.width_ + 'px; text-align:center;');
    }
  } else {
    style.push('height:' + this.height_ + 'px; line-height:' +
        this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');
  }

  var txtColor = this.textColor_ ? this.textColor_ : 'black';
  var txtSize = this.textSize_ ? this.textSize_ : 11;

  style.push('cursor:pointer; top:' + pos.y + 'px; left:' +
      pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +
      txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');
  return style.join('');
};


// Export Symbols for Closure
// If you are not going to compile with closure then you can remove the
// code below.
window['MarkerClusterer'] = MarkerClusterer;
MarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;
MarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;
MarkerClusterer.prototype['clearMarkers'] =
    MarkerClusterer.prototype.clearMarkers;
MarkerClusterer.prototype['fitMapToMarkers'] =
    MarkerClusterer.prototype.fitMapToMarkers;
MarkerClusterer.prototype['getCalculator'] =
    MarkerClusterer.prototype.getCalculator;
MarkerClusterer.prototype['getGridSize'] =
    MarkerClusterer.prototype.getGridSize;
MarkerClusterer.prototype['getExtendedBounds'] =
    MarkerClusterer.prototype.getExtendedBounds;
MarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;
MarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;
MarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;
MarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;
MarkerClusterer.prototype['getTotalClusters'] =
    MarkerClusterer.prototype.getTotalClusters;
MarkerClusterer.prototype['getTotalMarkers'] =
    MarkerClusterer.prototype.getTotalMarkers;
MarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;
MarkerClusterer.prototype['removeMarker'] =
    MarkerClusterer.prototype.removeMarker;
MarkerClusterer.prototype['removeMarkers'] =
    MarkerClusterer.prototype.removeMarkers;
MarkerClusterer.prototype['resetViewport'] =
    MarkerClusterer.prototype.resetViewport;
MarkerClusterer.prototype['repaint'] =
    MarkerClusterer.prototype.repaint;
MarkerClusterer.prototype['setCalculator'] =
    MarkerClusterer.prototype.setCalculator;
MarkerClusterer.prototype['setGridSize'] =
    MarkerClusterer.prototype.setGridSize;
MarkerClusterer.prototype['setMaxZoom'] =
    MarkerClusterer.prototype.setMaxZoom;
MarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;
MarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;

Cluster.prototype['getCenter'] = Cluster.prototype.getCenter;
Cluster.prototype['getSize'] = Cluster.prototype.getSize;
Cluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;

ClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;
ClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;
ClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;

Object.keys = Object.keys || function(o) {  
    var result = [];  
    for(var name in o) {  
        if (o.hasOwnProperty(name))  
          result.push(name);  
    }  
    return result;  
};


/***/ }),
/* 33 */
/*!**********************************!*\
  !*** ./js/app/form/core.form.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint smarttabs: true, maxparams: 7 */
/* global SETUPS */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! doT */ 7), __webpack_require__(/*! form/group */ 129), __webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! configurator/dpu-controller */ 11), __webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/ajax */ 6)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, doT, FormGroup, CONFIGURATOR_API, DPU_CONTROLLER, EVENTS, AJAX) {//eslint-disable-line max-params
    "use strict";
    var
    // forms
    _forms = {},
        // mapped templates
        _templateMap = {},
        // doT template functions; lazily loaded and cached;
        _templateFuncs = {},
        // All custom doT templates; loaded on initialize;
        _customTemplateIds = {},
        // urls for different api entry points; loaded on initialize;
        _apiBaseUrl,
        // Initial form datasets. Added via exports.addInitData;
        _initData = {},
        // Internal module methods
        __ = {},
        // Publicly usable module methods
        exports = {
            __: __
        };
    /**
     * Initializes a form
     */
    __.initForm = function(formContainer) {
        var url, id, form;
        id = formContainer.attr('id');
        url = __.getUrl('start', id);
        if (_initData[id] !== undefined) {
            _forms[id] = new __.Form(_initData[id], _customTemplateIds);
            _forms[id].el.appendTo(formContainer);
        } else {
            var promise = AJAX.getJSON(url);
            promise.then(function(data) {
                var form;
                data = exports.responseToObj(data);
                if (data === false) {
                    __.displayStandardError(id);
                } else if ( !!data.form) {
                    _forms[id] = new __.Form(data, _customTemplateIds);
                    _forms[id].el.appendTo(formContainer);
                    // update subsession in configurator
                    if ( !!(data.header && data.header.subsession)) {
                        DPU_CONTROLLER.setSubsessionID(data.header.subsession);
                    }
                } else {
                    __.displayStandardError(id);
                }
            }, function(data) {
                __.displayStandardError(id);
            });
        }
    };
    __.bindEnablers = function() {
        __.legacyEventBus.undelegate('.nm-form input[data-enables]', 'change').delegate('.nm-form input[data-enables]', 'change', function(e) {
            var related, targetEl, status, i, el, disabledVal;
            targetEl = jQuery(e.target);
            related = targetEl.attr('data-enables').split(';');
            // Sanitize domIDs and save as jQuery obj.
            for (i = related.length; i > -1; i--) {
                related[i] = __.sanitizeId(related[i]);
            }
            // set active status
            status = targetEl.attr('data-active') || 'off';
            if (status === 'off') {
                status = 'on';
            } else {
                status = 'off';
            }
            targetEl.attr('data-active', status);
            for (i = related.length; i > -1; i--) {
                if ( !!related[i]) {
                    el = jQuery('#nm-id-form-field-' + related[i] + ' input');
                    disabledVal = (status === 'off') ? 'disabled' : false;
                    el.attr('disabled', disabledVal);
                }
            }
        });
    };
    /**
     * Return an object containing the ids of all elements with the given
     * selector.
     * This is used to make lookups of custom templates faster.
     */
    __.getCustomTemplateIds = function(selector) {
        var ids = {};
        jQuery(selector).each(function() {
            ids[jQuery(this).attr('id')] = true;
        });
        return ids;
    };
    __.blockForm = function(form) {
        var formEl = jQuery('#' + form.id),
            shaderEl = formEl.find('.nm-form-shader');
        shaderEl.height(formEl.height() + 'px').show();
    };
    /**
     * Replaces form container contents.
     * Triggers events accordingly.
     */
    __.handleForm = function(data, prevForm) {
        var prevFormData = {};
        data = exports.responseToObj(data);
        // scroll to top
        // Display error if data cannot be parsed
        if (data === false) {
            __.displayStandardError(prevForm.id);
        }
        // Replace form contents.
        else if (!!data.form) {
            // remove event bindings
            jQuery('#' + prevForm.id).off('blur, click, change');
            jQuery('#' + prevForm.id).undelegate('button[data-button-action]', 'click');
            _forms[prevForm.id] = new __.Form(data, _customTemplateIds);
            jQuery('#' + data.form.id).html('').append(_forms[prevForm.id].el);
        } else if (!!data.success) {
            prevFormData.formHeadline = prevForm.data.form.name;
            prevFormData.message = data.message;
            jQuery('#' + prevForm.id).html(prevForm.getSuccessString(prevFormData));
            // mark form as finished in DOM
            jQuery('#' + prevForm.id).attr('data-form-is-finished', 1);
            //trigger form finished event to ba handled by the controller
            __.eventBus.emit(EVENTS.FORM_FINISHED, {id:prevForm.id});
            //update configuration if configuration is present (rate changed)
            if (!!data.configuration) {
                //adopt configuration price/rate update
                DPU_CONTROLLER.handleExternalConfiguration(data, {
                    startType: null
                });
            }
            delete _forms[prevForm.id];
        } else {
            __.displayStandardError(prevForm.id);
            delete _forms[prevForm.id];
        }
        if (jQuery('#' + prevForm.id).closest('.nm-layer-wrapper').length) {
            jQuery('.nm-layer-wrapper').scrollTop(0);
        } else {
            jQuery('body').scrollTop(0);
        }
    };
    __.displayStandardError = function(formId) {
        var formEl = jQuery('#' + formId),
            shaderEl = formEl.find('.nm-form-shader'),
            errorEl = formEl.find('.nm-form-standard-error');
        shaderEl.hide();
        formEl.html(errorEl.html());
    };
    __.getUrl = function(action, id) {
        var prstring = CONFIGURATOR_API.getPrString(),
            context = CONFIGURATOR_API.getContext(),
            subsession = CONFIGURATOR_API.getSubsessionID(),
            configuratorPage = !!CONFIGURATOR_API.getCarline(),
            args = [];
        // try to add context
        if (context) {
            args.push('context=' + context);
        }
        // try to add the subsession
        if (subsession) {
            args.push('subsession=' + subsession);
        }
        // try to add the prstring
        // NEMOBA-5216 - do not send ids for all forms
        if (id==='tdrdealerreq' && configuratorPage && prstring ) {
            args.push('ids=' + encodeURIComponent(prstring));
        } else if(id!=='tdrdealerreq' && prstring) {
            args.push('ids=' + encodeURIComponent(prstring));
        }
        // add action and id
        args.push('action=' + encodeURIComponent(action));
        args.push('id=' + encodeURIComponent(id));
        return _apiBaseUrl + '?' + args.join('&');
    };
    __.parseData = function(formJson) {
        var formObj;
        try {
            formObj = JSON.parse(formJson);
        } catch (err) {
            return false;
        }
        return formObj;
    };
    __.getTemplateFunc = function() {
        var tplId, tplDOMid;
        // This func is added to the prototype of all __.FormX instances.
        // 'this' is assumed to be the instance. To prevent errors, if
        // templateKey is not defined a function returning an empty string
        // is returned.
        var key = this.templateKey || null,
            tpl, fallbackFunc = function() {
                return '';
            };
        if (key === null) {
            return fallbackFunc;
        }
        tplId = __.getTemplateId(this, key);
        if (_templateFuncs[tplId] === undefined) {
            tpl = jQuery('#' + tplId);
            if (tpl.length > 0) {
                _templateFuncs[tplId] = doT.template(tpl.html().trim());
            } else {
                return fallbackFunc;
            }
        }
        return _templateFuncs[tplId];
    };
    /**
     * Sanitize Id to get a DOM-usable id string
     */
    __.sanitizeId = function(id) {
        if (id !== undefined) {
            return id.replace(/[^a-z0-9_-]/gi, '');
        }
        return '';
    };
    /**
     * Chose the correct template id in this order of specificity:
     * 1. <form.id>-<obj.id> found in _templateMap
     * 2. <form.id>-<form.pageId> found in _templateMap
     * 3. <form.id>-<key> found in _templateMap
     * 4. <form.id>-<form.pageId>-<obj.id>
     * 5. <form.id>-<obj.id>
     * 6. <form.id>-<form.pageId>-<key>
     * 7. <form.id>-<key>
     * 7. <key>
     */
    __.getTemplateId = function(obj, key) {
        var tplId, pre = 'nm-id-form-',
            post = '-tpl',
            form = obj.form || obj,
            customTemplateIds = form.customTemplateIds || {},
            pageId = form.pageId,
            objDOMId, idStr;
        key = key.toLowerCase();
        if (obj.id !== undefined) {
            objDOMId = __.sanitizeId(obj.id);
            // try very very very high specificity (mapped)
            idStr = _templateMap[form.id + '-' + objDOMId];
            if (idStr !== undefined) {
                return idStr;
            }
            // try very high specificity
            idStr = pre + form.id + '-' + form.pageId + '-' + objDOMId + post;
            if (customTemplateIds[idStr] !== undefined) {
                return idStr;
            }
            // try high specificity
            idStr = pre + form.id + '-' + objDOMId + post;
            if (customTemplateIds[idStr] !== undefined) {
                return idStr;
            }
        }
        // try mapped page
        if (obj.formConstructorName === 'Form') {
            idStr = _templateMap[form.id + '-' + form.pageId];
            if (idStr !== undefined) {
                return idStr;
            }
        }
        // try mapped with <formid>-<key> (field type)
        idStr = pre + form.id + '-' + key + post;
        if (_templateMap[form.id + '-' + key] !== undefined) {
            return idStr;
        }
        // try normal specificity
        idStr = pre + form.id + '-' + form.pageId + '-' + key + post;
        if (customTemplateIds[idStr] !== undefined) {
            return idStr;
        }
        // try low specificity
        idStr = pre + form.id + '-' + key + post;
        if (customTemplateIds[idStr] !== undefined) {
            return idStr;
        }
        // return id string with very low specificity (default)
        idStr = pre + key + post;
        return idStr;
    };
    /**
     * Form
     */
    __.Form = function Form(data, customTemplateIds) {
        this.formConstructorName = 'Form';
        this.data = data;
        this.id = !!(data.form) ? data.form.id : undefined;
        this.domId = __.sanitizeId(this.id);
        // an object containing all available custom template ids
        this.customTemplateIds = customTemplateIds || {};
        this.templateKey = 'form';
        this.groups = [];
        this.fields = [];
        this.pageId = this.getPageId();
        this.processSteps = this.getProcessSteps();
        this.processStepName = this.getStepHeadline();
        this.processGroups();
        this.getString = this.getTemplateFunc();
        this.getSuccessString = this.getSuccessTemplateFunc();
        this.load();
        return this;
    };
    __.Form.prototype.getPageId = function() {
        var i;
        if ( !!(this.data && this.data.pages)) {
            for (i = this.data.pages.length - 1; i > -1; i--) {
                if (this.data.pages[i].active === true) {
                    return this.data.pages[i].id;
                }
            }
        }
        return null;
    };

    __.Form.prototype.getStepHeadline = function() {
        var i;
        if ( !!(this.data && this.data.pages)) {
            for (i = this.data.pages.length - 1; i > -1; i--) {
                if (this.data.pages[i].active === true) {
                    return this.data.pages[i].name;
                }
            }
        }
        return null;
    };
    __.Form.prototype.getProcessSteps = function() {
        var i;
        if ( !!(this.data && this.data.pages)) {
            for (i = this.data.pages.length - 1; i > -1; i--) {
                if (this.data.pages[i].active === true) {
                    return {
                        'step': (i + 1),
                        'maxSteps': this.data.pages.length
                    };
                }
            }
        }
        return null;
    };
    __.Form.prototype.getSuccessTemplateFunc = function() {
        var tpl, tplId = 'nm-id-form-success-tpl',
            fallbackFunc = function() {
                return '';
            };
        if (_templateFuncs[tplId] === undefined) {
            tpl = jQuery('#' + tplId);
            if (tpl.length > 0) {
                _templateFuncs[tplId] = doT.template(tpl.html());
            } else {
                return fallbackFunc;
            }
        }
        return _templateFuncs[tplId];
    };
    __.Form.prototype.getTemplateFunc = __.getTemplateFunc;
    __.Form.prototype.processGroups = function() {
        var i, l, group;
        if ( !!(this.data.form && this.data.form.groups)) {
            for (i = 0, l = this.data.form.groups.length; i < l; i++) {
                group = new FormGroup(this.data.form.groups[i], this);
                this.groups.push(group);
            }
        }
    };
    __.Form.prototype.load = function() {
        var formContainerEl, isFirstView, data, i, l;
        data = {
            formHeadline: this.data.form.name,
            pageDisclaimers: this.data.form.disclaimers,
            pageHeadline: this.data.form.headline,
            pageDescription: this.data.form.description,
            pageError: this.data.form.error,
            groups: this.groups,
            pages: this.data.pages,
            id: this.data.form.id,
            actions: this.data.form.actions
        };
        // If this is the first view of the form, mark it as such:
        formContainerEl = jQuery('#' + this.data.form.id);
        isFirstView = formContainerEl.attr('data-form-is-first-view');
        if (isFirstView === undefined) {
            formContainerEl.attr('data-form-is-first-view', 1);
        } else {
            formContainerEl.attr('data-form-is-first-view', 0);
        }
        if (typeof this.data.form.footnote!=='undefined') {
            data.footnote = this.data.form.footnote;
        }
        if (this.processSteps) {
            formContainerEl.attr('data-form-process-step', this.processSteps.step);
            formContainerEl.attr('data-form-process-max',this.processSteps.maxSteps);
        }
        if (!!this.processStepName) {
            formContainerEl.attr('data-form-process-name', this.processStepName);
        }
        this.el = jQuery(this.getString(data));
        var that = this;
        // button bindings with delay (hotfix to trick other bindings)
        window.setTimeout(function() {
            that.bindActions();
            that.bindActionLinks();
            that.preventSubmit();
            __.eventBus.emit(EVENTS.FORM_LOADED, {id:that.id,form:that});
        }, 100);
    };
    __.Form.prototype.preventSubmit = function() {
        jQuery('#' + this.id).undelegate('form', 'submit').delegate('form', 'submit', function(e) {
            e.preventDefault();
            return false;
        });
    };
    __.Form.prototype.bindActions = function() {
        var actions = this.data.form.actions || [],
            form = this,
            selector, button, i, l;
        jQuery('#' + this.id).undelegate('button[data-button-action]', 'click').delegate('button[data-button-action]', 'click', function(e) {
            var btn, action, formId;
            e.preventDefault();
            btn = jQuery(e.target);
            action = btn.attr('data-button-action');
            formId = btn.attr('data-form-id');
            if (action === 'cancel') {
                btn.addClass('nm-button-cancel');
            }
            if (formId === form.id && !!action) {
                __.blockForm(form);
                form.serializeAndSend(action, form.id);
            }
        });
    };
    __.Form.prototype.bindActionLinks = function() {
        var form = this;
        jQuery('#' + this.id).off('click', '.nm-form-action-link').on('click', '.nm-form-action-link', function(e) {
            e.preventDefault();
            form.serializeAndSend(jQuery(this).attr('data-form-action'), form.id);
        });
    };
    __.Form.prototype.disableButtons = function() {
        var i, l, action;
        if ( !!(this.data && this.data.form && this.data.form.actions)) {
            for (i = 0, l = this.data.form.actions.length; i < l; i++) {
                action = this.data.form.actions[i];
                if (action.disable_on_change === true) {
                    jQuery('button[data-button-action="' + action.action + '"]').hide();
                }
            }
        }
    };
    __.Form.prototype.changed = function() {
        this.disableButtons();
    };
    __.Form.prototype.autoSubmit = function(action) {
        action = action || 'submit';
        __.blockForm(this);
        this.serializeAndSend(action, this.id);
    };
    __.Form.prototype.serializeAndSend = function(action, id) {
        var formElement = jQuery('#' + id + ' form'),
            url = __.getUrl(action, id),
            payloadArray = formElement.serializeArray(),
            payloadSize = payloadArray.length,
            newPayload = [],
            form = this,
            datetime = [],
            tmp, i;
        for (i = 0; i < payloadSize; i += 1) {
            if (payloadArray[i].name.indexOf('DateTime-')!==-1) {
                tmp = payloadArray[i].name.slice(9, payloadArray[i].name.length - 2);
                if (typeof datetime[tmp]==='undefined') {
                    datetime[tmp] = [];
                }
                datetime[tmp].push(payloadArray[i].value);
            } else {
                newPayload.push(payloadArray[i]);
            }
        }
        for (var value in datetime) {
            // tmp = datetime[value].split('.');
            if (datetime.hasOwnProperty(value) && datetime[tmp][0]!=='0' && datetime[tmp][1]!=='0' && datetime[tmp][2]!=='0') {
                tmp = datetime[tmp].reverse().join('-');
                newPayload.push({
                    'name': value,
                    'value': tmp
                });
            }
        }
        /*jQuery.ajax({
			type: 'POST',
			url: url,
			xhrFields: {
				withCredentials: true
			},
			timeout: 25000,
			data: newPayload
		}).done(function (data) {
			__.handleForm(data, form);
		}).fail(function (data) {
			__.displayStandardError(form);
		});*/
        var promise = AJAX.getJSON(url, newPayload, {
            'requestMethod': 'POST'
        }).then(function(data) {
            __.handleForm(data, form);
        }, function(error) {
            __.displayStandardError(form);
        });
    };
    /**
     * Parses JSON string if necessary.
     */
    exports.responseToObj = function(response) {
        if (!response) {
            return false;
        } else if (typeof response === 'object') {
            return response;
        } else {
            try {
                return JSON.parse(response);
            } catch (err) {
                return false;
            }
        }
    };
    /**
     * Scans html for .nm-form elements on layer.loaded.
     */
    exports.layerLoadHandler = function(layerEl) {
        var layer;
        layer = jQuery(layerEl);
        layer.find('.nm-form').each(function() {
            __.initForm(jQuery(this));
        });
    };
    exports.processNavHandler = function(e) {
        var link = jQuery(e.target),
            action, id;
        e.preventDefault();
        if (link.attr('data-selectable') === "true") {
            id = link.parents('.nm-form').attr('id');
            exports.getForm(id).serializeAndSend(link.attr('data-action'), id);
        }
    };
    /**
     * Adds init data for a form id.
     */
    exports.addInitData = function(formId, data) {
        _initData[formId] = data;
    };
    /**
     * Return Form instance by id.
     */
    exports.getForm = function(id) {
        return _forms[id];
    };
    /**
     * Sets API URL and adds event bindings.
     */
    __.initialize = function() {
        var initialLayerContent;
        // Store the dpu url once.
        _apiBaseUrl = SETUPS.get('nemo.url.formapi');
        // _store the templateMap
        _templateMap = SETUPS.get('nemo.form.templatemap');
        // Lookup all custom template ids.
        _customTemplateIds = __.getCustomTemplateIds('.nm-custom-form-tpl');
        // Listen to the layer.loaded event.
        __.eventBus.on(EVENTS.LAYER_LOADED, function(data) {
            if ( !!data && !!data.element) {
                exports.layerLoadHandler(data.element);
            }
        });
        /*
        // Listen to the page.loaded event.
        jQuery('body').on(EVENTS.PAGE_LOADED, function(data) {
            if ( !!data && !!data.domElement) {
                exports.layerLoadHandler(data.domElement);
            }
        });*/
        // Bind process nav clicks
        __.legacyEventBus.delegate('.nm-process-navigation a', 'click', exports.processNavHandler);
        // Bind checkbox enablers.
        __.bindEnablers();
        //check for initail Form wo layer
        initialLayerContent=jQuery(".nm-layer-wrapper");
        if(initialLayerContent.length){
            exports.layerLoadHandler(initialLayerContent);
        }
    };

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.initialize();
			resolve("form/core.form.js");
		});
	};
    return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 34 */
/*!**************************************!*\
  !*** ./js/app/module/ave/ave-api.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*global zlbolt*/
/*eslint max-params: [2, 5]*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! core/jsloader */ 36),
	__webpack_require__(/*! module/ave/ave-dom */ 53)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, EVENTS, DPU_API, JSLOADER, AVE_DOM) {//eslint-disable-line max-statements
	"use strict";

	var __ = {},
		exports = {
			'__': __
		};

	__.oDefaults = {
		'sSelectorAnimationListSelector': '.nm-ave-animation-selection'
	};

	__.debugEnabled = true;

	__.zlLoaded = false;
	__.zlValidated = false;

    __.zlEnvLive = 'live';
    __.zlEnvStaging = 'live';

    __.zlCustomerLive = 'audi';
    __.zlCustomerStaging = 'zerolight';

    __.zlboltURL = '//zlbolt.zlthunder.net/v1/zlbolt.min.js';
    __.zlboltURLPre = '//zlbolt.zlthunder.net/v1pre/zlbolt.min.js';

    __.cameraMappings = {
        'closeup_lights': "FrontRightShare",
        'closeup_wheels': "Rims",
        'dashboard': "Interior",
        'exterior': "MRVSide",
        'exterior_back': "MRV4",
        'exterior_front': "MRV1",
        'exterior_straight_back': "MRV5",
        'exterior_straight_front': "MRV6",
        'interior': "InteriorSide_L0L",
        'rearseat': "Interior_Rear_View"
    };
    __.defaultCamera = 'MRV1';

    /**
     * get the correct zl customer - audi / zerolight
     * (the latter is used for staging env)
     * @returns {String} customer - the customer string to use for API configuration
     */
    __.zlGetCustomer = function() {
		var customer = __.zlCustomerLive;
		var setupsCustomerOverride = SETUPS.get('ave3d.customer');
		if (!__.zlLoaded) {
			__.debug("zlbolt not yet loaded");
		}
		if (document.location.host.indexOf('pre-') !== -1 || document.location.host.indexOf('nemo-t') !== -1 || document.location.host.indexOf('local') !== -1 ) {
            customer = __.zlCustomerStaging;
        }
        if (setupsCustomerOverride) {
			__.debug("override zlbolt customer with " + setupsCustomerOverride);
			customer = setupsCustomerOverride;
		}
        return customer;
    };

    /**
     * get the correct zl env - live / staging
     * (currently both live, the differentiation is done via customer)
     * @returns {String} env - the environment string to use for API configuration
     */
	__.zlGetEnv = function () {
		var env = __.zlEnvLive;
		var setupsEnvOverride = SETUPS.get('ave3d.env');

		if (!__.zlLoaded) {
			__.debug("zlbolt not yet loaded");
		}
        if (document.location.host.indexOf('pre-') !== -1 || document.location.host.indexOf('nemo-t') !== -1 || document.location.host.indexOf('local') !== -1 ) {
            env = __.zlEnvStaging;
        }
        if (setupsEnvOverride) {
			__.debug("override zlbolt env with " + setupsEnvOverride);
			env = setupsEnvOverride;
        }
        return env;
    };

    /**
     * call the zerolight validate function (only once!)
     * @returns {void}
     */
	__.zlValidate = function() {
		var connObj;
		if (!__.zlLoaded) {
			__.debug("zlbolt not yet loaded");
		} else if (typeof zlbolt !== 'undefined') {
			if (__.zlValidated === false) {
				connObj = __.buildUpValidateObject();
				zlbolt.validate(connObj, function(error, result) {
					if (result && result.status === 'valid') {
						__.zlValidated = true;
						__.eventBus.emit(EVENTS.AVE_AVAILABLE);
					} else {
						if (result && result.reason) {
							__.debug("zl validation failed: " + result.reason);
						} else {
							__.debug("zl validation failed");
						}
					}
				});
			}
		} else {
			__.debug("failed zlbolt.validate");
		}
	};

	/**
	 * set zerolight ready and trigger corresponding events
	 * @returns {void}
	 */
	__.zlSetReady = function() {
		__.debug("zlbolt loaded");
		__.zlLoaded = true;
		__.zlValidate();
	};

	/**
	 * prepare URL of zlbolt library
	 * @returns {void}
	 */
	__.prepareZLboltURL = function() {
		var setupsUrlOverride = SETUPS.get('ave3d.url');

		if (document.location.host.indexOf('nemo-t') !== -1 || document.location.host.indexOf('local') !== -1) {
			__.zlboltURL = __.zlboltURLPre;
		}
		if (setupsUrlOverride) {
			__.debug("override zlbolt url with " + setupsUrlOverride);
			__.zlboltURL = setupsUrlOverride;
		}
	};

	/**
	 * set pro codes string within zl
	 * @param {String} aveString - the ave string to use as pr codes
	 * @returns {void}
	 */
	__.zlSetAveString = function(aveString) {
		if (!__.zlLoaded) {
			__.debug("zlbolt not yet loaded");
		} else {
			zlbolt.setPrCodes(aveString, function(data) {
				__.debug("set prcodes with msg: ", data);
			});
		}
	};

	/**
	 * disconnect from zl
	 * @param {function} callback - callback function to be executed when disconnect finished
	 * @param {string} param - parameter for callback function
	 * @returns {void}
	 */
	__.zlDisconnect = function(callback, param) {

		if (__.zlLoaded && typeof zlbolt !== 'undefined' && __.isConnected === true) {
			__.debug("disconnect from zlbolt");
			try {
				zlbolt.disconnect(function() {
					callback(param);
				});
			} catch (err) {
				__.debug("zl exception on disconnect: " + err);
				callback(param);
			}
			__.isConnected = false;
		} else {
			callback(param);
		}
	};

    /**
     * activate camera
     * @param {string} renderImageView  - the render view type to activate
     * @returns {void}
     */
    __.zlActivateCamera = function(renderImageView) {
        var zlCameraName = __.cameraMappings[renderImageView];
        zlbolt.switchCamera(zlCameraName, function(data) {
            __.debug('switched camera to ' + zlCameraName + ' with result', data);
        });
    };

	__.zlSetConnectCallbacks = function(domElemId, viewPerspective) {
		zlbolt.isSupported(function(error, support) {
			if (error || !support) {
				__.debug('zl this browser is not supported');
				return false;
			}

			zlbolt.connect(__.buildUpConnectObject(domElemId, viewPerspective), function(data) {
				if (!!data) {
					__.debug("zlbolt connect exited in error state: ", data);
					__.isConnected = false;
				} else {
					__.debug("zlbolt connected");
					__.isConnected = true;
				}
			});
		});
		// a set of event-based callbacks
		zlbolt.onStreamReady = function()
		{
			if (__.streamActive === true) {
				__.debug("stream already active - possible side effect");
			}
			__.streamActive = true;
			__.isConnected = true;

			__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handlerConfigUpdated);

			__.zlBuildOptionsControl();

			zlbolt.enableMouseTracking();
			window.addEventListener('resize', AVE_DOM.resizeStreamWrapper);

			__.eventBus.emit(EVENTS.AVE_STREAM_READY);
			AVE_DOM.resizeStreamWrapper();
		};

		zlbolt.onMouseUp = function(data) {
			__.debug("mouse up with x:"+data.x+ " and y:"+data.y);
		};

		zlbolt.onError = function(err)
		{
			__.debug('zlbolt Error: ', err);
		};

		zlbolt.onStreamDisconnect = function()
		{
			__.debug('zlbolt StreamDisconnect');
			__.eventBus.off(EVENTS.CONFIG_UPDATE, __.handlerConfigUpdated);
			window.removeEventListener('resize', AVE_DOM.resizeStreamWrapper);
			__.streamActive = false;
		};
		zlbolt.onClose = function()
		{
			__.debug('zlbolt stream close');
			__.streamActive = false;
		};
	};

	/**
	 * connect to zl
	 * @param {String} domElemId - the dom elem to insert ave
	 * @param {String} viewPerspective - the initial view perspective
	 * @returns {void}
	 */
	__.zlConnect = function(domElemId, viewPerspective) {

		if (!__.zlLoaded) {
			__.debug("zlbolt not yet loaded");
			return false;
		} else if (typeof zlbolt !== 'undefined') {
			__.debug('zlbolt StreamReady');
			__.zlSetConnectCallbacks(domElemId, viewPerspective);
		} else {
			__.debug("failed zlConnect");
			return false;
		}
	};

	/**
	 * build the the option controls (from provided options by zl) and insert them
	 * @returns {void}
	 */
	__.zlBuildOptionsControl = function() {
		__.debug("build options control");
		zlbolt.enumerateAnimations(function(data) {
            var animSelector = DOM_UTILS.getElement(__.oDefaults.sSelectorAnimationListSelector);
			var content = document.createElement('div');
            if(DOM_UTILS.isElement(animSelector)) {
				content.innerHTML = AVE_DOM.renderAnimationControls(data.animations);
				while (content.firstChild) {
					animSelector.appendChild(content.firstChild);
				}
            }
            DOM_UTILS.getEventDelegate("body").on('click', '.nm-avectrl-animation', __.zlTriggerAnimation);
        });

        zlbolt.enumerateEnvironments(function(data) {
            var animSelector = DOM_UTILS.getElement(__.oDefaults.sSelectorAnimationListSelector);
            var content = document.createElement('div');
            if (DOM_UTILS.isElement(animSelector) && data.environments.length > 1) {                
                content.innerHTML = AVE_DOM.renderEnvironmentControls(data.environments);
				while (content.firstChild) {
					animSelector.appendChild(content.firstChild);
				}
				DOM_UTILS.getEventDelegate("body").on('click', '.nm-avectrl-environment', __.zlTriggerEnvironmentChange);                
            }
        });

        AVE_DOM.enableOptions();
	};

	/**
	 * trigger animation to zl
	 * @param {Event} e - the click event
	 * @returns {void}
	 */
	__.zlTriggerAnimation = function(e) {        
        var animation = DOM_UTILS.closest(e.target, '.nm-avectrl-animation').getAttribute('data-animation');        
        console.log('trigger animation ' + animation);
        zlbolt.triggerAnimation(animation, function(data) {
            console.log('triggered ' + animation + ' with result', data);
        });
    };

    /**
     * trigger environment change to zl
     * @param {Event} e - the click event
     * @returns {void}
     */
    __.zlTriggerEnvironmentChange = function(e) {        
        var environment = DOM_UTILS.closest(e.target, '.nm-avectrl-environment').getAttribute('data-environment');  
        console.log('trigger environment change ' + environment);
        zlbolt.switchEnvironment(environment, function(data) {
            console.log('triggered ' + environment + ' with result', data);
        });
    };

    /**
     * handler for config updated event
     * @returns {void}
     */
	__.handlerConfigUpdated = function() {
        __.zlSetAveString(DPU_API.getAveString().split(','));
	};

	/**
	 * mapping function from view perspective (e.g. exterior_front) to camera
	 * @param {String} viewPerspective - the view perspective to get camera name for
	 * @returns {String} camera name
	 */
	__.mapViewPerspeciveToCamera = function(viewPerspective) {
		if (viewPerspective in __.cameraMappings) {
			return __.cameraMappings[viewPerspective];
		}
		__.debug('falling back to default camera from ' + viewPerspective);
		return __.defaultCamera;
	};

	/**
	 * get currently active protocol, i.e. https or http
	 * @returns {String} the active protocol
	 */
	__.getActiveProtocol = function() {
		if (document.location.protocol.indexOf('https') > -1) {
			return 'https';
		}
		return 'http';
	};

	/**
	 * build up validation object to interact with zl
	 * @returns {Object} - the validation object
	 */
	__.buildUpValidateObject = function() {
		return {
            'connectionParameters': {
				'protocol': __.getActiveProtocol(),
				'customer': __.zlGetCustomer(),
				'environment': __.zlGetEnv()
            },
            'car': {
                'manufacturer': 'audi',
				'model': DPU_API.getCarline(),
				'year': DPU_API.getModelYear()
            }
		};
	};

	/**
	 * build up connect object to connect with zl
	 * @param {String} domElemId - the dom element id
	 * @param {String} viewPerspective - the initial view perspective
	 * @return {Object} connObj - the connection object
	 */
	__.buildUpConnectObject = function(domElemId, viewPerspective) {
		var renderWidth = 1112;
		var renderHeight = 668;
		var aveString = DPU_API.getAveString();
		var connObj = __.buildUpValidateObject();
		connObj.resolution = {
            'x': renderWidth,
            'y': renderHeight
        };
        connObj.parent = domElemId;
        connObj.setupCamera = __.mapViewPerspeciveToCamera(viewPerspective);

		if (aveString) {
			connObj.setupPrCodes = aveString.split(',');
		}
		return connObj;
	};

	/**
	 * custom debug function
	 * @param {String} msg - the debug msg
	 * @returns {void}
	 */
	__.debug = function(msg) {
		if (__.debugEnabled) {
			console.log("ave-api: " + msg);
		}
	};

	/**
	 * check whether carline is contained in string
	 * @param {String} carlineString - comma-separated string containing carlines
	 * @return {boolean} - true if contained, false else
	 */
	__.isCarlineContainedInCarlineString = function(carlineString) {
		var i;
		var carlines = carlineString.split(',');
		for (i=0; i<carlines.length; i++) {
			if (__.carline === carlines[i]) {
				return true;
			}
		}
		return false;
	};

	/**
	 * check whether ave is active for current carline
	 * @returns {boolean} - true if active, false else
	 */
	exports.isActiveCarline = function() {

		var carlineString = SETUPS.get('ave3d.carlines');

		if (SETUPS.get('ave3d.scope') !== '1') {
			return false;
		}

		__.carline = DPU_API.getCarline();

		if (carlineString) {

			if (carlineString === 'all') {
				return true;
			}
			return __.isCarlineContainedInCarlineString(carlineString);
		}
		return false;
	};

	/**
	 * activate named perspective
	 * @param {String} perspective - the perspective to activate
	 * @returns {void}
	 */
	exports.showPerspective = function(perspective) {
		__.zlActivateCamera(perspective);
	};

	/**
	 * check whether ave is available
	 * @returns{boolean} - true if ave available, else false
	 */
	exports.isAveAvailable = function() {
		return __.zlValidated;
	};

	/**
	 * disconnect from zl and remove canvas
	 * @param {String} canvasid - the id of the canvas to deactivate ave from
	 * @returns {void}
	 */
	exports.deactivate = function(canvasid) {
		__.zlDisconnect(AVE_DOM.deactivateAveCanvas, canvasid);
	};

	/**
	 * activate ave for certain element
	 * @param {String} canvasid - the id of the element to provide the ave into
	 * @param {String} viewPerspective - the view perspective to load
	 * @returns {void}
	 */
	exports.activateAVE = function(canvasid, viewPerspective) {
		AVE_DOM.activateAveCanvas(canvasid);
		__.zlConnect(canvasid, viewPerspective);
	};

	/**
	 * move to element to another element with (optional) viewPerspective change
	 * @param {String} originId - id of origin html element
	 * @param {String} targetId - id of target html element
	 * @param {String} viewPerspective - view perspective to open (or false if not used)
	 * @returns {void}
	 */
	exports.moveAVE = function(originId, targetId, viewPerspective) {
		console.log("moving from " + originId + " to " + targetId);
		zlbolt.moveStream(targetId);
		AVE_DOM.moveAveCanvas(originId, targetId);
		if (typeof viewPerspective !== 'undefined' && viewPerspective !== false) {
			__.zlActivateCamera(viewPerspective);
		}
	};

	/**
	 * initializePromise
	 * @param {Emitter} eventBus_ - the global EventEmitter
	 * @returns {void}
	 */
	exports.initializePromise = function(eventBus_) {

		return new Promise(function(resolve) {
			__.eventBus = eventBus_;

			if (exports.isActiveCarline()) {
				__.prepareZLboltURL();
				JSLOADER.loadURL(__.zlboltURL).then(__.zlSetReady);
			}
			resolve('module/ave/ave-api.js');
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 35 */
/*!************************************!*\
  !*** ./js/app/module/video-new.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* eslint new-cap: "off"*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! module/device */ 25), __webpack_require__(/*! module/swipe-stage */ 50),__webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, DEVICE, SWIPE, DOM_UTILS) { //eslint-disable-line max-params
	"use strict";
	var __, exports;
	__ = {};
	__.delayIntervallId = "";
	__.aAllAutoplayVideos = [];
	__.aPlayedVideos = [];
	exports = {
		__: __
	};
	/*eslint consistent-this: [0, "that"]*/
	__.getCurrentVideoContainer = function(elm) {
		var containers = DOM_UTILS.getElementsArray('.nm-video'),
			i, conLen;
		if (!!containers) {
			conLen = containers.length;
			for (i = 0; i < conLen; i++) {
				if (containers[i].contains(elm)) {
					return containers[i];
				}
			}
		}
		return null;
	};
	__.getVideo = function(videoContainer) {
		return videoContainer ? videoContainer.querySelector("video") : null;
	};
	/**
	 * find closest layerhead
	 *@param {HTMLElement} videoContainer - container with video
	 * @returns {HTMLElement|null} layerhead container
	 */
	__.getLayerHead = function(videoContainer) {
		return __.findClosest(videoContainer, ".nm-layer-head");
	};
	__.setDataVideoState = function(statusName, layerHead) {
		if (layerHead) {
			layerHead.setAttribute("data-video-state", statusName);
		}
	};
	__.handlerPlayButton = function() {
		var btn = this,
			container = __.getCurrentVideoContainer(btn),
			video = __.getVideo(container),
			layerhead = __.getLayerHead(container);
		if (video) {
			video.addEventListener('playing', __.handlerVideoPlaying);
			video.play();
		}
		if (layerhead) {
			__.setDataVideoState("playing", layerhead);
		}
	};
	__.handlerPauseButton = function() {
		var btn = this,
			container = __.getCurrentVideoContainer(btn),
			video, layerhead;
		if (container) {
			video = __.getVideo(container);
			layerhead = __.getLayerHead(container);
		}
		if (video) {
			video.addEventListener('pause', __.handlerVideoPause);
			video.pause();
			if (layerhead) {
				__.setDataVideoState("paused", layerhead);
			}
		}
	};
	__.handlerVideoPause = function() {
		var video = this,
			container = __.getCurrentVideoContainer(video);
		if (video) {
			video.removeEventListener('pause', __.handlerVideoPause);
			video.removeEventListener('timeupdate', __.updateTimeInfo);
		}
		__.removeClassName(container, 'nm-video-playing');
	};
	__.handlerVideoPlaying = function() {
		var video = this,
			container = __.getCurrentVideoContainer(video);
		video.removeEventListener('playing', __.handlerVideoPlaying);
		video.addEventListener('timeupdate', __.updateTimeInfo);
		video.addEventListener('ended', __.handlerVideoEnded);
		video.addEventListener('progress', __.handleVideoProgress);
		__.addClassName(container, 'nm-video-playing');
	};
	__.handleVideoProgress = function() {
		var video = this,
			container = __.getCurrentVideoContainer(video),
			bufferBar, loadedTime, loadedPercentage;
		if (container && video) {
			bufferBar = container.querySelector('.nm-loader-loaded');
			loadedTime = video.buffered.end(0);
			loadedPercentage = parseFloat(loadedTime / video.duration) * 100;
			if (bufferBar) {
				bufferBar.style.width = loadedPercentage + '%';
			}
		}
	};
	__.handlerVideoEnded = function() {
		var video = this,
			container = __.getCurrentVideoContainer(video),
			fullScreenActive = !!document.querySelector('.active-fs'),
			videoSrc,
			layerhead = __.getLayerHead(container);
		__.handleVideoEndEvents(video);
		__.removeClassName(container, 'nm-video-playing');
		__.displayTimeInfos(container, 0, video.duration);
		/* show poster image of video again */
		videoSrc = video.currentSrc;
		video.src = videoSrc;
		if (fullScreenActive) {
			__.leaveFullScreen(container.querySelector('.nm-minimize'));
		}
		if (video){
			var nativeCtrl = video.getAttribute('data-nativectrls');
			if (nativeCtrl === "false") {
				if(container){
					container.classList.remove('nm-hide-controls');
				}
			}
		}
		__.setDataVideoState("ended", layerhead);
	};
	__.handleVideoEndEvents = function(video) {
		if (video) {
			video.removeEventListener('ended', __.handlerVideoEnded);
			video.removeEventListener('timeupdate', __.updateTimeInfo);
			video.removeEventListener('progress', __.handleVideoProgress);
		}
	};
	__.updateTimeInfo = function() {
		var video = this,
			container = __.getCurrentVideoContainer(video);
		if (container) {
			__.displayTimeInfos(container, video.currentTime, video.duration);
		}
	};
	__.displayTimeInfos = function(container, currentTime, duration) {
		var timePlayed, timeDuration, progressBar, playedPercentage, progressBarLoaded, allValuesZero = (currentTime === 0 && duration === 0);
		if (container) {
			if (!container.querySelector('video[data-autoplay-in-viewport]')) {
				timePlayed = container.querySelector('.nm-time-played');
				timeDuration = container.querySelector('.nm-time-duration');
				timePlayed.innerHTML = __.getTime(currentTime);
				timeDuration.innerHTML = __.getTime(duration);
			}
			progressBar = container.querySelector('.nm-loader-played');
			progressBarLoaded = container.querySelector('.nm-loader-loaded');
			playedPercentage = allValuesZero ? 0 : parseFloat(currentTime / duration) * 100;
			if (progressBar && progressBarLoaded) {
				if(allValuesZero){
					progressBarLoaded.style.width ='0%';
				}
				progressBar.style.width = playedPercentage + '%';
			}
		}
	};
	__.handlerMuteButton = function() {
		var btn = this,
			container = __.getCurrentVideoContainer(btn),
			video = __.getVideo(container);
		if (!!video) {
			if (video.muted === false) {
				// Mute the video
				video.muted = true;
				__.removeClassName(this, "nm-mute");
				__.addClassName(this, "nm-unmute");
			} else {
				// Unmute the video
				video.muted = false;
				__.removeClassName(this, "nm-unmute");
				__.addClassName(this, "nm-mute");
			}
		}
	};
	__.handlerSeekBar = function(event) {
		var btn = this,
			container = __.getCurrentVideoContainer(btn),
			video = __.getVideo(container),
			width = btn.clientWidth,
			offX = event.offsetX,
			percent = (offX / width) * 100;
		if (!!video && !!container) {
			video.currentTime = video.duration * (percent / 100);
			__.displayTimeInfos(container, video.currentTime, video.duration);
		}
	};
	__.showHideControls = function() {
		var controlWrap,
			container = document.querySelector('.active-fs');
		if (!!container) {
			controlWrap = container.querySelector(".nm-controls-wrap-video");
			__.addClassName(controlWrap, "nm-controls-wrap-video-full");
			clearTimeout(__.delayIntervallId);
			__.delayIntervallId = setTimeout(function() {
				__.removeClassName(controlWrap, "nm-controls-wrap-video-full");
			}, 3000);
		}
	};
	__.isFullScreen = function() {
		/** @namespace document.fullScreen */
		/** @namespace document.webkitIsFullScreen */
		/** @namespace document.mozFullScreen */
		/** @namespace document.msFullscreenElement */
		/** @namespace document.fullscreenElement */
		return !!(document.fullScreen || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || document.fullscreenElement);
	};
	__.enterFullScreen = function(elm) {
		if (!elm.requestFullScreen) {
			/** @namespace elm.webkitRequestFullScreen */
			/** @namespace elm.msRequestFullscreen */
			/** @namespace elm.mozRequestFullScreen */
			elm.requestFullScreen = elm.mozRequestFullScreen || elm.webkitRequestFullScreen || elm.msRequestFullscreen;
		}
		elm.requestFullScreen();
	};
	__.isfullScreenClosed = function() {
		var fs = __.isFullScreen();
		if (!fs) {
			__.leaveFullScreen();
		}
	};
	exports.exitFullScreen = function() {
		if (!document.exitFullScreen) {
			/** @namespace document.webkitCancelFullScreen */
			/** @namespace document.msExitFullscreen */
			/** @namespace document.mozCancelFullScreen */
			document.exitFullScreen = document.mozCancelFullScreen || document.webkitCancelFullScreen || document.msExitFullscreen;
		}
		document.exitFullScreen();
		document.removeEventListener('mousemove', __.showHideControls);
		__.handleFullscreenEvents(false);
	};
	__.switchToFullScreen = function(btn) {
		var container = __.getCurrentVideoContainer(btn);
		if (container) {
			__.addClassName(container, 'active-fs');
			__.addClassName(btn, 'nm-minimize');
			__.handleFullscreenEvents(true);
			document.addEventListener('mousemove', __.showHideControls);
			__.enterFullScreen(container);
		}
	};
	__.leaveFullScreen = function(btn) {
		var container = __.getCurrentVideoContainer(btn),
			con;
		if (btn) {
			container = __.getCurrentVideoContainer(btn);
			if (container.className.indexOf('active-fs') > -1) {
				__.removeClassName(container, 'active-fs');
			}
			__.removeClassName(btn, 'nm-minimize');
		} else {
			con = document.querySelector('.active-fs');
			if(!!con) {
				__.removeClassName(con, 'active-fs');
				__.removeClassName(con.querySelector('.nm-minimize'), 'nm-minimize');
			}
		}
		exports.exitFullScreen();
	};
	__.handleFullscreenEvents = function(fullscreen) {
		if (fullscreen) {
			document.addEventListener('webkitfullscreenchange', __.isfullScreenClosed, false);
			document.addEventListener('mozfullscreenchange', __.isfullScreenClosed, false);
			document.addEventListener('fullscreenchange', __.isfullScreenClosed, false);
			document.addEventListener('MSFullscreenChange', __.isfullScreenClosed, false);
		} else {
			document.removeEventListener('webkitfullscreenchange', __.isfullScreenClosed, false);
			document.removeEventListener('mozfullscreenchange', __.isfullScreenClosed, false);
			document.removeEventListener('fullscreenchange', __.isfullScreenClosed, false);
			document.removeEventListener('MSFullscreenChange', __.isfullScreenClosed, false);
		}
	};
	__.handlerFullScreenButton = function() {
		var btn = this;
		if (!__.isFullScreen()) {
			__.switchToFullScreen(btn);
		} else {
			__.leaveFullScreen(btn);
		}
	};
	__.addClassName = function(ele, clname) {
		if (ele && ele.classList) {
			ele.classList.add(clname);
		}
	};
	__.removeClassName = function(ele, clname) {
		if (ele && ele.classList) {
			ele.classList.remove(clname);
		}
	};
	__.getTime = function(nTime_) {
		var min = Math.floor(nTime_ / 60) < 10 ? '0' + Math.floor(nTime_ / 60) : Math.floor(nTime_ / 60),
			sec = Math.floor(nTime_ - (min * 60)) < 10 ? '0' + Math.floor(nTime_ - (min * 60)) : Math.floor(nTime_ - (min * 60));
		return min + ":" + sec;
	};
	__.findClosest = function(el, selector) {
		var matchesFn = "",
			parent,
			element = el;
		// find vendor prefix
		['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function(fn) {
			if (typeof document.body[fn] === 'function') {
				matchesFn = fn;
				return true;
			}
			return false;
		});
		// traverse parents
		while (element) {
			parent = element.parentElement;
			if (parent && parent[matchesFn](selector)) {
				return parent;
			}
			element = parent;
		}
		return null;
	};
	__.handlerNativeControls = function(data) {
		var videos, vid, i;
		if (data && !!data.domElement && !!data.domElement[0]) {
			videos = data.domElement[0].querySelectorAll('.nm-video');
		} else {
			videos = document.querySelectorAll('.nm-video');
		}
		for (i = 0; i < videos.length; i++) {
			__.addClassName(videos[i], 'nm-hide-controls');
			//vid = videos[i].querySelector('video');
			vid = __.getVideo(videos[i]);
			if (vid) {
				var nativeCtrl = vid.getAttribute('data-nativectrls');
				if (nativeCtrl !== "false") {
					vid.setAttribute("controls", '');
				}
			}
		}
	};
	__.enableVideoFullStageMode = function() {
		document.querySelector('body').classList.add('nm-stage-full');
	};
	__.disableVideoFullStageMode = function() {
		document.querySelector('body').classList.remove('nm-stage-full');
	};
	/* intro-stage Anpassung*/
	__.handlerStagePlayButton = function() { //eslint-disable-line max-statements
		var stagePlayBtn = this,
			videoContainer = __.getCurrentVideoContainer(stagePlayBtn),
			video = __.getVideo(videoContainer),
			skipBtnContainer;
		if (video) {
			video.classList.remove('nm-hidden');
			video.play();
			video.addEventListener('ended', __.handlerStageSkipButton);
		}
		if (stagePlayBtn) {
			stagePlayBtn.classList.add('nm-hidden');
		}
		__.enableVideoFullStageMode();
		if (videoContainer) {
			skipBtnContainer = videoContainer.querySelector('.nm-introvideo');
			if (skipBtnContainer) {
				skipBtnContainer.classList.remove('nm-hidden');
			}
		}
		SWIPE.disableSwipe();
	};
	__.handlerStageSkipButton = function(event_) {
		var stageSkipBtn = this,
			videoContainer = __.getCurrentVideoContainer(stageSkipBtn),
			video = __.getVideo(videoContainer),
			skipBtnContainer = videoContainer ? videoContainer.querySelector('.nm-introvideo') : null,
			playBtn = videoContainer ? videoContainer.querySelector('.nm-j-play-btn-stage') : null;
		event_.preventDefault();
		if (video) {
			video.classList.add('nm-hidden');
			video.pause();
		}
		__.disableVideoFullStageMode();
		if (skipBtnContainer) {
			skipBtnContainer.classList.add('nm-hidden');
		}
		if (playBtn) {
			playBtn.classList.remove('nm-hidden');
		}
		SWIPE.enableSwipe();
	};
	__.handlerVideoClick = function() {
		var btn = this,
			container = __.getCurrentVideoContainer(btn),
			video = __.getVideo(container);
		if (!!video) {
			if (video.paused) {
				video.addEventListener('playing', __.handlerVideoPlaying);
				video.play();
			} else {
				video.addEventListener('pause', __.handlerVideoPause);
				video.pause();
			}
		}
	};
	/**
	 * addStageAutoPlayEvent
	 * Check if Stage video is in nm-strage container and if
	 * autoplay and loop ist activated and video is loaded, add handleStageAutoplay
	 * @returns {void} resturns nothing
	 */
	__.addStageAutoPlayEvent = function() {
		var container = document.querySelector('.nm-stage-container .nm-stage-media.nm-video'),
			video, sources, i;
		if (!!container) {
			if (container.getAttribute("data-autoplay") === "true" || container.getAttribute("data-autoplay") === true) {
				video = __.getVideo(container);
				sources = video.querySelectorAll('source');
				if (!(navigator.userAgent.search("Safari") >= 0 && navigator.userAgent.search("Chrome") < 0)) {
					for (i = 0; i < sources.length; i++) {
						sources[i].media = sources[i].getAttribute('data-media');
					}
				}
				video.classList.remove('nm-hidden');
				video.addEventListener("canplay", __.handleStageAutoPlay);
				video.load();
			}
		}
	};
	/**
	 * handleStageAutoPlay
	 * Maximize Stage for 16:9 and play video muted in loop
	 * @returns {void} returns nothing
	 */
	__.handleStageAutoPlay = function() {
		var stagePlayBtn = document.querySelector('.nm-stage-container .nm-stage-media .nm-j-play-btn-stage'),
			videoContainer = __.getCurrentVideoContainer(stagePlayBtn),
			video = __.getVideo(videoContainer);
		video.removeEventListener("canplay", __.handleStageAutoPlay);
		if (stagePlayBtn) {
			stagePlayBtn.classList.add('nm-hidden');
		}
		if (DEVICE.isMobile()) {
			video.controls = false;
		}
		__.enableVideoFullStageMode();
		SWIPE.disableSwipe();
		if (video) {
			video.classList.remove('nm-hidden');
			video.muted = true;
			video.play().catch(function(){
				// catching the known mobile browser restriction for autoplay
			});
			video.addEventListener('ended', function() {
				video.play().catch(function(){
					// catching the known mobile browser restriction for autoplay
				});
			});
		}
	};
	/*End intro-stage Anpassung*/
	/**
	 * addAutoplayOnceEvent
	 * get all videos with existing attribute data-autoplay-in-viewport
	 * and add __.handleVideoInViewport on scroll listener
	 * @returns {void} - returns nothing
	 */
	__.addAutoplayOnceEvent = function() {
		__.aAllAutoplayVideos = [].slice.call(document.querySelectorAll('video[data-autoplay-in-viewport]'));
		if (__.aAllAutoplayVideos.length > 0) {
			document.addEventListener("scroll", __.handleVideoInViewport);
		}
	};
	/**
	 * handleVideoInViewport
	 * When video comes to viewport play and remove from
	 * __.aAllAutoplayVideos
	 * @returns {void} returns nothing
	 */
	__.handleVideoInViewport = function() {
		__.aAllAutoplayVideos.forEach(function(video, index) {
			if (DOM_UTILS.isInViewport(video)) {
				video.addEventListener('playing', __.handlerVideoPlaying);
				video.muted = true;
				video.play().catch(function(){
					// catching the known mobile browser restriction for autoplay
				});
				__.aAllAutoplayVideos.splice(index, 1);
			}
		});
	};
	__.handlePageLoaded = function() {
		__.disableVideoFullStageMode();
		if (DEVICE.isMobile()) {
			__.initializeNativeControls();
		}
	};

	exports.resetVideoPlayer = function (videoContainer_, src_, poster_) {
		var video = videoContainer_.querySelector('video'),
				timeDuration,
				videoLoaded;
		if(video){
			if(src_){
				video.src = src_;
				video.load();
			} else {
				video.removeAttribute('src');
			}
			if(poster_){
				video.poster = poster_;
			}
			__.handleVideoEndEvents(video);
			__.removeClassName(videoContainer_, 'nm-video-playing');
			__.displayTimeInfos(videoContainer_, 0, 0);

		}
	};

	exports.enterFullscreen = function(elem_) {
		__.enterFullScreen(elem_);
	};

	__.init = function() {
		__.addEvents();
	};
	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_READY, __.handlePageLoaded);
		__.domEventDelegate.on('click', '.nm-video .nm-j-play-btn .nm-video-button-play', __.handlerPlayButton);
		__.domEventDelegate.on('click', '.nm-video .nm-j-play-btn .nm-video-button-pause', __.handlerPauseButton);
		__.domEventDelegate.on('click', '.nm-video .nm-j-mute-btn', __.handlerMuteButton);
		__.domEventDelegate.on('click', '.nm-video .nm-video-loader', __.handlerSeekBar);
		__.domEventDelegate.on('click', '.nm-video .nm-j-fullscreen-btn', __.handlerFullScreenButton);
		/*Stage Handler*/
		__.domEventDelegate.on('click', '.nm-video .nm-j-play-btn-stage', __.handlerStagePlayButton);
		__.domEventDelegate.on('click', '.nm-video .nm-j-skip-btn-stage', __.handlerStageSkipButton);
		/*End Stage Handler*/
		/*Visualizer Handler*/
		__.domEventDelegate.on('click', '.nm-prevent-video-click-visualizer', __.handlerVideoClick);
		/*End Visualizer Handler*/
		__.addStageAutoPlayEvent();
		__.addAutoplayOnceEvent();
	};
	__.initializeNativeControls = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlerNativeControls);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handlerNativeControls);
		__.handlerNativeControls();
	};
	exports.handlerLayer = function(data) {
		if (DEVICE.isMobile()) {
			__.handlerNativeControls(data);
		}
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.init();
			__.handlePageLoaded();
			resolve("module/video-new.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 36 */,
/* 37 */,
/* 38 */,
/* 39 */,
/* 40 */,
/* 41 */,
/* 42 */
/*!***********************************!*\
  !*** ./js/app/module/dsh/data.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/ajax */ 6)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(AJAX) {
	"use strict";
	var exports, __;
	__ = {};
	exports = {
		__: __
	};
	__.autoCompleteService;
	__.data;
	// needs to be set
	__.config;
	
	/*
	 * Gets the base url from configuration, adds a path to it and returns
	 * the result.
	 */
	__.getUrl = function(path) {
		var baseUrl;
		baseUrl = __.config.DealerSearchBaseURL +
			__.config.DealerSearchMarketAppParameter + '/';
		return baseUrl + path;
	};

	/*
	 * this is the url for the first data fetch
	 */
	__.getCachedUrl = function() {
		return __.config.DealerSearchURLforFetchingAllDealers;
	};

	/**
	 * Returns a list of all partners.
	 * returns {Object} -- The Partner data.
	 */
	exports.getAllPartners = function() {
		return new Promise(function(resolve, reject) {
			if(!!__.data) {
				resolve(__.data);
			}
			else {
				AJAX.getJSON(__.getCachedUrl(), null, {
					'withCredentials': false
				}).then(function(data) {
					if(typeof data === 'object') {
						__.data = data;
						resolve(__.data);
					}
					else {
						try {
							__.data = JSON.parse(data);
							resolve(__.data);
						}
						catch(err) {
							reject(err);
						}
					}
				}, function(error_) {
					console.error('dsh api call failed:', error_);
				});
			}
		});
	};

	__.getClientId = function () {
		return 'b95656b9c4';
	};

	exports.searchPartnersByCity = function(query) {
		return new Promise(function(resolve, reject) {
			AJAX.getContent(__.getUrl('city?q=' + encodeURIComponent(query) + '&clientId=' + __.getClientId()), null, {
				'withCredentials': false
			}).then(function(data) {
				if(typeof data === 'object') {
					// Sort partners by distance before resolving.
					data.partners = __.sortPartnersByDistance(data.partners);
					resolve(data);
				}
				else {
					try {
						data = JSON.parse(data);
						resolve(data);
					}
					catch(err) {
						reject(err);
					}
				}
			}, function(error_) {
				reject(error_);
				//console.error('dsh api call failed:', error_);
			});
		});
	};

	__.sortPartnersByDistance = function(partners) {
		return partners.sort(function(a, b) {
			return b.distance - a.distance;
		});
	};

	/**
	 * Generates city name suggestions for a given input.
	 * @param term
	 * @returns {Object} A Promise.
	 */
	exports.getCityNameSuggestions = function(term, countryCode) {
		var termIsZipCode, placeTypes;
		placeTypes = ['(cities)'];
		// Check whether the search term is a zip code
		// (i.e. if all chars are numbers).
		termIsZipCode = !isNaN(Number(term));
		// If the term is a zipcode, don't define a place type.
		if(termIsZipCode) {
			placeTypes = [];
		}
		// Initialize service if neccessary.
		if(!__.autoCompleteService) {
			__.autoCompleteService = new google.maps.places.AutocompleteService();
		}
		return new Promise(function(resolve, reject) {
			// call
			__.autoCompleteService.getPlacePredictions({
				input: term,
				componentRestrictions: {
					country: countryCode
				},
				types: placeTypes
			}, function(results, status) {
				var displayText;
				if(status === 'OK') {
					var suggestions, i;
					suggestions = [];
					for(i=results.length-1; i>=0; i--) {
						displayText = results[i].terms[0].value;
						// If search term was a zip code, display both
						// zip code and city.
						if(termIsZipCode) {
							displayText = results[i].terms[0].value + ' ' +
								results[i].terms[1].value;
						}
						suggestions.unshift(displayText);
					}
					resolve(suggestions);
				}
				else {
					reject(new Error('Could not retrieve address suggestions: ' + status));
				}
			});
		});
	};

	exports.getDealerSuggestions = function(term) {
		var dealerData, results, i, p, index, sortFn;
		dealerData = __.data;
		results = [];
		sortFn = function(a, b) {
			var indexA, indexB;
			indexA = a.name.toLowerCase().indexOf(term.toLowerCase());
			indexB = b.name.toLowerCase().indexOf(term.toLowerCase());
			if(indexA !== indexB) {
				return indexA - indexB;
			}
			return a.name <= b.name.toLowerCase;
		};
		return new Promise(function(resolve, reject) {
			if(!dealerData) {
				reject(new Error('no data available'));
			}
			else {
				for(i=dealerData.partners.length-1; i>=0; i--) {
					p = dealerData.partners[i];
					index = p.name.toLowerCase().indexOf(term.toLowerCase());
					if(index !== -1) {
						results.push(p);
					}
				}
				resolve(results.sort(sortFn));
			}
		});
	};

	exports.getItemByKvpsId = function(kvpsid) {
		var partners, i;
		if(!__.data) {
			return undefined;
		}
		partners = __.data.partners;
		for(i=partners.length-1; i>=0; i--) {
			if(partners[i].kvpsid === kvpsid) {
				return partners[i];
			}
		}
	};

	exports.setConfig = function(config) {
		__.config = config;
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 43 */
/*!*******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-data-uris.json ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "{\n\t\"pin\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NzNEMzlFRTMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NzNEMzlFRDMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+A48hrwAAAMVJREFUeNpi/P//P8NQAEwMQwQMGYeyIHPOMpoEAKl+IFYYLA40/n+GEcWhUEeuHwpR3z9U0qjCaGYadeioQ0cdOurQUYeOOnTUoaMOHXXoqENHHTrq0FGHjmiHHhgKDv0AxIUwDguJmi9ADaA1ANkz0fj/mQfkOLQRqLEBXfAsowlFLgKaSZQ6Yh2aCDRwwWDPTAPuSEIhCkqLjkBHXhjMxdOgciQuh14YbI7EFvUwR35gGGSAaSg4EgQYR6dvRqpDAQIMAIe1NQM36mVkAAAAAElFTkSuQmCC\",\n\t\"pin_inactive\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDM2REMwNzMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDM2REMwNjMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qQgpqQAAAMRJREFUeNpi/P//P8NQAEwMQwQMGYeyIHP6p84MAFFArDBYHFiYnc6I4lCoI9cPhajvHyppVGE0M406dNShow4ddeioQ0cdOurQUYeOOnTUoaMOHXXoqENHtEMPDAWHfgDiQhiHhUTNF6AG0BqA7JlYmJ3+gByHNgI1NqAL9k+dSZGLgGYSpY5YhyYCDVww2DPTgDuSUIiC0qIj0JEXBnPxNKgcicuhFwabI7FFPcyRHxgGGWAaCo4EAcbR6ZuR6lCAAAMA6J4vKwWOtO8AAAAASUVORK5CYII=\",\n\t\"clusterMarker\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NzNEMzlFRTMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NzNEMzlFRDMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+A48hrwAAAMVJREFUeNpi/P//P8NQAEwMQwQMGYeyIHPOMpoEAKl+IFYYLA40/n+GEcWhUEeuHwpR3z9U0qjCaGYadeioQ0cdOurQUYeOOnTUoaMOHXXoqENHHTrq0FGHjmiHHhgKDv0AxIUwDguJmi9ADaA1ANkz0fj/mQfkOLQRqLEBXfAsowlFLgKaSZQ6Yh2aCDRwwWDPTAPuSEIhCkqLjkBHXhjMxdOgciQuh14YbI7EFvUwR35gGGSAaSg4EgQYR6dvRqpDAQIMAIe1NQM36mVkAAAAAElFTkSuQmCC\",\n\t\"clusterMarkerInactive\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAqElEQVRYhe3SwQnCQBCF4VeCJViCpViCpeQmiNmBTHS2m5SwJViCJegtICYbEXR2yfvhHRc+hgUYA8563YfebqGPj1I2g/SHLUJLu2QG6o8ilFBCCSWUUEIJJZTQ0kYooYSuCqo2lA/VeD/JZfctNAW14ddruyhHse0b8hNoq9ZMPvx3WWRnB2/fWBVIYAI695m9qwIJvEBTsUhghKZGZONtyVYFkq2xJxD2se7YIytOAAAAAElFTkSuQmCC\",\n\t\"pin_audi_active\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzYzQkU3RTYzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzYzQkU3RTczMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjNCRTdFNDMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjNCRTdFNTMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk/GWtYAAAOfSURBVHja7FdpSFRhFL2zuOZC5thoGVpmthiSYRmC9SMQgqxooWwPrECIbIUkMwr6k2ZJUWHaD4tCMI1IikxDFE1Dss0wtQU1zWV03B2nd67NMOPeqPiEufB4b87c+d75zr33vDcSrVZL0yEkZqKTSbRYsnKTcIoTDg+xEPTXFklwlg8gmSZWRaUG13FiLr0hUY/pQpTMRM1EzURND/lYkmYELCW3mMNkG7CM5E4O1Jb/nuoSHlNfRxe5HNtJdkF+JJFJSZ1bQvW3UqlP3U4ukbvJPngFaTV9elzb3UOzI8M4v7exhdoLP1B19G1qK/w49ieTYPhDPktdIrbT3GsnqSH5Kame5ZKmUUUOIWuYoNTGigmrMnKYkOOGIM4nmYzq4h9yPjbguDGYFEe3Emk09Ds2hVoy80jmaEf261cz/utEHOeP6ck0VNj6eTPJqr3nqfFBph7XqNSsDBSFui0vCxiHYtgAzq1Zb/nQhSJ8M2+gKfUVtRd/Zqw54w1vxiv9Kq8zkrIjKuqZcokklhZUse2MEb4gPZaV7aqsZhW/rNrH+MLn16n7Ry1p1B1k67+Yvq4NZ9w7+w6XGSrKlc70LTTSaD2PpGi+T2VY1LCKjjhMuFlz2uvBPevvw0pAHeSgvIwHLmeVgNsF+vYrIXyHngSOQ4cbBtZCjsnDhF2ivINwG2vqrW8ibUcnE0GeVsjDmXGh9Cizbg3kDMQNA62EPJOJdn6qGFLVrrIqVg9lRKl1m+kq/8k4PiMHgWvkcL7gGDp8oKt0ln03nSgGyP3GaapPeEQ9tQ16HJMOHCo1PXqhx+EMylN7qK+7lxoSnxjhrucOskvUXkk2JqCYSYqIHVQdddN0wwcJTOOivCS2JEOlpZZysvJyp5asIj0Ov5Q5OZLlHAW15rzT45h+y3lK/k6dX6rH4bM+Bfepo7ScNzMuH0V/ucYcIeXZ/dxj6CcL5SxWG9fO4Vv4DI+EOn8S0/l3zodC2dQRmHYoLLWzJaddIVwJqIvPNZfvUc3Fu/39O4KPjkpUFyCHyYSxQwH0IwJK2fh68YYYFywLYeXpRtZL5vM1cPSpDud8YXhQAcOWmhCiU/2fyfz2ZCZqJjq+yJ4ORJuF4/h/veEbRMm/BSY7cJ94wZqqTCEaI/zwwkBQ8N/x+uTE/WcS4oCwYLLYh2nKSY6mKHpxnUCyRMz2JCqSwxEtERvJoUqvI9lMIgvpdCBp9D4q9jATnej4K8AATs/YM6OF9IgAAAAASUVORK5CYII=\",\n\t\"pin_audi_inactive\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzYzQkU3RTIzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzYzQkU3RTMzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjNCRTdFMDMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjNCRTdFMTMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqM6PQ4AAAO+SURBVHja7FnLblJRFF1cqNBX1D6AolZ0qFIewRqNRqupUWO0qcbXzJEDR/0D/YLGgQNn/oFxYGKiMTqwCrSUllJB6EPb2tIHUNFCsVDP3goBa1ulGiGyEsK565y777p777MuD9ny8jKKARKKBEUjVJF90Hn3Xhu9iZe+UAR23LwhyxH6XeSDYih9Z7H0qL60mUpCS0L/N8NfDVqNGgebrdCq1VCplJicCsLlHsDSUhJmowHbGrSQyWSYmJxC/4AHX74swWJqwnZdA+izRJpPJlPM0/p4fBFT09N4Ze/GVHB640JNhn04duQQPG98eOJ5IS4Qh35nI1pbjkKhULBge7cTKSFol+BPHm+BJMng7HPjtaMHkriB3bt24nTrCaRSy4LvR9drO5RKJRp3bMOVC2148fIVesX6vIXW19WyyMdPn8H7NpDhFxMJWIxNIqNLnN13Y+PMp5JJwRtE5pIYG5/gVxqGPXv4BvyBYQRnZpgbGhnFyOh7nDtziuOsldk1e9RqNiEwPJIjkkBt4PX74XC6YG4yZPhmqwUDg170DQzCajHl8L39bp47sN+SE2v0/RjHyo7z20I16joWupKv50z4h4Z5TP1JaNBqOEvEN2g0zNEc9eSw4GlOp9WuiEexaE3epZckOW+YFSfJFYjFYlx6EiKXy3kslyTERA9T6anMBJqjNQsxwadSmZvKRkK0kiSX8hcaCoehrl+Z1XAkwtmrjFYgGv3EIgmR+Y/M03EoHGGOxrRGJ3hyDDr3Z64SjsznL9T71o+WI4fR5/bg88JChqedTnwsHoMvMJThB70+0ddGtiHPG2+G9wi+2Wpml3D0uHKuUV6ugtGwF102R/496vMPYTIYxGVhIfrGHRl+LhQWJZWwZfPmnJ1NfqkStlNVWYnxiQ8ZntZUV1XzHO3uNMhnr15sx+xciO0v74ySWT989Jh3edvZ09x7ZE2VFRXsBDQmfnExwWspO7SzCZfaz7OpE5TKTcyXlZXh2qV20d9xkV05H9uEB9u6e7Del8x1DZ8CUFmo/DqxM+mYMhCZ/9ZTDmcv6mpqxOaRBD+H+Y9R5u09TtRs3crj2VCI+5TQZbOjrraW138QFchuqQ0/QgkUkGznR5CAtIhskOC06F/hS5+eSkJLQv8unheDUHrWdvy2PaWfnt8D/G3Qde503Lwxmo/Q2+LEWz+SnXfvbfS3pT9q+NdFwPuFvpn+ucj1Mkq92CJEugrZngpK5GpCXYUm8melT4uMoMAgFYNI/jZb+vvmfxX6VYABAOaF0bhDDlhrAAAAAElFTkSuQmCC\",\n\t\"pin_service_active\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzFBNzlBQzkzMUI1MTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzFBNzlBQ0EzMUI1MTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMUE3OUFDNzMxQjUxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMUE3OUFDODMxQjUxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpkXCoEAAAOESURBVHja7JZtSJNRFIDPnMx004WaNksd+ZF9mWn0gYL1I4ryhz8iKoIKUosiFH9FiQuJQhI1ilSoJpFYCRlpn0ITLDLURhlBCn6mbrG1qdMcjnXP3d7XzaY27cWtduBy733vvec+7znnnnt5ZrMZ3EG8wE3EbUC9bTutvM3ppComReoqgEnmFp4dqBXykTu4vthdYlTqOUwe0GkikIaBX0KsU4r5S/3Bf0cSbWONOjgFxQ1XK8phzYcqpzbDH4t9XU7bWAcfS+MWNDT7EAgiJWDsGYQwWeYUhKKCtTLTxh+Jqi2ifYksi9Ux0tgGE92D3IGiNUOyD4Omsg4GZBUQdDSNupG6NTWR1tS11nZ4SS4F1sifgLF7gNWD4z5SCXegaE2+WEQBpXfy6TdbSzn6MV2tgoJi4ewKdWRN3eNGUJdUsYdCkp8JKpEfmPSjIJXL7NaMKlroOM7z3Rj7V0F5zDOPXKHm6aDoxjHlVzDpRqbcSCCYeEN34hjOZebhGuwz30cUrewa23Bw9q6fEdTVHiVznnrvIDGI9yaDcNuGBW2IOjiJUXpwLpyAZaf2g7FfZYnBJiX0587v7RJdX4pe4wZUlLoJtNUvfoNbWZQDopQEMPapoDfrEvjEREBwRjoIIpaDsXeI1h27TtO5q2oKQXX1Lhjef6Z99ExYwUngB4hAfa0ahp+/hYjy8yAID53VELO6fiCvDHzjozFOIObVDbpJyJkDIN6XQjfhi4V0E+/AABDvSQZ1cRUMXakE37VR1NVYRNvjwfDuEwi3rLNcDkSPRl4HXUfyKDyuRz2oD/WiF522KG6AlsE4XVF4llpi/GMnTU1+iXG0bez6RudieOifvqHtnowCmqZQhi7ftrcMSW3ae8+m3hHEkqZhiz59fROMtX1xHjTyVh51o0lvoJb5frMGtPdfQuDB3ST1iIgl/FlQW0FgBlR9/YHd2HBDM8Q1V8J4e6dlnFgysuwc/Wn03o+HDc7lUZonSewtiQmn7Z8dfTDR0ctmAuHW9SwU9nEuesB2LQqzBsOAsTiTAQzN7TCp0bP7TGqH7XT8m3nU88L3gC6OKNwBVEdKzh/lUQeitCrgWnCfUnLiu+cDepEslE3/uJCHhjX9LPxRYiPHiUK5qx+mRYecy6IYizsJpNKV05NLQc4EqnQ1SEeuZyB14GLi5Q6Qds88z13/v4H+EmAAaw5t4zY527UAAAAASUVORK5CYII=\",\n\t\"pin_service_inactive\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAACu0lEQVRYhe3U72raUBgG8FzCLmGXsEvZJexS+m0w1gj1X8BgkCoR8+EUHRmVUCm0VKQuc1KDIaloUMk2KgYL1S/PPp1DrNppR4xdfeGQGHOSX57zJhy3r31x3Odo4j0fS3b4mIBdGSuQ4cP+Ct21JJ+Aho/aQ3cOKmZyOM4rG90gnkqjQIrgYwIKpAgxkwsWGk+lMfY8ANjoZgVSBADwMQEAcFW7DhZ6VbsGAIw9DzdGG3xMwHFegdMfsJTpvpjJwbrtwOkP4PQHDOr0BzjVKsFB46k0HqZT3BhtnGoVAECBFFladGnpvnXbwdjzcKpVcGO0t5coTdNfTn+wEur0B/j2/cd2l56mad12WIoUfvLlKx6mU4w9j/Wv//+fv36zB9sKtECKiKfSCy+JmMlBzORQIEUc55W58+hvuvXPCfRlCnusDU2IEkhJhayQf7ohKanBQS+rNUwm9xi6Loaui7reeDaU9msg0G7PWYqr6w0MXRemZSMhSpAVgmbLQLfnsC0917RsyArB0HXBxwTICkG352DoulDLGhKiBNOyVwaxFpReFAC6PQeyQnB2foG70QhqWUO358C0bJCSisnkHqSkQsrKbJ8e9yc6m82gljVIWRlSVoZp2ej2HKhlDXejES6rtee/TAlRYknRNOt6A3W9gbPzC5CSyhKj/Ujb5ez8Yg76uAWGrsuuW9cbC728FpTiTMvGZHKPy2qNJdZsGTAteymUAvzHKJAue7NloNkyoJY1zGYz1PUGW7WNoVJWZksoZeWFLwF9etqnj+f65/iTonMTojR3n2Vflv/vOxr22ENfJzSarOw+NCqMPkXi754L1floshL0ODwSIh8jybcLyHWgh9HkwdKJ264nkUfJD2H7WL0IJMctga5q5rDrRSA5bg6q7yyS4xhUP4hE3oRtebJeBHJfr7H+AFCUSWwQjL5rAAAAAElFTkSuQmCC\",\n\t\"pin_partner_active\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDM2REMwNzMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDM2REMwNjMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qQgpqQAAAMRJREFUeNpi/P//P8NQAEwMQwQMGYeyIHP6p84MAFFArDBYHFiYnc6I4lCoI9cPhajvHyppVGE0M406dNShow4ddeioQ0cdOurQUYeOOnTUoaMOHXXoqENHtEMPDAWHfgDiQhiHhUTNF6AG0BqA7JlYmJ3+gByHNgI1NqAL9k+dSZGLgGYSpY5YhyYCDVww2DPTgDuSUIiC0qIj0JEXBnPxNKgcicuhFwabI7FFPcyRHxgGGWAaCo4EAcbR6ZuR6lCAAAMA6J4vKwWOtO8AAAAASUVORK5CYII=\",\n\t\"pin_partner_inactive\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDM2REMwNzMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDM2REMwNjMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qQgpqQAAAMRJREFUeNpi/P//P8NQAEwMQwQMGYeyIHP6p84MAFFArDBYHFiYnc6I4lCoI9cPhajvHyppVGE0M406dNShow4ddeioQ0cdOurQUYeOOnTUoaMOHXXoqENHtEMPDAWHfgDiQhiHhUTNF6AG0BqA7JlYmJ3+gByHNgI1NqAL9k+dSZGLgGYSpY5YhyYCDVww2DPTgDuSUIiC0qIj0JEXBnPxNKgcicuhFwabI7FFPcyRHxgGGWAaCo4EAcbR6ZuR6lCAAAMA6J4vKwWOtO8AAAAASUVORK5CYII=\",\n\t\"location\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzYzQkU3RUEzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEJBNjA4MTgzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjNCRTdFODMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjNCRTdFOTMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnsPubcAAAEbSURBVHjaYmTADiyBOBCIzYCYB4jvA/FxIF4AxO8Y8AB+IJ4DxP9x4FdQg7ECaSB+gkczMp6GzYDtRGqG4UxkzQnoCqKiov4fOHDg//nz5//Pnz//v5ycHLoBb6FeBoPDyJJFRUX/0cHbt2//S0tLoxsSC9LMhizIycn5/9u3b/+xgTlz5qAbMJkJSIgi+0VLS4sBaAjWUNbV1UUXkgAZ8B1Z5P79+wx///7FasCjR4/QhV7DGFeRnTZ58mQM5//8+fM/0AXoXsiBGVCNHg4tLS3/P3z4ANYMigl7e3t0zT+haYcBFpCXSEwHXej+MQDib0RqPgy1FAOoA/FJPBr/AHELLs0wwAwNnL1A/Bmq8R4QLwJiY3TFAAEGAE7g3+YISVmBAAAAAElFTkSuQmCC\"\n}\n"

/***/ }),
/* 44 */
/*!****************************************!*\
  !*** ./js/app/core/layer/layer-dom.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS) {
	"use strict";
	var __, exports;
	__ = {};
	exports = {
		__: __
	};

	/**
	 * Set document title
	 * @param {String} title - the new title to set
	 * @returns {void}
	 */
	exports.setPageTitle = function(title) {
		document.title = title;
	};
	/**
	 * Extract layer title from DOM
	 * @param {Element} domElement - the dom element to extract the title from
	 * @returns {String} the extracted title if found, or an empty string
	 */
	exports.extractLayerTitle = function(domElement) {
		var titleElem = !!domElement ? DOM_UTILS.getElement('.nm-layer-title', domElement) : null;
		var toReturn = '';
		if (titleElem !== null) {
			toReturn = titleElem.innerHTML;
		}
		return toReturn;
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 45 */
/*!*************************************!*\
  !*** ./js/app/module/menuflyout.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (DOM_UTILS, EVENTS) {
	'use strict';

	var
		__ = {},
		api = {__: __};

	__.oDefaults = {
		sSelectorHeaderItem: '.nm-navigation-header-item',
		sSelectorOverlayOpen: '.nm-header-overlay-is-open',
		sSelectorFlyoutMenu: '.nm-navigation-sitemap-wrap > .nm-navigation-sitemap-wrap-link',
		sSelectorHeaderLink: '.nm-navigation-header-link',
		sSelectorHeaderDirectLink: 'nm-navigation-header-direct-link',
		sSelectorNavigationContainer: '.nm-navigation-header-detail-container',
		sSelectorNavigation: '.nm-navigation-header-detail-container > ul',
		sSelectorNavigationActiveLink: '.nm-header-overlay-is-open .nm-navigation-header-detail-container > ul > li.nm-header-detail-link-active',
		sSelectorNavigationLink: '.nm-navigation-header-detail-container > ul > li > a',
		sClassDetailLinkActive: 'nm-header-detail-link-active',
		sSelectorOverlay: '.nm-navigation-header-overlay',
		sClassOverlayOpen: 'nm-header-overlay-is-open',
		sSelectorOverlayContainer: '.nm-header-overlay-container',
		sSelectorDropdownVisibiltyCheck: '#nm-navigation-dropdown-menu',
		sSelectorAdditionalLogo: '.nm-has-additional-logo',
		sNumLogoHeightAdjustment: 30,
		sNumMenuBreakpoint: 899,
		sNumMenuBreakpointCarline: 999,
		sNumHoverTimeout: 300,
		sNumTriangleHeight: 460,
		sNumOverlayHeightOffset: 85,
		sNumOverlayHeightDetailOffset: 120
	};

	api.open = function(item) {
		var link = DOM_UTILS.getElement('a', item),
			url, id, container, itemOverlay, detailOverlays;

		__.addBackGroundEventOnce();
		item.setAttribute('flyout-is-open', 'true');

		if(DOM_UTILS.isElement(link)) {
			url = link.getAttribute('href');
			id = link.getAttribute('data-ref-id');
		}

		container = (__.oDefaults.sSelectorOverlayContainer + ' ' + __.oDefaults.sSelectorOverlay + '[data-ref-id="' + id + '"]');
		itemOverlay = DOM_UTILS.getElement(container);
		__.setFlyoutHeight(itemOverlay);

		detailOverlays = DOM_UTILS.getElementsArray('.nm-navigation-header-detail .nm-navigation-header-detail-overlay', itemOverlay);
		detailOverlays.forEach(function(overlay) {
			overlay.style['transition-delay'] = '0s';
		});

		itemOverlay.classList.add(__.oDefaults.sClassOverlayOpen);
		__.eventBus.emit(EVENTS.MENUFLYOUT_OPEN, {'item': item});

		// Portal Navigation -> CSS Menu Schliessen
		__.closeDropdownMenu();
		item.classList.add(__.oDefaults.sClassOverlayOpen);
	};

	api.close = function(item) {
		var link = DOM_UTILS.getElement("a", item),
			url, container, itemOverlay;

		if(DOM_UTILS.isElement(link)) {
		  url = link.getAttribute('href');
		}
		container = (__.oDefaults.sSelectorOverlayContainer+ ' ' +__.oDefaults.sSelectorOverlay+'[data-ref-url="'+url+'"]');
		itemOverlay = DOM_UTILS.getElementsArray(container);

		__.removeBackGroundEvent();
		item.setAttribute('flyout-is-open', 'false');

		itemOverlay.forEach(function(overlay) {
			if( overlay && (overlay.getAttribute('data-height') !== undefined) ) {
				overlay.style.height = "0";
			}
			var overlayWrapper = DOM_UTILS.getElementsArray('.nm-navigation-header-detail .nm-navigation-header-detail-overlay-wrap', overlay);
			overlayWrapper.forEach(function(overlayWrap) {
				overlayWrap.style['transition-delay'] = '1s';
			});
			overlay.classList.remove(__.oDefaults.sClassOverlayOpen);
		});

		__.eventBus.emit(EVENTS.MENUFLYOUT_CLOSE, {'item': item});
		item.classList.remove(__.oDefaults.sClassOverlayOpen);
	};

	api.closeAll = function() {
		var items = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorHeaderItem);
		items.forEach(function(item) {
			api.close(item);
		});
	};

	/**
	 * checks, whether point (x0,y0) is inside the triangle spanned by (x1,y1) - (x3,y3)
	 */
	api.isInsideTriangle = function (x0, y0, x1, y1, x2, y2, x3, y3) {//eslint-disable-line max-params

		var
			b0 =  (x2 - x1) * (y3 - y1) - (x3 - x1) * (y2 - y1),
			b1 = ((x2 - x0) * (y3 - y0) - (x3 - x0) * (y2 - y0)) / b0,
			b2 = ((x3 - x0) * (y1 - y0) - (x1 - x0) * (y3 - y0)) / b0,
			b3 = ((x1 - x0) * (y2 - y0) - (x2 - x0) * (y1 - y0)) / b0,
			inside = b1 > 0 && b2 > 0 && b3 > 0;
		return inside;
	};

	__.itemIsOpen = function(item) {
		var attr = item.getAttribute('flyout-is-open');
		if(!!(attr && attr === 'true')) {
			return true;
		}
		return false;
	};
	__.handleMenuClick = function(e) {
		var link = this,
			item = link.parentNode;
		if (link.classList.contains(__.oDefaults.sSelectorHeaderDirectLink)) {
			return true;
		}
		e.preventDefault();

		if(!__.itemIsOpen(item)) {
			api.closeAll();
			api.open(item);
		} else {
			api.close(item);
		}
	};

	__.handleCloseClick = function(e) {
		var overlay = DOM_UTILS.getElement(__.oDefaults.sSelectorHeaderItem + '.' + __.oDefaults.sClassOverlayOpen);
		e.preventDefault();
		api.close(overlay);
	};

	__.handleOverlayClick = function(e) {
		var is_outside = DOM_UTILS.isElementOutsideOfElementWithSelector(e.target, __.oDefaults.sSelectorOverlayOpen);
		if(is_outside) {
			api.closeAll();
		}
	};

	__.handleNavigationMouseEnter = function(e) {
		e.preventDefault();
		e.stopImmediatePropagation();
		__.activeItem = DOM_UTILS.getElement(__.oDefaults.sSelectorNavigationActiveLink);
		__.domEventDelegate.on("mousemove", __.handleNavigationMouseMove);
	};

	__.handleNavigationMouseLeave = function() {
		__.domEventDelegate.off("mousemove", __.handleNavigationMouseMove);
	};

	__.handleActiveItemChange = function(newActiveItem) {
		__.activeItem.classList.remove(__.oDefaults.sClassDetailLinkActive);
		__.activeItem = newActiveItem;
		__.activeItem.classList.add(__.oDefaults.sClassDetailLinkActive);
	};

	__.handleHoverTimeout = function() {
		if (DOM_UTILS.isElement(__.activeItemNominee) && !(__.activeItemNominee.parentNode === __.activeItem)) {
			__.handleActiveItemChange(__.activeItemNominee.parentNode);
		}
	};

	__.handleNavigationMouseMove = function(e) {
		__.activeItemNominee = DOM_UTILS.closest(e.target, __.oDefaults.sSelectorNavigationLink);
		if (!__.activeItemNominee) {
			return;
		}

		var navigationSelector = DOM_UTILS.closest(e.target, __.oDefaults.sSelectorNavigation);
		var navigationSelectorLink = DOM_UTILS.getElement('a', navigationSelector.firstElementChild);
		__.topBoundingRect = navigationSelectorLink.getBoundingClientRect();


		// limit to visible li area (the li-s currently use full horizontal space...)
		if (e.clientX < __.topBoundingRect.right) {

			__.x0 = e.clientX,
			__.y0 = e.clientY;

			if (!__.x1 || !__.y1) {
				__.x1 = __.x0;
				__.y1 = __.y0;
			}
			__.x2 = __.topBoundingRect.right;
			__.y2 = Math.max(0, __.topBoundingRect.top);
			__.x3 = __.x2;
			__.y3 = __.topBoundingRect.top + __.oDefaults.sNumTriangleHeight;

			var a1 = __.activeItemNominee.parentNode;
			var a2 = __.activeItem;

			if (__.activeItemNominee.parentNode === __.activeItem) {
				if (!api.isInsideTriangle(__.x0, __.y0, __.x1, __.y1, __.x2, __.y2, __.x3, __.y3)) {
					__.x1 = __.x0;
					__.y1 = __.y0;
				}
			} else {
				if (__.activeItem) {
					if (api.isInsideTriangle(__.x0, __.y0, __.x1, __.y1, __.x2, __.y2, __.x3, __.y3)) {
						clearTimeout(__.hoverTimeout);
						__.hoverTimeout = setTimeout(__.handleHoverTimeout, __.oDefaults.sNumHoverTimeout);
					} else {
						__.handleActiveItemChange(__.activeItemNominee.parentNode);
					}
				}
			}
		}
	};

	__.handleFlyoutLinkClick = function(e) {
		if(window.innerWidth > __.oDefaults.sNumMenuBreakpoint || DOM_UTILS.getElement('.nm-state-is-responsive').length === 0) {
			return;
		}

		if(DOM_UTILS.isElement(e.target) && e.target.classList.contains("nm-has-sub-nav")) {
			e.preventDefault();
			e.stopImmediatePropagation();

			var submenu = DOM_UTILS.closest(e.target, '.nm-navigation-sitemap-wrap');
			if(DOM_UTILS.isElement(submenu)) {
				submenu.classList.toggle('nm-flyout-is-expanded');
			}
		}
	};

	__.addBackGroundEventOnce = function() {
		__.domEventDelegate.on("click", __.handleOverlayClick);
	};

	__.removeBackGroundEvent = function() {
		__.domEventDelegate.off("click", __.handleOverlayClick);
	};

	__.handleWindowResize = function() {
		__.setDataHeight();
		__.setFlyoutHeight(DOM_UTILS.getElement('.nm-navigation-header-overlay.nm-header-overlay-is-open'));
		__.setDetailFlyoutHeight();
	};

	__.addEvents = function addEvents () {
		window.addEventListener('resize', __.handleWindowResize);

		__.domEventDelegate.on("click", __.oDefaults.sSelectorHeaderItem + ' ' + __.oDefaults.sSelectorHeaderLink, __.handleMenuClick);
		__.domEventDelegate.on("click", __.oDefaults.sSelectorOverlay + ' .nm-icon-close', __.handleCloseClick);
		__.domEventDelegate.on("mouseover", __.oDefaults.sSelectorNavigation, __.handleNavigationMouseEnter);
		__.domEventDelegate.on("mouseout", __.oDefaults.sSelectorNavigation, __.handleNavigationMouseLeave);
		__.domEventDelegate.on("click", __.oDefaults.sSelectorFlyoutMenu, __.handleFlyoutLinkClick);
	};


	/* set data-height-attribute for main navigation overlays */
	__.setDataHeight = function() {
		var headerOverlays = DOM_UTILS.getElementsArray('.nm-header-overlay-container .nm-navigation-header-overlay');
		headerOverlays.forEach(
			function(item){
				var itemContent = DOM_UTILS.getElement(__.oDefaults.sSelectorNavigationContainer, item);
				var detailContent = DOM_UTILS.getElementsArray('.nm-navigation-header-detail-overlay-content', itemContent);
				var detailContentMaxHeight = 0;
				var overlayHeight = itemContent.clientHeight + __.oDefaults.sNumOverlayHeightOffset;

				if(detailContent.length) {
					detailContent.forEach(function(content) {
						detailContentMaxHeight = (detailContentMaxHeight < content.clientHeight) ? content.clientHeight : detailContentMaxHeight;
					});
					detailContentMaxHeight += __.oDefaults.sNumOverlayHeightDetailOffset;
					overlayHeight = (overlayHeight < detailContentMaxHeight) ? detailContentMaxHeight : overlayHeight;
				}

				//adjust flag for double - row navigation
				if (DOM_UTILS.isElement(__.oDefaults.sSelectorAdditionalLogo)) {
					overlayHeight += __.oDefaults.sNumLogoHeightAdjustment;
				}
				// end adjust

				item.setAttribute("data-height", overlayHeight);
			}
		);
	};

	__.setDetailFlyoutHeight = function() {
		var activeDetailOverlay = DOM_UTILS.getElement('.nm-header-overlay-container .nm-navigation-header-overlay.nm-header-overlay-is-open');

		if(!DOM_UTILS.isElement(activeDetailOverlay)) {
			return;
		}

		var activeDetailItem = DOM_UTILS.getElement(__.oDefaults.sSelectorNavigationContainer + ' .nm-navigation-header-detail.nm-header-detail-link-active .nm-navigation-header-detail-overlay .nm-navigation-header-detail-overlay-content', activeDetailOverlay);
		if(!DOM_UTILS.isElement(activeDetailItem)) {
			return;
		}
		var newOverlayHeight = activeDetailItem.clientHeight;

		//adjust flag for double - row navigation
		if (DOM_UTILS.isElement(__.oDefaults.sSelectorAdditionalLogo)) {
			newOverlayHeight += __.oDefaults.sNumLogoHeightAdjustment;
		}
		// end adjust


		if(DOM_UTILS.isElement(".nm-navigation-header-detail-container-carline", activeDetailItem) && window.innerWidth < __.oDefaults.sNumMenuBreakpointCarline) {
			newOverlayHeight = 0;
			activeDetailItem.setAttribute("data-height", newOverlayHeight);
			var closeIcon = DOM_UTILS.getElement('.nm-icon-close');
			if(DOM_UTILS.isElement(closeIcon)) {
				closeIcon.click();
			}
		} else {
			activeDetailItem.setAttribute("data-height", newOverlayHeight);
			__.setFlyoutHeight(activeDetailItem);
		}
	};

	__.setFlyoutHeight = function(itemOverlay) {
		var overlay = itemOverlay,
			headerOverlayOpen = DOM_UTILS.getElement('.nm-navigation-header-overlay.nm-header-overlay-is-open');
		if( !DOM_UTILS.isElement(overlay) && (DOM_UTILS.isElement(headerOverlayOpen) && headerOverlayOpen.getAttribute('data-ref-id') === '0') ) {
			overlay = DOM_UTILS.getElement('.nm-navigation-header-overlay.nm-header-overlay-is-open');
		}

		if( DOM_UTILS.isElement(overlay) && (overlay.getAttribute('data-height') !== undefined)) {
			overlay.style.height = overlay.getAttribute('data-height') + "px";
		}
	};

	__.closeDropdownMenu = function() {
		var menu = DOM_UTILS.getElement(__.oDefaults.sSelectorDropdownVisibiltyCheck);
		if(DOM_UTILS.isElement(menu)) {
			if(menu.checked) {
				menu.checked = false;
			}
		}
	};

	__.initialize = function() {
		__.addEvents();
		__.setDataHeight();
	};

	api.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/menuflyout.js");
		});
	};

	return api;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 46 */
/*!********************************!*\
  !*** ./js/app/core/storage.js ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 162 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
], __WEBPACK_AMD_DEFINE_RESULT__ = function() {
	"use strict";

	var api = {};

	api.__version = 1.1; // class version
	api.__class = 'nemo.core.STORAGE'; // class name
	api.ID = 'STORAGE';
	api.CONTAINER = {};


	/**
	 * Get stored value
	 * @param {String} sKey_ Key
	 * @param {String} sGroup_ Group, e.g. 'CONFIG'
	 * @return {Object, String, Bool, undefined} Stored value, returns undefined if no value was found
	 */
	api.get = function(sKey_, sGroup_) {
		return (sGroup_ && api.CONTAINER[sGroup_]) ? api.CONTAINER[sGroup_][sKey_] : api.CONTAINER[sKey_];
	};

	/**
	 * Stores a value inside the STORAGE.CONTAINER using group and key as identifier.
	 * If group equals null, the key will be used as group
	 * Deletes the value in case value equals null.
	 * @param {String} sKey_ Key
	 * @param {String, null} [sGroup_] Group, e.g. 'CONFIG'
	 * @param {Object, null} [value_] value to store
	 * @return {Object, String, Bool, undefined} Stored value, returns undefined if no value was found
	 */
	api.set = function(sKey_, sGroup_, value_) {
		// prevent missing arguments
		if (typeof sKey_ === 'undefined' || typeof value_ === 'undefined') {
			return false;
		}
		// set grouped value
		if (sGroup_) {
			// create group if necessary
			if (!api.CONTAINER[sGroup_]) {
				api.CONTAINER[sGroup_] = {};
			}
			// set value
			api.CONTAINER[sGroup_][sKey_] = value_;
			//delete value if necessary
			if (value_ === null) {
				delete api.CONTAINER[sGroup_][sKey_];
			}
		}
		// set value inside the root-object
		else {
			api.CONTAINER[sKey_] = value_;
			//delete value if necessary
			if (value_ === null) {
				delete api.CONTAINER[sKey_];
			}

		}

		/* jshint -W030 */

		// return reference to stored value
		return ((sGroup_) ? api.CONTAINER[sGroup_][sKey_] :	api.CONTAINER[sKey_]) || undefined;
	};

	/**
	 * Deletes stored value, bridge to this.set(*,*, null)
	 * @param {String} sKey_
	 * @param {String, null} [sGroup_] Group, e.g. 'CONFIG'
	 * @return {Void}
	 */
	api.unset = function(sKey_, sGroup_) {
		api.set(sKey_, sGroup_, null);
	};

	return api;

}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 47 */
/*!**********************************!*\
  !*** ./js/lib/jquery.ie.cors.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {/*!
 * jQuery IE CORS Plugin
 * http://api.brain-map.org/examples/doc/manannot/javascripts/jquery.ie.cors.js.html
 *
 * Copyright 2012 Allen Institute for Brain Science Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
 */
(function (jQuery) {
	if (window.XDomainRequest) {
		jQuery.ajaxTransport(function (s) {
			if (s.crossDomain && s.async) {
				if (s.timeout) {
					s.xdrTimeout = s.timeout;
					delete s.timeout;
				}
				var xdr;
				return {
					send: function (_, complete) {
						function callback(status, statusText, responses, responseHeaders) {
							xdr.onload = xdr.onerror = xdr.ontimeout = jQuery.noop;
							xdr = undefined;
							complete(status, statusText, responses, responseHeaders);
						}
						xdr = new window.XDomainRequest();
						xdr.onload = function () {
							callback(200, "OK", {
								text: xdr.responseText
							}, "Content-Type: " + xdr.contentType);
						};
						xdr.onerror = function () {
							callback(404, "Not Found");
						};
						xdr.onprogress = function () {};
						if (s.xdrTimeout) {
							xdr.ontimeout = function () {
								callback(0, "timeout");
							};
							xdr.timeout = s.xdrTimeout;
						}

						xdr.open(s.type, s.url, true);
						xdr.send((s.hasContent && s.data) || null);
					},
					abort: function () {
						if (xdr) {
							xdr.onerror = jQuery.noop();
							xdr.abort();
						}
					}
				};
			}
		});
	}
})(jQuery);
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 48 */
/*!********************************!*\
  !*** ./js/app/module/error.js ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
 * @description shows error layers. you can open a layer with:
 * "jQuery('body').trigger('nemo.error', 'MESSAGE TO SHOW');"
 * if you leave out the error message a default one will be used
 * @namespace nemo.module.error
 * @depends
 */
// TODO: #error-001 - resolve dependency to html-template
// TODO: #error-002 - resolve dependency to doT
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! core/layer/api */ 10), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/default-error.tpl */ 125), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (EVENTS, LAYER, TPL_RENDERER, ERROR_TPL, DOM_UTILS) { //eslint-disable-line max-params
	"use strict";
	/**
	 * @exports configurator/conflict
	 */
	var
	//Private
		__ = {},
		//Public API
		exports = {
			__: __
		};

		__.oDefaults = {
			layerSelectorClose: '.nm-error-layer .nm-button-close',
			layerSelectorOK: '.nm-error-layer .nm-j-ok-btn'
		};
	/**
	* global Error Handler
	* @param{object|array|string} error_ - can be either object with attributes message and headline or an array [headline,message] or just a messagetext
	* @returns {void} nothing
	*/
	__.onError = function (error_) {
		exports.handleError(__.getErrorTexts(error_));
	};
	/**
	* generates error message and headline from diffrent kinds of error params
	* @param {object|array|string} error_ - can be either object with attributes message and headline or an array [headline,message] or just a messagetext
	* @returns {object} textobject with message and headline
	*/
	__.getErrorTexts = function (error_) {
		var textObj = {
			errorMessage: null,
			errorHeadline: null
		};
		//handle Error Array [headline,message]
		if (Array.isArray(error_)) {
			textObj.errorHeadline = error_[0];
			textObj.errorMessage = (error_.length === 2 && !!error_[1]) ? error_[1] : null;
			return textObj;
		}
		//handle Error Message-String
		if (typeof error_==="string") {
			textObj.errorMessage = error_;
			return textObj;
		}
		//handle Error Object with message and headline attribute
		if (!!error_&& (!!error_.message || !!error_.headline)) {
			textObj.errorMessage = error_.message;
			textObj.errorHeadline = error_.headline;
			return textObj;
		}
		return textObj;
	};
	/**
	 * add event Listener
	 * @returns {void}
	 */
	__.addEvents = function () {
		__.domEventDelegate.on('click', __.oDefaults.layerSelectorClose, __.closeLayer);
		__.domEventDelegate.on('click', __.oDefaults.layerSelectorOK, __.closeLayer);
	};
	/**
	 * remove event Listener
	 * @returns {void}
	 */
	__.removeEvents = function () {
		__.domEventDelegate.off('click', __.oDefaults.layerSelectorClose, __.closeLayer);
		__.domEventDelegate.off('click', __.oDefaults.layerSelectorOK, __.closeLayer);
	};
	/**
	 * open Error Layer
	 * @param {string} layerName - name of the template
	 * @param {string} tplHtml - template content
	 * @param {function} closeCallBackFn - close callback function
	 * @returns {Promise} - a Promise (returning a layer instance on resolve)
	 */
	__.openLayer = function (layerName, tplHtml, closeCallBackFn) {
		//returns promise on open
		return new Promise(function (resolve, reject) {
			var layerPromise = LAYER.open(layerName, tplHtml, closeCallBackFn);
			layerPromise.then(function (layerInstance) {
				__.layerInstance = layerInstance;
				__.addEvents();
				resolve(__.layerInstance);
			}, function (err) {
				reject(err);
			});
		});
	};
	/**
	 * close layer by triggering the close method on the layer instance
	 * @param {event} event - click event
	 * @returns {Promise} closed
	 */
	__.closeLayer = function (event) {
		var promise, redirectURL;
		// special handling for NEMOBA-7838
		redirectURL = __.getRedirectURL();
		if (redirectURL !== null) {
			window.location.href = redirectURL;
		}
		__.cancelEvent(event);
		//Layer Instance returns promise on close
		promise = __.layerInstance.close();
		return promise.then(function () {
			__.layerInstance = null;
			__.onLayerClose();
		}, function (err) {
			throw new TypeError("Error closing error Layer: " + err.message);
		});
	};
	/**
	 * @returns {String} redirectURL
	 */
	__.getRedirectURL = function () {
		var body = DOM_UTILS.getElement('body');
		return DOM_UTILS.getDataAttribute(body, 'redirect-url');
	};
	/**
	 * prevent default event behavior
	 * @param  {Object} event_ e.g. a click event
	 * @return {Void}@returns {void}
	 */
	__.cancelEvent = function (event_) {
		if (!!event_ && typeof event_.preventDefault === 'function') {
			event_.preventDefault();
		}
	};
	/**
	 * close CallBack (e.g. on shader click)
	 * @returns {void}
	 */
	__.onLayerClose = function () {
		__.removeEvents();
	};
	__.initialize = function () {
		//add error listener
		__.eventBus.on(EVENTS.ERROR, __.onError);
		//__.legacyEventBus.on(EVENTS.ERROR, __.onError);
	};
	/**
	 * handle an error response
	 * opens an error layer
	 * @param {object} error_ - the raw error object
	 * calls LAYER_API.open
	 * @returns {void} nothing
	 */
	exports.handleError = function (error_) {
		var templateType,templateString,$messageEl,html,errorData;
		return new Promise(function (resolve, reject) {
			templateType = "error-layer";
			errorData=error_;
			errorData.errorHeadline=!!errorData.errorHeadline?errorData.errorHeadline:window.i18n['error-layer.headline'];
			templateString = DOM_UTILS.renderTemplate(ERROR_TPL, errorData);
			__.renderedElement = DOM_UTILS.createElementsFromHtmlString(templateString)[0];
			//set default error message if none set
			if (!errorData.errorMessage) {
				$messageEl = DOM_UTILS.getElement('.nm-error-layer-message', __.renderedElement);
				errorData.errorMessage  = $messageEl.getAttribute('data-defaultErrorMessage');
				$messageEl.innerText = errorData.errorMessage;
			}
			html = __.renderedElement.outerHTML;
			__.openLayer(templateType, html, __.closeLayer).then(resolve, reject);
		});
	};
	exports.initializePromise = function (eventBus_) {
		return new Promise(function (resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate("body");
			__.initialize();
			resolve("module/error.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 49 */
/*!*********************************!*\
  !*** ./js/app/module/scroll.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// TODO: #scroll-001 - fix dependency to html-template
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, DOM_UTILS) {
	"use strict";
	var __ = {},
		exports = {
			__: __
		};
	__.oDefaults = {
		layerWrapperSelector: '.nm-layer-wrapper',
		scrollDataAttributeName: 'data-scroll',
		layerSubstr: '.nm-layer-opened .nm-layer '
	};
	/**
	 * handle clicks on scroll anchors
	 * @param {Event} event_ - dom click event
	 * @returns {void}
	 */
	__.handler = function (event_) {
		var scrollToElementSelector,
			scrollElements, scrollElement,
			scrollToPosition;
		event_.preventDefault();
		scrollToElementSelector = __.getScrollAnchorClassSelector(event_.target.getAttribute(__.oDefaults.scrollDataAttributeName));
		//if we don't have a class and a matching element there will be nothing do to
		if (scrollToElementSelector && DOM_UTILS.isElement(scrollToElementSelector)) {
			if (DOM_UTILS.selectorIsInLayerContext(scrollToElementSelector)) {
				scrollElements = DOM_UTILS.getElementsArray(__.oDefaults.layerSubstr + scrollToElementSelector);
				scrollElement = DOM_UTILS.getElement(__.oDefaults.layerWrapperSelector);
			} else {
				scrollElements = DOM_UTILS.getElementsArray(scrollToElementSelector);
				scrollElement = DOM_UTILS.getElement('body');
			}
			// remove hidden elements
			scrollElements = scrollElements.filter(function (element) {
				return !DOM_UTILS.isHidden(element);
			});
			// get the position of the element (ignore multiple occurences)
			scrollToPosition = __.getElementsScrollPosition(scrollElements);
			// scroll content (window or layer)
			__.scrollContent(scrollElement, scrollToPosition);
		}
	};
	/**
	 * get className Selector from achorname
	 * @param {string} anchorName_ - anchorname
	 * @returns {string} selector
	 */
	__.getScrollAnchorClassSelector = function (anchorName_) {
		var className = anchorName_;
		//if we don't have a class, just return because there is nothing do to
		if (typeof className !== 'string' || className.length < 2) {
			className = null;
		} else {
			//add '.' to className
			className = '.' + className;
		}
		return className;
	};
	/**
	 * we need to scroll in different elements,
	 * depending of where the element to scroll to is (layer or page)
	 * @param {HTMLElement} scrollElement_ - content to scroll
	 * @param {number} scrollToPosition_ - position to scroll to
	 * @return {void} nothing
	 */
	__.scrollContent = function (scrollElement_, scrollToPosition_) {
		if (DOM_UTILS.isElement(scrollElement_)&&!isNaN(scrollToPosition_)) {
			if(scrollElement_ === document.body){
				DOM_UTILS.scrollTo(scrollToPosition_, 400);
			} else {
				DOM_UTILS.animateElementY(scrollToPosition_, scrollElement_ ,400);
			}
		}
	};

	/**
	 * scrollToElement - public scroll to element function with distance parameter
	 * @param  {HtmlElement} element - element to scroll to
	 * @param  {Number} distance - distance on top of element to scroll
	 * @return {void} - returns nothing
	 */
	exports.scrollToElement = function (element, distance) {
		var scrollToPosition = __.getElementsScrollPosition([element]),
			body = DOM_UTILS.getElement('body');
		__.scrollContent(body, scrollToPosition - distance);
	};

	/**
	 * @param {array} scrollElements_ - found elements mathing the selector
	 * @param {string} scrollClassName_ - initial className for this scroll anchor
	 * @return {number} scrollToPosition - position to scroll to
	 */
	__.getElementsScrollPosition = function (scrollElements_, scrollClassName_) {
		var scrollToPosition = 0,
			scrollOffsetY = parseInt(window.scrollY || window.pageYOffset, 10);
		if (scrollElements_ && scrollElements_[0]) {
			// get the position of the element (first found element matching the selector) to scroll to
			scrollToPosition = parseInt(scrollElements_[0].getBoundingClientRect().top + scrollOffsetY, 10);
			//BUGFIX::ignore duplicate ".nm-top" marker and jump to Ypos=0
			if (scrollElements_.length > 1 && scrollClassName_ === "nm-top") {
				scrollToPosition = 0;
			}
		}
		return scrollToPosition;
	};
	__.addEvents = function () {
		// #scroll-001
		DOM_UTILS.getEventDelegate("body").on('click', '.nm-j-scroll', __.handler);
	};
	exports.initializePromise = function (eventBus_) {
		return new Promise(function (resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/scroll.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 50 */
/*!**************************************!*\
  !*** ./js/app/module/swipe-stage.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
 * @description
 * @depends
 */


!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS) {

	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	var _startPos = {
		x: 0,
		y: 0
	};
	var _sensitivity = 25;
	var _xDirection = "none";
	var _yDirection = "none";
	var _deltaX = 0;
	var _deltaY = 0;
	var $_stage;
	var _eventLookup = {
		touchdevice: {
			down: 'touchstart',
			move: 'touchmove',
			up: 'touchend'
		},
		desktopdevice: {
			down: 'mousedown',
			move: 'mousemove',
			up: 'mouseup'
		}
	};
	var _down = false;
	var _deviceType = 'desktopdevice'; //'touchdevice'
	__.isTouchDevice = function() {
		return !!('ontouchstart' in window) || !!(navigator.msMaxTouchPoints);
	};

	__.handleMouseDown = function(event) {
		_down = false;
		/*jslint maxlen: 175 */
		if (event.target.nodeName.toLowerCase() !== "select" && event.target.nodeName.toLowerCase() !== "input" && event.target.nodeName.toLowerCase() !== "option") {
			_down = true;
		}
		_deltaY = 0;
		_deltaX = 0;
		_startPos.x = event.pageX || event.originalEvent.changedTouches[0].pageX;
		_startPos.y = event.pageY || event.originalEvent.changedTouches[0].pageY;
		$_stage.off(_eventLookup[_deviceType].up, __.handleMouseUp).on(_eventLookup[_deviceType].up, __.handleMouseUp);
		if (!__.isTouchDevice()) {
			$_stage.off(_eventLookup[_deviceType].move, __.handleMouseMove).on(_eventLookup[_deviceType].move, __.handleMouseMove);
		}
	};
	__.triggerStageViewChange = function(direction_) {
		if (direction_ === "right") {
			jQuery("li.nm-backarrow").trigger('click.stage.remote');

		} else {
			jQuery("li.nm-nextarrow").trigger('click.stage.remote');
		}
	};

	__.handleMouseUp = function(event) {
		_down = false;
		_deltaX = _startPos.x - (event.pageX || event.originalEvent.changedTouches[0].pageX);
		_deltaY = _startPos.y - (event.pageY || event.originalEvent.changedTouches[0].pageY);
		if (_deltaX > 0) {
			_xDirection = "left";
		} else {
			_xDirection = "right";
		}
		if (_deltaY < 0) {
			_yDirection = "down";
		} else {
			_yDirection = "up";
		}

		if (Math.abs(_deltaX) > _sensitivity && Math.abs(_deltaY) < _sensitivity) {
			__.triggerStageViewChange(_xDirection);
		}
	};
	__.handleMouseMove = function(event) {
		if (_down) {
			_deltaX = _startPos.x - (event.pageX || event.originalEvent.changedTouches[0].pageX);
			_deltaY = _startPos.y - (event.pageY || event.originalEvent.changedTouches[0].pageY);

			if (_deltaY < 0) {
				_yDirection = "down";
			} else {
				_yDirection = "up";
			}
			if (_deltaX > 0) {
				_xDirection = "left";
			} else {
				_xDirection = "right";
			}
			//horizontal swipe
			if (Math.abs(_deltaX) > _sensitivity && Math.abs(_deltaY) < _sensitivity) {
				__.removeSwipeEvents();
				_down = false;
				__.triggerStageViewChange(_xDirection);

			}
		}
	};
	__.removeSwipeEvents = function() {
		$_stage.off(_eventLookup[_deviceType].move, __.handleMouseMove);
		$_stage.off(_eventLookup[_deviceType].up, __.handleMouseUp);
	};


	exports.disableSwipe = function() {
		$_stage.off(_eventLookup[_deviceType].move, __.handleMouseMove);
		$_stage.off(_eventLookup[_deviceType].up, __.handleMouseUp);
		$_stage.off(_eventLookup[_deviceType].down, __.handleMouseDown);
	};

	exports.enableSwipe = function() {
		$_stage.off(_eventLookup[_deviceType].down, __.handleMouseDown).on(_eventLookup[_deviceType].down, __.handleMouseDown);
	};


	__.addEvents = function() {
		$_stage = jQuery('.nm-stage');
		if (__.isTouchDevice()) {
			_deviceType = 'touchdevice';
		}
		$_stage.find("img").on("dragstart", function(e) {
			e.preventDefault();
		});
		$_stage.off(_eventLookup[_deviceType].down, __.handleMouseDown).on(_eventLookup[_deviceType].down, __.handleMouseDown);
	};

	/**
	 * Constructor
	 * @return {Void}
	 */
	__.initialize = function() {
		/*
		 * add events for new pages and layers
		 */
		__.addEvents();
		__.eventBus.on(EVENTS.PAGE_LOADED, __.addEvents);
		__.eventBus.on(EVENTS.UPDATE_VIEW_STATE, __.addEvents);
	};


	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/swipe-stage.js");
		});
	};
	return exports;

}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 51 */
/*!***********************************!*\
  !*** ./js/app/module/homepage.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 96 */
/* global SETUPS */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
    __webpack_require__(/*! jquery */ 1)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery) {
	"use strict";

	var $ = jQuery;

	var _updateCacheUrl = (function () {//eslint-disable-line wrap-iife
		var cacheTimestamp = null;
		var getCacheTimestamp = function(now) {
			// cache will invalidate every ten minutes
			return '' +
				now.getUTCFullYear() +
				('0' + (now.getUTCMonth() + 1)).slice(-2) +
				('0' + now.getUTCDate()).slice(-2) + '-' +
				('0' + now.getUTCHours()).slice(-2) +
				Math.floor(now.getUTCMinutes() / 30);
		};
		var updateContent = function (dataattr, callback) {
			$("[data-" + dataattr + "]").each(function(i, el){
				var $el = $(el);
				var cacheUpdateUrl = $el.data(dataattr);
				var cachedUpdateUrl = cacheUpdateUrl.replace("CACHETIMESTAMP", cacheTimestamp);
				$el.load(cachedUpdateUrl, callback);
			});
		};
		return function(dataattr, callback) {
			if (cacheTimestamp === null && $("[data-" + dataattr + "]").length > 0) {
				$.ajax({
					type: "HEAD",
					url: window.location,
					timeout:1000,
					success: function(message,text,response){
						var now = new Date(response.getResponseHeader("Date"));
						cacheTimestamp = getCacheTimestamp(now);
						updateContent(dataattr, callback);
					},
					error: function(response,text,errorThrown){
						callback("", "error", null);
					}
				});
			} else {
				updateContent(dataattr, callback);
			}
		};
	})();

	var _initializePromise = function() {
		return new Promise(function(resolve) {
			if (SETUPS.get('nemo.homepage.cacheupdateurl')===true) {
				_updateCacheUrl("cacheupdateurl", function(){});
			}
			resolve("module/homepage.js");
		});
	};

	return {
		initializePromise: _initializePromise,
		updateCacheUrl: _updateCacheUrl
	};
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 52 */
/*!*****************************************!*\
  !*** ./js/app/module/renderinglayer.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 206 */
/*eslint max-params: [2, 7]*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! core/template */ 5),
	__webpack_require__(/*! text!templates/renderinglayer.tpl */ 166),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! core/layer/jslayer */ 28),
  __webpack_require__(/*! tracking/renderinglayer-tracker */ 20)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, TPL_RENDERER, RENDERINGLAYER_TPL, API, JSLAYER, RENDERINGLAYER_TRACKER) {//eslint-disable-line max-params
	"use strict";

	var __ = {},
		exports = {
			'__': __
		};

  exports.initialized = false;

  __.activeImageSrc = false;

  __.interiorImages = [];
  __.exteriorImages = [];
  __.exteriorOpenImages = [];

  __.min360ImgCount = 6;

  __.oDefaults = {
		//classes
		'sClassActive': 'nm-active',
		'sClassNoThumbnailAnimation': 'nm-no-animation',
		'sClassAnimate': 'nm-animate',
		'sClassCabrioOpen': 'nm-cabrio-open',

		'sClassSelectorClosed': 'nm-icon-expand-white',
		'sClassSelectorOpen': 'nm-icon-collapse-white',

		'sClassItemExterior': 'nm-js-exterior',
		'sClassItemExteriorOpen': 'nm-js-exterior-open',
		'sClassItemInterior': 'nm-js-interior',

		'sAttrDisplayedRenderingView': 'data-renderimage-view',

		'sIdToggleExterior': 'nm-renderinglayer-exteriortoggle',
		'sIdToggleExteriorOpen': 'nm-renderinglayer-exterioropentoggle',
		'sIdToggleInterior': 'nm-renderinglayer-interiortoggle',


		// selectors
		'sSelectorColorItems': '#nm-renderinglayer-extcolor-selection-color li',
		'sSelectorOpenButton': '.nm-renderinglayer-open',

		'sSelectorRenderingLayerOuter': '.nm-layer-renderinglayer',
		'sSelectorRenderingLayer': '.nm-renderinglayer',

		'sSelectorItemExterior': '.nm-js-exterior',
		'sSelectorItemExteriorOpen': '.nm-js-exterior-open',
		'sSelectorItemInterior': '.nm-js-interior',

		'sSelectorDisplayedRenderingImage': '.nm-basket-image .nm-j-configurator-renderimage',

		'sSelectorRenderingCounterCurrent': '.nm-renderingcounter-current',
		'sSelectorRenderingCounterTotal': '.nm-renderingcounter-total',

		'sSelectorBack': '.nm-renderinglayer .nm-backarrow',
		'sSelectorNext': '.nm-renderinglayer .nm-nextarrow',
		'sSelectorStageImage': '.nm-renderinglayer-image',

		'sSelectorStageImages': '.nm-renderinglayer-stageimages',
		'sSelectorActiveStageImageWrapper': '.nm-renderinglayer-imagewrapper.nm-active',
		'sSelectorFirstStageImageWrapper': '.nm-renderinglayer-imagewrapper:first-child',
		'sSelectorActiveStageImage': '.nm-renderinglayer-imagewrapper.nm-active .nm-renderinglayer-image',

		'sSelectorThumbnailArea': '.nm-renderinglayer-thumbnails',
		'sSelectorThumbnail': '.nm-renderinglayer-item .nm-rl-placeholder',
		'sSelectorPlusButton': '.nm-renderinglayer-item .nm-icon-plus',

		'sSelectorThumbnailActive': '.nm-renderinglayer-item .nm-rl-placeholder.nm-active',

		'sSelectorColorSelector': '.nm-render-color-selector',
		'sSelectorColorSelectorWrapper': '.nm-render-color-selector-wrapper',
		'sSelectorOptionsSelector': '.nm-render-animation-selector',

		'sSelectorCurrentColorIndicator': '.selector-current-selected .nm-render-active-color'
	};

	__.isInteriorActive = function(currentRenderingView) {
		var interiorActive = false;

		if (currentRenderingView.indexOf('interior') === 0 || currentRenderingView.indexOf('dashboard') === 0 || currentRenderingView.indexOf('rearseat') === 0) {
			interiorActive = true;
		}
		return interiorActive;
	};

	__.isOpenActive = function(currentRenderingView) {
		var open = false;

		if (currentRenderingView.indexOf('_open') > 0) {
			open = true;
		}
		return open;
	};

	__.getActiveImageSrc = function(params) {

		if (params.interiorActive && __.interiorImages.length > 0) {
			__.activeImageSrc = __.interiorImages[0].image;
		} else if (params.open && __.exteriorOpenImages.length > 0) {
			__.activeImageSrc = __.exteriorOpenImages[0].image;
		} else if (__.exteriorImages.length > 0) {
			__.activeImageSrc = __.exteriorImages[0].image;
		} else {
			__.activeImageSrc = '';
		}
	};

	/**
	 * get configuration assets from DPU API / SETUPS
	 * @returns {void}
	 */
	__.getConfigurationAssets = function() {
		var configurationAssets = API.getConfigurationAssets();		

		if (!configurationAssets || Object.keys(configurationAssets).length <= 0) {
			configurationAssets = SETUPS.get('nemo.default.data').configuration.assets;
		}

		__.generateRenderingLayerInnerHtml(configurationAssets);
		__.initListeners();
	};

	/**
	 * poll configuration assets
	 * @returns {void}
	 */
	__.pollConfigurationAssets = function() {

		if (jQuery(__.oDefaults.sSelectorRenderingLayer).length > 0) {
			console.log("RL: abort poll request");
			return;
		}
		__.getConfigurationAssets();
	};

	__.parseRenderImageTypeFromHash = function(hashString) {
		var renderImageType,
			renderinglayerRegExp,
			match;

		if (hashString) {
			renderinglayerRegExp =(/(renderingLayer)(\.(\S)+)?/);
			//check for 'renderingLayer' param within the hashString
			match=hashString.match(renderinglayerRegExp);
			if(match){
				//remove following url params (if any)
				match = match[0].split('&')[0];
				match = match.split('.');
				//has renderview segment?
				renderImageType = match.length === 2 ? match[1]:false;
			}
			return renderImageType;
		} else {
			return false;
		}
	};

	__.setAllowedItems = function(configurationAssets) {
		var property;
		var hiddenAssets = !!SETUPS.get('nemo.hiddenAssets') ? SETUPS.get('nemo.hiddenAssets').replace(/"/g,"") : "";
		__.activeRenderings = [];

		hiddenAssets = (hiddenAssets.length > 0) ? hiddenAssets.split(",") : [];
		console.log('hiddenAssets: ' + hiddenAssets);

		for (property in configurationAssets) {
			//additionally check if property is NOT set in hiddenAssets
			if (property && hiddenAssets.indexOf(property) === -1) {
				__.activeRenderings.push(property);
			}
		}
	};

	/**
	 * generate inner html of layer
	 */
	__.generateRenderingLayerInnerHtml = function(configurationAssets) {

		var carline = API.getCarline();

		var activeColor = API.getExtColor();

		var configuration = API.getConfiguration();

		var currentRenderingView = __.parseRenderImageTypeFromHash(window.location.hash);

		var params = {};
		var property;

		if (!currentRenderingView) {
			currentRenderingView = jQuery(__.oDefaults.sSelectorDisplayedRenderingImage).attr(__.oDefaults.sAttrDisplayedRenderingView);
		}

		__.setAllowedItems(configurationAssets);

		if (__.activeRenderings.indexOf(currentRenderingView) === -1) {
			currentRenderingView = 'exterior_front';
		}

		params.interiorActive = __.isInteriorActive(currentRenderingView);
		params.open = __.isOpenActive(currentRenderingView);

		__.preloadImages = [
			'exterior_straight_front',
			'exterior_front',
			'exterior',
			'exterior_back',
			'exterior_straight_back'
		];

		__.preloadImagesOpen = [
			'exterior_straight_front_open',
			'exterior_front_open',
			'exterior_open',
			'exterior_back_open',
			'exterior_straight_back_open'
		];

		__.exteriorImages = __.extractAssets(carline, configurationAssets, currentRenderingView, 'exterior');
		__.exteriorImages = __.exteriorImages.concat(__.extractAssets(carline, configurationAssets, currentRenderingView, 'closeup'));
		__.exteriorOpenImages = __.extractAssets(carline, configurationAssets, currentRenderingView, 'exterior_open');
		__.exteriorOpenImages = __.exteriorOpenImages.concat(__.extractAssets(carline, configurationAssets, currentRenderingView, 'closeup_open'));
		params.openavailable = __.exteriorOpenImages.length > 0;
		__.interiorImages = __.extractAssets(carline, configurationAssets, currentRenderingView, 'interior');
		__.interiorImages = __.interiorImages.concat(__.extractAssets(carline, configurationAssets, currentRenderingView, 'dashboard'));
		__.interiorImages = __.interiorImages.concat(__.extractAssets(carline, configurationAssets, currentRenderingView, 'rearseat'));

		if (!__.activeImageSrc) {
			__.getActiveImageSrc(params);
		}

		if (!currentRenderingView) {
			currentRenderingView = 'exterior_front';
		}

		params.exterior = __.exteriorImages;
		params.exterior_open = __.exteriorOpenImages;
		params.interior = __.interiorImages;
		params.active_image_src = __.activeImageSrc;
		params.currentRenderingView = currentRenderingView;
		params.config = configuration;
		params.activeColor = activeColor;

		var innerHtml = TPL_RENDERER.render(RENDERINGLAYER_TPL, params);

		jQuery(__.oDefaults.sSelectorRenderingLayerOuter).html(innerHtml);
	};


	/**
	 * generate base html for rendering layer
	 * @returns {String} html for rendering layer
	 */
	__.generateRenderingLayerHtml = function() {

		var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
		var maxLayerHeight = 975; // 840 for image + 135 for thumbnails
		var maxLayerWidth = 1400;
		var ratio = maxLayerWidth / maxLayerHeight;

		var customStyle = '';

		if (maxLayerHeight > height) {
			customStyle = ' style="width: ' + height * ratio + 'px;"';
			}

		return '<div class="nm-layer-wrapper nm-layer-wrapper-renderinglayer"><div class="nm-layer-renderinglayer nm-j-jslayer nm-layer"' +
		customStyle + '></div></div>';
	};


	__.addEvents = function() {
		JSLAYER.register('renderingLayer', __.generateRenderingLayerHtml);
		//__.eventBus.on(EVENTS.PAGE_LOADED, __.handler);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handler);
		exports.initialized = true;
	};

	exports.dispose = function () {
		//__.eventBus.off(EVENTS.PAGE_LOADED, __.handler);
		__.eventBus.off(EVENTS.LAYER_LOADED, __.handler);
	};

  exports.disableFor3D = function() {
    jQuery(__.oDefaults.sSelectorOpenButton).off('click', __.handlerOpenToggle);
    jQuery(__.oDefaults.sSelectorBack).off('click', __.handlerBackClick);
    jQuery(__.oDefaults.sSelectorNext).off('click', __.handlerNextClick);
    jQuery(__.oDefaults.sSelectorThumbnail).off('click', __.handlerThumbnailClick);
    //jQuery(__.oDefaults.sSelectorPlusButton).off('click', __.handlerPlusButtonClick);

    jQuery(__.oDefaults.sSelectorStageImage).off('mousedown', __.activateSwipe);
    jQuery(__.oDefaults.sSelectorStageImage).off('touchstart', __.activateSwipe);
  };

	/**
	 * layer handler for layer loaded event
	 * proceeds in mechanism, if it is a rendering layer
	 * @returns {void}
	 */
	__.handler = function() {
		if (jQuery(__.oDefaults.sSelectorRenderingLayerOuter).length > 0) {
			__.pollConfigurationAssets();
		}
	};

  __.initListeners = function() {

    __.interiorToggle = document.getElementById(__.oDefaults.sIdToggleInterior);
    __.exteriorOpenToggle = document.getElementById(__.oDefaults.sIdToggleExteriorOpen);
    __.exteriorToggle = document.getElementById(__.oDefaults.sIdToggleExterior);

    // remove possibly already active events
    jQuery(__.oDefaults.sSelectorOpenButton).off('click', __.handlerOpenToggle);
    jQuery(__.oDefaults.sSelectorBack).off('click', __.handlerBackClick);
    jQuery(__.oDefaults.sSelectorNext).off('click', __.handlerNextClick);
    jQuery(__.oDefaults.sSelectorThumbnail).off('click', __.handlerThumbnailClick);
    jQuery(__.oDefaults.sSelectorPlusButton).off('click', __.handlerPlusButtonClick);

    // refresh content, if still empty
    if (jQuery(__.oDefaults.sSelectorStageImage).first().attr('src') === '') {
      __.pollConfigurationAssets();
    }
    __.updateCounter();

    jQuery(__.oDefaults.sSelectorOpenButton).on('click', __.handlerOpenToggle);
    jQuery(__.oDefaults.sSelectorBack).on('click', __.handlerBackClick);
    jQuery(__.oDefaults.sSelectorNext).on('click', __.handlerNextClick);
    jQuery(__.oDefaults.sSelectorThumbnail).on('click', __.handlerThumbnailClick);
    jQuery(__.oDefaults.sSelectorPlusButton).on('click', __.handlerPlusButtonClick);

    if (__.exteriorOpenToggle && __.exteriorOpenToggle.checked) {
      __.preloadDefinedImages(__.preloadImagesOpen, 'exterior_open');
    }
    if (__.exteriorToggle && __.exteriorToggle.checked) {
      __.preloadDefinedImages(__.preloadImages, 'exterior');
    }

    __.activateSwipeOrDrag();

    // exports.enableColorSelector();

    jQuery(window).on('resize', __.resizeLayer);
    __.resizeLayer();
    __.eventBus.emit(EVENTS.RENDERINGLAYER_LOADED);
  };

  __.determineImageObjectsForArea = function(area) {

    var imageObjects = [];

    if (area === 'interior') {
      imageObjects = __.interiorImages;
    } else if (area === 'exterior_open') {
      imageObjects = __.exteriorOpenImages;
    } else {
      imageObjects = __.exteriorImages;
    }
    return imageObjects;
  };

  /**
   * @param imgKeys:  array of image keys to load (e.g. exterior_front)
   * @param area:     area to proload in (e.g. exterior)
   */
  __.preloadDefinedImages = function(imgKeys, area) {

    var i, l, img;
    var imageObjects = __.determineImageObjectsForArea(area);

    for (i=0, l=imageObjects.length; i<l; i++) {

      if (imgKeys.indexOf(imageObjects[i].name) >= 0) {
        img = new Image();
        img.src = imageObjects[i].image;
      }
    }
  };


  /**
   * activate swipe handler or 360° drag handler if applicable
   */
  __.activateSwipeOrDrag = function() {

    var exteriorToggle = document.getElementById(__.oDefaults.sIdToggleExterior);
    var exteriorOpenToggle = document.getElementById(__.oDefaults.sIdToggleExteriorOpen);
    var extThumbnailsCount;

    // cleanup events
    jQuery(__.oDefaults.sSelectorStageImage).off('mousedown', __.activateSwipe);
    jQuery(__.oDefaults.sSelectorStageImage).off('touchstart', __.activateSwipe);
    jQuery(__.oDefaults.sSelectorStageImage).off('mousedown', __.activateDrag);
    jQuery(__.oDefaults.sSelectorStageImage).off('touchstart', __.activateDrag);
    jQuery(document).off('mouseup', __.deactivateDrag);
    jQuery(document).off('touchend', __.deactivateDrag);
    jQuery(document).off('mouseup', __.deactivateSwipe);
    jQuery(document).off('touchend', __.deactivateSwipe);


    if (exteriorOpenToggle && exteriorOpenToggle.checked) {
      extThumbnailsCount = jQuery(__.oDefaults.sSelectorItemExteriorOpen).length;
    } else {
      extThumbnailsCount = jQuery(__.oDefaults.sSelectorItemExterior).length;
    }

    // check whether to enable 360°
    if ((exteriorToggle && exteriorToggle.checked || exteriorOpenToggle && exteriorOpenToggle.checked) && extThumbnailsCount >= __.min360ImgCount) {
      jQuery(__.oDefaults.sSelectorStageImage).on('mousedown', __.activateDrag);
      jQuery(__.oDefaults.sSelectorStageImage).on('touchstart', __.activateDrag);
      jQuery(document).on('mouseup', __.deactivateDrag);
      jQuery(document).on('touchend', __.deactivateDrag);
    } else {
      jQuery(__.oDefaults.sSelectorStageImage).on('mousedown', __.activateSwipe);
      jQuery(__.oDefaults.sSelectorStageImage).on('touchstart', __.activateSwipe);
      jQuery(document).on('mouseup', __.deactivateSwipe);
      jQuery(document).on('touchend', __.deactivateSwipe);
    }
  };

  __.getViewportHeight = function() {
    return window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
  };

  __.getViewportWidth = function() {
    return window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
  };

  __.fitToWidth = function(layerWidth, ratio, viewportWidth, viewportHeight) {
    var natImgWidth = 1400; // predefined
    var newWidth;

    if (natImgWidth > layerWidth) {
      newWidth = viewportHeight * ratio;
      if (newWidth <= viewportWidth) {
        jQuery(__.oDefaults.sSelectorRenderingLayerOuter).outerWidth(viewportHeight * ratio);
      } else {
        jQuery(__.oDefaults.sSelectorRenderingLayerOuter).outerWidth(viewportWidth);
      }
    }
  };

  // resize layer to fit into window
  __.resizeLayer = function() {
    var viewportHeight = __.getViewportHeight();
    var layerHeight = jQuery(__.oDefaults.sSelectorRenderingLayerOuter).outerHeight();
    var layerWidth = jQuery(__.oDefaults.sSelectorRenderingLayerOuter).outerWidth();
    var ratio = layerWidth / layerHeight;
    var viewportWidth = __.getViewportWidth();

    if (layerHeight > viewportHeight) {
      jQuery(__.oDefaults.sSelectorRenderingLayerOuter).outerWidth(viewportHeight * ratio);
    } else {
      __.fitToWidth(layerWidth, ratio, viewportWidth, viewportHeight);
    }
    __.eventBus.emit(EVENTS.RENDERINGLAYER_RESIZED);
  };

  __.calculateTotalItems = function() {
    var totalItems = 0;
    var exteriorOpenToggle = document.getElementById(__.oDefaults.sIdToggleExteriorOpen);
    var interiorToggle = document.getElementById(__.oDefaults.sIdToggleInterior);

    if (interiorToggle && interiorToggle.checked) {
      totalItems = jQuery(__.oDefaults.sSelectorItemInterior).length;
    } else if (exteriorOpenToggle && exteriorOpenToggle.checked) {
      totalItems = jQuery(__.oDefaults.sSelectorItemExteriorOpen).length;
    } else {
      totalItems = jQuery(__.oDefaults.sSelectorItemExterior).length;
    }
    return totalItems;
  };

  __.calculateCurrentItem = function(totalItems) {
    var currentItem = 0;
    var exteriorOpenToggle = document.getElementById(__.oDefaults.sIdToggleExteriorOpen);
    var interiorToggle = document.getElementById(__.oDefaults.sIdToggleInterior);

    if (interiorToggle && interiorToggle.checked) {
      currentItem = __.calculateCurrentPosition(__.oDefaults.sSelectorItemInterior, totalItems);
    } else if (exteriorOpenToggle && exteriorOpenToggle.checked) {
      currentItem = __.calculateCurrentPosition(__.oDefaults.sSelectorItemExteriorOpen, totalItems);
    } else {
      currentItem = __.calculateCurrentPosition(__.oDefaults.sSelectorItemExterior, totalItems);
    }
    return currentItem;
  };

  __.updateCounter = function() {
    var totalItems = __.calculateTotalItems();
    var currentItem = __.calculateCurrentItem(totalItems);

    if (typeof totalItems !== "undefined") {
      totalItems = (totalItems < 10) ? ("0" + totalItems) : totalItems;
      currentItem = (currentItem < 10) ? ("0" + currentItem) : currentItem;
      jQuery(__.oDefaults.sSelectorRenderingCounterTotal).html(totalItems);
      jQuery(__.oDefaults.sSelectorRenderingCounterCurrent).html(currentItem);
    }
  };

  __.calculateCurrentPosition = function(selector, totalItems) {
    var targetItems = jQuery(selector);
    var i;
    for (i=0; i<totalItems; i++) {
      if (targetItems.eq(i).hasClass(__.oDefaults.sClassActive)) {
        return i+1;
      }
    }
  };

  __.activateDrag = function(e) {
    if (jQuery(__.oDefaults.sSelectorStageImages).hasClass(__.oDefaults.sClassAnimate)) {
      return;
    }
    if (e.type === 'touchstart') {
      __.swipeX = e.originalEvent.pageX;
    } else {
      __.swipeX = e.pageX;
    }
    jQuery(document).on('mousemove', __.drag);
    jQuery(document).on('touchmove', __.drag);
  };

  __.deactivateDrag = function() {

    var activeMainImageKey = jQuery(__.oDefaults.sSelectorActiveStageImage).attr('data-renderimage-view');

    jQuery(document).off('mousemove', __.drag);
    jQuery(document).off('touchmove', __.drag);
    // set current main image active in thumbnails

    jQuery(__.oDefaults.sSelectorThumbnail).removeClass(__.oDefaults.sClassActive);
    jQuery(__.oDefaults.sSelectorThumbnail + '.' + activeMainImageKey).addClass(__.oDefaults.sClassActive);
  };

  __.activateSwipe = function(e) {
    if (e.type === 'touchstart') {
      __.swipeX = e.originalEvent.pageX;
    } else {
      __.swipeX = e.pageX;
    }
    jQuery(document).on('mousemove', __.swipe);
    jQuery(document).on('touchmove', __.swipe);
    RENDERINGLAYER_TRACKER.swipeHandler("Wipe");
  };

  __.deactivateSwipe = function() {
    jQuery(document).off('mousemove', __.swipe);
    jQuery(document).off('touchmove', __.swipe);
  };


  __.retrieveCurrentPos = function(e) {
    var pos;

    if (e.type === 'touchmove') {
      pos = e.originalEvent.pageX;
    } else {
      pos = e.pageX;
    }
    return pos;
  };

  __.doLeftDragAction = function(activeImage) {
    activeImage.removeClass(__.oDefaults.sClassActive);

    if (activeImage.prev().attr('data-view') && activeImage.prev().attr('data-view').indexOf('exterior') >= 0) {
        activeImage.prev().addClass(__.oDefaults.sClassActive);
    } else {
      activeImage.prev().prev().addClass(__.oDefaults.sClassActive);
    }
  };

  __.doRightDragAction = function(activeImage) {
      var firstImage;

      if (activeImage.next().length > 0 && activeImage.next().attr('data-view') && activeImage.next().attr('data-view').indexOf('exterior') >= 0) {
        activeImage.removeClass(__.oDefaults.sClassActive);
        activeImage.next().addClass(__.oDefaults.sClassActive);
      } else if (activeImage.attr('data-view') && activeImage.attr('data-view').indexOf('closeup') >= 0) {
        activeImage.removeClass(__.oDefaults.sClassActive);
        firstImage = jQuery(__.oDefaults.sSelectorFirstStageImageWrapper);
        firstImage.addClass(__.oDefaults.sClassActive);
      }
  };

  __.doDragAction = function(actionNext, actionPrev) {
    var activeImage = jQuery(__.oDefaults.sSelectorActiveStageImageWrapper);

    if (actionPrev && activeImage.prev().length > 0) {
      __.doLeftDragAction(activeImage);
    } else if (actionNext) {
      __.doRightDragAction(activeImage);
    }
  };

  __.drag = function(e) {
    var doAction = false;
    var actionPrev = false;
    var actionNext = false;

    var pos = __.retrieveCurrentPos(e);

    if (pos >= __.swipeX + 55) {
      doAction = true;
      actionPrev = true;
      __.swipeX += 55;
    } else if (pos <= __.swipeX - 55) {
      doAction = true;
      actionNext = true;
      __.swipeX -= 55;
    }

    if (doAction) {
      __.doDragAction(actionNext, actionPrev);
    }
  };

  __.getEventPos = function(e) {
    var pos;
    if (e.type === 'touchmove') {
      pos = e.originalEvent.pageX;
    } else {
      pos = e.pageX;
    }
    return pos;
  };

  __.swipe = function(e) {
    var pos = __.getEventPos(e);
    if (pos >= __.swipeX + 5) {
      __.deactivateSwipe(e);
      __.handlerBackClick(e);
    } else if (pos <= __.swipeX - 5) {
      __.deactivateSwipe(e);
      __.handlerNextClick(e);
    }
  };


  __.determineCarlineFallbackGroup = function(carline) {
    var carlineFallbackGroup = carline.charAt(0);

    // RS- und S-Modelle bekommen die gleichen Fallback-Renderings wie A-Modelle
    if (carline.indexOf('rs') === 0 || carline.indexOf('s') === 0) {
      carlineFallbackGroup = 'a';
    }

    // TT-Modelle zeigen wir als R(8)-Modelle an
    if (carline.indexOf('tt') === 0) {
      carlineFallbackGroup = 'r';
    }
    return carlineFallbackGroup;
  };

  __.getFallbackThumb = function(carlineFallbackGroup, property) {
    var url = window.location.href;
    var urlParts = url.split("/");
    var fallbackThumb;

    if (urlParts[2].indexOf('audi.local') >= 0) {
      fallbackThumb = urlParts[0] + '//' + urlParts[2] + '/cms4i-nemo/fallback-renderings/' +
          carlineFallbackGroup + '-thumbnail-' + property + '.jpg';
    } else {
      fallbackThumb = urlParts[0] + '//' + urlParts[2] + SETUPS.get('nemo.url.static') + '/cms4i-nemo/fallback-renderings/' +
          carlineFallbackGroup + '-thumbnail-' + property + '.jpg';
    }
    return fallbackThumb;
  };

  __.getFallbackImg = function(carlineFallbackGroup, property) {
    var url = window.location.href;
    var urlParts = url.split("/");
    var fallbackImg;

    if (urlParts[2].indexOf('audi.local') >= 0) {
      fallbackImg = urlParts[0] + '//' + urlParts[2] + '/cms4i-nemo/fallback-renderings/' +
          carlineFallbackGroup + '-fullscreen-' + property + '.jpg';
    } else {
      fallbackImg = urlParts[0] + '//' + urlParts[2] + SETUPS.get('nemo.url.static') + '/cms4i-nemo/fallback-renderings/' +
          carlineFallbackGroup + '-fullscreen-' + property + '.jpg';
    }
    return fallbackImg;
  };

  __.getRenderImageType = function(assetsObj, property) {
    var renderImageType = 'thumbnail';
    if (assetsObj[property].hasOwnProperty('thumbnail.16-9')) {
      renderImageType = 'thumbnail.16-9';
    } else if (assetsObj[property].hasOwnProperty('thumbnail.new')) {
      renderImageType = 'thumbnail.new';
    }
    return renderImageType;
  };

  __.getThumbnail = function(assetsObj, property, fallbackThumb, renderImageType) {
    var thumbImg = assetsObj[property][renderImageType];

    if (typeof thumbImg !== "undefined") {

      if (thumbImg.indexOf('?') === -1) {
        thumbImg = 'http://mediaservice.audi.com/media' + thumbImg + '?alt=' + fallbackThumb;
      } else {
        thumbImg = 'http://mediaservice.audi.com/media' + thumbImg;
      }
    }
    return thumbImg;
  };

  __.getFullImg = function(assetsObj, property, fallbackImg) {
    var fullImg;
    if (assetsObj[property].hasOwnProperty('fullscreen.new')) {
      fullImg = assetsObj[property]['fullscreen.new'];
    } else {
      fullImg = assetsObj[property].fullscreen;
    }

    if (typeof fullImg !== "undefined") {

      if (fullImg.indexOf('?') === -1) {
        fullImg = 'http://mediaservice.audi.com/media' + fullImg + '?alt=' + fallbackImg;
      } else {
        fullImg = 'http://mediaservice.audi.com/media' + fullImg;
      }
    }
    return fullImg;
  };

  __.checkForActiveImage = function(property, currentRenderingView, fullImg) {

    if (property === currentRenderingView) {
      __.activeImageSrc = fullImg;
    }
  };

  __.compliesWithCondition = function(assetsObj, property, assetType, isOpen) {
    var toReturn = false;

    if (property.indexOf(assetType) === 0 && assetsObj.hasOwnProperty(property) && __.activeRenderings.indexOf(property) >= 0) {
      if (isOpen && property.indexOf('_open') > 0) {
        toReturn = true;
      } else if (!isOpen && property.indexOf('_open') < 0) {
        toReturn = true;
      }
    }
    return toReturn;
  };

  __.determineAssetType = function(assetType) {
    var toReturn;
    if (assetType.indexOf('_open') > 0) {
      toReturn = assetType.substring(0, assetType.indexOf('_open'));
    } else {
      toReturn = assetType;
    }
    return toReturn;
  };

  __.isOpen = function(assetType) {
    var toReturn = false;
    if (assetType.indexOf('_open') >= 0) {
      toReturn = true;
    }
    return toReturn;
  };



	__.extractAssets = function(carline, assetsObj, currentRenderingView, origAssetType) {

		var toReturn = [];
		var fullImg, thumbImg, fallbackImg, fallbackThumb, renderImageType;

		var carlineFallbackGroup = __.determineCarlineFallbackGroup(carline);
		var assetType = __.determineAssetType(origAssetType);
		var isOpen = __.isOpen(origAssetType);

		var property;

		for (property in assetsObj) {

			if (__.compliesWithCondition(assetsObj, property, assetType, isOpen)) {

				fallbackThumb = __.getFallbackThumb(carlineFallbackGroup, property);
				fallbackImg = __.getFallbackImg(carlineFallbackGroup, property);

				renderImageType = __.getRenderImageType(assetsObj, property);
				thumbImg = __.getThumbnail(assetsObj, property, fallbackThumb, renderImageType);
				fullImg = __.getFullImg(assetsObj, property, fallbackImg);

				if (typeof fullImg !== "undefined") {
					__.checkForActiveImage(property, currentRenderingView, fullImg);
					toReturn.push({'name': property, 'image': fullImg, 'thumbnail': thumbImg, type: renderImageType});
				}
			}
		}
		return __.sortThumbs(assetType, isOpen, toReturn);
	};

  __.customArraySort = function(key, isOpen) {

    var sortOrder = [
      'exterior_straight_front',
      'exterior_front',
      'exterior',
      'exterior_back',
      'exterior_straight_back',
      'closeup_lights',
      'closeup_wheels',
      'interior',
      'dashboard',
      'rearseat'
    ];

    if (isOpen) {
      sortOrder = [
        'exterior_straight_front_open',
        'exterior_front_open',
        'exterior_open',
        'exterior_back_open',
        'exterior_straight_back_open',
        'closeup_lights_open',
        'closeup_wheels_open',
        'interior',
        'dashboard',
        'rearseat'
      ];
    }

    return function(a,b) {
      var toReturn = 0;
      if (sortOrder.indexOf(a[key]) < sortOrder.indexOf(b[key])) {
        toReturn = -1;
      } else {
        toReturn = 1;
      }
      return toReturn;
    };
  };


  /**
   * sort thumbnails into desired order
   * @param assetType:
   * @param openCar:
   * @param assets:
   */
  __.sortThumbs = function(assetType, openCar, assets) {
    return assets.sort(__.customArraySort('name', openCar));
  };

  __.toggleCheckAndPreload = function() {
     // - set exterior_open radio checked if unchecked and exterior radio else
    if (__.exteriorOpenToggle.checked) {
      __.exteriorToggle.checked = true;
      __.preloadDefinedImages(__.preloadImages, 'exterior');
    } else {
      __.exteriorOpenToggle.checked = true;
      __.preloadDefinedImages(__.preloadImagesOpen, 'exterior_open');
    }
  };

  __.setDefaultActiveThumbnail = function() {

    if (jQuery(__.oDefaults.sSelectorRenderingLayer).hasClass(__.oDefaults.sClassCabrioOpen)) {
      jQuery(__.oDefaults.sSelectorItemExteriorOpen).first().addClass(__.oDefaults.sClassActive);
    } else {
      jQuery(__.oDefaults.sSelectorItemExterior).first().addClass(__.oDefaults.sClassActive);
    }
  };

  __.retrieveCorrespondingCabrioKey = function(activeKey) {
    var correspondingKey;

    if (activeKey.indexOf('_open') > 0) {
      correspondingKey = activeKey.substring(0, activeKey.indexOf('_open'));
    } else {
      correspondingKey = activeKey + '_open';
    }
    return correspondingKey;
  };

  /**
   * handle click on open toggle
   * @param e:  the click event
   */
	__.handlerOpenToggle = function(e) {

    var activeThumbnail = jQuery(__.oDefaults.sSelectorThumbnailActive);
    var activeKey = activeThumbnail.attr('data-key');
    var correspondingKey;
    var correspondingThumbnail;

		e.preventDefault();

    // - set class so that thumbnail animation is inactive
    jQuery(__.oDefaults.sSelectorThumbnailArea).addClass(__.oDefaults.sClassNoThumbnailAnimation);

    __.toggleCheckAndPreload();

    // - remove class so that thumbnail animation is active again
    setTimeout(function() {
      jQuery(__.oDefaults.sSelectorThumbnailArea).removeClass(__.oDefaults.sClassNoThumbnailAnimation);
    }, 50);

    if (activeThumbnail.length === 0) {
      __.setDefaultActiveThumbnail();
    }

		if (jQuery(__.oDefaults.sSelectorRenderingLayer).hasClass(__.oDefaults.sClassCabrioOpen)) {
			jQuery(__.oDefaults.sSelectorRenderingLayer).removeClass(__.oDefaults.sClassCabrioOpen);
			jQuery(__.oDefaults.sSelectorOpenButton).html(window.i18n['rendering-layer.cabrio-open']);
		} else {
			jQuery(__.oDefaults.sSelectorRenderingLayer).addClass(__.oDefaults.sClassCabrioOpen);
			jQuery(__.oDefaults.sSelectorOpenButton).html(window.i18n['rendering-layer.cabrio-close']);
		}

    if (activeKey) {
      correspondingKey = __.retrieveCorrespondingCabrioKey(activeKey);
      correspondingThumbnail = jQuery('.' + correspondingKey);
      __.activateImage(correspondingThumbnail, false, false);
    } else {
      //console.log("failed to retrieve active thumbnail: ", activeThumbnail);
    }
	};





  exports.determinePrevFromActive = function(active) {

    var prev;

    if (active.hasClass(__.oDefaults.sClassItemExterior)) {
      prev = jQuery(__.oDefaults.sSelectorThumbnailActive).parent().prev().children(__.oDefaults.sSelectorItemExterior).get(0);
    } else if (active.hasClass(__.oDefaults.sClassItemExteriorOpen)) {
      prev = jQuery(__.oDefaults.sSelectorThumbnailActive).parent().prev().children(__.oDefaults.sSelectorItemExteriorOpen).get(0);
    } else if (active.hasClass(__.oDefaults.sClassItemInterior)) {
      prev = jQuery(__.oDefaults.sSelectorThumbnailActive).parent().prev().children(__.oDefaults.sSelectorItemInterior).get(0);
    }
    return prev;
  };

  exports.determineDefaultPrev = function() {

    var prev;

    if (__.interiorToggle.checked) {
      prev = jQuery(__.oDefaults.sSelectorItemInterior).last().get(0);
    } else if (__.exteriorOpenToggle && __.exteriorOpenToggle.checked) {
      prev = jQuery(__.oDefaults.sSelectorItemExteriorOpen).last().get(0);
    } else {
      prev = jQuery(__.oDefaults.sSelectorItemExterior).last().get(0);
    }
    return prev;
  };

  /**
   * handle click on prev button
   * @param e:  the click event
   */
	__.handlerBackClick = function(e) {

		var active = jQuery(__.oDefaults.sSelectorThumbnailActive);
		var prev;

    e.preventDefault();

		if (active.length > 0) {
      prev = exports.determinePrevFromActive(active);
		}

		if (typeof prev === 'undefined') {
      prev = exports.determineDefaultPrev();
		}
		__.activateImage(prev, true, 'prev');
	};

  exports.determineNextFromActive = function(active) {

    var next;

    if (active.hasClass(__.oDefaults.sClassItemExterior)) {
      next = jQuery(__.oDefaults.sSelectorThumbnailActive).parent().next().children(__.oDefaults.sSelectorItemExterior).get(0);
    } else if (active.hasClass(__.oDefaults.sClassItemExteriorOpen)) {
      next = jQuery(__.oDefaults.sSelectorThumbnailActive).parent().next().children(__.oDefaults.sSelectorItemExteriorOpen).get(0);
    } else if (active.hasClass(__.oDefaults.sClassItemInterior)) {
      next = jQuery(__.oDefaults.sSelectorThumbnailActive).parent().next().children(__.oDefaults.sSelectorItemInterior).get(0);
    }
    return next;
  };

  exports.determineDefaultNext = function() {

    var next;

    if (__.interiorToggle.checked) {
      next = jQuery(__.oDefaults.sSelectorItemInterior).first().get(0);
    } else if (__.exteriorOpenToggle && __.exteriorOpenToggle.checked) {
      next = jQuery(__.oDefaults.sSelectorItemExteriorOpen).first().get(0);
    } else {
      next = jQuery(__.oDefaults.sSelectorItemExterior).first().get(0);
    }
    return next;
  };

  /**
   * handle click on next button
   * @param e:  the click event
   */
	__.handlerNextClick = function(e) {

    var active = jQuery(__.oDefaults.sSelectorThumbnailActive);
    var next;

    e.preventDefault();

    if (active.length > 0) {
      next = exports.determineNextFromActive(active);
    }

    if (typeof next === 'undefined') {
      next = exports.determineDefaultNext();
    }
    __.activateImage(next, true, 'next');
  };

	/**
	 * handle click on thumbnail
	 * @returns {void}
	 */
	__.handlerThumbnailClick = function() {
		if (!jQuery(this).hasClass(__.oDefaults.sClassActive)) {
			__.activateImage(this, true, false);
		}
	};

	/**
	 * handle click on plus button
	 * @param {Event} e - the click event
	 * @returns {void}
	 */
	__.handlerPlusButtonClick = function(e) {
		var correspondingThumbnail = jQuery(this).parent().parent().find('.nm-rl-placeholder');
		var correspondingLabel = jQuery(this).parent().parent().find('.nm-renderinglayer-expander');

		e.preventDefault();
		correspondingThumbnail.trigger('click');
		correspondingLabel.trigger('click');
	};


  __.doStageAnimation = function(targetPos) {

    var ie8 = jQuery('.ie8').length > 0;
    var ie9 = jQuery('.ie9').length > 0;

    if (!ie8 && !ie9) {
      jQuery(__.oDefaults.sSelectorStageImages).css('left', targetPos);
    } else {
      jQuery(__.oDefaults.sSelectorStageImages).animate({
        'left': targetPos
      }, 500);
    }
  };


  __.determineAnimationDirection = function(thumbObj, direction, lastActive) {
    var prevDirection = false;
    if (direction === false) {
        if (lastActive.parent().prevAll().find(thumbObj).length > 0) {
          prevDirection = true;
        }
      } else {
        if (direction === 'prev') {
          prevDirection = true;
        }
      }
      return prevDirection;
  };


  /**
   * activate named image
   * @param thumbObj:   corresponding target thumbObj
   * @param animate:    whether the transition shall be animated
   * @param direction:  animation direction
   */
	__.activateImage = function(thumbObj, animate, direction) {

    var lastActive = jQuery(__.oDefaults.sSelectorThumbnailActive);
    var newKey = jQuery(thumbObj).attr('data-key');
    var sourceSelector = '.nm-rendersource-' + newKey;
    var newSrcObj = jQuery(sourceSelector);
    var oldImageElement = jQuery('.nm-rendersource-' + lastActive.attr('data-key')).closest('.nm-renderinglayer-imagewrapper');
    var newImageElement = newSrcObj.closest('.nm-renderinglayer-imagewrapper');
    var prevDirection = false;

    // prevent new image selection during running animation
    if (jQuery(__.oDefaults.sSelectorStageImages).hasClass(__.oDefaults.sClassAnimate)) {
      return;
    }

    // change the active thumbnail
		jQuery(__.oDefaults.sSelectorThumbnail).removeClass(__.oDefaults.sClassActive);
		jQuery(thumbObj).addClass(__.oDefaults.sClassActive);

    // find image to activate and make visible

    if (animate === true) {

      // determine animation direction
      prevDirection = __.determineAnimationDirection(thumbObj, direction, lastActive);

      // prepare stage (w/o animation)
      if (prevDirection) {
        jQuery(__.oDefaults.sSelectorStageImages).css('left', '-100%');
        oldImageElement.css('left', '50%');
        newImageElement.css('left', '0');
      } else {
        jQuery(__.oDefaults.sSelectorStageImages).css('left', '0');
        oldImageElement.css('left', '0');
        newImageElement.css('left', '50%');
      }
      newImageElement.addClass(__.oDefaults.sClassActive);

      // do animation
      setTimeout(function() {
        jQuery(__.oDefaults.sSelectorStageImages).addClass(__.oDefaults.sClassAnimate);

        if (prevDirection) {
          __.doStageAnimation('0');
        } else {
          __.doStageAnimation('-100%');
        }

        setTimeout(function() {

          // cleanup after animation
          oldImageElement.css('left', '0');
          oldImageElement.removeClass(__.oDefaults.sClassActive);
          jQuery(__.oDefaults.sSelectorStageImages).css('left', '0');
          newImageElement.css('left', '0');
          __.activateSwipeOrDrag();
          jQuery(__.oDefaults.sSelectorStageImages).removeClass(__.oDefaults.sClassAnimate);

        }, 500);

      }, 10);

    } else {
      newImageElement.addClass(__.oDefaults.sClassActive);
      oldImageElement.removeClass(__.oDefaults.sClassActive);
      __.activateSwipeOrDrag();
    }
    setTimeout(function() {
      __.updateCounter();
    }, 50);
	};

  /**
   * initialize
   * @param eventBus_: the event bus
   */
	__.initialize = function() {
		__.addEvents();
	};

	exports.initializePromise = function(eventBus_) {

		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve('module/renderinglayer.js');
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 53 */
/*!**************************************!*\
  !*** ./js/app/module/ave/ave-dom.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! core/template */ 5),
	__webpack_require__(/*! text!templates/ave-canvas.tpl */ 168)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, TPL_RENDERER, AVE_TPL) {
	"use strict";

	var __ = {},
		exports = {
			'__': __
		};
	window.i18n=window.i18n||{};
	__.eventBus=null;
	__.optionMappings = {
		'Trunk': window.i18n['rendering-layer.option-trunk'],
		'Doors': window.i18n['rendering-layer.option-doors'],
		'MMI': window.i18n['rendering-layer.option-mmi'],
		'RTTVoid': window.i18n['rendering-layer.option-env-grey'],
		'WhiteVoid': window.i18n['rendering-layer.option-env-white'],
		'Tunnel_Env': window.i18n['rendering-layer.option-Tunnel_Env'],
		'Iceland_Void': window.i18n['rendering-layer.option-Iceland_Void']
	};

	__.oDefaults = {
		'sClassHidden': 'nm-hidden',
		'sClassActive': 'nm-active',
		'sClassSelectorClosed': 'nm-icon-expand-white',
		'sClassSelectorOpen': 'nm-icon-collapse-white',

		'sSelectorOptionsSelectorWrapper': '.nm-ave-animation-selector-wrapper',
		'sSelectorOptionsSelector': '.nm-ave-animation-selector',
		'sSelectorActive3dContainer': '.nm-md-ave-container',
		'sSelectorStreamWrapper': '#streamWrapper'
	};

	/**
	 * render the animation controls
	 * @param {Array.<Object>} animationArr - array containing the available animations
	 * @returns {String} - html string of the animation controls
	 */
	exports.renderAnimationControls = function(animationArr) {

		var animationControls = '';
		var optionKeys = Object.keys(__.optionMappings);
		var i, l;

		for (i=0, l=optionKeys.length; i<l; i++) {
			if (animationArr.indexOf(optionKeys[i]) > -1) {
				animationControls = animationControls +
					__.renderAnimationOption(optionKeys[i], __.optionMappings[optionKeys[i]]);
			}
		}
		return animationControls;
	};

	/**
	 * render enironment controls
	 * @param {Array<Object>} environmentsArr - array containing the evalable environments
	 * @returns {String} - html string of the environment controls
	 */
	exports.renderEnvironmentControls = function(environmentsArr) {

		var environmentControls = '';
		var optionKeys = Object.keys(__.optionMappings);
		var i, l;

		for (i=0, l=optionKeys.length; i<l; i++) {
			if (environmentsArr.indexOf(optionKeys[i]) > -1) {
				environmentControls = environmentControls +
					__.renderEnvironmentOption(optionKeys[i], __.optionMappings[optionKeys[i]]);
			}
		}
		return environmentControls;
	};

	/**
	 * enables the options button
	 * @returns {void}
	 */
	exports.enableOptions = function() {
		DOM_UTILS.getElement(__.oDefaults.sSelectorOptionsSelector).classList.remove(__.oDefaults.sClassHidden);
		DOM_UTILS.getEventDelegate("body").off('click', __.oDefaults.sSelectorOptionsSelectorWrapper, __.handlerAnimationSelectorClick);
		DOM_UTILS.getEventDelegate("body").on('click', __.oDefaults.sSelectorOptionsSelectorWrapper, __.handlerAnimationSelectorClick);

	};

	/**
	 * render an animation option
	 * @param {String} animationKey - the animation key of the animation to render
	 * @param {String} animationName - the animation name of the animation to render
	 * @returns {String} - html string of one single animation option
	 */
	__.renderAnimationOption = function(animationKey, animationName) {
		return '<li class="nm-avectrl-animation animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-animation="' +
				animationKey + '">' + animationName + '</li>';
	};

	/**
	 * render an enironment option
	 * @param {String} envKey - key of the environment to render
	 * @param {String} envName - name of the environement to render
	 * @returns {String} - html string of one single environment option
	 */
	__.renderEnvironmentOption = function(envKey, envName) {
		return '<li class="nm-avectrl-environment animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-environment="' +
				envKey + '">' + envName + '</li>';
	};

	/**
	 * click handler for option button
	 * @param {object} e - the click event
	 * @returns {void}
	 */
	__.handlerAnimationSelectorClick = function(e) {
		var optionsSelector = DOM_UTILS.getElement(__.oDefaults.sSelectorOptionsSelector);
		var optionsSelectorWrapper = DOM_UTILS.getElement(__.oDefaults.sSelectorOptionsSelectorWrapper);
		e.preventDefault();

		if (optionsSelector.classList.contains(__.oDefaults.sClassSelectorClosed)) {			
			optionsSelector.classList.remove(__.oDefaults.sClassSelectorClosed);
			optionsSelector.classList.add(__.oDefaults.sClassSelectorOpen);
			optionsSelectorWrapper.classList.add('active');
		} else {
			optionsSelector.classList.remove(__.oDefaults.sClassSelectorOpen);
			optionsSelector.classList.add(__.oDefaults.sClassSelectorClosed);
			optionsSelectorWrapper.classList.remove('active');
		}
	};

	/**
	 * stop scroll wheel
	 * @param {object} e - the mousewheel event
	 * @returns {void}
	 */
	__.stopWheel = function(e) {
		var event;

		if (!e) { /* IE7, IE8, Chrome, Safari */
			event = window.event;
		} else {
			event = e;
		}

		if (!!event && event.preventDefault) { /* Chrome, Safari, Firefox */
			event.preventDefault();
		}
		if (!!event) {
			event.returnValue = false; /* IE7, IE8 */
		}
	};

	/**
	 * catch scroll wheel
	 * @returns {void}
	 */
	__.catchScrollWheel = function() {
		document.addEventListener('mousewheel', __.stopWheel);
		document.addEventListener('DOMMouseScroll', __.stopWheel);
	};

	/**
	 * release scroll wheel
	 * @returns {void}
	 */
	__.releaseScrollWheel = function() {
		document.removeEventListener('mousewheel', __.stopWheel);
		document.removeEventListener('DOMMouseScroll', __.stopWheel);
	};

	/**
	 * insert AVE canvas before selectore element
	 * @param {string} canvasId - the id of the container to add AVE to
	 * @returns {void}
	 */
	exports.activateAveCanvas = function(canvasId) {
		console.log("ave-dom: activate ave canvas");
		var canvas = document.getElementById(canvasId);

		if(DOM_UTILS.isElement(canvas)) {
			var renderer = document.createElement('div');
			renderer.innerHTML = TPL_RENDERER.render(AVE_TPL, {});
			canvas.insertBefore(renderer.firstChild, canvas.firstChild);

			DOM_UTILS.getEventDelegate("body").on('mouseover', '#'+canvasId, __.catchScrollWheel);
			DOM_UTILS.getEventDelegate("body").on('mouseout', '#'+canvasId, __.releaseScrollWheel);
		}

	};

	exports.resizeStreamWrapper = function() {
		console.log('resizeStream');
		var streamWrapperObj = DOM_UTILS.getElement(__.oDefaults.sSelectorStreamWrapper);
		if(DOM_UTILS.isElement(streamWrapperObj)) {
			streamWrapperObj.style.width = '100%';
			streamWrapperObj.style.height = '100%';
			streamWrapperObj.style.position = 'absolute';
		}
	};

	/**
	 * move AVE canvas to another element
	 * @param {string} originId - the id of the original container
	 * @param {string} targetId - the id of the target container
	 * @returns {void}
	 */
	exports.moveAveCanvas = function(originId, targetId) {
		var originCanvas = document.getElementById(originId);
		var target = document.getElementById(targetId);
		var selectorOptionsWrapper = DOM_UTILS.getElement(__.oDefaults.sSelectorOptionsSelectorWrapper, originCanvas);
		console.log("ave-dom: move ave canvas");

		if(DOM_UTILS.isElement(originCanvas) && DOM_UTILS.isElement(selectorOptionsWrapper) && DOM_UTILS.isElement(target)) {
			originCanvas.classList.remove(__.oDefaults.sClassActive);
			target.insertBefore(selectorOptionsWrapper, target.firstChild);
			DOM_UTILS.getEventDelegate("body").on('mouseover', '#'+targetId, __.catchScrollWheel);
			DOM_UTILS.getEventDelegate("body").on('mouseout', '#'+targetId, __.releaseScrollWheel);
		}
		//exports.resizeStreamWrapper();
	};

	/**
	 * remove AVE from canvas
	 * @param {string} canvasId - the id of the container including the AVE
	 * @returns {void}
	 */
	exports.deactivateAveCanvas = function(canvasId) {
		console.log("ave-dom: deactivate ave canvas");

		var canvas = document.getElementById(canvasId);
		if(DOM_UTILS.isElement(canvas)) {
			while (canvas.hasChildNodes()) {
			    canvas.removeChild(canvas.firstChild);
			}
			DOM_UTILS.getEventDelegate("body").off('mouseover', '#'+canvasId, __.catchScrollWheel);
			DOM_UTILS.getEventDelegate("body").off('mouseout', '#'+canvasId, __.releaseScrollWheel);
		}
	};

	exports.initializePromise=function(eventBus_){
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			resolve("module/ave/ave-dom.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 54 */
/*!***************************************!*\
  !*** ./js/app/module/entry-scroll.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! module/scroll */ 49)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, DOM_UTILS, SCROLL) {
	"use strict";
	var __ = {},
		exports = {
			__: __
		};

	__.registeredModules = {};
	__.GAP = 70;
	__.MAX_INTERVAL_COUNT = 10;
	__.BETWEEN_INTERVAL = 200;

	/**
	 * register - public function other modules can use to register for entry scroll
	 * @param {String} key_ - scroll parameter
	 * @param {String} dataAttribute_ - data attribute to finde elements position
	 * @returns {void} returns nothing
	 */
	exports.register = function(key_, dataAttribute_) {
		__.registeredModules[key_] = dataAttribute_;
	};

	/**
	 * handlePageLoaded
	 * get scroll param and check if module is in registered modules.
	 * Starts interval check if element is visible and scrolls.
	 * @returns {void} returns nothing
	 */
	__.handlePageLoaded = function() {
		var moduleToScroll = __.getScrollParamFromHash(),
			module;

		for (module in __.registeredModules) {
			if (__.registeredModules.hasOwnProperty(module)) {
				if (moduleToScroll === module) {
					__.startInterval(module);
				}
			}
		}
	};

	/**
	 * @param  {String} module - module to scroll to
	 * @return {void} returns nothing
	 */
	__.startInterval = function(module) {
		var interval,
			elementOnPage,
			counter = 0;

		interval = setInterval(function() {
			elementOnPage = DOM_UTILS.getElement('[data-module="' + __.registeredModules[module] + '"]');
			if (elementOnPage && !DOM_UTILS.isHidden(elementOnPage)) {
				clearInterval(interval);
				SCROLL.scrollToElement(elementOnPage, __.GAP);
			}
			if (counter === __.MAX_INTERVAL_COUNT) {
				clearInterval(interval);
			}
			counter++;
		}, __.BETWEEN_INTERVAL);
	};

	/**
	 * getScrollParamFromHash
	 * finds scroll elemet from location hash
	 * @return {String} - module to scroll to
	 */
	__.getScrollParamFromHash = function() {
		var hash = location.hash,
			scrollModule;
		hash = hash.match(/scroll=[a-zA-Z0-9]*/);
		if (!!hash) {
			scrollModule = hash[0].split('=')[1] || null;
		}
		return scrollModule || null;
	};

	/**
	 * addEvents
	 * Adds events for entry scroll
	 * @returns {void} returns nothing
	 */
	__.addEvents = function() {
		// __.eventBus.once(EVENTS.APP_INITIALIZED, __.handlePageLoaded);
		// __.eventBus.on(EVENTS.PAGE_READY, __.handlePageLoaded);
		// __.eventBus.on(EVENTS.LAYER_LOADED, __.handlePageLoaded);
		__.eventBus.on(EVENTS.LAYER_CLOSED, __.handlePageLoaded);
	};

	/**
	 * initializePromise
	 * public initialze function
	 * @param  {eventBus} eventBus_ - standart eventBus
	 * @returns {void} - returns nothing
	 */
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/entry-scroll.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 55 */,
/* 56 */,
/* 57 */,
/* 58 */,
/* 59 */,
/* 60 */,
/* 61 */,
/* 62 */,
/* 63 */,
/* 64 */,
/* 65 */,
/* 66 */,
/* 67 */,
/* 68 */,
/* 69 */,
/* 70 */,
/* 71 */,
/* 72 */,
/* 73 */,
/* 74 */,
/* 75 */,
/* 76 */,
/* 77 */,
/* 78 */,
/* 79 */,
/* 80 */,
/* 81 */,
/* 82 */,
/* 83 */,
/* 84 */,
/* 85 */,
/* 86 */,
/* 87 */,
/* 88 */,
/* 89 */,
/* 90 */,
/* 91 */
/*!************************!*\
  !*** ./js/app/init.js ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 8, maxlen: 147  */
/*globals SETUPS,Promise */
/*eslint-disable max-params*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
		__webpack_require__(/*! jquery */ 1),
		__webpack_require__(/*! es6-promise */ 38),
		__webpack_require__(/*! core/signal */ 4),
		__webpack_require__(/*! events */ 0),
		__webpack_require__(/*! utils/ajax */ 6),
		__webpack_require__(/*! router */ 8),
		__webpack_require__(/*! configurator/dpu-model */ 31),
		__webpack_require__(/*! configurator/dpu-api */ 3),
		__webpack_require__(/*! configurator/dpu-controller */ 11),
		__webpack_require__(/*! module/dsh/api */ 93),
		__webpack_require__(/*! utils/dom */ 2),
		__webpack_require__(/*! core/content */ 15),
		__webpack_require__(/*! configurator/loading-indicator */ 102),
		__webpack_require__(/*! configurator/dom-state */ 103),
		__webpack_require__(/*! ui/cookie-policy */ 104),
		__webpack_require__(/*! core/layer/api */ 10),
		__webpack_require__(/*! core/layer/animation */ 39),
		__webpack_require__(/*! core/layer/cms */ 68),
		__webpack_require__(/*! core/layer/element */ 58),
		__webpack_require__(/*! core/page/pg-main */ 106),
		__webpack_require__(/*! core/page/pg-dom */ 24),
		__webpack_require__(/*! core/page/pg-title */ 107),
		__webpack_require__(/*! core/page/pg-preload */ 108),
		__webpack_require__(/*! core/page/pg-type */ 109),
		__webpack_require__(/*! core/layer/jslayer */ 28),
		__webpack_require__(/*! core/layer/layer-dom */ 44),
		__webpack_require__(/*! core/layer/layer-title */ 110),
		__webpack_require__(/*! core/template */ 5),
		__webpack_require__(/*! module/device */ 25),
		__webpack_require__(/*! core/scroll */ 19),
		__webpack_require__(/*! module/menuflyout */ 45),
		__webpack_require__(/*! module/model-navigation-wrap */ 111),
		__webpack_require__(/*! module/cart */ 112),
		__webpack_require__(/*! core/storage */ 46),
		__webpack_require__(/*! module/container */ 113),
		__webpack_require__(/*! module/stage */ 114),
		__webpack_require__(/*! configurator/conflict */ 71),
		__webpack_require__(/*! configurator/transfer */ 70),
		__webpack_require__(/*! module/startlayer */ 72),
		__webpack_require__(/*! module/pattern */ 115),
		__webpack_require__(/*! module/scroll-sticky-elements */ 116),
		__webpack_require__(/*! module/compare */ 122),
		__webpack_require__(/*! module/fullscreen */ 123),
		__webpack_require__(/*! module/state */ 40),
		__webpack_require__(/*! module/audicode */ 30),
		__webpack_require__(/*! module/scroll-sticky-progressbar */ 124),
		__webpack_require__(/*! module/error */ 48),
		__webpack_require__(/*! module/notification */ 126),
		__webpack_require__(/*! module/scroll */ 49),
		__webpack_require__(/*! module/infobox */ 128),
		__webpack_require__(/*! module/carline-mapping */ 73),
		__webpack_require__(/*! form/core.form */ 33),
		__webpack_require__(/*! form/simple */ 132),
		__webpack_require__(/*! form/select */ 133),
		__webpack_require__(/*! configurator/user-configurations */ 74),
		__webpack_require__(/*! configurator/last-configuration */ 134),
		__webpack_require__(/*! module/search */ 135),
		__webpack_require__(/*! module/gsa-search */ 82),
		__webpack_require__(/*! module/carstore */ 138),
		__webpack_require__(/*! module/swipe-stage */ 50),
		__webpack_require__(/*! module/zip-download */ 142),
		__webpack_require__(/*! module/vtp */ 143),
		__webpack_require__(/*! module/dealermap */ 144),
		__webpack_require__(/*! module/dsh/data */ 42),
		__webpack_require__(/*! module/expertmode */ 145),
		__webpack_require__(/*! module/summary-techdata */ 146),
		__webpack_require__(/*! module/homepage */ 51),
		__webpack_require__(/*! module/poa */ 147),
		__webpack_require__(/*! module/iframe */ 148),
		__webpack_require__(/*! module/iframe-height */ 149),
		__webpack_require__(/*! module/pattern-matching/pattern-matching */ 12),
		__webpack_require__(/*! module/pattern-matching/pattern-audicode */ 150),
		__webpack_require__(/*! module/pattern-matching/pattern-carlineId */ 92),
		__webpack_require__(/*! module/pattern-matching/pattern-partnerId */ 151),
		__webpack_require__(/*! module/pattern-matching/pattern-leadsource */ 152),
		__webpack_require__(/*! module/pattern-matching/pattern-configuration */ 153),
		__webpack_require__(/*! module/audicode-iframe */ 154),
		__webpack_require__(/*! module/recommendations */ 155),
		__webpack_require__(/*! module/preconfs-teaser */ 158),
		__webpack_require__(/*! module/preconfiguration-teaser */ 159),
		__webpack_require__(/*! module/interactive-image-rotation */ 161),
		__webpack_require__(/*! module/interactive-image-slider */ 162),
		__webpack_require__(/*! module/configuratorteaser */ 163),
		__webpack_require__(/*! module/visualizer */ 164),
		__webpack_require__(/*! module/navigation */ 165),
		__webpack_require__(/*! module/renderinglayer */ 52),
		__webpack_require__(/*! module/renderinginjector */ 167),
		__webpack_require__(/*! module/wallet */ 169),
		__webpack_require__(/*! tracking/configuration-tracker */ 61),
		__webpack_require__(/*! tracking/link-tracker */ 78),
		__webpack_require__(/*! tracking/teaser-tracker */ 79),
		__webpack_require__(/*! tracking/component-tracker */ 80),
		__webpack_require__(/*! tracking/gsa-tracker */ 81),
		__webpack_require__(/*! tracking/microconversions-tracker */ 75),
		__webpack_require__(/*! tracking/omniture-api */ 59),
		__webpack_require__(/*! tracking/omniture-constants */ 29),
		__webpack_require__(/*! tracking/page-tracker */ 62),
		__webpack_require__(/*! tracking/renderinglayer-tracker */ 20),
		__webpack_require__(/*! tracking/form-tracker */ 76),
		__webpack_require__(/*! tracking/search-tracker */ 77),
		__webpack_require__(/*! tracking/tracking-config */ 60),
		__webpack_require__(/*! tracking/tracking-dispatcher */ 13),
		__webpack_require__(/*! tracking/tracking-utils */ 14),
		__webpack_require__(/*! module/engine-selection-list */ 170),
		__webpack_require__(/*! module/tdrdealer */ 171),
		__webpack_require__(/*! iecors */ 47),
		__webpack_require__(/*! module/teasergrid */ 172),
		__webpack_require__(/*! module/bicolor */ 173),
		__webpack_require__(/*! mediagallery/mg-model */ 26),
		__webpack_require__(/*! mediagallery/mg-controller */ 175),
		__webpack_require__(/*! mediagallery/mg-counter */ 176),
		__webpack_require__(/*! mediagallery/mg-stage */ 177),
		__webpack_require__(/*! mediagallery/mg-thumbnailslider */ 179),
		__webpack_require__(/*! mediagallery/mg-download */ 180),
		__webpack_require__(/*! core/legacy-eventemitter */ 181),
		__webpack_require__(/*! module/layer-multi-stage */ 182),
		__webpack_require__(/*! module/vtp-teaser */ 183),
		__webpack_require__(/*! module/video-new */ 35),
		__webpack_require__(/*! module/your-payment */ 185),
		__webpack_require__(/*! module/ave/ave-dom */ 53),
		__webpack_require__(/*! module/ave/ave-api */ 34),
		__webpack_require__(/*! module/inlinerendering */ 186),
		__webpack_require__(/*! module/dynamic-recommendation */ 187),
		__webpack_require__(/*! module/scs-matching */ 189),
		__webpack_require__(/*! module/scs-matching-basket */ 190),
		__webpack_require__(/*! module/iph */ 23),
		__webpack_require__(/*! error-logging */ 193),
		__webpack_require__(/*! module/inlinerendering-aoz */ 194),
		__webpack_require__(/*! module/notification-bar */ 195),
		__webpack_require__(/*! module/usabilla */ 196),
		__webpack_require__(/*! tracking/events/click-tracking */ 83),
		__webpack_require__(/*! tracking/events/page-tracking */ 84),
		__webpack_require__(/*! tracking/events/layer-tracking */ 88),
		__webpack_require__(/*! tracking/events/configuration-tracking */ 89),
		__webpack_require__(/*! tracking/events/conversion-tracking */ 90),
		__webpack_require__(/*! tracking/events/user-tracking */ 197),
		__webpack_require__(/*! tracking/events/video-tracking */ 198),
		__webpack_require__(/*! module/equipment-search */ 199),
		__webpack_require__(/*! module/entry-scroll */ 54),
		__webpack_require__(/*! module/pdf-service-link */ 202),
		__webpack_require__(/*! module/svg-polyfill */ 203),
		__webpack_require__(/*! module/inline-mediagallery */ 205),
		__webpack_require__(/*! module/hidden-version-items */ 206)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, ES6_PROMISE, EMITTER, EVENTS, AJAX, ROUTER, MODEL, API, CTRL, DSH) {
		/*eslint-enable max-params*/
		'use strict';
		//Private Methods
		var __ = {},
			//Public API
			exports = {
				__: __
			};
		__.dependenciesArr = arguments;
		//get global/default eventEmitter
		__.globalEventEmitter = EMITTER.getEmitter();
		/**
		 * handle errors loading the setups
		 * if setupLoadingPromise <Promise> is rejected
		 * @param {Error} err - the error to throw
		 * @return {void}
		 */
		__.onSetupsError = function(err) {
			throw (err);
		};
		__.setFormAPISetups = function() {
			// form api
			SETUPS.set('nemo.url.formapi', SETUPS.get('nemo.url.dpu') + 'forms');
			SETUPS.set('nemo.url.form.carstore', SETUPS.get('nemo.url.dpu') + 'carstore?action=store');
			SETUPS.set('nemo.url.form.login', SETUPS.get('nemo.url.dpu') + 'login');
			SETUPS.set('nemo.url.form.audicode', SETUPS.get('nemo.url.dpu') + 'audicode');
			// maps #formid #fieldid to tpl with id: #nm-id-form-sometemplateid-tpl
			SETUPS.set('nemo.form.templatemap', {
				'enquiry-QualificationDataCurrentVehicleModel': 'nm-id-form-select-tpl',
				'sv_drd-vvega-probe-dealer-page': 'nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl',
				'enquiry-vvega-enquiry-dealer-page': 'nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl',
				'tdrdealerreq-vvega-probe-dealer-page': 'nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl'
			});
		};
		/**
		 * handle Setups Loaded
		 * if setupLoadingPromise <Promise> is resoveld
		 * @returns {Promise}
		 */
		__.onSetupsLoaded = function() {
			__.setFormAPISetups();
			/**
			 * nemo.core.configurator.dpu
			 */
			SETUPS.set('nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration', SETUPS.get('nemo.url.dpu') + 'configuration');
			SETUPS.set('nemo.core.configurator.dpu.oAjaxRESTConfigurationURIPrint', SETUPS.get('nemo.url.dpu') + 'pdf');
			SETUPS.set('nemo.core.configurator.dpu.oAjaxRESTConfiguration', {
				'versionRequest': {
					'type': 'GET',
					'url': SETUPS.get('nemo.url.dpu') + 'version',
					//			'action': {},
					'params': {
						'header': {
							// configuration name : httprequest parameter name
							'context': 'context'
						},
						'configuration': {
							'carline': 'carline'
						}
					}
				},
				'itemAdd': {
					'type': 'GET',
					'url': SETUPS.get('nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration'),
					'action': {
						'itemChanged': 'set'
					},
					'params': {
						'header': {
							'context': 'context',
							'subsession': 'subsession',
							'version': 'version'
						},
						'configuration': {
							'prstring': 'ids',
							'itemChanged': 'PARAM-id'
						},
						'items': {
							'count': '*'
						}
					}
				},
				'itemRemove': {
					'type': 'GET',
					'url': SETUPS.get('nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration'),
					'action': {
						'itemChanged': 'remove'
					},
					'params': {
						'header': {
							'context': 'context',
							'subsession': 'subsession',
							'version': 'version'
						},
						'configuration': {
							'prstring': 'ids',
							'itemChanged': 'PARAM-id'
						},
						'items': {
							'count': '*'
						}
					}
				},
				'loadByIds': {
					'type': 'GET',
					'url': SETUPS.get('nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration'),
					'params': {
						'header': {
							'context': 'context',
							'version': 'version'
						},
						'configuration': {
							'items': 'ids'
						}
					}
				},
				'queue': {
					'type': 'GET',
					'url': SETUPS.get('nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration'),
					'params': {
						'header': {
							'context': 'context',
							'subsession': 'subsession',
							'version': 'version'
						}
					}
				}
			});
			/**
			 * create public API accessable
			 * via the console (nemo.configurator.api.<methodname>(<params>))
			 */
			nemo.namespace('configurator.api');
			nemo.configurator.api = API;
			nemo.namespace('configurator.setups');
			nemo.configurator.setups = SETUPS;
			console.log("Init.js - trigger: " + EVENTS.APP_READY);
			//trigger the main "Application ready" Event forcing each module to initialize itself
			__.globalEventEmitter.emit(EVENTS.APP_READY);
			// initialize dsh
			var $dsh = document.querySelector('#dsh');
			if ($dsh) {
				DSH.initialize($dsh, __.globalEventEmitter);
			}
			__.globalEventEmitter.on(EVENTS.PAGE_LOADED, function() {
				var $dsh = document.querySelector('#dsh');
				if ($dsh) {
					DSH.initialize($dsh, __.globalEventEmitter);
				}
			});
			return true;
		};
		__.setSetupParams = function() {
			/**
			 * navigation, content and stage selectors
			 */
			SETUPS.set('nemo.nav.navSelector', '.nm-navigation-derivative-main-list');
			SETUPS.set('nemo.nav.subNavSelector', '.nm-navigation-derivative-sub-list');
			/**
			 * localizaation settings
			 */
			SETUPS.set('nemo.localize.currencySeparatorComma', true);
			//increase xhrTimeOut value
			AJAX.__.oDefaults.xhrTimeout = 30000;
			console.info("XHRtimeout increased to " + AJAX.__.oDefaults.xhrTimeout + " ms");
		};
		/*
		 * Unter bestimmten Umständen ist es moeglich, dass
		 * jQuery(document).ready getriggert wird bevor in
		 * der HTML-Seite die CONFIG/STORAGE-Werte gesetzt
		 * sind (Race Condition durch das require([...], ...))
		 * callback). Daher wird hier vor der Initialisierung
		 * der Module ueberprüft, ob die Werte bereits gesetzt sind
		 */
		__.checkSetupReady = function() {
			var setupLoadingPromise = new Promise(function(resolve, reject) {
				var initNrOfTries = 0;
				var initMaxTries = 20;
				var intervalId = window.setInterval(function() {
					initNrOfTries += 1;
					if (!!SETUPS.get('nemo.url.static')) {
						window.clearInterval(intervalId);
						resolve("ready");
					}
					if (initNrOfTries >= initMaxTries) {
						window.clearInterval(intervalId);
						reject(new Error("SETUPS unavailable!!!"));
					}
					console.log("loading setup tries: " + initNrOfTries);
				}, 10);
			});
			//handle Promise resolve/reject
			return setupLoadingPromise.then(__.onSetupsLoaded, __.onSetupsError);
		};
		/**
		 * trigger promise module initialization
		 * @returns {void}
		 */
		__.doPromiseInitialization = function() {
			var initializePromises = [];
			var i, len;

			for (i = 0, len = __.dependenciesArr.length; i < len; i++) {
				if (typeof __.dependenciesArr[i] === "object" && !!__.dependenciesArr[i].initializePromise) {
					initializePromises.push(__.dependenciesArr[i].initializePromise(__.globalEventEmitter));
				}
			}
			if (initializePromises.length) {
				Promise.all(initializePromises).then(function(dataArr) {
					console.log("NEMO promise INITIALIZATION completed (" + dataArr.length + "|" + __.dependenciesArr.length + ")", dataArr);
					//console.log("require defined modules:", require.s.contexts._.defined);
					if (!!SETUPS.get('stockcar.scs.market')) {
						console.info("waiting for SC Modules to be initialized…");
					} else {
						__.globalEventEmitter.emit(EVENTS.APP_INITIALIZED, { context: 'nemo' });
					}
					console.log("##############################################");
				}, function(error) {
					console.error("NEMO INITIALIZATION FAILED!", error);
				});
			}
		};
		__.globalEventEmitter.on(EVENTS.APP_INITIALIZED, function(context) { console.warn("APP initialized by '" + context.context + "'"); });
		jQuery(document).ready(function() {
			console.log('Init.js -- dom ready');
			if (!API.supportsLocalStorage()) {
				console.warn("No Support for Local Storage!!!");
			}
			//add some setup params
			__.setSetupParams();
			//check if all needed setups (inline HTML code) are available
			__.checkSetupReady().then(__.doPromiseInitialization).catch(console.error);
		});
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 92 */
/*!*************************************************************!*\
  !*** ./js/app/module/pattern-matching/pattern-carlineId.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! module/pattern-matching/pattern-matching */ 12), __webpack_require__(/*! configurator/dpu-api */ 3)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, PATTERN, CONFIGURATOR_API) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 *
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 *
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {};
		 //reference to the global eventEmitter
		__.eventBus = null;

		__.register = function () {
			PATTERN.register('carlineID', __.getCarlineId);
		};

		__.getCarlineId = function() {
			var carlineId;
			return new Promise(function(resolve, reject) {
				carlineId = CONFIGURATOR_API.getCarline();

				if(carlineId) {
					resolve(carlineId);
				}
				else {
					reject(new TypeError("load pattern -carlineID- failed"));
				}
			});
		};

        exports.initializePromise = function(globalEventBus) {
            return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
				__.register();
                resolve('pattern-matching/pattern-carlineID.js');
            });
        };

		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 93 */
/*!**********************************!*\
  !*** ./js/app/module/dsh/api.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global google, MarkerClusterer */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! module/dsh/data */ 42),
	__webpack_require__(/*! module/dsh/map */ 94),
	__webpack_require__(/*! core/logging */ 16),
	__webpack_require__(/*! core/template */ 5),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! utils/dom */ 2),
    __webpack_require__(/*! utils/common */ 18),
	__webpack_require__(/*! markerclusterer */ 32),
	__webpack_require__(/*! text!templates/dsh-container.tpl */ 97),
	__webpack_require__(/*! text!templates/dsh-partner-list.tpl */ 98),
	__webpack_require__(/*! text!templates/dsh-resultlist-item.tpl */ 99),
	__webpack_require__(/*! text!templates/dsh-partner-details.tpl */ 100),
	__webpack_require__(/*! text!templates/dsh-data-uris.json */ 43),
	__webpack_require__(/*! text!templates/dsh-show-all-results.tpl */ 101)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(DSH_DATA, DSH_MAP, LOGGING, TEMPLATE, EVENTS, DOM_UTILS, COMMON, CLUSTERER, CONTAINER_TPL, PARTNER_LIST_TPL, ITEM_TPL, DETAIL_TPL, DATA_URIS, DISPLAY_ALL_RESULTS_TPL) {//eslint-disable-line max-params
	/* jshint +W072 */
	"use strict";
	var exports, __;
	__ = {};
	exports = {
		__: __
	};

	__.MAX_SUGGESTION_COUNT = 5;
	__.MARKET_COMMA_DECIMAL = {
		'audi-deu': true
	};
	__.updateLock = false;
	__.updateReleaseCallback;
	__.defaultZoomLevel = 6;
	__.defaultMapCenter = '51.318928,9.49601';

	__.dealerData;
	__.dshContainer;
	__.detailsVisible = false;
	__.markers = [];
	__.centerMarker;
	__.resultlistEl;
	__.dataURIs = JSON.parse(DATA_URIS);
	__.defaultStyledMap;
	__.topLevelStyledMap;
	__.defaultCountryCode = 'de';
	__.partnerDetailsSelector = '.dsh-main .dsh-partner-details';
	__.config = {};
	__.listScrollLocker = false;
	__.markersWithinCurrentBounds;
	__.currentCenter;
	__.currentBounds;
	__.currentZoom = __.defaultZoomLevel;
	__.updateListener;
	__.mapLoadedListener;
	__.zoomInButton;
	__.zoomOutButton;
	__.partnerNameSearch = false; //flags a search for partners by their name
	__.activeFilter = [];
	__.action = null;

	__.readConfig = function(configJSON, distanceUnit) {
		var config, key, zoomLevel;
		if(!__.config) {
			__.config = {};
		}
		try {
			config = JSON.parse(configJSON);
			// Set fallback for MapsDirectionsBaseUrl
			__.config.MapsDirectionsBaseUrl = 'https://maps.google.com/maps/dir';
			for(key in config) {
				if(config.hasOwnProperty(key)) {
					__.config[key] = config[key];
				}
			}
			__.config['distanceUnit'] = distanceUnit;
			zoomLevel = __.config.DealerSearchDefaultZoomlevel || __.defaultZoomLevel;
			__.defaultZoomLevel = Number(zoomLevel);
			if (document.body.clientWidth < 750) {
				__.defaultZoomLevel -= 1;
			}
			__.defaultMapCenter = __.config.DealerSearchDefaultMapCenter || __.defaultMapCenter;
			__.config.localeLang = __.config.DealerSearchLocaleLanguage || 'en';
		}
		catch (err) {
			console.log('DSH: Could not read config', err);
		}
	};

	/*
	 * Sets an internal lock parameter releases it after a given
	 * timeout. Optionally runs a callback function providing the lock.
	 * @param timeout {Number} -- Time until lock is released (in ms).
	 */
	__.lock_and_release = function(timeout) {
		__.updateLock = true;
		setTimeout(function(){
			__.updateLock = false;
			if(typeof __.updateReleaseCallback === 'function') {
				__.updateReleaseCallback();
				__.updateReleaseCallback = false;
			}
		}, timeout);
	};

	__.sortMarkers = function(markers) {
		var i, withDistance, nameOnly, combined;
		withDistance = [];
		nameOnly = [];
		combined = [];
		for(i=markers.length-1; i>=0; i--) {
			if(!!markers[i].data.distance) {
				withDistance.push(markers[i]);
			}
			else {
				nameOnly.push(markers[i]);
			}
		}
		withDistance.sort(function(a, b) {
			return b.data.distance - a.data.distance;
		});
		nameOnly.sort(function(a, b) {
			return b.data.name > a.data.name;
		});
		for(i=withDistance.length-1; i>=0; i--) {
			combined.push(withDistance[i]);
		}
		for(i=nameOnly.length-1; i>=0; i--) {
			combined.push(nameOnly[i]);
		}
		return combined;
	};

	/*
	 * Checks if active filter are set (via filter-checkboxes) and
	 * if given dealer (map-marker) has at least one of the filtered services
	 * @param {obj} dealer_ - dealer object
	 * @return {boolean}
	 */
	__.dealerHasActiveFilterServices = function(dealer_) {
		var hasServices = false;
		if(__.activeFilter.length) {
			__.activeFilter.forEach(function(filter_){
				if(!!dealer_.data.services && dealer_.data.services.indexOf(filter_) > -1) {
					hasServices = true;
				}
			});
			return hasServices;
		}
		// no active filter set
		return true;
	};

	/*
	 * Checks if given service is in given dealer service array,
	 * special case for etron and r8: dealer services are etron-sales,
	 * etron-sales, r8-sales etc. -> they all should return true
	 * @param {obj} dealer_ - dealer-data object
	 * @param {string} service_  - service to check for
	 * @return {boolean}
	 */
	__.dealerHasService = function(dealer_, service_) {
		var serviceString;
		if(!!dealer_.services || dealer_.services.length === 0) {
			if(dealer_.services.indexOf(service_) > -1) {
				return true;
			} else if (service_.indexOf('tron') > -1 || service_.indexOf('r8') > -1){
				// special case for etron + r8
				// etron-sales, etron-service and r8-sales, r8-services should all give true
				serviceString = dealer_.services.join(',');
				return (serviceString.indexOf(service_) > -1);
			}
		}
		return false;
	};

	__.createDistanceString = function(item) {
		var distance, units, unitStr, itemDistance;
		units = {
			'kilometers': 'km',
			'miles': 'miles'
		};
		if(!__.config.distanceUnit) {
			unitStr = units.kilometers;
			itemDistance = item.distance;
		}
		else {
			unitStr = units[__.config.distanceUnit] || units.kilometers;
			if(!!item.address.distance) {
				itemDistance = item.address.distance[__.config.distanceUnit];
			}
			else {
				itemDistance = item.distance;
				unitStr = units.kilometers;
			}
		}
		if(!!itemDistance && itemDistance !== 'NaN') {
			distance = Number(itemDistance);
			if(distance > 10) {
				distance = String(distance.toFixed(0));
			}
			else {
				distance = String(distance.toFixed(1));
			}
			if(__.MARKET_COMMA_DECIMAL[__.config.DealerSearchMarketAppParameter] === true) {
				distance = String(distance).replace('.', ',');
			}
			item.distanceAsString = distance + ' ' + unitStr;
		}
		return item;
	};

	__.updateResultList = function(partners) {
		var bounds, map, visible = [], filtered = [];
		map = DSH_MAP.getMap();
		// Add short delay, because map.zoom not in sync with center_change event.
		setTimeout(function() {
			if(!__.partnerNameSearch && map.getZoom() < 8) {
				// Zoom level too low. Just remove results.
				__.resultlistEl.innerHTML = '';
				__.removeClassName('dsh-results-active');

			}
			// partners given as param
			else if(!!partners) {
				__.updateResultListItems(partners);

				if(partners.length > 0) {
					__.setClassName('dsh-results-active');
				}
				else {
					__.removeClassName('dsh-results-active');
				}
			}
			// use partners from map
			else {
				// Find all markers within current bounds.
				bounds = __.currentBounds;
				if(!!bounds){
                    visible = __.markers.filter(function(marker_) {
                        return bounds.contains(marker_.getPosition());
                    });
				}
				visible = __.sortMarkers(visible);
				__.markersWithinCurrentBounds = visible;

				//console.log('visible markers:' + visible.length);
				if(__.activeFilter.length) {
					visible.forEach(function(marker_) {
						if(__.dealerHasActiveFilterServices(marker_)) {
							filtered.push(marker_);
						}
					});
					visible = filtered;
				}

				// Empty result list and add new items.
				__.updateResultListItems(visible);
				__.addMarkerHighlightEvents(visible);

				if(visible.length > 0) {
					__.setClassName('dsh-results-active');
				}
				else {
					__.removeClassName('dsh-results-active');
					google.maps.event.trigger(map, 'resize');
				}

			}
		}, 200);
	};


	/*
	 * empties the resultlist and appends the given items
	 * @param {obj} items_ - map marker items
	 */
	__.updateResultListItems = function(items_) {
		var item, itemHtml, container = document.createElement('div');
		__.resultlistEl.innerHTML = '';
		items_.forEach(function(item_) {
			item = __.enhanceDealerData(item_.data || item_);
			item = __.createDistanceString(item);
			itemHtml = TEMPLATE.render(ITEM_TPL, item);
			container.innerHTML = itemHtml;
			__.resultlistEl.appendChild(container.firstChild);
		});
	};

	__.addMarkerHighlightEvents = function(markers) {
		var featureIsActive, _highlightMarker, _restoreMarkers;
		featureIsActive = true;

		if(!!window.SETUPS) {
			featureIsActive = SETUPS.get('feature.dsh.marker-hover') !== 'off';
		}
		if(!!featureIsActive) {
			// no anonymous eventhandler functions, because we want to kill them
			_highlightMarker = function(e) {
				DSH_MAP.highlightMarkers(markers, DOM_UTILS.closest(e.target, '.dsh-resultlist-item').getAttribute('data-dsh-kvpsid'));
			};
			_restoreMarkers = function() {
				DSH_MAP.highlightMarkers(markers);
			};

			// dont use event delegation, because mouseenter/leave events do not bubble
			// and therefore will not work -> use native add/removeEventlistener
			DOM_UTILS.getElementsArray('.dsh-resultlist-item').forEach(function(item_) {
				item_.removeEventListener('mouseenter', _highlightMarker);
				item_.addEventListener('mouseenter', _highlightMarker);
			});
			DOM_UTILS.getElement('.dsh-results').removeEventListener('mouseleave', _restoreMarkers);
			DOM_UTILS.getElement('.dsh-results').addEventListener('mouseleave', _restoreMarkers);
		}
	};

	__.getMarkerIcon = function(dealer_) {
		if(__.dealerHasService(dealer_, 'sales')) {
			dealer_.activeIconKey = 'pin_audi_active';
			dealer_.inactiveIconKey = 'pin_audi_inactive';
			return __.dataURIs.pin_audi_active;
		}

		dealer_.activeIconKey = 'pin_service_active';
		dealer_.inactiveIconKey = 'pin_service_inactive';
		return __.dataURIs.pin_service_active;
	};


	__.initMarkers = function() {
		var applyAdditionalOperations, map, renderResult;
		DSH_DATA.getAllPartners().then(function(data) {
			__.dealerData = data;
			__.markers = [];

			applyAdditionalOperations = function(partner, marker, index){
				// add index
				marker.dshIndex = index;
				marker.kvpsid = partner.kvpsid;
				marker.distance = partner.distance;
				marker.data = partner;
				// add click event listener
				__.addMarkerListener(marker);
			};

			renderResult = __.createMarkers(data.partners, map, applyAdditionalOperations);

			__.markers = renderResult.markers;
			__.markerCluster = DSH_MAP.createCluster(map, __.markers);
			map.setCenter(renderResult.bounds.getCenter());
			map.setZoom(__.defaultZoomLevel);
		}, function(err) {
			console.log(err);
		});
	};

	/**
	 * Creates the corresponding markers and adds them to the given map. It returns an Object which contains the created
	 * markers, but also the bounds of the markers.
	 * @param partners_ {Array}
	 * @param map_ {google.maps.Map}
	 * @param applyAdditionalModifications {Function} a function which gets applied to to each created marker. It has three
	 * parameters 1. the partner the marker represents 2. the marker itself 3. the index of the marker within the list
	 * @returns {{markers: Array, bounds: google.maps.LatLngBounds}}
	 */
	__.createMarkers = function(partners_, map_, applyAdditionalModifications) {
		var bounds, intermediateResult, northEast, southWest;

        intermediateResult = partners_.reduce(function(acc, partner_, i){
            var address, index, lat, lng, latLng, marker, p;

            // If only a subset of partners if given wrap partner objects
            // in an array, containing the partner obj and the index of this
            // partner in the whole partner set.
            if(partner_.length === 2) {
                p = partner_[0];
                index = partner_[1];
            }
            else {
                p = partner_;
                index = i;
            }

            address = p.address;
            lat = address.latitude;
            lng = address.longitude;
            latLng = new google.maps.LatLng(lat, lng);

            acc.mostEast = typeof acc.mostEast === 'number' ? Math.max(acc.mostEast, lng) : lng;
            acc.mostWest = typeof acc.mostWest === 'number' ? Math.min(acc.mostWest, lng) : lng;
            acc.mostNorth = typeof acc.mostNorth  === 'number'? Math.max(acc.mostNorth, lat) : lat;
            acc.mostSouth = typeof acc.mostSouth === 'number' ? Math.min(acc.mostSouth, lat) : lat;

            marker = new google.maps.Marker({
                position: latLng,
                icon: {
                    url: __.getMarkerIcon(partner_),
                    origin: new google.maps.Point(0, 0),
                    anchor: new google.maps.Point(0, 42)
                }
            });
            marker.setMap(map_);
            marker.dshIndex = partner_.dshIndex;
            marker.kvpsid = partner_.kvpsid;
            marker.data = partner_;
            if(typeof applyAdditionalModifications === "function"){
                applyAdditionalModifications(p, marker, index);
            }
            acc.markers.unshift(marker);

            return acc;
        }, {markers:[], mostEast:undefined, mostWest:undefined, mostNorth:undefined, mostSouth:undefined});

        northEast = new google.maps.LatLng(intermediateResult.mostNorth, intermediateResult.mostEast);
        southWest = new google.maps.LatLng(intermediateResult.mostSouth, intermediateResult.mostWest);
        bounds = new google.maps.LatLngBounds(southWest, northEast);

        return {
            markers: intermediateResult.markers,
            bounds: bounds
        };
	};

    __.clearMarkers = function(markers){
       if(!!markers){
            markers.forEach(function(m){
                m.setMap(null);
            });
        }
    };

	/**
	 * Renders given partners on the given map by adding the markers and setting the center.
	 * @param partners_
	 * @param map_
	 */
	__.renderPartnersOnMap = function(partners_, map_){
		var markersResult, bounds, center;
		markersResult = __.createMarkers(partners_, map_);
		bounds = markersResult.bounds;
		center = bounds.getCenter();
		map_.setCenter(center);
	};

    /**
     * @param partners
     * @return {{markers:Array<google.maps.Marker>, bounds:google.maps.LatLngBounds}|*}
     */
	__.updateMarkers = function(partners) {
		var applyAdditionalOperations, renderResult;

		__.markers = [];

		applyAdditionalOperations = function(partner, marker, index){
			// add index
			marker.dshIndex = index;
			marker.kvpsid = partner.kvpsid;
			marker.distance = partner.distance;
			marker.data = partner;
			// add click event listener
			__.addMarkerListener(marker);
		};

		renderResult = __.createMarkers(partners, DSH_MAP.getMap(), applyAdditionalOperations);
		__.markers = renderResult.markers;
		DSH_MAP.updateCluster(__.markers);
		__.updateResultList();
		return renderResult;
	};

	__.addMarkerListener = function(marker) {
		google.maps.event.addListener(marker, 'click', function() {
			exports.handleMarkerClick(marker);
		});
		google.maps.event.addListener(marker, 'mouseover', function() {
			exports.handleMarkerMouseover(marker);
		});
		google.maps.event.addListener(marker, 'mouseout', exports.handleMarkerMouseout);
	};

	__.addEvents = function() {
		__.domEventDelegate.on('change', '.dsh-filter input[type=checkbox]', exports.handleFilterCheckbox);
		__.domEventDelegate.on('change', '.dsh-results-toggle', exports.handleResultListFilterChange);
		__.domEventDelegate.on('keyup', '.dsh-search', exports.handleSearchKeyUp);
		__.domEventDelegate.on('click', '.dsh-partner-details .nm-button-close', exports.handleDetailsClose);
		__.domEventDelegate.on('click', '.dsh-resultlist-item', exports.handleResultListItemClick);
		__.domEventDelegate.on('click', '#dsh-zoom-in', exports.handleZoomIn);
		__.domEventDelegate.on('click', '#dsh-zoom-out', exports.handleZoomOut);
		__.domEventDelegate.on('click', '.dsh-city-suggestions a', exports.handleCitySuggestionClick);
		__.domEventDelegate.on('click', '.dsh-partner-suggestions a', exports.handlePartnerSuggestionClick);
		__.domEventDelegate.on('click', '.dsh-tabs li', exports.handleDetailsTabClick);
		__.domEventDelegate.on('click', '.dsh-search-container .nm-close', exports.handleSearchCloseClick);
		__.domEventDelegate.on('click', '.dsh-btn-gps', exports.handleGPSButtonClick);

		if(__.config.DealerSearchEnableAskMode !== undefined && __.config.DealerSearchEnableAskMode === 'on') {
			__.domEventDelegate.on('keyup', '.dsh-search-bnr', exports.handleSearchBnrKeyUp);
		}
	};

	__.setClassName = function(classNameToAdd) {
		__.dshContainer.classList.add(classNameToAdd);
		if ((classNameToAdd === 'dsh-results-active') && (document.body.clientWidth < 750)) {
			DSH_MAP.getMap().setOptions({
				draggable: false
			});
		} else {
			DSH_MAP.getMap().setOptions({
				draggable: !__.detailsVisible
			});
		}
	};

	__.removeClassName = function(classNameToRemove) {
		__.dshContainer.classList.remove(classNameToRemove);
		DSH_MAP.getMap().setOptions({
			draggable: true
		});
	};

	__.getI18NKey = function(key) {
		if(!window || !window.i18n) {
			return undefined;
		}
		return window.i18n[key];
	};

	__.addResultListFilter = function(element) {
		var filters, selectEl, option, value, i, l, dropdownLabelAll;
		dropdownLabelAll = 'Alle Audi Partner';
		if(!!window.i18n && window.i18n['dsh.results.dropdown.all']) {
			dropdownLabelAll = window.i18n['dsh.results.dropdown.all'];
		}
		selectEl = element.querySelector('.dsh-results-toggle');
		selectEl.innerHTML = '';
		option = document.createElement('option');
		option.value = 'all';
		option.innerHTML = __.getI18NKey('dsh.results.dropdown.all') ||
			dropdownLabelAll;
		selectEl.appendChild(option);
		if(__.config.DealerSearchDropdownFilter) {
			filters = __.config.DealerSearchDropdownFilter.split(',');
			for(i=0, l=filters.length; i<l; i++) {
				value = filters[i].trim();
				option = document.createElement('option');
				option.value = value;
				option.innerHTML = __.getI18NKey('dsh.results.dropdown.' + value) ||
					value + ' Partner';
				selectEl.appendChild(option);
			}
		}
	};

	/**
	 * initializes the filter checkboxes with model data - label + filterparameter
	 * @param element_ - DSH DOM element
	 */
	__.initFilterCheckboxes = function(element_) {
		var i, checkbox, checkboxLabel;
		// max 3 checkboxes are possible
		for(i=1; i<=3; i++) {
			if(__.config['DealerSearchCheckbox' + i + 'Active'] === 'true') {
				// set filter in input data attribute
				checkbox = DOM_UTILS.getElement('#dsh-filter-' + i, element_);
				checkbox.setAttribute('data-servicefilter', __.config['DealerSearchCheckbox' + i + 'ServiceFilter']);

				// set checkbox label
				checkboxLabel = DOM_UTILS.getElement('#dsh-filter-' + i + ' + label', element_);
				checkboxLabel.innerHTML = __.config['DealerSearchCheckbox' + i + 'Label'];
			}
		}
	};

	__.handleShowAllClick = function(partnerDataList, event){
        var markerUpdateResult, map, zoom;
        __.partnerNameSearch = true;
        __.closeSearchInputArea();
        __.updateResultList(partnerDataList);
        __.clearMarkers(__.markers);
        markerUpdateResult = __.updateMarkers(partnerDataList);
        __.setCenterMarker(undefined);
        map = DSH_MAP.getMap();
        map.fitBounds(markerUpdateResult.bounds);
        zoom = map.getZoom();
        if(zoom < __.defaultZoomLevel){ // unfortunately there appears to be no better way to make sure
            // the zoom level does not become smaller then the default one
            map.setZoom(__.defaultZoomLevel);
        }

        event.preventDefault();
        return false;
    };

    /**
	 * triggers conversion tracking and resets tracking type
	 */
	__.triggerConversionTracking = function() {
		if(!!__.action) {
			__.eventBus.emit(__.action);
			__.action = null;
		}
	};

	exports.handleZoomIn = function() {
		var map = DSH_MAP.getMap();
		if(map) {
			map.setZoom(map.getZoom() + 1);
			exports.handleCenterChange();
			__.action = EVENTS.DSH_ZOOM_CHANGE;
		}
	};

	exports.handleZoomOut = function() {
		var map = DSH_MAP.getMap(), zoom;
		if(map) {
			zoom = map.getZoom() - 1;
			map.setZoom(zoom);
			exports.handleCenterChange();
			__.action = EVENTS.DSH_ZOOM_CHANGE;
		}
	};

	exports.handleResize = function() {
		var map = DSH_MAP.getMap();
		if(map) {
			google.maps.event.trigger(map, 'resize');
			map.setCenter(__.currentCenter);
		}
	};

	exports.handleScroll = function() {
		// fix for scrolling on iphone
		DSH_MAP.removeListener(__.updateListener);
		DSH_MAP.removeListener(__.mapLoadedListener);
		setTimeout(function() {
			__.updateListener = DSH_MAP.addListener('bounds_changed', exports.handleCenterChange);
			__.mapLoadedListener = DSH_MAP.addListener('tilesloaded', exports.handleCenterChange);
		}, 100);
	};

	exports.saveCenter = function() {
		var map = DSH_MAP.getMap();
		if(map) {
			__.currentCenter = map.getCenter();
			__.currentBounds = map.getBounds();
		}
	};

	exports.handleZoomChange = function() {
		var map = DSH_MAP.getMap();
		__.action = EVENTS.DSH_ZOOM_CHANGE;


		if(map.zoom > __.defaultZoomLevel) {
			map.setMapTypeId('default');
		}
		else {
			map.setMapTypeId('topLevel');
		}

		if(__.currentZoom !== map.zoom) {
			__.triggerConversionTracking();
			__.currentZoom = map.zoom;
		}
	};

	exports.handleCenterChange = function() {
		if(__.updateLock !== true) {
			__.updateResultList();
			__.lock_and_release(1000);
		}
		else {
			__.updateReleaseCallback = exports.handleCenterChange;
		}
	};

	exports.handleMarkerClick = function(marker) {
		exports.showDetails(marker.data);
	};

	exports.handleMarkerMouseover = function(marker) {
		var resultListItemEl, resultListEl, scrollTime;
		scrollTime = 500;
		resultListEl = document.querySelector('.dsh-results');
		if(!!resultListEl) {
			if(!__.listScrollLocker) {
				__.listScrollLocker = true;
				setTimeout(function() {
					__.listScrollLocker = false;
				}, scrollTime);
				resultListItemEl = document.querySelector('div[data-dsh-kvpsid="' + marker.kvpsid + '"]');
				if(!!resultListItemEl) {
					DOM_UTILS.animateElementY(resultListItemEl.offsetTop, resultListEl, scrollTime);
					DOM_UTILS.getElement('.dsh-resultlist-item').classList.remove('is-active');
					resultListItemEl.classList.add('is-active');
				}
			}
		}
	};

	exports.handleMarkerMouseout = function() {
		if(document.querySelectorAll('.dsh-details-active').length === 0) {
			DOM_UTILS.getElement('.dsh-resultlist-item.is-active').classList.remove('is-active');
		}
	};

	exports.handleDetailsClose = function() {
		exports.hideDetails();
	};

    __.closeSearchInputArea = function(){
        DOM_UTILS.getElement(".dsh-partner-suggestions").innerHTML = '';
        DOM_UTILS.getElement(".dsh-city-suggestions").innerHTML = '';
        DOM_UTILS.getElement(".dsh-search").value = '';
        __.removeClassName('dsh-search-active');
    };

	exports.handleSearchCloseClick = function(e) {
		e.preventDefault();
		e.stopImmediatePropagation();

        __.closeSearchInputArea();
	};

	exports.handleSearchCloseClick = function(e) {
		e.preventDefault();
		e.stopImmediatePropagation();

		__.closeSearchInputArea();
	};

	exports.handleResultListFilterChange = function(e) {
		var value, resultListItems, services, filteredMarkers;
		value = e.target.value;
		resultListItems = DOM_UTILS.getElementsArray('.dsh-resultlist-item');
		if(value === 'all') {
			resultListItems.forEach(function(item_) {
				item_.classList.remove('is-hidden');
			});
			DSH_MAP.updateCluster(__.markers);
		}
		else {
			resultListItems.forEach(function(item_) {
				services = item_.getAttribute('data-dsh-services').split(',').map(function(str){ return str.trim(); });
				if(services.indexOf(value) > -1) {
					item_.classList.remove('is-hidden');
				}
				else {
					item_.classList.add('is-hidden');
				}
			});

			filteredMarkers = __.markers.filter(function(marker_) {
				return marker_.data.services.indexOf(value) > -1;
			});

			DSH_MAP.updateCluster(filteredMarkers);
		}
	};

	exports.handleResultListItemClick = function() {
		var kvpsid, partnerData;
		kvpsid = DOM_UTILS.closest(this, '.dsh-resultlist-item').getAttribute('data-dsh-kvpsid');
		partnerData = DSH_DATA.getItemByKvpsId(kvpsid);
		exports.showDetails(partnerData);
	};

	exports.handleDetailsTabClick = function(e) {
		var containers, tabs, tabsContainer, id, siblings, targettext;
		if (DOM_UTILS.getElementsArray('.dsh-tabs .active-item').length === 0) {
			return;
		}
		tabsContainer = DOM_UTILS.getElement('.dsh-tabs');
		if (e.target.classList.contains('active')) {
			if (tabsContainer.classList.contains('is-open')) {
				tabsContainer.classList.remove('is-open');
			} else {
				tabsContainer.classList.add('is-open');
			}
			return;
		}
		tabsContainer.classList.remove('is-open');
		containers = DOM_UTILS.getElementsArray('.dsh-panels > div');
		tabs = DOM_UTILS.getElementsArray('.dsh-tabs li');

		//index = tabs.index(e.target);
		if (!e.target.classList.contains("active-item")) {
			tabs.forEach(function(tab_) {
				tab_.classList.remove('active');
			});
			e.target.classList.add('active');
			targettext = e.target.innerHTML.replace('/<[^>]*>/g', "");
			// siblings are used in repsonsive view
			// tabs are displayed as dropdowns and the active-item sibling
			// shows the current selected
			siblings = DOM_UTILS.siblings(this, '.active-item');
			siblings.forEach(function(elem_) {
				elem_.innerHTML = targettext;
			});
			containers.forEach(function(container_) {
				container_.classList.remove('active');
			});
			id = this.getAttribute("data-tab");
			DOM_UTILS.getElement(".dsh-panel[data-panel='" + id + "']").classList.add('active');
		}
	};

	exports.showDetails = function(data_) {
		var data, content, className, resultListItem, dealerSearchBaseURL;
		data = __.enhanceDealerData(data_);
		__.addChainAssociation(data);
		resultListItem = DOM_UTILS.getElement('.dsh-resultlist-item[data-dsh-kvpsid="' + data.kvpsid + '"]');
		DOM_UTILS.getElement('.dsh-resultlist-item').classList.remove('is-active');
		resultListItem.classList.add('is-active');

		dealerSearchBaseURL = data.dshConfig.DealerSearchBaseURL;

		if(dealerSearchBaseURL && dealerSearchBaseURL.indexOf("http") !== 0) {
			data.dshConfig.DealerSearchBaseURL = location.protocol + dealerSearchBaseURL;
		}

		if(!__.partnerDetailsContainer) {
			__.partnerDetailsContainer = document.querySelector(__.partnerDetailsSelector);
		}

		__.partnerDetailsContainer.setAttribute('data-dsh-kvpsid', data.kvpsid);
		className = __.dshContainer.className;

		if(className.length === 0 || className.indexOf('dsh-details-active') === -1) {
			__.setClassName('dsh-details-active');

			content = TEMPLATE.render(DETAIL_TPL, data);
			__.partnerDetailsContainer.innerHTML = content;
			if (document.body.clientWidth < 750) {
				window.scrollTo(0, DOM_UTILS.getOffset('.dsh-partner-details').top);
			}
		}
		else {
			__.removeClassName('dsh-details-active');
			__.partnerDetailsContainer.innerHTML = '';

			// TODO: kill timeout if needed
			// Add short delay, to have an open / close box
			setTimeout(function() {
				__.setClassName('dsh-details-active');
				content = TEMPLATE.render(DETAIL_TPL, data);
				__.partnerDetailsContainer.innerHTML = content;
			}, 400);
		}

		__.detailsVisible = true;
		__.markers.forEach(function(marker_) {
			marker_.setClickable(false);
		});
		DSH_MAP.getMap().setOptions({draggable: false});

		__.zoomInButton.classList.add("nm-hidden");
		__.zoomOutButton.classList.add("nm-hidden");

		setTimeout(function() {
			var partnerMap, chainList, panelContainer;
			partnerMap =   __.partnerDetailsContainer.querySelector('.dsh-partner-map');
			chainList = __.partnerDetailsContainer.querySelector('.dsh-chain-list');

			panelContainer = __.partnerDetailsContainer.querySelector('.dsh-panels');
			panelContainer.style.height = __.getDetailsPanelHeight();

			__.addPartnerMap(partnerMap, data);
			__.addChainList(chainList, data);
		}, 800);
	};

	__.enhanceDealerData = function(item) {
		item.directionsLink = __.config.MapsDirectionsBaseUrl + "/''/" +
			encodeURIComponent(item.name) + ',' +
			encodeURIComponent(item.address.display[0]) + ',' +
			encodeURIComponent(item.address.display[1]) + '/@' +
			item.address.latitude + ',' + item.address.longitude + ',15z';
		if(__.dealerHasService(item, 'sales')) {
			item.dealer = true;
		}
		if(__.dealerHasService(item, 'service')) {
			item.service = true;
		}
		if(__.dealerHasService(item, 'r8')){
			item.r8 = true;
		}
		if(__.dealerHasService(item, 'tron')){
			item.eTron = true;
		}
		if(__.dealerHasService(item, 'usedcars')){
			item.plus = true;
		}
		item.servicesAsString = '';
		if(!!item.services) {
			item.servicesAsString = item.services.join(',');
		}
		item.dshConfig = __.config;
		return item;
	};

	/**
	 * creates and styles a map destined to be used in the details view
	 * @param container {DOM-Element} container for the Map
	 * @returns {Window.google.maps.Map}
	 */
	__.createDetailsPanelMap = function(container){
		var config = {
			zoom: 16,
			mapTypeId: google.maps.MapTypeId.ROADMAP,
			mapTypeControl: false,
			panControl: false,
			streetViewControl: false,
			zoomControl: false,
			styles: DSH_MAP.defaultMapStyle,
			zoomControlOptions: {
				style: google.maps.ZoomControlStyle.SMALL,
				position: google.maps.ControlPosition.TOP_RIGHT
			}
		};

		var map = new google.maps.Map(container, config);
		return map;
	};

	__.addPartnerMap = function(element, data) {
		var map;
		map = __.createDetailsPanelMap(element);
		__.renderPartnersOnMap([data], map);
	};

	/**
	 * 	handles clicking on an item within the chain stores list, by navigating to the details of the clicked partner.
	 * @param event
	 */
	__.handleChainListItemClick = function(event){
		var current, target, i, id, partners, partnerFound;
		event.preventDefault();
		target = event.target;
		id = target.getAttribute("data-dsh-kvpsid");
		partners = __.dealerData.partners;

		partnerFound = false;
		for(i = partners.length - 1; !partnerFound && i > -1; i--){
			current = partners[i];
			partnerFound = current.kvpsid === id;
		}

		if(partnerFound){
			exports.hideDetails();
			exports.showDetails(current);
		}
	};

	/**
	 * Adds the list of dealer references stored in partner.chainList to the container
	 * @param container {DOMElement}
	 * @param partner
	 */
	__.addChainList = function(container, partner) {
		if(!!partner && !!partner.chainList && !!container){
			var content, currentItem, i, items;
			content = TEMPLATE.render(PARTNER_LIST_TPL, partner.chainList);
			container.innerHTML = content;

			items = container.querySelectorAll('.chain-list-item');

			for(i = items.length - 1 ; i > -1; i--){
				currentItem = items[i];
				currentItem.addEventListener('click', __.handleChainListItemClick);
			}
		}
	};

	/**
	 * Calculates the height of a panel within the details view
	 * @returns {string}
	 */
	__.getDetailsPanelHeight = function() {
		var rest, totalHeight, headerHeight, infoHeight, linksHeight, paddings = 210;
		totalHeight = DOM_UTILS.getElement('.dsh-partner-details').clientHeight;
		headerHeight = DOM_UTILS.getElement('.dsh-detail-header').clientHeight;
		infoHeight = DOM_UTILS.getElement('.dsh-detail-info').clientHeight;
		linksHeight = DOM_UTILS.getElement('.dsh-dealer-links').clientHeight;
		rest = totalHeight - headerHeight - infoHeight - linksHeight - paddings;
		return rest + 'px';
	};

	/**
	 * inserts the chainList property into the given partner, but also into all other partners,
	 * which belong to same store chain and therefore are members of each others chainList property.
	 * @param partner
	 */
	__.addChainAssociation = function(partner){
		if(!partner.chainList){ //this operation is kind of expensive. let's not run it more often than needed
			var chainList, chainListProperty, chainName, current, i, j, partners;

			chainName = partner.chainName;

			if(!!chainName){
				chainList = []; // list of partners belonging to the same chain
				partners = __.dealerData.partners;

				for(i = partners.length - 1; i > -1; i--){
					current = partners[i];
					if(current.chainName === chainName){
						chainList.push(current);
					}
				}

				// we can't just assign the chainList array the chainList property of each partner, because the
				// chainListProperty is not supposed to contain the partner itself
				for(i = chainList.length - 1; i > -1; i--){ //nxn complexity but the list should be small
					chainListProperty = [];
					for(j = chainList.length - 1; j > -1; j--){
						if(i !== j){
							chainListProperty.push(chainList[j]);
						}
					}
					if(chainListProperty.length > 0){
						chainList[i].chainList = chainListProperty;
					}
				}
			}
		}
	};

	exports.hideDetails = function() {
		var resultListItem, kvpsid;

		if(!__.partnerDetailsContainer) {
			__.partnerDetailsContainer = document.querySelector(__.partnerDetailsSelector);
		}
		__.removeClassName('dsh-details-active');
		__.partnerDetailsContainer.innerHTML = '';
		kvpsid = __.partnerDetailsContainer.getAttribute('data-dsh-kvpsid');
		resultListItem = document.querySelector('.dsh-resultlist-item[data-dsh-kvpsid="' + kvpsid + '"]');
		resultListItem.classList.remove('is-active');

		__.detailsVisible = false;
		__.markers.forEach(function(marker_) {
			marker_.setClickable(true);
		});

		DSH_MAP.getMap().setOptions({
			draggable: true
		});

		__.zoomInButton.classList.remove("nm-hidden");
		__.zoomOutButton.classList.remove("nm-hidden");
	};

	exports.handleSearchKeyUp = function(e) {
		var value, i, p, citySuggestionsEl, partnerSuggestionsEl, noSuggestionsEl, hlSuggestionsEl,
			displayString, partnerMatches, citiesLabel, partnersLabel;
		citiesLabel = __.getI18NKey('dsh.label.search.cities') || 'Städte';
		partnersLabel = __.getI18NKey('dsh.label.search.partners') || 'Partner';
		partnerMatches = false;
		value = e.target.value;
		__.action = EVENTS.DSH_INPUT;
		if(e.keyCode === 13) { //enter
			__.searchAddress(value);
			__.clearSearchSuggestions();
			__.triggerConversionTracking();
			return;
		}

		citySuggestionsEl = DOM_UTILS.getElement(".dsh-city-suggestions");
		partnerSuggestionsEl = DOM_UTILS.getElement(".dsh-partner-suggestions");
		partnerSuggestionsEl.innerHTML = '';
		noSuggestionsEl = DOM_UTILS.getElement('.dsh-no-suggestions');
		hlSuggestionsEl = DOM_UTILS.getElement('.dsh-hl-suggestion');

		if(value.length >= 3) {
			DSH_DATA.getCityNameSuggestions(value, __.config.DealerSearchLocaleCountry).then(function(results) {
					var i;
					citySuggestionsEl.innerHTML = '';
					DOM_UTILS.appendHtmlString(citySuggestionsEl, '<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">' + citiesLabel + '</div>');
					for(i=results.length-1; i>=0; i--) {
						DOM_UTILS.appendHtmlString(citySuggestionsEl, '<a href="#" data-search="' + results[i] + '" class="nm-el-lk nm-el-lk-01 nm-el-lk-ast">' + results[i] + '</a><br />');
					}
					if(results.length === 0 && !partnerMatches) {
						noSuggestionsEl.classList.remove('nm-hidden');
						hlSuggestionsEl.classList.add('nm-hidden');
					}
					else {
						noSuggestionsEl.classList.add('nm-hidden');
						hlSuggestionsEl.classList.remove('nm-hidden');
					}
				}, function(e) {
					if(!partnerMatches) {
						noSuggestionsEl.classList.remove('nm-hidden');
						hlSuggestionsEl.classList.add('nm-hidden');
					}
					else {
                        DOM_UTILS.appendHtmlString(citySuggestionsEl, '<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">' + citiesLabel + '</div>');
                    }
				});
			DSH_DATA.getDealerSuggestions(value).then(function(results) {
			    var showAllHTML;
				if(results.length > 0) {
					partnerMatches = true;
					noSuggestionsEl.classList.add('nm-hidden');
					hlSuggestionsEl.classList.remove('nm-hidden');
				}
				else {
					partnerMatches = false;
				}
                if(results.length > 0) {
                    DOM_UTILS.appendHtmlString(partnerSuggestionsEl, '<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">' + partnersLabel + '</div>');
                }
				for(i=Math.min(results.length, __.MAX_SUGGESTION_COUNT) - 1; i>=0; i--) {
					p = results[i];
					displayString = p.name.replace(new RegExp('(' + value + ')', 'gi'),
						'<span class="dsh-search-highlight">' + "$1" + '</span>') +//eslint-disable-line no-useless-concat
						', ' + p.address.zipCode + ' ' + p.address.city;
					DOM_UTILS.appendHtmlString(partnerSuggestionsEl, '<a href="#" data-dsh-kvpsid="' +
						p.kvpsid + '" class="nm-el-lk nm-el-lk-01 nm-el-lk-ast">' + displayString + '</a><br />');
				}

                if(__.MAX_SUGGESTION_COUNT < results.length){
                    showAllHTML = TEMPLATE.render(DISPLAY_ALL_RESULTS_TPL, {});
                    DOM_UTILS.appendHtmlString(partnerSuggestionsEl, showAllHTML);
                    partnerSuggestionsEl.lastChild.addEventListener('click', __.handleShowAllClick.bind(undefined, results));
                }
			}, function(e) {
					partnerSuggestionsEl.innerHTML = '';
					DOM_UTILS.appendHtmlString(partnerSuggestionsEl, '<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">' + partnersLabel + '</div>');
					partnerMatches = false;
			});

			__.setClassName('dsh-search-active');
		}
		else {
			citySuggestionsEl.innerHTML = '';
			__.removeClassName('dsh-search-active');
			__.removeClassName('dsh-results-active');
			noSuggestionsEl.classList.add("nm-hidden");
		}
	};

	__.clearSearchSuggestions = function() {
		DOM_UTILS.getElement('.dsh-search-container .dsh-city-suggestions').innerHTML = '';
		DOM_UTILS.getElement('.dsh-search-container .dsh-partner-suggestions').innerHTML = '';
		DOM_UTILS.getElement('.dsh-no-suggestions').classList.add('nm-hidden');
		__.removeClassName('dsh-results-active');
		__.removeClassName('dsh-search-active');
	};

	exports.handleSearchBnrKeyUp = function(e) {
		var value, citySuggestionsEl, partnerSuggestionsEl;
		value = e.target.value;
		if(e.keyCode === 13) {
			__.searchPartnerByBnr(value);
			__.clearSearchSuggestions();
			return;
		}

		partnerSuggestionsEl = DOM_UTILS.getElement(".dsh-partner-suggestions");
		citySuggestionsEl = DOM_UTILS.getElement(".dsh-city-suggestions");
		partnerSuggestionsEl.innerHTML = '';
		if(value.length >= 5) {
			__.searchPartnerByBnr(value);
		}
		else {
			citySuggestionsEl.innerHTML = '';
			__.removeClassName('dsh-search-active');
			__.removeClassName('dsh-results-active');
		}
	};

	exports.handleFilterCheckbox = function(e) {
		var activeCheckbox = e.target, visibleMarkers = [];

		if(!activeCheckbox) {
			return false;
		}
		__.activeFilter = activeCheckbox.getAttribute('data-servicefilter').split(',');
		//console.log('__.activeFilter: ' + __.activeFilter);

		// un-check all other checkboxes
		DOM_UTILS.getElementsArray('.dsh-filter input[type=checkbox]').forEach(function(checkbox_) {
			if(checkbox_ !== activeCheckbox) {
				checkbox_.checked = false;
			}
		});

		if(activeCheckbox.checked) {
			// show only marker which match active filter services
			__.markers.forEach(function(marker_) {
				if(__.dealerHasActiveFilterServices(marker_)) {
					marker_.setVisible(true);
					visibleMarkers.push(marker_);
				} else {
					marker_.setVisible(false);
				}
			});
		} else {
			// no checkbox checked = reset active filter = show all markers
			__.activeFilter = [];
			__.markers.forEach(function(marker_) {
				marker_.setVisible(true);
				visibleMarkers.push(marker_);
			});
		}

		DSH_MAP.updateCluster(visibleMarkers);
		__.updateResultList();
	};

	exports.handleCitySuggestionClick = function(e) {
		var queryString;
		if(!!e && !!e.preventDefault) {
			e.preventDefault();
		}
		DOM_UTILS.getElement('.dsh-search-container .dsh-city-suggestions').innerHTML = '';
		DOM_UTILS.getElement('.dsh-search-container .dsh-partner-suggestions').innerHTML = '';
		__.removeClassName('dsh-search-active');
		queryString = this.getAttribute('data-search');
		DOM_UTILS.getElement('.dsh-search').value = queryString;
		__.searchAddress(queryString);
		__.triggerConversionTracking();
	};

	__.searchPartnerByBnr = function(queryString) {
		if(queryString !== undefined) {
			__.setupDetail(queryString);
		}
		else {
			exports.hideDetails();
		}
	};

	__.searchAddress = function(queryString) {
		var latlng, updateMarkers;

		updateMarkers = !!__.partnerNameSearch;
		__.partnerNameSearch = false;

		DSH_DATA.getAllPartners().then(function(data) {
			if(updateMarkers){
				__.updateMarkers(data.partners);
				__.updateResultList();
			}

            return DSH_DATA.searchPartnersByCity(queryString).then(function(data) {
                var partners, i;
                partners = [];
                for(i=data.partners.length-1; i>=0; i--) {
                    partners.unshift([data.partners[i], i]);
                }
                latlng = new google.maps.LatLng(
                    data.meta.search.latitude,
                    data.meta.search.longitude
                );
                __.updateMarkerData(partners);
                setTimeout(function() {
                    DSH_MAP.getMap().setCenter(latlng);
                    DSH_MAP.getMap().setZoom(__.getSearchResultZoom());
                    __.setCenterMarker(latlng);
                }, 200);
            }, function(err) {
                console.log(err);
            });
		});
	};

	__.getSearchResultZoom = function() {
		return document.body.clientWidth < 750 ? 9 : 10;
	};

	__.setupDetail = function(kvpsid) {
		var partnerData = DSH_DATA.getItemByKvpsId(kvpsid);

		if(partnerData !== undefined) {
			DOM_UTILS.getElement('.dsh-search').value = '';
			DOM_UTILS.getElement('.dsh-search-container .dsh-city-suggestions').innerHTML = '';
			DOM_UTILS.getElement('.dsh-search-container .dsh-partner-suggestions').innerHTML = '';

			__.removeClassName('dsh-search-active');
			exports.showDetails(partnerData);
			DSH_MAP.getMap().setCenter(new google.maps.LatLng(
				partnerData.address.latitude,
				partnerData.address.longitude
			));

			DSH_MAP.getMap().setZoom(__.getSearchResultZoom());
			DSH_DATA.getAllPartners().then(function(data) {
				__.updateMarkers(data.partners);
				__.updateResultList();
			});
		}
		else {
			exports.hideDetails();
		}
	};

	__.updateMarkerData = function(items) {
		var i, newKvpsids, distances, distancesOnAddress, item;
		newKvpsids = [];
		distances = {};
		distancesOnAddress = {};
		// memorize kvpsids
		for(i=items.length-1; i>=0; i--) {
			item = items[i][0];
			newKvpsids.push(item.kvpsid);
			distances[item.kvpsid] = item.distance;
			if(!!(item.address && item.address.distance)) {
				distancesOnAddress[item.kvpsid] = item.address.distance;
			}
		}
		newKvpsids = newKvpsids.toString();
		// update existing marker data
		for(i=__.markers.length-1; i>=0; i--) {
			if(newKvpsids.indexOf(__.markers[i].data.kvpsid) !== -1) {
				__.markers[i].data.distance = distances[__.markers[i].data.kvpsid];
				__.markers[i].data.address.distance = distancesOnAddress[__.markers[i].data.kvpsid];
			}
		}
	};

	/**
	 * creates and (re-)positions a marker on the map.
	 * @param latlng {google.maps.LatLng} Coordinates of the marker. The marker gets deleted, if undefined is passed.
	 */
	__.setCenterMarker = function(latlng) {
		// Remove existing marker
		if(__.centerMarker) {
			__.centerMarker.setMap(null);
		}
		// Set new marker
		__.centerMarker = new google.maps.Marker({
			position: latlng,
			icon: __.dataURIs.location,
			zIndex: 1,
			map: DSH_MAP.getMap()
		});
	};

	exports.handlePartnerSuggestionClick = function(e) {
		var kvpsid;

		if(!!e && !!e.preventDefault) {
			e.preventDefault();
		}
		kvpsid = this.getAttribute('data-dsh-kvpsid');
		__.setupDetail(kvpsid);
		__.triggerConversionTracking();
	};

	__.getCityName = function(address_components) {
		var i, j;
		// ...check every address component...
		for(i=address_components.length-1; i>=0; i--) {
			// ...and see if 'locality' is among its types. And if it is...
			for(j=address_components[i].types.length; j>=0; j--) {
				// ...return the long_name of the address component as search term.
				if(address_components[i].types[j] === 'locality') {
					return address_components[i].long_name;
				}
			}
		}
	};

	__.findAddressEntry = function(results) {
		var i, l, j, city_name;
		// For each address result...
		for(i=0, l=results.length; i<l; i++) {
			for(j=results[i].types.length-1; j>=0; j--) {
				// if type is street address, return immediately
				if(results[i].types[j] === 'street_address') {
					city_name = __.getCityName(results[i].address_components);
					return city_name;
				}
				// if type is locality, save it, so it can be uses if no street_address
				// is found.
				else if(results[i].types[j] === 'locality') {
					city_name = __.getCityName(results[i].address_components);
				}
			}
		}
		return city_name;
	};

	exports.handleGPSButtonClick = function(e) {
		var geocoder, address;
		if(!!navigator.geolocation) {
			geocoder = new google.maps.Geocoder();
			navigator.geolocation.getCurrentPosition(function(position) {
				var latLng;
				if(!!position.coords) {
					latLng = new google.maps.LatLng(position.coords.latitude,
						position.coords.longitude);
					geocoder.geocode({latLng: latLng}, function(results, status) {
						if (status === google.maps.GeocoderStatus.OK) {
							address = __.findAddressEntry(results);
							DOM_UTILS.getElement('.dsh-search').value = address;
							__.searchAddress(address);
						}
					});
				}
			}, function(err) {
				console.log(err);
			});
		}
	};

	/**
	 * If the page url has a get param named "search", we take its value
	 * and execute a search for it.
	 */
	__.initSearchFromParam = function() {
		var searchParams = COMMON.getUrlHashVars(window.location.hash);
		var cityName, fakeEvent;
		if (!searchParams) {
			return;
		}
		if (!!searchParams.geolocation && searchParams.geolocation !== 'false') {
			// use geolocation to get current city name and search handlers of this city
			exports.handleGPSButtonClick({});
		} else if (searchParams.search) {
			// get the city name from the url and search handlers of this city
			cityName = decodeURI(searchParams.search);
			// set the city name in the search field
			DOM_UTILS.getElement(".dsh-search").value = cityName;
			// create a fake event in order to call the search handler
				fakeEvent = {
				keyCode: 13,
				target: {
					value: cityName
				}
			};
			// manually call the search handler to execute the
			// search for the given city name
			exports.handleSearchKeyUp(fakeEvent);
		}
	};

	/**
	 * Initializes a new dealer search.
	 * @param {DOM-Node} element - An HTML node to insert the new search
	 * element into.
	 */
	exports.initialize = function(element_, eventBus_) {
		if (!DOM_UTILS.isElement(element_)) {
			return;
		}

		__.eventBus = eventBus_;

		__.dshContainer = document.getElementById("dsh");

		__.readConfig(element_.getAttribute('data-dsh-config'), element_.getAttribute('data-dsh-distance-unit'));
		DSH_DATA.setConfig(__.config);

		element_.innerHTML = (TEMPLATE.render(CONTAINER_TPL, {
			title: 'DSH',
			dshConfig: __.config
		}));

		DSH_MAP.renderMap({
			defaultMapCenter: __.defaultMapCenter,
			defaultZoomLevel: __.defaultZoomLevel
		});
		__.updateListener = DSH_MAP.addListener('bounds_changed', exports.handleCenterChange);
		__.mapLoadedListener = DSH_MAP.addListener('tilesloaded', exports.handleCenterChange);

		DSH_MAP.addListener('zoom_changed', exports.handleZoomChange);
		DSH_MAP.addListener('idle', exports.saveCenter);
		google.maps.event.addDomListener(window, 'resize', exports.handleResize);
		google.maps.event.addDomListener(window, 'scroll', exports.handleScroll);

		__.zoomInButton = DOM_UTILS.getElement('#dsh-zoom-in');
		__.zoomOutButton = DOM_UTILS.getElement('#dsh-zoom-out');
		__.resultlistEl = DOM_UTILS.getElement('.dsh-results', element_);
		__.domEventDelegate = DOM_UTILS.getEventDelegate('body');

		__.initMarkers();
		__.addResultListFilter(element_);
		__.initFilterCheckboxes(element_);
		__.addEvents();
		__.initSearchFromParam();
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 94 */
/*!**********************************!*\
  !*** ./js/app/module/dsh/map.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global google, MarkerClusterer */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! markerclusterer */ 32),
	__webpack_require__(/*! text!templates/dsh-mapstyles-default.json */ 95),
	__webpack_require__(/*! text!templates/dsh-mapstyles-toplevel.json */ 96),
	__webpack_require__(/*! text!templates/dsh-data-uris.json */ 43)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(MARKER_CLUSTERER, MAPSTYLES_DEFAULT, MAPSTYLES_TOPLEVEL, DATA_URIS) {//eslint-disable-line max-params
	"use strict";
	var __, exports;

	__ = {};
	exports = {
		__: __
	};
	__.dataURIs = JSON.parse(DATA_URIS);
	__.clusterStyles = [
		{url: __.dataURIs.clusterMarker, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12},
		{url: __.dataURIs.clusterMarker, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12},
		{url: __.dataURIs.clusterMarker, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12},
		{url: __.dataURIs.clusterMarker, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12}
	];
	__.clusterStylesInactive = [
		{url: __.dataURIs.clusterMarkerInactive, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12},
		{url: __.dataURIs.clusterMarkerInactive, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12},
		{url: __.dataURIs.clusterMarkerInactive, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12},
		{url: __.dataURIs.clusterMarkerInactive, height: 42, width: 42,
			anchor: [8, 0], textColor: '#ffffff', textSize: 12}
	];
	__.topLevelMapStyle = JSON.parse(MAPSTYLES_TOPLEVEL);
	__.defaultMapStyle = JSON.parse(MAPSTYLES_DEFAULT);
	__.mapTypeControl = false;
	__.panControl = false;
	__.streetViewControl = false;
	__.zoomControl = false;
	__.map;
	__.markerCluster;

	exports.createCluster = function(map, markers) {
		__.markerCluster = new MarkerClusterer(__.map, markers, {
			gridSize: 75,
			maxZoom: 8,
			styles: __.clusterStyles,
			averageCenter: true
		});
		return __.markerCluster;
	};

	exports.updateCluster = function(markers) {
		__.markerCluster.clearMarkers();
		__.markerCluster.addMarkers(markers, false);
	};

	/*
	 * marker highlighting
	 */
	exports.highlightMarkers = function(markers, id) {
		var styles, l, iconKey, m, iconName, cluster;
		styles = !!id ? __.clusterStylesInactive : __.clusterStyles;
		l = markers.length;
		while(l--) {
			m = markers[l];
			iconName = (!!id)
				? m.data.inactiveIconKey
				: m.data.activeIconKey;
			if(m.data.kvpsid === id) {
				iconName = m.data.activeIconKey;
			}
			m.setIcon({
				url: __.dataURIs[iconName],
				origin: new google.maps.Point(0,0),
				anchor: new google.maps.Point(0, 42)
			});
		}
		__.markerCluster.setStyles(styles);
		__.markerCluster.resetViewport();
		__.markerCluster.redraw();
	};

	exports.highlightCluster = function(index) {
		var c = __.markerCluster.clusters_[index];
		c.clusterIcon_.remove();
		c.clusterIcon_ = new ClusterIcon(c, __.clusterStylesInactive,
			__.markerCluster.getGridSize());
		c.updateIcon();
	};

	exports.getMarkerIcon = function(data, inactive) {
		var inactivePostfix;
		inactivePostfix = !!inactive ? '_inactive' : '';
		return __.itemIsSales(data)
			? __.dataURIs['pin_audi_active' + inactivePostfix]
			: __.dataURIs['pin_service_active' + inactivePostfix];
	};

	exports.renderMap = function(opts) {
		var mapOpts, center;
		__.defaultStyledMap = new google.maps.StyledMapType(__.defaultMapStyle, {name: "Default Style"});
		__.topLevelStyledMap = new google.maps.StyledMapType(__.topLevelMapStyle, {name: "Top Level Style"});
		center = opts.defaultMapCenter.split(',');
		mapOpts = {
			center: new google.maps.LatLng(center[0], center[1]),
			zoom: opts.defaultZoomLevel,
			mapTypeId: google.maps.MapTypeId.ROADMAP,
			styles: __.topLevelMapStyle,
			panControl: __.panControl,
			mapTypeControl: __.mapTypeControl,
			streetViewControl: __.streetViewControl,
			zoomControl: __.zoomControl
		};
		__.map = new google.maps.Map(document.querySelector(".dsh-map"), mapOpts);
		__.map.mapTypes.set('default', __.defaultStyledMap);
		__.map.mapTypes.set('topLevel', __.topLevelStyledMap);
		return __.map;
	};

	exports.addListener = function(eventStr, handler) {
		return google.maps.event.addListener(__.map, eventStr, handler);
	};

	exports.removeListener = function(listener) {
		google.maps.event.removeListener(listener);
	};

	exports.topLevelMapStyle = __.topLevelMapStyle;
	exports.defaultMapStyle = __.defaultMapStyle;

	exports.getMap = function() {
		return __.map;
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 95 */
/*!***************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-mapstyles-default.json ***!
  \***************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "[{\n\t\"featureType\": \"transit.line\",\n\t\"elementType\": \"geometry.fill\",\n\t\"stylers\": [{\n\t\t\"saturation\": -79\n\t}]\n}, {\n\t\"featureType\": \"administrative.province\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"simplified\"\n\t}]\n}, {\n\t\"featureType\": \"administrative.country\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}]\n}, {\n\t\"featureType\": \"administrative.locality\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"off\"\n\t}]\n}, {\n\t\"featureType\": \"administrative.land_parcel\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}]\n}, {\n\t\"featureType\": \"landscape.man_made\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"simplified\"\n\t}]\n}, {\n\t\"featureType\": \"landscape.natural\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}, {\n\t\t\"saturation\": -100\n\t}, {\n\t\t\"lightness\": 20\n\t}]\n}, {\n\t\"featureType\": \"water\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}, {\n\t\t\"color\": \"#c6e2fa\"\n\t}]\n}, {\n\t\"featureType\": \"poi.business\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"poi.government\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"poi.medical\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"poi.park\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}, {\n\t\t\"saturation\": -100\n\t}, {\n\t\t\"lightness\": 50\n\t}]\n}, {\n\t\"featureType\": \"poi.place_of_worship\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"poi.school\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"poi.sports_complex\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"road.highway\",\n\t\"elementType\": \"geometry\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}, {\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"road.highway\",\n\t\"elementType\": \"labels\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"simplified\"\n\t}, {\n\t\t\"saturation\": -50\n\t}]\n},\n{\n\t\"featureType\": \"road.local\",\n\t\"elementType\": \"geometry\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"simplified\"\n\t}]\n}, {\n\t\"featureType\": \"administrative.country\",\n\t\"elementType\": \"labels\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}, {\n\t\t\"lightness\": 20\n\t}]\n}, {\n\t\"featureType\": \"poi.attraction\",\n\t\"elementType\": \"labels\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"off\"\n\t}]\n}, {\n\t\"featureType\": \"poi.attraction\",\n\t\"elementType\": \"geometry\",\n\t\"stylers\": [{\n\t\t\"saturation\": -100\n\t}]\n}, {\n\t\"featureType\": \"landscape.natural.terrain\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"off\"\n\t}, {\n\t\t\"lightness\": 91\n\t}]\n}, {\n\t\"featureType\": \"poi.park\",\n\t\"elementType\": \"labels\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"off\"\n\t}]\n}, {\n\t\"featureType\": \"poi.school\",\n\t\"elementType\": \"labels\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}]\n}, {\n\t\"featureType\": \"poi.sports_complex\",\n\t\"elementType\": \"labels\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}]\n}, {\n\t\"featureType\": \"transit.line\",\n\t\"elementType\": \"all\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"off\"\n\t}]\n}, {\n\t\"featureType\": \"administrative.locality\",\n\t\"elementType\": \"labels.text\",\n\t\"stylers\": [{\n\t\t\"visibility\": \"on\"\n\t}]\n}]\n"

/***/ }),
/* 96 */
/*!****************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-mapstyles-toplevel.json ***!
  \****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "[{\"featureType\":\"transit.line\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"saturation\":-79}]},{\"featureType\":\"administrative.province\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"administrative.country\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"administrative.locality\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative.neighborhood\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"administrative.land_parcel\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"landscape.man_made\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"landscape.natural\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"},{\"saturation\":-100},{\"lightness\":20}]},{\"featureType\":\"water\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#c6e2fa\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"all\",\"stylers\":[{\"saturation\":-100}]},{\"featureType\":\"poi.government\",\"elementType\":\"all\",\"stylers\":[{\"saturation\":-100}]},{\"featureType\":\"poi.medical\",\"elementType\":\"all\",\"stylers\":[{\"saturation\":-100}]},{\"featureType\":\"poi.park\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"},{\"saturation\":-100},{\"lightness\":50}]},{\"featureType\":\"poi.place_of_worship\",\"elementType\":\"all\",\"stylers\":[{\"saturation\":-100}]},{\"featureType\":\"poi.school\",\"elementType\":\"all\",\"stylers\":[{\"saturation\":-100}]},{\"featureType\":\"poi.sports_complex\",\"elementType\":\"all\",\"stylers\":[{\"saturation\":-100}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"on\"},{\"saturation\":-100}]},{\"featureType\":\"road.highway\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"simplified\"},{\"saturation\":-50}]},{\"featureType\":\"road.arterial\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"on\"},{\"hue\":\"#ffff00\"},{\"gamma\":9.99}]},{\"featureType\":\"road.local\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"simplified\"}]},{\"featureType\":\"administrative.country\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"on\"},{\"lightness\":20}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"geometry\",\"stylers\":[{\"saturation\":-100}]},{\"featureType\":\"landscape.natural.terrain\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"},{\"lightness\":91}]},{\"featureType\":\"poi.park\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.school\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"poi.sports_complex\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"transit.line\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"road\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"poi\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"landscape\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"administrative.province\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"visibility\":\"on\"},{\"invert_lightness\":true},{\"weight\":1.51},{\"saturation\":-100},{\"lightness\":-100},{\"gamma\":1.99}]},{\"featureType\":\"landscape.natural.terrain\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"},{\"color\":\"#000000\"}]},{\"featureType\":\"landscape.natural.landcover\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#dfdfdf\"}]},{\"featureType\":\"administrative.province\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#bdbdbd\"},{\"weight\":1.24}]},{\"featureType\":\"poi\",\"elementType\":\"all\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#dfdfdf\"}]}]\n"

/***/ }),
/* 97 */
/*!******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-container.tpl ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"dsh-container\">\n\n\t<header class=\"dsh-header\">\n\n\t\t{{var headline = window.i18n['dsh.header.dealersearch'];}}\n\t\t{{?it.dshConfig.DealerSearchSpecificHeadline}}\n\t\t{{headline = it.dshConfig.DealerSearchSpecificHeadline;}}\n\t\t{{?}}\n\t\t<h1 class=\"nm-el-hdl nm-el-hdl-02 nm-at-hdl-b\">{{=headline}}</h1>\n\n\t\t<div class=\"clearfix dsh-search-wrapper\">\n\t\t\t<div class=\"nm-input dsh-input\">\n\t\t\t\t<label class=\"dsh-search-label\" for=\"dsh-search\">{{=window.i18n['dsh.label.search']}}</label>\n\t\t\t\t<input type=\"text\" class=\"dsh-search\" id=\"dsh-search\" placeholder=\"{{=window.i18n['dsh.label.search.placeholder']}}\"/>\n\t\t\t\t<a href=\"#\" class=\"dsh-btn-gps\" title=\"Geolocate me\">Geolocation</a>\n\t\t\t</div>\n\n\t\t\t<div class=\"dsh-filter-container\">\n\t\t\t\t{{?it.dshConfig.DealerSearchCheckbox1Active == 'true'}}\n\t\t\t\t<div class=\"nm-checkbox dsh-filter\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"dsh-filter-1\" name=\"dsh-filter-1\" id=\"dsh-filter-1\" />\n\t\t\t\t\t<label for=\"dsh-filter-1\" class=\"nm-el-lbl nm-el-lbl-02\">{{=window.i18n['dsh.label.audi.etron.partner']}}</label>\n\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.dshConfig.DealerSearchCheckbox2Active == 'true'}}\n\t\t\t\t<div class=\"nm-checkbox dsh-filter\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"dsh-filter-2\" name=\"dsh-filter-2\" id=\"dsh-filter-2\" />\n\t\t\t\t\t<label for=\"dsh-filter-2\" class=\"nm-el-lbl nm-el-lbl-02\">{{=window.i18n['dsh.label.audi.r8.partner']}}</label>\n\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.dshConfig.DealerSearchCheckbox3Active == 'true'}}\n\t\t\t\t<div class=\"nm-checkbox dsh-filter\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"dsh-filter-3\" name=\"dsh-filter-3\" id=\"dsh-filter-3\" />\n\t\t\t\t\t<label for=\"dsh-filter-3\" class=\"nm-el-lbl nm-el-lbl-02\">{{=window.i18n['dsh.label.audi.usedcars.partner']}}</label>\n\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t\t{{?(it.dshConfig.DealerSearchEnableAskMode && it.dshConfig.DealerSearchEnableAskMode === 'on')}}\n\t\t\t<input type=\"text\" class=\"dsh-input dsh-search-bnr\" id=\"dsh-search-bnr\" placeholder=\"BNR-Nr.\"/>\n\t\t\t{{?}}\n\n\t\t\t<div class=\"clearfix dsh-search-container\">\n\t\t\t\t<div class=\"dsh-search-suggestions clearfix\">\n\t\t\t\t\t<div class=\"dsh-city-suggestions\"></div>\n\t\t\t\t\t<div class=\"dsh-partner-suggestions\"></div>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<p class=\"dsh-no-suggestions nm-el-hdl nm-el-hdl-05 nm-hidden\">{{=window.i18n['dsh.search.noresult']}}</p>\n\t\t\t\t<a x-cq-linkchecker=\"valid\" href=\"#\" class=\"nm-close nm-image-replace\">schließen</a>\n\n\t\t\t</div>\n\t\t</div>\n\n\t</header>\n\n\t<main class=\"dsh-main\">\n\t\t<div class=\"dsh-result-details\">\n\t\t\t\n\t\t\t<div class=\"dsh-results-wrap\">\n\t\t\t\t<select class=\"dsh-results-toggle\">\n\t\t\t\t</select>\n\t\t\t\t<div class=\"dsh-results\"></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"dsh-partner-details\"></div>\n\n\t\t</div>\n\n\t\t<div class=\"dsh-map\"></div>\n\n\t\t<nav class=\"dsh-map-controls\">\n\t\t\t<button id=\"dsh-zoom-in\" title=\"Zoom in\"><span class=\"zoom-in\">+</span></button>\n\t\t\t<button id=\"dsh-zoom-out\" title=\"Zoom out\"><span class=\"zoom-out\">–</span></button>\n\t\t</nav>\n\t</main>\n</div>\n"

/***/ }),
/* 98 */
/*!*********************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-partner-list.tpl ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "{{~it :dealer:index}}\n\t{{var displayString = dealer.name + ', ' + dealer.address.zipCode + ' ' + dealer.address.city;}}\n\t<a href=\"#\" data-dsh-kvpsid=\"{{=dealer.kvpsid}}\" class=\"chain-list-item nm-el-lk nm-el-lk-01 nm-el-lk-ast\">{{=displayString}}</a><br />\n{{~}}\n"

/***/ }),
/* 99 */
/*!************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-resultlist-item.tpl ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"dsh-resultlist-item\" data-dsh-kvpsid=\"{{=it.kvpsid}}\" data-dsh-services=\"{{=it.servicesAsString}}\">\n    <span class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=it.name}}</span>\n    <div class=\"dsh-result-meta clearfix\">\n       {{var dealer = window.i18n[\"dsh.icon.dealer\"] || \"Dealer\";}}\n        {{var service = window.i18n[\"dsh.icon.service\"] || \"Service\";}}\n        {{?!!it.dealer}}<span class=\"dsh-result-type dsh-icon-dealer\">{{=dealer}}</span>{{?}} {{?!!it.service}}<span class=\"dsh-result-type dsh-icon-service\">{{=service}}</span>{{?}}\n\n        {{?!!it.distanceAsString}}\n        <span class=\"dsh-result-direction nm-el-lbl nm-el-lbl-01\">{{=it.distanceAsString}}</span>\n        {{?}}\n    </div>\n\n\t{{?!!it.address.display}}\n    <p class=\"nm-el-lbl nm-el-lbl-01\">{{=it.address.display[0]}}<br/>\n    {{=it.address.display[1]}}</p>\n\t{{?}}\n\n\t{{?!!it.contactDetails.phone.display}}\n    {{var phone = window.i18n[\"dsh.label.phone\"] || \"Telefon\";}}\n    <p class=\"nm-el-lbl nm-el-lbl-01\">{{=phone}}: {{=it.contactDetails.phone.display}}<p>\n\t{{?}}\n\n    {{?it.dshConfig.DealerSearchEnableAskMode === 'on'}}\n\n    {{var kvpsid = window.i18n[\"dsh.details.label.dealer.ask.kvpsid\"] || \"Betriebsnummer\";}}\n    {{var regionNumber = window.i18n[\"dsh.details.label.dealer.ask.regionNumber\"] || \"Regionsnummer\";}}\n    {{var distributionCenter = window.i18n[\"dsh.details.label.dealer.ask.distributionCenter\"] || \"VZ-Nummer\";}}\n    {{var contractStatusGvo = window.i18n[\"dsh.details.label.dealer.ask.contractStatusGvo\"] || \"Vertragsstatus\";}}\n\n        <p class=\"nm-el-lbl nm-el-lbl-01 dsh-ask-mode-values\">\n        {{?!!it.kvpsid}}\n            {{=kvpsid}}: {{=it.kvpsid}}<br/>\n        {{?}}\n        {{?!!it.address.regionNumber}}\n            {{=regionNumber}}: {{=it.address.regionNumber}}<br/>\n        {{?}}\n        {{?!!it.address.distributionCenter}}\n            {{=distributionCenter}}: {{=it.address.distributionCenter}}<br/>\n        {{?}}\n        {{?!!it.contractStatusGvo}}\n            {{=contractStatusGvo}}: {{=it.contractStatusGvo}}\n        {{?}}\n        </p>\n    {{?}}\n\n    <!-- TODO: check for existing links -->\n    <p class=\"dsh-dealer-links\">\n\n\t\t{{?it.dshConfig.DealerSearchShowRouteplannerLink === 'on'}}\n\t\t\t{{var calcRoute = window.i18n[\"dsh.details.label.dealer.calculate.route\"] || \"Route berechnen\";}}\n\t\t\t<span><a href=\"{{=it.directionsLink}}\" class=\"nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-routing\" target=\"_blank\"><span class=\"dsh-tooltip\">{{=calcRoute}}</span></a></span>\n\t\t{{?}}\n\n        {{?!!it.url}}\n\t\t{{var website = window.i18n[\"dsh.details.label.dealer.website\"] || \"Website\";}}\n        <span><a href=\"{{=it.url}}\" class=\"nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-url\" target=\"_blank\"><span class=\"dsh-tooltip\">{{=website}}</span></a></span>\n        {{?}}\n\n        {{?!!it.contactDetails.email}}\n        {{var enquiry = window.i18n[\"dsh.icon.dealer.enquiry\"] || \"H&auml;ndleranfrage\";}}\n\t\t{{var subject = window.i18n[\"dsh.details.label.dealer.email.subject\"] || \"\";}}\n        <span><a href=\"mailto:{{=it.contactDetails.email}}?subject={{=subject.replace(/ /g, '%20')}}\" class=\"nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-enquiry\"><span class=\"dsh-tooltip\">{{=enquiry}}</span></a></span>\n        {{?}}\n\n        <!-- TODO: check if link to test drive exists -->\n        {{?it.dshConfig.DealerSearchShowTestDriveLink !== 'off'}}\n            {{var testdrive = window.i18n[\"dsh.icon.dealer.testdrive\"] || \"Probefahrt anfragen\";}}\n            <span><a href=\"#\" class=\"nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-testdrive\" title=\"{{=testdrive}}\"><span class=\"dsh-tooltip\">{{=testdrive}}</span></a></span>\n        {{?}}\n    </p>\n    <hr/>\n</div>\n"

/***/ }),
/* 100 */
/*!************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-partner-details.tpl ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<article>\n\n    <div class=\"dsh-detail-header clearfix\">\n        <div class=\"nm-button-close\">\n            <svg class=\"nm-icon-cancel\">\n                <use xlink:href={{=SETUPS.get('coreci.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-cancel\"}}></use>\n            </svg>\n        </div>\n\n    \t<h2 class=\"nm-el-hdl nm-el-hdl-03 nm-at-hdl-b\">{{=it.name}}</h2>\n    </div>\n\n    <div class=\"dsh-detail-main\">\n\n        <ul class=\"dsh-detail-info\">\n\t\t\t{{?!!it.address.display}}\n\t\t\t<li class=\"dsh-partner-services-detail\">\n                            {{var dealer = window.i18n[\"dsh.details.label.dealer\"] || \"Audi Partner (Verkauf)\";}}\n                            {{var service = window.i18n[\"dsh.details.label.service\"] || \"Audi Partner (Service)\";}}\n                            {{var etron = window.i18n[\"dsh.details.label.etron\"] || \"Audi e-tron Partner\";}}\n                            {{var r8 = window.i18n[\"dsh.details.label.r8\"] || \"Audi Sport\";}}\n                            {{var plus = window.i18n[\"dsh.details.label.plus\"] || \"Audi :plus Partner\";}}\n                            {{?!!it.dealer}}<p class=\"dsh-result-type dsh-icon-dealer nm-el-lbl nm-el-lbl-01\">{{=dealer}}</p>{{?}}\n                            {{?!!it.service}}<p class=\"dsh-result-type dsh-icon-service nm-el-lbl nm-el-lbl-01\">{{=service}}</p>{{?}}\n                            {{?!!it.eTron}}<p class=\"nm-el-lbl nm-el-lbl-01\">{{=etron}}</p>{{?}}\n                            {{?!!it.r8}}<p class=\"nm-el-lbl nm-el-lbl-01\">{{=r8}}</p>{{?}}\n                            {{?!!it.plus}}<p class=\"nm-el-lbl nm-el-lbl-01\">{{=plus}}</p>{{?}}\n\t\t\t</li>\n            <li>\n                <p class=\"nm-el-lbl nm-el-lbl-01\">{{=it.address.display[0]}}<br/>\n                {{=it.address.display[1]}}</p>\n            </li>\n\t\t\t{{?}}\n\n            <li>\n                {{var phone = window.i18n[\"dsh.label.phone\"] || \"Telefon\";}}\n                {{var fax = window.i18n[\"dsh.label.fax\"] || \"Telefax\";}}\n\t\t\t\t{{?!!it.contactDetails.phone.display || it.contactDetails.fax.display}}\n                <p class=\"nm-el-lbl nm-el-lbl-01\">\n\t\t\t\t\t{{?!!it.contactDetails.phone.display}}\n\t\t\t\t\t\t{{=phone}}: {{=it.contactDetails.phone.display}}<br/>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{?!!it.contactDetails.fax.display}}\n\t\t\t\t\t\t{{=fax}}: {{=it.contactDetails.fax.display}}\n\t\t\t\t\t{{?}}\n                </p>\n\t\t\t\t{{?}}\n            </li>\n\n            {{?it.dshConfig.DealerSearchEnableAskMode === 'on'}}\n\n            {{var kvpsid = window.i18n[\"dsh.details.label.dealer.ask.kvpsid\"] || \"Betriebsnummer\";}}\n            {{var regionNumber = window.i18n[\"dsh.details.label.dealer.ask.regionNumber\"] || \"Regionsnummer\";}}\n            {{var distributionCenter = window.i18n[\"dsh.details.label.dealer.ask.distributionCenter\"] || \"VZ-Nummer\";}}\n            {{var contractStatusGvo = window.i18n[\"dsh.details.label.dealer.ask.contractStatusGvo\"] || \"Vertragsstatus\";}}\n\n            <li>\n                <p class=\"nm-el-lbl nm-el-lbl-01 dsh-ask-mode-values\">\n                {{?!!it.kvpsid}}\n                    {{=kvpsid}}: {{=it.kvpsid}}<br/>\n                {{?}}\n                {{?!!it.address.regionNumber}}\n                    {{=regionNumber}}: {{=it.address.regionNumber}}<br/>\n                {{?}}\n                {{?!!it.address.distributionCenter}}\n                    {{=distributionCenter}}: {{=it.address.distributionCenter}}<br/>\n                {{?}}\n                {{?!!it.contractStatusGvo}}\n                    {{=contractStatusGvo}}: {{=it.contractStatusGvo}}\n                {{?}}\n                </p>\n            </li>\n            {{?}}\n    \t</ul>\n\n        <p class=\"dsh-dealer-links\">\n\n\t\t\t{{?it.dshConfig.DealerSearchShowRouteplannerLink === 'on'}}\n\t\t\t\t{{var calcRoute = window.i18n[\"dsh.details.label.dealer.calculate.route\"] || \"Route berechnen\";}}\n\t\t\t\t<span><a href=\"{{=it.directionsLink}}\" class=\"nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-routing\" target=\"blank\">{{=calcRoute}}</a></span>\n            {{?}}\n\n            {{?!!it.url}}\n            {{var website = window.i18n[\"dsh.details.label.dealer.website\"] || \"Website\";}}\n            <span><a href=\"{{=it.url}}\" class=\"nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-url\" target=\"_blank\">{{=website}}</a></span>\n            {{?}}\n\n            {{?!!it.contactDetails.email}}\n            {{var enquiry = window.i18n[\"dsh.details.label.dealer.email\"] || \"E-Mail\";}}\n\t\t\t{{var subject = window.i18n[\"dsh.details.label.dealer.email.subject\"] || \"\";}}\n            <span><a href=\"mailto:{{=it.contactDetails.email}}?subject={{=subject.replace(/ /g, '%20')}}\" class=\"nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-enquiry\">{{=enquiry}}</a></span>\n            {{?}}\n\n\t\t\t{{?it.dshConfig.DealerSearchShowTestDriveLink !== 'off'}}\n\t\t\t\t{{var testdrive = window.i18n[\"dsh.details.label.dealer.testdrive\"] || \"Probefahrt anfragen\";}}\n\t\t\t\t<span><a href=\"#\" class=\"nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-testdrive\">{{=testdrive}}</a></span>\n            {{?}}\n\n\t\t\t{{?it.dshConfig.DealerSearchShowPrintLink !== 'off'}}\n\t\t\t\t{{var print = window.i18n[\"dsh.details.label.print\"] || \"Drucken\";}}\n\t\t\t\t<span><a href=\"#\" class=\"nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-print\">{{=print}}</a></span>\n            {{?}}\n\n            {{?it.dshConfig.DealerSearchShowVcfLink !== 'off'}}\n                {{?!!it.vcardURL}}\n\t\t\t\t    {{var vcard = window.i18n[\"dsh.details.label.dealer.vcard\"] || \"Download vCard\";}}\n                    {{?!!it.dshConfig.DealerSearchBaseURL}}\n           \t\t\t{{var urlParser = document.createElement(\"a\");}}\n           \t\t\t{{urlParser.href = it.dshConfig.DealerSearchBaseURL;}}\n                    {{var baseUrl = ((it.dshConfig.DealerSearchBaseURL).substr(0,(it.dshConfig.DealerSearchBaseURL).indexOf(\"://\") + 3) + urlParser.hostname);}}\n\t\t\t\t    <span><a href=\"{{=baseUrl}}{{=it.vcardURL}}\" class=\"nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-vcard\">{{=vcard}}</a></span>\n                    {{?}}\n                {{?}}\n            {{?}}\n\n        </p>\n\n        <div class=\"dsh-tab-section clearfix\">\n            <ul class=\"dsh-tabs\">\n                {{var location = window.i18n[\"dsh.details.label.dealer.location\"] || \"Standort\";}}\n                {{?(!!it.notes && it.notes.openingHoursHTML) || !!it.chainList}}\n                <li class=\"nm-el-lbl nm-el-lbl-03 active-item\" data-tab=\"\">{{=location}}</li>\n                {{?}}\n                <li class=\"nm-el-lbl nm-el-lbl-03 active\" data-tab=\"dsh-location\">{{=location}}</li>\n                {{?!!it.notes && it.notes.openingHoursHTML}}\n\t\t\t\t{{var openinghours = window.i18n[\"dsh.details.label.dealer.openinghours\"] || \"&Ouml;ffnungszeiten\";}}\n                <li class=\"nm-el-lbl nm-el-lbl-03\" data-tab=\"dsh-opening-hours\">{{=openinghours}}</li>\n                {{?}}\n                {{?!!it.chainList}}\n                {{var chainList = window.i18n[\"dsh.details.label.dealer.chainlist\"] || \"Weitere Standorte\";}}\n                <li class=\"nm-el-lbl nm-el-lbl-03\" data-tab=\"dsh-chain-list\">{{=chainList}}</li>\n                {{?}}\n            </ul>\n\n            <div class=\"dsh-panels\">\n                <div class=\"dsh-panel active\" data-panel=\"dsh-location\">\n\t\t\t\t\t<div class=\"dsh-partner-map\"></div>\n                </div>\n                {{?!!it.notes && it.notes.openingHoursHTML}}\n                <div class=\"dsh-panel dsh-opening-hours nm-el-lbl nm-el-lbl-01\" data-panel=\"dsh-opening-hours\">\n                    {{=it.notes.openingHoursHTML}}\n                </div>\n                {{?}}\n                {{?!!it.chainList}}\n \t\t\t\t<div class=\"dsh-panel dsh-chain-list nm-el-lbl nm-el-lbl-01\" data-panel=\"dsh-chain-list\">\n\t\t\t\t\t<div class=\"dsh-chain-list\"></div>\n                </div>\n                {{?}}\n            </div>\n        </div>\n\n    </div>\n</article>\n"

/***/ }),
/* 101 */
/*!*************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dsh-show-all-results.tpl ***!
  \*************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "{{var displayAll = window.i18n[\"dsh.label.search.displayall\"] || \"Alle anzeigen\";}}\n<a href=\"#\" class=\"dsh-show-all-label nm-el-lk nm-el-lk-01 nm-el-lk-ast\">{{=displayAll}}</a>"

/***/ }),
/* 102 */
/*!**************************************************!*\
  !*** ./js/app/configurator/loading-indicator.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 155 */
/*global Promise*/
/**
 * @description module to handle loading indicators during AJAX requests
 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS) {
	'use strict';
	var
	//Private Methods
	__ = {},
		//Public API
		exports = {
			__: __
		};
	__.oDefaults = {
		sSelectorItemLoading: '.nm-j-configurator-item-loading',
		sItemLoadingClass: 'nm-j-configurator-item-loading'
	};
/**
	 * show loading indicator for a configuration item
	 * @param {event} event_ - EventObject
	 * @param {object} data_ - custom Event data
	 * @Example
			data:{
			'id':'prNumber',
			'count': 'count',
			'action': 'itemAdd'||'removeItem',
			'triggerAction': 'click'||'select',
			'$element': 'triggering jQuery element'
		});
	 */
	__.showLoadingIndicator = function(data_) {
		var $element = data_['$element'];
		if ($element && $element.length) {
			$element.addClass(__.oDefaults.sItemLoadingClass);
			//console.log("added indicator "+new Date().getTime());
		}

	};
	/**
	 * remove all loading indicators on AJAX request end (success or failure/abort)
	 */
	__.hideLoadingIndicator = function() {
		//remove loading status from triggred items
		var $items = jQuery(__.oDefaults.sSelectorItemLoading);
		$items.removeClass(__.oDefaults.sItemLoadingClass);
		//console.log("removed indicator "+new Date().getTime());
	};
	/**
	 * add event listener for module specific events
	 */
	__.addEvents = function() {
		__.eventBus.on(EVENTS.CONFIG_CHANGEREQUEST_START, __.showLoadingIndicator);
		__.eventBus.on(EVENTS.CONFIG_CHANGEREQUEST_END, __.hideLoadingIndicator);
	};
	/**
	 * module´s initailize method
	 */
	__.initialize = function() {
		__.addEvents();
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("configuration/loading-indicator.js");
		});
	};
	/**
	 * public api methods
	 */
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 103 */
/*!******************************************!*\
  !*** ./js/app/configurator/dom-state.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 180 */

/**
 * @description Controller to handle all DOM updates for configurator Items (text, images, selectedItems etc.).
 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! events */ 0)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, CONFIGURATOR_API, EVENTS) {

	'use strict';
	//Private Methods
	var __ = {},
		//Public API
		exports = {
			__: __
		};
	__.$stage = null;
	__.oDefaults = {};

	__.initialize = function() {
		//cyclic dependencies!!!!!!!!!
		__.oDefaults = {
			sStageID: '#nm-id-stage',
			sSelectorCarPriceRate: ".nm-car-price-rate",
			sSelectorRenderImage: '.nm-j-configurator-renderimage',
			sSelectorConfigurationSummary: '.nm-j-configuration-summary',
			sSelectorQuantityPicker: '.nm-quantity',
			sSelectorSnippetText: '.nm-j-configurator-text-',
			sSelectorSnippetTextEec: '.nm-j-configurator-text-eec-',
			selectorModelText: '.js-configurator-model-text-',
			selectorModelImage: '.js-configurator-model-image',
			selectorEecImage: '.nm-j-configurator-image-eec'
		};

		__.$stage = jQuery(__.oDefaults.sStageID);
		//Configuration possible?
		if (CONFIGURATOR_API.isConfigurable()) {
			__.addEvents();
		}
		//check for login via SSO-Token (#NEMOBA-5)
		if (document.cookie.indexOf('myAudi=') > -1) {
			//set loged-in body class
			jQuery("body").addClass("nm-logged-in");
		}
	};
	/**
	 * Add Module-specific events
	 * @returns {void}
	 */
	__.addEvents = function() {
		//handle view state updates
		__.eventBus.on(EVENTS.UPDATE_VIEW_STATE, __.handleViewStateUpdates);
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.updateAllDomItems);
		//handle page update (bofore animation starts)
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.updateAllDomItems);
		//handle closing of a conflict or transfer layer
		__.eventBus.on(EVENTS.TRIGGER_DOM_UPDATE, __.handleConflictAndTransferResolves);
		__.eventBus.on(EVENTS.CONFIG_SEND, __.hideRenderImages);
	};

	/**
	 * Remove Module-specific events
	 * @returns {void}
	 */
	__.removeEvents = function() {
		//handle view state updates
		__.eventBus.off(EVENTS.UPDATE_VIEW_STATE, __.handleViewStateUpdates);
		__.eventBus.off(EVENTS.CONFIG_UPDATE, __.updateAllDomItems);
		__.eventBus.off(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		__.eventBus.off(EVENTS.LAYER_LOADED, __.updateAllDomItems);
		__.eventBus.off(EVENTS.TRIGGER_DOM_UPDATE, __.handleConflictAndTransferResolves);
		__.eventBus.off(EVENTS.CONFIG_SEND, __.hideRenderImages);
	};
	/**
	 * Updates the status string on multiple DOM-elements
	 * @returns {void}
	 */
	__.updateDomStatusItems = function(context_) {
		var context = (context_) ? context_ : jQuery('body');
		context.find('.nm-j-configurator-item').each(

		function() {
			var $item = jQuery(this);
			var itemID = $item.attr('data-configurator-id');
			var currentItem = CONFIGURATOR_API.getItem(itemID);

			if ($item.hasClass('nm-j-configurator-no-update')) {
				return true;
			}

			if (itemID && currentItem && currentItem.status) {

				__.setDOMStatusCode($item, currentItem.status);

				if(currentItem.message && currentItem.message[0].text && currentItem.message[0].text !== '') {
					__.setDebugOutput( $item, currentItem.message[0].text);
				}
			}

		});
	};

	/**
	 * update status Items when a page  opens
	 */
	__.handlePageLoaded = function(data) {

		if ( !!data && 'domElement' in data) {
			__.updateDomTextPrices();
			__.updateDomStatusItems(data.domElement);
			__.updateDomTextItems(data.domElement);
			__.updateDomTextSummary();
			__.updateDomRenderImages();

		} else {
			__.updateDomTextPrices();
			__.updateDomStatusItems();
			__.updateDomTextItems();
			__.updateDomTextSummary();
			__.updateDomRenderImages();

		}
		__.updateModeChangeItems();
	};

	/**
	 * update status Items when a layer opens
	 */
	__.handleLayerLoaded = function(data_) {
		if ( !!data_ && !!data_.guid) {
			var $element = jQuery('body [data-guid="' + data_.guid + '"]');
			__.updateDomStatusItems($element);
			__.updateDomTextItems($element);
		} else {
			__.updateDomStatusItems();
			__.updateDomTextItems();
		}
		//update configurator Items (e.g. price, render-image)
		__.updateDomTextPrices();
		__.updateDomTextSummary();
		__.updateDomRenderImages();
		__.eventBus.emit(EVENTS.DOM_UPDATED);
	};

	/**
	 * Extracts the configurator's status code from the dom
	 * @param  {jQuery-Element} $element_ configurator item
	 * @returns {string|null}
	 */
	__.getDOMStatusCode = function($element_) {
		var _sClassName = $element_.get(0).className;
		if (_sClassName.indexOf("nm-j-configurator-status_") === -1) {
			return null;
		}
		return _sClassName.split('nm-j-configurator-status_')[1].split(' ')[0];
	};
	/**
	 * Sets the new DOM status code
	 * @param  {jobject} $element_  - configurator item (jQuery element)
	 * @param {string} sClassStatus_
	 * @param {string}  sStatusNewStatus_
	 */
	__.setDOMStatusCode = function($element, newStatus) {
		if (!!newStatus) {
			var domElement = $element.get(0);
			var className = domElement.className;
			var oldClassName = className;
			className = className.replace(/nm-j-configurator-status_[01]{5}/, ['nm-j-configurator-status_', newStatus].join(''));

			if (oldClassName !== className) {
				domElement.className = className;
			}
		}
	};

	/**
	 * Sets DPU Debug Output Message
	 * @param  {jobject} $element_  - configurator item (jQuery element)
	 * @param {string} debugMessage_
	 */
	__.setDebugOutput = function($element, debugMessage) {
		var item;

		if (!!debugMessage) {
			debugMessage = ' (' + debugMessage + ')';
			item = ($element.find(".nm-debug-item").length === 1)? jQuery($element.find(".nm-debug-item")[0]) : $element;
			item.attr('data-message', debugMessage); //(' / Debug: ' +
		}
	};

	/**
	 * reset all status items after closing/cancelling a conflict layer
	 */
	__.handleConflictAndTransferResolves = function(data_) {

/*//remove loading status from triggred items
		jQuery('.nm-j-configurator-item-loading').removeClass('nm-j-configurator-item-loading');
		*/
		//reset all Status Items
		__.updateAllDomItems();
	};


	/**
	 * handle all changes of the view states (e.g. switching the car´s perspective)
	 * @param  {object} event_  - CustomEvent {"currentView":{String},"context":{String}}
	 * @returns {void}
	 */
	__.handleViewStateUpdates = function(data_) {
		var viewState, scope, $context;
		viewState = data_.currentView;
		if ( !!data_ && data_.domElement && data_.domElement.length) {
			$context = data_.domElement;
		}
		__.updateDomRenderImages($context);
	};

	__.handleConfigurationUpdate = function(event_, data_) {
		// console.log("configurator.items.controller._handleConfigurationUpdate");
		__.updateDomStatusItems();
		__.updateDomTextItems();
		__.updateDomTextPrices();
		__.updateDomTextSummary();
		__.updateDomRenderImages();
		__.eventBus.emit(EVENTS.DOM_UPDATED);
	};

	__.updateAllDomItems = function() {
		// console.log("configurator.items.controller._handleConfigurationUpdate");
		__.updateDomStatusItems();
		__.updateDomTextItems();
		__.updateDomTextPrices();
		__.updateDomTextSummary();
		__.updateDomRenderImages();
		__.updateModeChangeItems();
		__.eventBus.emit(EVENTS.DOM_UPDATED);
	};
	/**
	* update all prices within the "body"
	*/
	__.updateDomTextPrices=function() {
		var configuration = CONFIGURATOR_API.getConfiguration();
			if(!!configuration && !!configuration.prices){
				__.setDOMText(jQuery("body"),configuration.prices);
			}
	};

	/**
	 * Updates Display of price or rate in basket.
	 */
	__.updateModeChangeItems = function() {
		var mode, modeClass, tableColumnLabelSearch, tableColumnLabelReplace, tableColumnHtml, tableColumnHeader;
		mode = CONFIGURATOR_API.getPriceRateMode();
		modeClass = 'nm-mode-' + mode;
		jQuery('body').removeClass('nm-mode-rate nm-mode-price');
		jQuery('body').addClass(modeClass);
		// update engine list
		tableColumnHeader = jQuery('.nm-engine-list a[data-module-maw-criteria=price]');
		if (tableColumnHeader.length > 0) { /** @TODO localizee price */
			tableColumnLabelSearch = (mode === 'rate') ? 'Preis' : 'Rate';
			tableColumnLabelReplace = (mode === 'rate') ? 'Rate' : 'Preis';
			tableColumnHtml = tableColumnHeader.html();
			tableColumnHeader.html(tableColumnHtml.replace(tableColumnLabelSearch, tableColumnLabelReplace));
		}
		// set checkbox in basket
		jQuery('.nm-price-rate-switch').each(function() {
			this.checked = (mode === 'rate');
		});
	};

	/**
	 * Updates dom items according to canfigutator status stored in
	 * STORAGE.get('complete','configurator')
	 * @param  {string} sIdScope_  - Limit the update (data-guid)
	 * @param  {object} [oItems_] - Items object containing the data
	 * @returns {void}
	 */
	__.updateDomTextItems = function($element_) {
		var $element = ($element_) ? $element_ : jQuery('body');
		$element.find('.nm-j-configurator-item').each(function() {
			var $item = jQuery(this);
			var itemID = $item.attr("data-configurator-id");
			var configItem = CONFIGURATOR_API.getItem(itemID);
			if (configItem) {
				__.setDOMText($item, configItem);
			}
		});

	};
	
	/**
	 * Sets the value of a DOM-element
	 * @param {[type]} $elItem_ [
	 * @param {object} oProp_
	 */
	__.setDOMText = function($elItem_, oProp_) {
		var key;
		var validKeys = {
			'rate': '',
			'price': '',
			'optionsPrice': '',
			'subname': '',
			'packageDescription': '',
			'single-price': '',
			'financeGlobalDisclaimer': '',
			'financeParameters': '',
			'financeProductDisclaimer': '',
			'financeProductName': '',
			'count': '',
			'description': '',
			'rotrprice':'',
			'nettoBase': '',
			'nettoOptions': '',
			'taxTotal': '',
			'taxableBenefit1': '',
			'taxableBenefit2': '',
			'rotrRate': '',
			'totalRate': ''
		};
		for (key in validKeys) {
			if (typeof oProp_[key]!=='undefined') {
				validKeys[key] = oProp_[key];
			} else {
				delete validKeys[key];
			}

		}

		key = '';
		for (key in validKeys) {
			if (oProp_.hasOwnProperty(key)) {
				$elItem_.find([__.oDefaults.sSelectorSnippetText, key].join('')).html(oProp_[key]);
			}
		}

	};

	__.hideRenderImages = function() {

		jQuery(__.oDefaults.sSelectorRenderImage).each(function() {

			jQuery(this).addClass("nm-fade-out");

		});

	};

	/**
	 * update all renderimages according to the current view state (car´s perspective)
	 * @param  {object} $context_ - context within  renderimages have to be updated
	 * @returns {void}
	 */
	__.updateDomRenderImages = function($context_) {
		var assets = CONFIGURATOR_API.getConfigurationAssets();
		if (!assets) {
			return;
		}
		var $context =$context_ || jQuery("body");
		//console.log("configurator.dom._updateDomRenderImages::",$context_['selector']);
		//data-renderimage-type="thumbnail" data-renderimage-view="$item.View"
		jQuery(__.oDefaults.sSelectorRenderImage, $context).each(function() {
			var $item = jQuery(this);
			var src;
			var newURL;
			var altImg;

			//size of the image (thumbnail etc.)
			var imageType = $item.attr("data-renderimage-type");
			//current view of the car (exterior,exterior_front,exterior_back...) or default ("exterior")
			var imageView = $item.attr("data-renderimage-view");
			//es gibt kein thumbanil.new image fuer interior und dashboard!!!
			// siehe NEMOBA-6345
			// if (imageType.indexOf('thumbnail')!==-1 && (imageView === "interior" || imageView === "dashboard" || imageView === "rearseat")) {
			//	imageType = imageType.split(".")[0];
			// }

			if (!!imageType && !!imageView) {

				//is a specific view defined?else use currently selected view from the stage
				src = assets[imageView];

				//Image has to have a size
				if (!!src && !!src[imageType]) {

					newURL = CONFIGURATOR_API.getRenderUrl() + src[imageType];

					if (src[imageType].indexOf("/preview/") !== 0) {
						altImg = CONFIGURATOR_API.getAltImagePath(imageView, imageType);
						if (!!altImg) {
							newURL += "?alt=" + altImg;
						}
					}

					if ($item.is('img')) {
						//console.log('oh, this is a real image', $item);
						if (newURL !== $item.attr('src')) {
							$item.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-out").delay(300).load(function(event) {
								jQuery(event.target).removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in");
							}).attr('src', newURL);

						} else {
							$item.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in");
						}
					} else if ($item.is('source')) {
						$item.attr('srcset', newURL);
					} else if ($item.attr('data-url') !== newURL) {
						$item.attr('data-url', newURL);
						$item.css('backgroundImage', 'url(' + newURL + ')');
					}
				} else {
					$item.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in");
				}
			} else {
				$item.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in");
			}
		});
/*
		//do not update stage specials!
		if(!!_currentStageView && _currentStageView.indexOf("special")>-1){
				return;
		}

		//update stagebackground image
		if(!!_currentStageView && !!assets[_currentStageView] && !!assets[_currentStageView].stage){
			$item=jQuery( 'div.nm-stage-media >img');
			attr('src', _getRenderURL()+assets[_currentStageView].stage);
		}*/

	};
	/**
	 * Update configuration item, a.k.a "cart". Gets values from
	 * STORAGE.get('complete','configurator')
	 * @returns {void}
	 */
	__.updateDomTextSummary = function() {


		// update the efficiency-details for the engine
		var $container = jQuery('body');
		var motorcode = CONFIGURATOR_API.getMotorcode();
		var engineItem = CONFIGURATOR_API.getItem(motorcode);
		var modelItem=CONFIGURATOR_API.getModelsInfo(motorcode);
		var $efficiency = jQuery('.nm-j-configuration-summary');
		var configuration = CONFIGURATOR_API.getConfiguration();
		if (!configuration) {
			console.warn("updateDomTextSummary: no configuration available!");
		}
		var eecDetails = (configuration && !!configuration.eec) ? configuration.eec : {};
		var key, eecImage;

		if (configuration) {
			__.setDOMText(jQuery(__.oDefaults.sSelectorConfigurationSummary), configuration);
		}

		//update summary content
		var $summaryContainer;
		if ( !!window.mss) {
			$summaryContainer=jQuery(".mssc-summary-engine, .mssc-summary-technical-data-container");
		} else {
			$summaryContainer=jQuery("[data-template='summary']");
		}
		//merge engine model data (static) with specific configuration engine data (dynamic)
		engineItem=jQuery.extend(modelItem,engineItem);
		//patch for markets without dynamic EEC (e.g. CH) => use modelInfo 'energy-efficiency-category' instead!!!
		if(!!eecDetails && !eecDetails.efficiency&&!!engineItem&&engineItem['energy-efficiency-category']){
			eecDetails.efficiency=engineItem['energy-efficiency-category'];
		}
		if ($summaryContainer.length) {
			if (configuration && !!configuration['description']) {
				$summaryContainer.find(".nm-j-configurator-text-description").html(configuration['description']);
			}
			// update the model-specific informations in the dom
			if ( !!engineItem) {

				key = '';
				for (key in engineItem) {
					if (engineItem.hasOwnProperty(key)) {
						if (key === 'image') {
							$summaryContainer.find(__.oDefaults.selectorModelImage).attr('src', engineItem[key]);
						} else {
							$summaryContainer.find([__.oDefaults.selectorModelText, key].join('')).html(engineItem[key]);
						}
					}
				}

			}

			// update the configuration-specific informations in the dom (within the summary context)
			if ( !!eecDetails) {

				key = '';
				for (key in eecDetails) {
					if (eecDetails.hasOwnProperty(key)) {
						$summaryContainer.find([__.oDefaults.sSelectorSnippetTextEec, key].join('')).html(eecDetails[key]);
					}
				}

				// change the efficiency-image
				if ( !!eecDetails.efficiency) {
					if ( !!window.mss) {
						eecImage = CONFIGURATOR_API.getDocrootUrl() + '/cms4i-nemo/eec-images/eec-label-' + eecDetails.efficiency.toLowerCase().replace(/\+/, 'plus') + '.png';
					} else {
						eecImage = CONFIGURATOR_API.getDocrootUrl() + '/cms4i-nemo/eec-images/eec-label-' + eecDetails.efficiency.toLowerCase().replace(/\+/, 'plus') + '-small.png';
					}
					$summaryContainer.find(__.oDefaults.selectorEecImage).attr('src', eecImage);
				}


			}
		}
		//update configuration summary (e.g. footer,footnote)
		if ( !!eecDetails && $efficiency.length) {

			key = '';
			for (key in eecDetails) {
				if (eecDetails.hasOwnProperty(key)) {
					$efficiency.find([__.oDefaults.sSelectorSnippetTextEec, key].join('')).html(eecDetails[key]);
				}
			}

			// change the efficiency-image
			if ( !!eecDetails.efficiency) {
				eecImage = CONFIGURATOR_API.getDocrootUrl() + '/cms4i-nemo/eec-images/eec-label-' + eecDetails.efficiency.toLowerCase().replace(/\+/, 'plus') + '-small.png';
				$efficiency.find(__.oDefaults.selectorEecImage).attr('src', eecImage);
			}


		}


		if (CONFIGURATOR_API.isConfigurationStarted()) {

			//hide price-rate if not vailable
			var hasPriceRate = !!CONFIGURATOR_API.getConfigurationCarPriceRate();

			if (!hasPriceRate) {
				jQuery(__.oDefaults.sSelectorCarPriceRate).addClass("nm-hidden");
				jQuery('.nm-footnote-finance').addClass("nm-hidden");
			} else {

				jQuery(__.oDefaults.sSelectorCarPriceRate).removeClass("nm-hidden");
				jQuery('.nm-footnote-finance').removeClass("nm-hidden");
			}
		}


	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("configurator/dom-state.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 104 */
/*!************************************!*\
  !*** ./js/app/ui/cookie-policy.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! core/template */ 5),
	__webpack_require__(/*! text!templates/cookie-policy.tpl */ 105)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (DOM_UTILS, EVENTS, TPL, COOKIE_POLICY_TPL) {

	"use strict";

	var __ = {},
		exports = {
			'__': __
		};

	__.checkCookiePolicy = function() {
		var header = DOM_UTILS.getElement('.nm-header'),
			optionsData;

		if(!DOM_UTILS.isElement(header)) {
			return;
		}

		// check if entry in localStorage was set
		if (!localStorage.getItem('cookiepolicy') && SETUPS.get('cookie.policy.scope')) {

			optionsData = {
				text: SETUPS.get('cookie.text'),
				linkText: SETUPS.get('cookie.link.text'),
				linkUrl: SETUPS.get('cookie.link.url')
			};

			header.insertAdjacentHTML('beforebegin', TPL.render(COOKIE_POLICY_TPL, optionsData));
		}
	};

	__.handleCookieAccepted = function() {
		var el = DOM_UTILS.getElement('.nm-cookiepolicy');
		localStorage.setItem('cookiepolicy', true);
		if(DOM_UTILS.isElement(el)) {
			el.classList.add('nm-hidden');
		}
	};

	__.addEvents = function() {
		__.domEventDelegate.on("click", '.continue', __.handleCookieAccepted);
	};


	__.initialize = function () {
		if(!__.init){
			__.addEvents();
		}
		__.init=true;
		__.checkCookiePolicy();
	};


	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("ui/cookie-policy.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 105 */
/*!******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/cookie-policy.tpl ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-cookiepolicy\" data-theme=\"dark\">\n\t<div class=\"nm-cookiepolicy-inner nm-text-list\">\n\t\t<div>{{=it.text}}</div>\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<a x-cq-linkchecker=\"skip\" id=\"showPolicy\" href=\"{{=it.linkUrl}}\" class=\"nm-layerLink nm-link-basic\">{{=it.linkText}}</a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a x-cq-linkchecker=\"skip\" style=\"text-decoration: none\" id=\"continue\" class=\"continue nm-link-basic\">\n\t\t\t\t\t<span>{{=window.i18n['cookie-continue-label']}}</span>\n\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n"

/***/ }),
/* 106 */
/*!*************************************!*\
  !*** ./js/app/core/page/pg-main.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 172, maxparams: 8 */
/* global SETUPS */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! core/content */ 15), __webpack_require__(/*! events */ 0), __webpack_require__(/*! router */ 8), __webpack_require__(/*! core/layer/api */ 10), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! core/page/pg-dom */ 24), __webpack_require__(/*! text!templates/error-layer.tpl */ 69)], __WEBPACK_AMD_DEFINE_RESULT__ = function(CONTENT, EVENTS, ROUTER, LAYER, TPL, PGDOM, ERROR_LAYER_TPL) { //eslint-disable-line max-params
	"use strict";
	var __, exports;
	__ = {};
	exports = {
		__: __
	};
	__.eventBus = null;
	__.currentPageId = null;
	__.queue = [];
	__.lock = false;
	__.backwardsAnimation = false;
	__.oDefaults = {
		navSelector: '',
		derivatSubListSelector: '.nm-area-content .nm-navigation-derivative-sub-list a'
	};
	__.initialize = function() {
		__.oDefaults.navSelector = SETUPS.get('nemo.nav.navSelector');
		__.currentPageId = PGDOM.getCurrentPageId();
		__.addEvents();
	};
	/**
	 * Add event handlers
	 */
	__.addEvents = function() {
		//subscribe to page.open
		__.eventBus.on(EVENTS.PAGE_OPEN, __.handlePageOpen);
		//register navigation clicks
		ROUTER.register(__.oDefaults.navSelector + ' a', 'page');
		ROUTER.register(__.oDefaults.derivatSubListSelector, 'page');
		//register generic pageOpen links
		ROUTER.register('.nm-pageOpen', 'page');
	};
	/**
	 * Handle animation completion
	 */
	__.handlePageTransitionComplete = function() {
		//console.log("handlePageTransitionComplete");
		__.reset();
		__.eventBus.emit(EVENTS.PAGE_READY);
		// start new update if there were clicks in between
		if (__.queue.length > 0) {
			__.handlePageOpen(null, __.queue.pop());
			__.queue = [];
		}
	};
	/**
	 * Handle Router Event 'page.open'
	 */
	__.handlePageOpen = function(data_) {
		if (this && typeof this.preventDefault === 'function') {
			this.preventDefault();
		}
		if (!__.isLocked()) {
			var _sUrl,
				pathBase = SETUPS.get('nemo.core.router.pathBase'),
				pathName = data_.pathname;
			__.setLock(new Date().getTime());
			// add leading slash if necessary (IE location.pathname issue)
			if (pathName.substr(0, 1) !== '/') {
				pathName = '/' + pathName;
			}
			__.newPageUrl = pathName;
			_sUrl = pathName.replace(pathBase, '');
			//sKey_, fnCallback_, cache, errorFnCallback_
			CONTENT.getContent(_sUrl, false).then(__.pageContentHandler).catch(__.handlePageOpenError);
		} else {
			__.queue.push(data_);
		}
	};
	/*
	 * Check for page transition lock
	 * @returns {Boolean} - whether page transition is currently locked
	 */
	__.isLocked = function() {
		return !!__.lock;
	};
	/**
	 * Set page transition lock
	 * @param  {String} time - time string
	 */
	__.setLock = function(time) {
		__.lock = time;
	};
	/**
	 * Reset lock, page id and title
	 */
	__.reset = function() {
		__.lock = false;
		__.currentPageUrl = __.newPageUrl;
		__.newPageUrl = '';
		__.newPageId = null;
		__.newPageTitle = null;
	};
	/**
	 * Callback called when new content available from CONTENT module
	 * @param {String} content - HTML string
	 */
	__.pageContentHandler = function(content_) {
		var insertedPage = PGDOM.insertNewPageContent(content_);
		__.eventBus.emit(EVENTS.PAGE_LOADED, {
			domElement: insertedPage
		});
		__.backwardsAnimation = PGDOM.isBackwardsAnimation(__.newPageUrl, __.currentPageUrl);
		// prepare and trigger animation
		PGDOM.preparePageTransition(__.backwardsAnimation);
		setTimeout(function() {
			PGDOM.triggerPageTranstion();
		}, 10);
		// complete animation
		setTimeout(function() {
			// cleanup dom for new page
			PGDOM.finishPageTransition();
			__.handlePageTransitionComplete();
		}, 1000);
	};
	/*
	 * Handle page open error
	 */
	__.handlePageOpenError = function(error) {
		var tplStr;
		history.back();
		tplStr = TPL.render(ERROR_LAYER_TPL, {
			errorMessage: window.i18n['error-layer.unknown-error'] || 'Es ist ein unbekannter Fehler aufgetreten'
		});
		LAYER.open('error', tplStr).then(function(layer) {
			var btn = layer.getElement().querySelector('.nm-error-layer .nm-j-ok-btn');
			btn.addEventListener('click', function tmpBtnHandler(e) {
				if (e.preventDefault) {
					e.preventDefault();
				}
				// remove this handler
				e.target.removeEventListener(e.type, tmpBtnHandler);
				layer.close();
			});
		});
		__.eventBus.emit(EVENTS.PAGE_READY);
		__.reset();
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("core/page/pg-main.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 107 */
/*!**************************************!*\
  !*** ./js/app/core/page/pg-title.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
    __webpack_require__(/*! jquery */ 1),
    __webpack_require__(/*! events */ 0),
    __webpack_require__(/*! core/page/pg-dom */ 24)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, PGDOM) {
    "use strict";

    var __, exports;
    __ = {};
    exports = {
        __: __
    };

    __.oDefaults = {

    };
    __.initialize = function() {
        __.addEvents();
    };
    __.addEvents = function() {
        __.eventBus.on(EVENTS.PAGE_LOADED, __.handerPageLoaded);
    };
    __.handerPageLoaded = function(payload) {
		// set new title
        var newTitle = PGDOM.extractPageTitle(payload.domElement);
        var div, decodedTitle;
        if (newTitle && newTitle !== '') {
            // resolve html encoding
            div = document.createElement('div');
            div.innerHTML = newTitle;
            decodedTitle = div.firstChild.nodeValue;
            PGDOM.setPageTitle(decodedTitle);
        }
    };

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("core/page/pg-title.js");
		});
	};
    return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 108 */
/*!****************************************!*\
  !*** ./js/app/core/page/pg-preload.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! core/content */ 15),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! core/page/pg-dom */ 24),
	__webpack_require__(/*! core/signal */ 4)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, CONTENT, EVENTS, PGDOM, SIGNAL) {//eslint-disable-line max-params
	"use strict";

	var __, exports;
	__ = {};
	exports = {
		__: __
	};

	__.oDefaults = {
		initialContentAreaSelector: '.nm-wrapper-content .nm-area-content:first-child',
		initalScWrapper: '.nm-wrapper'
	};

	__.scEventBus = SIGNAL.getEmitter('stockcar');

	__.initialize = function() {
		__.addEvents();
	};

	__.addEvents = function() {
		__.scEventBus.one(EVENTS.VERSION_LOAD_COMPLETE, __.handlerSvdVersionLoaded);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlerPageLoaded);
		//BUGFIX #NEMOBA-5152 load content after version call is completed
		__.eventBus.one(EVENTS.VERSION_LOAD_COMPLETE, __.handlerVersionLoaded);
	};

	__.preloadContent = function(domElement) {
		var preloadArr;
		// Don't preload if content data-type is 'nomo':
		// Potentially too many sub pages to store in
		// sessionStorage.
		if (SETUPS.get('nemo.content.preload') === "true" || SETUPS.get('stockcar.context') === "true" || PGDOM.isNomo() === false ) {
			preloadArr = PGDOM.extractNavUrls(domElement);
			CONTENT.fillCache(preloadArr);
		}
	};

	__.handlerPageLoaded = function(payload) {
		__.preloadContent(payload.domElement);
	};
	__.handlerVersionLoaded = function() {
		__.preloadContent(jQuery(__.oDefaults.initialContentAreaSelector));
	};
	__.handlerSvdVersionLoaded = function() {
		__.preloadContent(jQuery(__.oDefaults.initalScWrapper));
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("core/page/pg-preload.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 109 */
/*!*************************************!*\
  !*** ./js/app/core/page/pg-type.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* eslint max-params: [2, 5] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! events */ 0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, EVENTS) {
	'use strict';
	//Private Methods
	var __ = {},
		//Public API
		exports = {
			__: __
		};

	__.oDefaults = {
		'selectorAreaContent': '.nm-area-content',
		'selectorBody': 'body'
	};
	__.eventBus = null;

	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_READY, __.updatePageType);
	};
	__.removeEvents = function() {
		__.eventBus.off(EVENTS.PAGE_READY, __.updatePageType);
	};
	__.updatePageType = function(event_) {
		var area = DOM_UTILS.getElement(__.oDefaults.selectorAreaContent),
			body = DOM_UTILS.getElement(__.oDefaults.selectorBody),
			pageType;
		pageType = area.getAttribute("data-page-type") || 'default';
		body.setAttribute("page-type",pageType);
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/pg-type.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ }),
/* 110 */
/*!******************************************!*\
  !*** ./js/app/core/layer/layer-title.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! core/layer/layer-dom */ 44),
	__webpack_require__(/*! utils/dom */ 2)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, LAYERDOM, DOM_UTILS) {
	"use strict";

	var __, exports;
	__ = {};
	exports = {
		__: __
	};
	/**
	 * add events ;)
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handerLayerLoaded);
		__.eventBus.on(EVENTS.LAYER_CLOSED, __.handerLayerClosed);
	};
	/**
	 * set the title back to the page's title, when the layer has been closed
	 * @returns {void}
	 */
	__.handerLayerClosed = function() {
		var pageTitleElem = DOM_UTILS.getElement('#nm-page-title');

		if (!!pageTitleElem && pageTitleElem !== null) {
			__.updateTitle(pageTitleElem.innerHTML);
		}
	};
	/**
	 * extract the title of the layer from the payload an set the title to it
	 * @param {Object} payload - the event payload containing the layer content element
	 * @returns {void}
	 */
	__.handerLayerLoaded = function(payload) {
		var layerTitle;

		if (!!payload && !!payload.element) {
			layerTitle = LAYERDOM.extractLayerTitle(payload.element);
			__.updateTitle(layerTitle);
		}
	};
	/**
	 * update the HTML title
	 * @param {String} newTitle - the new title to set
	 * @returns {void}
	 */
	__.updateTitle = function(newTitle) {
		var div, decodedTitle;

		if (!!newTitle && newTitle !== '') {
			// resolve html encoding
			div = document.createElement('div');
			div.innerHTML = newTitle;
			decodedTitle = div.firstChild.nodeValue;
			LAYERDOM.setPageTitle(decodedTitle);
		}
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("core/layer/layer-title.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 111 */
/*!************************************************!*\
  !*** ./js/app/module/model-navigation-wrap.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! module/menuflyout */ 45),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (DOM_UTILS, MENUFLYOUT, EVENTS) {
"use strict";
	//ToDo CleanUp Variables
	var
		FLYOUT_SWITCH_SELECTOR = '.nm-navigation-carline-main-item > a',
		FLYOUT_SELECTOR = '.nm-navigation-header-model-overlay',
		FLYOUT_CLOSE_BUTTON = '.nm-close',

		CARLINE_SELECTOR = '.nm-navigation-header-wrapped-link',
		CARLINE_CONTAINER_SELECTOR = '.nm-navigation-model-container',
		CARLINE_CONTAINER_ACTIVE_CLASS = 'nm-navigation-model-container-active',

		MODEL_SELECTOR_WRAP = '.nm-navigation-model-container > ul',
		MODEL_ACTIVELINK_SELECTOR = '.nm-navigation-model-container-active > ul > li.nm-header-detail-link-active',
		MODEL_LINK_SELECTOR = '.nm-navigation-model-container > ul > li > a',							   
		DETAIL_ACTIVE_CLASSNAME = 'nm-header-detail-link-active',

		DROPDOWN_ITEM_SELECTOR = '.nm-navigation-header-dropdown-item a',

		DEFAULT_FLYOUT_SELECTOR = '.nm-header-overlay-is-open',
		SEARCH_INPUT = '.nm-su-input',

		HOVER_TIMEOUT = 300,
		TRIANGLE_HEIGHT = 460,
		FLYOUT_TIMEOUT = 100,
		__ = {},
		exports = { __ : __ };

	/**
	 * setdetailContentHeight
	 * sets the height of the flyout container to match its detail content + bottom-margin
	 * @returns {void} returns nothing
	 */
	__.setdetailContentHeight = function() {
		var submenu, detailContent, flyoutContainer, detailContentBottomOffset = 85;

		flyoutContainer = DOM_UTILS.getElement(FLYOUT_SELECTOR);
		submenu = DOM_UTILS.getElement('.nm-navigation-model-subnavigation', flyoutContainer);
		detailContent = DOM_UTILS.getElement('.nm-navigation-model-container-active .nm-header-detail-link-active .nm-navigation-header-detail-overlay-content', flyoutContainer);
		flyoutContainer.style.height = submenu.clientHeight + detailContent.clientHeight + detailContentBottomOffset + 'px';
	};

	__.handleFlyoutOpen = function() {
		var flyoutContainer = DOM_UTILS.getElement(FLYOUT_SELECTOR);
		if (DOM_UTILS.isElement(flyoutContainer) && !flyoutContainer.classList.contains('flyout-is-open')) {
			flyoutContainer.classList.add('flyout-is-open');

			//set height of active detail container
			__.setdetailContentHeight();
		}
	};

	__.closeSearchFlyout = function() {
		var searchInput = DOM_UTILS.getElement('.nm-header-overlay-is-open ' + SEARCH_INPUT);
		var flyout = DOM_UTILS.getElementsArray(DEFAULT_FLYOUT_SELECTOR);
		if(DOM_UTILS.isElement(searchInput)) {
			searchInput.blur();
		}
		flyout.forEach(function (item) {
			MENUFLYOUT.close(item);
		});
		//MENUFLYOUT.closeAll();
	};

	__.flyoutInterval;

	__.checkForFlyoutClose = function() {
		__.flyoutInterval = setTimeout(function() {
			var flyout = DOM_UTILS.getElement(FLYOUT_SELECTOR);
			if(DOM_UTILS.isElement(flyout)) {
				flyout.classList.remove('flyout-is-open');
			}
		}, FLYOUT_TIMEOUT);
	};
	__.stopFlyoutClose = function() {
		clearTimeout(__.flyoutInterval);
	};

	__.handleCarlineNavigationHover = function(e) {
		var item = e.target;
		if(DOM_UTILS.isElement(item)) {
			var ref = item.getAttribute('data-ref-id');
			var carlines = DOM_UTILS.getElementsArray(CARLINE_SELECTOR);
			carlines.forEach(function(carline) {
				carline.classList.remove('active');
			});
			item.classList.add('active');

			var carlineModelContainer = DOM_UTILS.getElementsArray(CARLINE_CONTAINER_SELECTOR);
			carlineModelContainer.forEach(function(container) {
				container.classList.remove(CARLINE_CONTAINER_ACTIVE_CLASS);
			});
			carlineModelContainer[ref-1].classList.add(CARLINE_CONTAINER_ACTIVE_CLASS);

			//set height of active detail container
			__.setdetailContentHeight();
		}
	};

	__.handleModelNavigationMouseEnter = function(e) {
		e.preventDefault();
		e.stopImmediatePropagation();
		__.activeItem = DOM_UTILS.getElement(MODEL_ACTIVELINK_SELECTOR);
		__.domEventDelegate.on('mousemove', __.handleNavigationMouseMove);
	};

	__.handleModelNavigationMouseLeave = function(e) {
		__.domEventDelegate.off('mousemove', __.handleNavigationMouseMove);
	};

	//TODO - Inhalt Switchen
	__.handleActiveItemChange = function(newActiveItem) {
		__.activeItem.classList.remove(DETAIL_ACTIVE_CLASSNAME);
		__.activeItem = newActiveItem;
		__.activeItem.classList.add(DETAIL_ACTIVE_CLASSNAME);

		//set height of active detail container
		__.setdetailContentHeight();
	};

	__.handleHoverTimeout = function(e) {
		if (DOM_UTILS.isElement(__.activeItemNominee) && !(__.activeItemNominee.parentNode === __.activeItem)) {
			__.handleActiveItemChange(__.activeItemNominee.parentNode);
		}
	};

	__.handleNavigationMouseMove = function(e) {
		__.activeItemNominee = DOM_UTILS.closest(e.target, MODEL_LINK_SELECTOR);
		if (!__.activeItemNominee) {
			return;
		}

		var modelSelectorWrap = DOM_UTILS.closest(e.target, MODEL_SELECTOR_WRAP);
		var modelSelectorWrapLink = DOM_UTILS.getElement('a', modelSelectorWrap.firstElementChild);
		__.topBoundingRect = modelSelectorWrapLink.getBoundingClientRect();


		// limit to visible li area (the li-s currently use full horizontal space...)
		if (e.clientX < __.topBoundingRect.right) {

			__.x0 = e.clientX,
			__.y0 = e.clientY;

			if (!__.x1 || !__.y1) {
				__.x1 = __.x0;
				__.y1 = __.y0;
			}
			__.x2 = __.topBoundingRect.right;
			__.y2 = Math.max(0, __.topBoundingRect.top);
			__.x3 = __.x2;
			__.y3 = __.topBoundingRect.top + TRIANGLE_HEIGHT;

			if (__.activeItemNominee.parentNode === __.activeItem) {

				if (!MENUFLYOUT.isInsideTriangle(__.x0, __.y0, __.x1, __.y1, __.x2, __.y2, __.x3, __.y3)) {
					__.x1 = __.x0;
					__.y1 = __.y0;
				}
			} else {

				if (__.activeItem) {
					if (MENUFLYOUT.isInsideTriangle(__.x0, __.y0, __.x1, __.y1, __.x2, __.y2, __.x3, __.y3)) {
						clearTimeout(__.hoverTimeout);

						__.hoverTimeout = setTimeout(__.handleHoverTimeout, HOVER_TIMEOUT);
					} else {
						__.handleActiveItemChange(__.activeItemNominee.parentNode);
					}
				}
			}
		}
	};

	__.addEvents = function addEvents () {
		__.domEventDelegate.on('mouseover', FLYOUT_SWITCH_SELECTOR, __.handleFlyoutOpen);
		__.domEventDelegate.on('mouseout', FLYOUT_SWITCH_SELECTOR, __.checkForFlyoutClose);

		__.domEventDelegate.on('mouseover', FLYOUT_SELECTOR, __.stopFlyoutClose);
		__.domEventDelegate.on('mouseout', FLYOUT_SELECTOR, __.checkForFlyoutClose);

		__.domEventDelegate.on('mouseover', CARLINE_SELECTOR, __.handleCarlineNavigationHover);

		__.domEventDelegate.on('mouseover', MODEL_SELECTOR_WRAP, __.handleModelNavigationMouseEnter);
		__.domEventDelegate.on('mouseout', MODEL_SELECTOR_WRAP, __.handleModelNavigationMouseLeave);

		__.domEventDelegate.on('mouseover', DROPDOWN_ITEM_SELECTOR, __.closeSearchFlyout);

		__.domEventDelegate.on('click', FLYOUT_SELECTOR + ' ' + FLYOUT_CLOSE_BUTTON, __.closeSearchFlyout);
	};

	__.removeEvents = function removeEvents () {
		__.domEventDelegate.off('mouseover', FLYOUT_SWITCH_SELECTOR, __.handleFlyoutOpen);
		__.domEventDelegate.off('mouseout', FLYOUT_SWITCH_SELECTOR, __.checkForFlyoutClose);

		__.domEventDelegate.off('mouseover', FLYOUT_SELECTOR, __.stopFlyoutClose);
		__.domEventDelegate.off('mouseout', FLYOUT_SELECTOR, __.checkForFlyoutClose);

		__.domEventDelegate.off('mouseover', CARLINE_SELECTOR, __.handleCarlineNavigationHover);

		__.domEventDelegate.off('mouseover', MODEL_SELECTOR_WRAP, __.handleModelNavigationMouseEnter);
		__.domEventDelegate.off('mouseout', MODEL_SELECTOR_WRAP, __.handleModelNavigationMouseLeave);

		__.domEventDelegate.off('mouseover', DROPDOWN_ITEM_SELECTOR, __.closeSearchFlyout);

		__.domEventDelegate.off('click', FLYOUT_SELECTOR + ' ' + FLYOUT_CLOSE_BUTTON, __.closeSearchFlyout);
	};


	__.initialize = function() {
		if (SETUPS.get('hasModelNavigationWrap') === true) {
			__.addEvents();
		}
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/model-navigation-wrap.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 112 */
/*!*******************************!*\
  !*** ./js/app/module/cart.js ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, CONFIGURATOR_API, EVENTS) {
	"use strict";

	var __ = {},
		exports = {
		'__': __
	};

	var _instance = false;

	// private vars
	__.oDefaults = {
		sSelectorCart: '.nm-basket',
		sSelectorSnippetText: '.nm-j-configurator-text-'
	};

	/**
	 * Updates the values within the cart
	 * @param {Element} $el_ - the element
	 * @param {String} price_ - the price
	 * @returns {void}
	 */
	__.updateAndAnimatePrice = function ($el_, price_) {
		$el_.stop(true,true).
			animate({opacity:"0.01"},250,"easeInSine",function(){jQuery(this).text(price_);}).
			delay(400).
			animate({opacity:"1"},300,"easeOutSine");
	};


	__.hidePriceAndRate = function(_$el) {
		var _sKey, _$elItem;
		var _prop = {
			'price': {},
			'rate': {}
		};
		for (_sKey in _prop) {
			if (_prop.hasOwnProperty(_sKey)) {
				_$elItem = _$el.find([__.oDefaults.sSelectorSnippetText, _sKey].join(''));
				if (_$elItem.text() === '') {
					_$elItem.closest('div').addClass("nm-hidden");
				}
			}
		}
		//hide configuration start button
		// _$el.find(".nm-configuration-start").addClass("nm-hidden");
	};

	__.hideRateIfUnavailable = function(_prop) {
		var totalRateRaw;

		//no rate available => hide 'change rate' button
		// First we check for the `prices` property. If it's not there, something
		// else went wrong which we just ignore.
		if(!!_prop.prices) {
			totalRateRaw = _prop.prices.totalRateRaw;
			// We check for both undefined and a zero value
			if (typeof totalRateRaw === 'undefined' || parseFloat(totalRateRaw) === 0) {
				jQuery('body').addClass('nm-no-rate');
			} else {
				jQuery('body').removeClass('nm-no-rate');
			}
		}
	};

	__.updatePrice = function(_$el, _prop, event_) {
		var _sKey, _$elItem;
		var _price = _prop.price;

		for (_sKey in _prop) {
			if (_prop.hasOwnProperty(_sKey)) {
				_$elItem = _$el.find([__.oDefaults.sSelectorSnippetText, _sKey].join(''));
				//Preis und Rate wird uebersprungen
				if (_sKey === "price" && !!_price && !!event_ && !!event_.data && !!event_.data.animate) {
					__.updateAndAnimatePrice(_$elItem, _price);
					continue;
				}
				_$elItem.text(_prop[_sKey]);
			}
		}
	};

	__.updateCartText = function (event_) {
		var _prop;
		var _$el = jQuery(__.oDefaults.sSelectorCart);

		//Configuration possible?
		if (CONFIGURATOR_API.isConfigurable()) {

			_prop = CONFIGURATOR_API.getConfiguration();
			// configuration available?
			if (!_prop) {
				return;
			}
			__.updatePrice(_$el, _prop, event_);
			__.hideRateIfUnavailable(_prop);
		} else {
			//hide price, rate and link when no configuration is possible
			__.hidePriceAndRate(_$el);
		}
	};

	__.updateEngineLinks = function () {
		var $patternLinks, motorCode;

		// #car-002
		if (CONFIGURATOR_API.isConfigurable()) {

			$patternLinks = jQuery('[data-link-pattern]');
				// #car-002
			motorCode = CONFIGURATOR_API.getMotorcode();
			// update the url of all engine links
			$patternLinks.each(function () {
				var $this = jQuery(this),
				patternLink=$this.attr('data-link-pattern');
				if(!!patternLink && patternLink.match(/{{=it.model}}/g)) {
					patternLink = patternLink.replace(/{{=it.model}}/, motorCode);
					$this.attr('href', patternLink);
				}

			});

		}
	};

	__.updateSummaryStatus = function(dataTemplate) {
		var isSummary = (dataTemplate === 'summary' || dataTemplate === 'onepage_configurator');

		if (isSummary) {
			jQuery('body').addClass('nm-is-summary');
		} else {
			jQuery('body').removeClass('nm-is-summary');
		}
	};

	__.updateBasketBodyClass = function($content, dataTemplate) {
		var isBasketThere = (jQuery('.nm-basket').length > 0);
		var isNemoPage = ($content.attr('data-type') === 'nemo');
		var isHomePage = (dataTemplate === 'home');

		if (isBasketThere && isNemoPage && !isHomePage) {
			jQuery('body').addClass('nm-has-basket');
		} else {
			// nemo homepage and nomo pages have no basket
			jQuery('body').removeClass('nm-has-basket');
		}
	};

	__.updateClasses = function (data) {
			var $content, dataTemplate;

			if( typeof data !== 'undefined' && typeof data.domElement !== 'undefined' ) {
				$content = jQuery(data.domElement).find('.nm-content');
			} else {
				$content = jQuery('.nm-content');
			}
			dataTemplate = $content.attr('data-template');

			__.updateSummaryStatus(dataTemplate);
			__.updateBasketBodyClass($content, dataTemplate);
	};

	__.handlerAnimated = function() {
		var event_ = {
			data: {
				animate: true
			}
		};
		__.updateCartText(event_);
		__.updateEngineLinks();
	};
	__.handlerNotAnimated = function() {
		var event_ = {
				data: {
					animate: false
				}
			};
		__.updateCartText(event_);
		__.updateEngineLinks();
	};

	__.addEvents = function () {
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handlerAnimated);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handlerNotAnimated);
		__.eventBus.on(EVENTS.CONFIG_START, __.handlerNotAnimated);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlerNotAnimated);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.updateEngineLinks);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.updateClasses);
	};

	exports.dispose = function() {

		__.eventBus.off(EVENTS.CONFIG_UPDATE, __.handlerAnimated);
		__.eventBus.off(EVENTS.LAYER_LOADED, __.handlerNotAnimated);
		__.eventBus.off(EVENTS.CONFIG_START, __.handlerNotAnimated);
		__.eventBus.off(EVENTS.PAGE_LOADED, __.updateEngineLinks);
		__.eventBus.off(EVENTS.PAGE_LOADED, __.updateClasses);
	};

	__.initialize = function () {
		// force singleton
		if (!_instance) {
			__.addEvents();
			_instance = true;
			__.updateClasses();
		}
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/cart.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 113 */
/*!************************************!*\
  !*** ./js/app/module/container.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 127, evil: true */

// TODO: #container-001 - resolve dependency to html-template
/*eslint no-eval:1*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (DOM_UTILS, CONFIGURATOR_API, EVENTS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	__.oDefaults = {
		sSelectorOptionList: '.nm-options-list',
		sSelectorOptionListAlternative: '.nm-j-options-list-alternative',
		sSelectorConfiguratorContainer: '.nm-configurator-container',
		sClassOptionListCollapsed: 'nm-options-list-collapsed',
		sClassConfiguratorContainerShow: 'nm-j-configurator-container-show',
		sClassConfiguratorContainerHide: 'nm-j-configurator-container-hide'
	};


	__.toggleAlternativeOptions = function(event) {
		var container = DOM_UTILS.getElement(__.oDefaults.sSelectorOptionList, event.target.parentNode);
		if(DOM_UTILS.isElement(container)) {
			container.classList.toggle(__.oDefaults.sClassOptionListCollapsed);
		}
	};

	__.getSelectedIdString = function (items, optionsIncluded) {
		var selectedIdString = '';
		if (!!optionsIncluded) {
			optionsIncluded.forEach(function (value) {
				if (value!=='idid' && !!items[value] && !!items[value].status && items[value].status==='11010') {
					selectedIdString = selectedIdString + value;
				}
			});
		}
		return selectedIdString;
	};

	__.tilesExclusive = function () {
		var exclusiveTiles = DOM_UTILS.getElementsArray('.nm-md-tiles-exclusive');
		exclusiveTiles.forEach(function (element) {
			var items = CONFIGURATOR_API.getItems()||{};
			var selectedIdString;
			var optionsIncluded = element.getAttribute('data-configurator-id-included');

			optionsIncluded = eval(optionsIncluded);
			selectedIdString = __.getSelectedIdString(items, optionsIncluded);
			element.setAttribute('data-tile-selected', selectedIdString);
		});
	};

	__.hasSelectedItem = function(items, optionsIncluded) {
		var item, i, len = optionsIncluded.length;

		for (i = 0; i < len; i++) {
			item = items[optionsIncluded[i]] || {};

			if (!!item.status) {
				if (item.status === "11010" || item.status === "10011") {
					return true;
				}
			}
		}
		return false;
	};

	__.isHiddenByVersion = function(configuratorItemId) {
		var isHiddenByVersion = false;
		if (!!__.hiddenItemsFromVersion && __.hiddenItemsFromVersion !== null) {
			isHiddenByVersion = (__.hiddenItemsFromVersion.indexOf(configuratorItemId) > -1);
		}
		return isHiddenByVersion;
	};

	__.isVisible = function (items, optionsIncluded) {
		var visible = false, statusCheck = false, versionCheck = false, configuratorItem;
		if (!!optionsIncluded) {
			optionsIncluded.forEach(function (itemId_) {
				if (visible === false) {
					if (itemId_ === 'idid') {
						return true;
					} else if (!!items[itemId_]) {
						// item is loaded from DPU - check status and if is it hidden by version
						if(!!items[itemId_].status && items[itemId_].status !=='00000' && items[itemId_].status !== '10000' && items[itemId_].status !== '10010') {
							statusCheck = true;
						}
						if(!!items[itemId_].id && __.isHiddenByVersion(items[itemId_].id) === false) {
							versionCheck = true;
						}
						visible = (statusCheck && versionCheck);
						return false;
					} else {
						// no items are loaded from DPU - check DOM elements instead
						if (__.isHiddenByVersion(itemId_) === false) {
							configuratorItem = DOM_UTILS.getElement('.nm-j-configurator-item[data-configurator-id="'+itemId_+'"]', document);
							if (!configuratorItem.classList.contains('nm-j-configurator-status_00000') &&
								!configuratorItem.classList.contains('nm-j-configurator-status_10000') &&
								!configuratorItem.classList.contains('nm-j-configurator-status_10010')) {
								visible = true;
							}
						}
						return false;
					}
				}
			});
		}
		return visible;
	};

	__.isVisibleSummary = function (items, optionsIncluded) {
		var visible = false, statusCheck = false, versionCheck = false, configuratorItem;
		if (!!optionsIncluded) {
			optionsIncluded.forEach(function (itemId_) {
				if (!visible) {
					if(!!items[itemId_]) {
						if(!!items[itemId_].status && items[itemId_].status !== '11000' && items[itemId_].status !== '00000' && items[itemId_].status !== '11100' && items[itemId_].status !== '10000' && items[itemId_].status!=='10010') {
							statusCheck = true;
						}
						if(!!items[itemId_].id && __.isHiddenByVersion(items[itemId_].id) === false) {
							versionCheck = true;
						}
						visible = (statusCheck && versionCheck);
						return true;
					} else {
						if (__.isHiddenByVersion(itemId_) === false) {
							configuratorItem = DOM_UTILS.getElement('.nm-j-configurator-item[data-configurator-id="'+itemId_+'"]', document);
							if (DOM_UTILS.isElement(configuratorItem) && (
							  !configuratorItem.classList.contains('nm-j-configurator-status_11000') &&
								!configuratorItem.classList.contains('nm-j-configurator-status_00000') &&
								!configuratorItem.classList.contains('nm-j-configurator-status_11100') &&
								!configuratorItem.classList.contains('nm-j-configurator-status_10000') &&
								!configuratorItem.classList.contains('nm-j-configurator-status_10010'))) {
								visible = true;
							}
						}
						return false;
					}
				}
			});
		}
		return visible;
	};

	__.containsSelectedStandardEquipment = function (items, optionsIncluded) {
		var visible = false;
		if (!!optionsIncluded) {
			optionsIncluded.forEach(function (value) {
				// Only 10011 (containedStandard) is visible
				if (!visible &&
					!!items[value] &&
					!!items[value].status &&
					 items[value].status === '10011' ) {
					visible = true;
					return false;
				}
			});
		}
		return visible;
	};

	__.handler = function () {
		var items = {};
		if(CONFIGURATOR_API.isInitialized()){
			items = CONFIGURATOR_API.getItems()||{};
		}
		__.hiddenItemsFromVersion = CONFIGURATOR_API.getHiddenItemIDsFromVersion();

		// show/hide items in configuration container
		var configuratorContainer = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer);
		configuratorContainer.forEach(function (element) {
			var optionsIncluded = eval(element.getAttribute('data-configurator-id-included'));
			if (__.isVisible(items, optionsIncluded) === false) {
				element.classList.add(__.oDefaults.sClassConfiguratorContainerHide);
				element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow);
			} else {
				element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide);
				element.classList.add(__.oDefaults.sClassConfiguratorContainerShow);
			}
		});

		// show/hide items in configuration summary
		var configuratorContainerSummary = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer + '.nm-summary-list-container');
		configuratorContainerSummary.forEach(function (element) {
			var optionsIncluded = eval(element.getAttribute('data-configurator-id-included'));

			if (__.isVisibleSummary(items, optionsIncluded) === false) {
				element.classList.add(__.oDefaults.sClassConfiguratorContainerHide);
				element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow);
			} else {
				element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide);
				element.classList.add(__.oDefaults.sClassConfiguratorContainerShow);
			}

		});

		// show/hide items in standard equipment container
		var equipmentContainer = DOM_UTILS.getElementsArray('.j-selected-standard-equipment-container');
		equipmentContainer.forEach(function (element) {
			var optionsIncluded = eval(element.getAttribute('data-configurator-id-included'));
			if (__.containsSelectedStandardEquipment(items, optionsIncluded) === false) {
				element.classList.add(__.oDefaults.sClassConfiguratorContainerHide);
				element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow);
			} else {
				element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide);
				element.classList.add(__.oDefaults.sClassConfiguratorContainerShow);
			}
		});

		// collapse alternative item options lists
		var optionsListContainer = DOM_UTILS.getElementsArray('.nm-md-options-list');
		optionsListContainer.forEach(function (element) {
			var container = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer, element),
				optionsIncluded, isCollapsable, optionsList;

			if( container.length === 0 ) {
				return true;
			}

			optionsIncluded = eval(container[0].getAttribute('data-configurator-id-included'));

			//container is collapsable?
			isCollapsable = false;
			container.forEach(function(cont) {
				var el = DOM_UTILS.getElement(".nm-j-options-list-alternative", cont);
				if(DOM_UTILS.isElement(el) && !DOM_UTILS.isHidden(el)) {
					isCollapsable = true;
				}
			});

			optionsList = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorOptionList, element);
			if (__.hasSelectedItem(items, optionsIncluded) && isCollapsable) {
				optionsList[0].classList.add(__.oDefaults.sClassOptionListCollapsed);
			} else {
				optionsList[0].classList.remove(__.oDefaults.sClassOptionListCollapsed);
			}
		});
	};

	__.addEvents = function () {
		// #container-001
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handler);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handler);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handler);
		__.eventBus.on(EVENTS.VERSION_LOAD_COMPLETE, __.handler);

		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.tilesExclusive);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.tilesExclusive);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.tilesExclusive);

		// toggle options list alternative button
		__.domEventDelegate.on("click", __.oDefaults.sSelectorOptionListAlternative, __.toggleAlternativeOptions);
	};

	__.dispose = function _removeEvents() {
		// #container-001
		__.eventBus.off(EVENTS.CONFIG_UPDATE, __.handler);
		__.eventBus.off(EVENTS.PAGE_LOADED, __.handler);
		__.eventBus.off(EVENTS.LAYER_LOADED, __.handler);

		__.eventBus.off(EVENTS.CONFIG_UPDATE, __.tilesExclusive);
		__.eventBus.off(EVENTS.PAGE_LOADED, __.tilesExclusive);
		__.eventBus.off(EVENTS.LAYER_LOADED, __.tilesExclusive);

		__.domEventDelegate.off('click', __.oDefaults.sSelectorOptionListAlternative, __.toggleAlternativeOptions);
	};

	__.initialize = function() {
		__.addEvents();
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/container.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ }),
/* 114 */
/*!********************************!*\
  !*** ./js/app/module/stage.js ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 140 */
/* jshint maxparams: 8 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
		__webpack_require__(/*! jquery */ 1),
		__webpack_require__(/*! events */ 0)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS) {

		"use strict";

		var __ = {},
			exports = {
				__: __
			};

		__.stage = null;
		__.isAnimating = false;
		__.domElement = null;
		__.lastRotationMillis = -1;
		__.autorotateDisableWidth = 1023;
		__.maxViewIndex = -1;
		__.viewNamesArr = null;
		__.currentView = null;
		__.selectedCategory = null;
		__.direction = null;

		__.oDefaults = {
			sAttrAutorotation: 'data-autorotation',
			sAttrViewName: 'data-view-name',
			sAttrStartDate: 'data-startdate',
			sAttrEndDate: 'data-enddate',
			sAttrViewCategory: 'data-view-category',

			sClassHidden: 'nm-hidden',
			sClassHomepage: 'nm-homepage',
			sClassMobileActive: 'nm-mobile-ok',
			sClassBrowseForward: "nm-nextarrow",
			sClassSelectedMenu: 'nm-bs-selected',
			sClassHasMobileImg: 'nm-stage-has-mobileimg',
			sClassExtendedCTA: 'nm-homepage-stage-extend-cta',

			sSelectorStage: '#nm-id-stage',
			sSelectorHomepage: '.nm-homepage',
			sSelectorInitialContentArea: '.nm-wrapper-content .nm-area-content:first-child',
			sSelectorNext: 'ul.nm-stage-browse>li.nm-nextarrow',
			sSelectorPrevious: 'ul.nm-stage-browse>li.nm-backarrow',
			sSelectorDot: 'ul.nm-dots-navi .nm-dot',
			sSelectorDotNavi: 'ul.nm-dots-navi',
			sSelectorStageItemScript: '.nm-stage-item script',
			sSelectorHomepageStageContainer: '.nm-homepage .nm-stage-container',
			sSelectorStageContainer: '.nm-stage-container',
			sSelectorMenuItems: 'li.nm-stage-item',
			sSelectorBsRemote: '.nm-bs-remote',
			sSelectorStageContent: '.nm-stage',
			sSelectorRenderImage: 'img.nm-j-configurator-renderimage',
			sSelectorMenuIcons: 'ul[class^=nm-stage-list-]',
			sSelectorStageContentWrap: '.nm-homepage-stage-teaser-content-wrap',
			sSelectorStageMobileImage: '.nm-stage-mobile-image',
			sSelectorCTALink: '.nm-homepage-stage-teaser-content a',

			/*jslint maxlen: 300 */
			sDotTemplate: "<li><a class='nm-dot' href='#' data-tracking-link='{&quot;eVar39&quot;:&quot;teaser_spot&quot;, &quot;prop39&quot;:&quot;teaser_spot&quot;, &quot;prop46&quot;:&quot;:teaser spot&quot;, &quot;prop66&quot;:&quot;stage_navigation&quot;}'></a></li>"
		};

		/**
		 * initialize module
		 */
		__.initialize = function() {

			__.addEvents();
			// __.addLayerEvents();

			var domElement = jQuery(__.oDefaults.sSelectorHomepage);
			if (domElement.length === 0) {
				domElement = jQuery(__.oDefaults.sSelectorInitialContentArea);
			}
			if (domElement.length !== 0) {
				__.initializeOnDomElement(domElement);
			} else {
				console.log("stage.js - no matching dom element");
			}
		};

		/**
		 * DOM dependent initialization
		 */
		__.initializeOnDomElement = function(domElement) {
			__.stage = domElement.find(__.oDefaults.sSelectorStage);
			__.addStageEvents(__.stage);
			__.domElement = domElement;
			__.filterUnpublishedTeasers(domElement);
			__.initializeAutorotationOfStage(__.stage);
			__.resetStage(domElement, __.stage);
		};

		/**
		 * init autorotation of stage if needed
		 */
        __.initializeAutorotationOfStage = function(stage) {
            __.lastRotationMillis = new Date().getTime();
            var stageContainer = stage.find("["+__.oDefaults.sAttrAutorotation+"]");
            if (stageContainer.length > 0) {
                var autorotationStr = stageContainer.attr(__.oDefaults.sAttrAutorotation);
                if (typeof autorotationStr !== "undefined" ) {
                    var autorotateMillis = Math.round(autorotationStr) * 1000;

                    //autorotate every x seconds if needed
                    if (autorotateMillis > 0) {
                        window.setInterval(function() {
                        	if (jQuery(window).width() <= __.autorotateDisableWidth) {
                        		return;
                        	}
                            var currTime = new Date().getTime();
                            if (currTime > __.lastRotationMillis + autorotateMillis) {
                                var view = __.showNextView();
                                exports.setCurrentView(view);
                            }
                        }, autorotateMillis);
                    }
                }
            }
        };

        /**
         * this method filters all teasers that should not be published by now
		 * e.g. christmas special that should only be available on christmas
         */
        __.filterUnpublishedTeasers = function(domElement) {

            domElement.find(__.oDefaults.sSelectorStageItemScript).each(function() {

                var html = domElement.find(this).html();

                var $teaser = jQuery('<div/>').html(html).find(':first-child');
                if($teaser.length > 0) {
                    var startDateStr = $teaser.attr(__.oDefaults.sAttrStartDate);
                    var endDateStr = $teaser.attr(__.oDefaults.sAttrEndDate);

                    if (typeof startDateStr === "undefined" || typeof endDateStr === "undefined" ) {
                        return;
                    }

                    var startDate = Math.round(startDateStr);
                    var endDate = Math.round(endDateStr);

                    var currentDate = new Date().getTime();

                    if (startDate === 0 && endDate === 0) {
                       //neither startDate nor endDate are set
                       return;
                    } else if (startDate > 0 && endDate > 0) {
                       // startDate and endDate are set
                       if (startDate <= currentDate && currentDate < endDate) {
                           return;
                       }
                    } else if (startDate > 0) {
                       // only startDate is set
                       if (startDate <= currentDate){
                           return;
                        }
                    } else if (endDate > 0) {
                       // only endDate is set
                       if (currentDate < endDate){
                           return;
                       }
                    }
                }

                var parent = jQuery(this).parent();

                //if it is a view that is currently shown => remove it
                var dataViewName = parent.attr(__.oDefaults.sAttrViewName);
                $("["+__.oDefaults.sAttrViewName+"='"+ dataViewName + "']").remove();
                //teaser should nor be visible => remove it
                //$_parent.remove();
            });

			//If the first teaser was removed we will have to use a different teaser
			var stageContainer = domElement.find(__.oDefaults.sSelectorStageContainer);
			if (stageContainer.children().length < 1) {
				var firstTeaserHtml = domElement.find(__.oDefaults.sSelectorStageItemScript).first().html();
				stageContainer.html(firstTeaserHtml);
			}

			//show homepage stage (might be hidden)
			domElement.find(__.oDefaults.sSelectorHomepageStageContainer).css("visibility", "visible");
        };


		/**
		 * change the current selected view category
		 */
		exports.setCurrentView = function(viewName_) {

			//save previously selected category
			var previousSelection = __.currentView.attr(__.oDefaults.sAttrViewName);
			// console.log("_previousSelection: ",_previousSelection);
			//cancel if not change happened
			if (previousSelection === viewName_) {
				// console.warn("selection unchanged!");
				return false;
			}
			__.lastRotationMillis = new Date().getTime();
			__.isAnimating = true;
			//set view category (interior, exterior or special)
			//_setCategory(viewName_);

			var prevIndex = parseInt(__.getCurrentViewIndex(previousSelection), 10);
			var newIndex = parseInt(__.getCurrentViewIndex(viewName_), 10);
			__.direction = "left";
			if (prevIndex > newIndex && !(prevIndex === __.maxViewIndex && newIndex === 0) ||
				(prevIndex === 0 && newIndex === __.maxViewIndex)) {
				__.direction = "right";
			}
			var stageContainer = __.domElement.find(__.oDefaults.sSelectorStageContainer).first();
			//verhindernt dass im bestehenden view renderbilder schon veraendert werden
			stageContainer.find(".nm-j-configurator-renderimage").removeClass("nm-j-configurator-renderimage");
			//console.log("prevIndex",prevIndex,"newIndex",newIndex,"_direction",_direction);
			stageContainer.addClass("nm-stage-animation-start-" + __.direction);
			//append new view
			var templateHTML = __.getTemplateByName(viewName_);
			var template = jQuery(templateHTML); //.clone();
			//_$currentView=$template.appendTo(jQuery(_oDefaults.sStageContainerSelector).first().empty());
			__.currentView = template.appendTo(__.domElement.find(__.oDefaults.sSelectorStageContainer));
			__.selectedCategory = __.currentView.attr(__.oDefaults.sAttrViewCategory);
			__.updateSelectionStatus(__.domElement, __.stage);

			//animate stage
			var contentWidth = stageContainer.width();
			var xPos = "-" + (contentWidth * 0.5) + "px";
			__.updateRenderImageDataViewAttr(__.domElement);
			if (__.direction === "left") {
				stageContainer.animate({
					"margin-left": xPos
				}, 600, "easeOutSine", __.animationEnded);
			} else {
				stageContainer.css("margin-left", xPos).animate({
					"margin-left": 0
				}, 600, "easeOutSine", __.animationEnded);
			}
		};

		/**
		 * jump to first render view
		 */
		exports.jumpToFirstRenderView = function() {
			var firstRenderViewName = __.getFirstRenderImageViewInList();
			if (firstRenderViewName) {
				exports.setCurrentView(firstRenderViewName);
			}
		};

		/**
		 * get first render view in list
		 */
		__.getFirstRenderImageViewInList = function() {
				var view = false;
				var arr = __.viewNamesArr;
				var len = arr.length;
				var tpl;
				for (var i = 0; i < len; i++) {
					tpl = jQuery(__.getTemplateByName(arr[i])).find(__.oDefaults.sSelectorRenderImage);
					if (tpl.length) {
						view = arr[i];
						return view;
					}
				}
				return view;
			};

		/**
		 *
		 */
		__.animationEnded = function() {
			$(this).removeClass(["nm-stage-animation-start-", __.direction].join('')).removeAttr("style").find(".nm-stage").first().remove();
			__.isAnimating = false;
		__.eventBus.emit(EVENTS.STAGE_RENDERIMAGE_UPDATED);
		};

		/**
		 * build view index array
		 */
		__.buildViewIndexArr = function(domElement) {
			var arr = [];
			domElement.find(__.oDefaults.sSelectorMenuItems).each(function() {
				arr.push(this.getAttribute(__.oDefaults.sAttrViewName));
			});
			return arr;
		};

		/**
		 * get the index of the currently selected view
		 */
		__.getCurrentViewIndex = function(viewName_) {
			var pos, viewName = viewName_ || __.currentView.attr(__.oDefaults.sAttrViewName);
			pos = jQuery.inArray(viewName, __.viewNamesArr);
			return pos;
		};

		/**
		 * dot navi
		 */
		__.buildOrUpdateDotNavi = function(stage) {
			var dotContainer = stage.find(__.oDefaults.sSelectorDotNavi);
			var stageNavi = stage.find(__.oDefaults.sSelectorBsRemote);
			var dotTemplate = __.oDefaults.sDotTemplate;

			if (dotContainer.children().length === __.maxViewIndex+1) {
				jQuery(__.oDefaults.sSelectorDot).removeClass(__.oDefaults.sClassSelectedMenu);
			} else {
				dotContainer.empty();
				var templateString = "";
				for (var i = 0; i <= __.maxViewIndex; i++) {
					templateString += dotTemplate;
				}
				dotContainer.append(jQuery(templateString));
			}
			var currIndex = __.getCurrentViewIndex();
			var $currDot = jQuery(dotContainer.find(".nm-dot").get(currIndex));

			if (__.currentView.hasClass(__.oDefaults.sClassHasMobileImg)) {
				if (jQuery('body').hasClass(__.oDefaults.sClassHomepage)) {
					if (stage.hasClass(__.oDefaults.sClassMobileActive)) {
						dotContainer.addClass(__.oDefaults.sClassHasMobileImg);
						stageNavi.addClass(__.oDefaults.sClassHasMobileImg);
					} else {
						dotContainer.removeClass(__.oDefaults.sClassHasMobileImg);
						stageNavi.removeClass(__.oDefaults.sClassHasMobileImg);
					}
				} else {
					dotContainer.addClass(__.oDefaults.sClassHasMobileImg);
					stageNavi.addClass(__.oDefaults.sClassHasMobileImg);
				}
			} else {
				dotContainer.removeClass(__.oDefaults.sClassHasMobileImg);
				stageNavi.removeClass(__.oDefaults.sClassHasMobileImg);
			}
			$currDot.addClass(__.oDefaults.sClassSelectedMenu);
		};

		/**
		 * get view at given index
		 */
		__.getViewAtIndex = function(index_) {
			var item = __.domElement.find(__.oDefaults.sSelectorMenuItems).get(index_);
			return __.domElement.find(item).attr(__.oDefaults.sAttrViewName);
		};

		/**
		 * get template by view name
		 */
		__.getTemplateByName = function(viewName_) {
			//jQuery 1.9 BUG with client-side templates and whitespaces!!!=>trim()
			var template = jQuery(["#", viewName_, "-tpl"].join('')).html() || '';
			return template.trim();
		};

		/**
		 * handle menu click
		 */
		__.handleMenuClick = function(event_) {
			event_.preventDefault();
			if (__.isAnimating) {
				return;
			}
			var target, viewName;
			//get clicked container
			target = jQuery(event_.currentTarget);
			viewName = target.find("li").first().attr(__.oDefaults.sAttrViewName);
			exports.setCurrentView(viewName);
		};

		/**
		 * handle dot click
		 */
		__.handleDotClick = function(event_) {
			event_.preventDefault();
			if (__.isAnimating) {
				return;
			}
			var index = $(this).parent().index();
			var viewName = __.getViewAtIndex(index);

			exports.setCurrentView(viewName);
		};

		/**
		 * handle prev and next click
		 */
		__.handlePrevNextClick = function(event_) {
			event_.preventDefault();
			if (__.isAnimating) {
				return;
			}
			var target, view;
			target = jQuery(event_.currentTarget);
			if (target.attr("class") === __.oDefaults.sClassBrowseForward) {
				view = __.showNextView();
			} else {
				view = __.showPreviousView();
			}
			exports.setCurrentView(view);
		};

		/**
		 * get next index
		 */
		__.getNextIndex = function(index_) {
			var index = index_ || __.getCurrentViewIndex(),
				max = __.maxViewIndex;
			index = (++index) % (max + 1);
			return index;
		};

		/**
		 * get prevvious index
		 */
		__.getPreviousIndex = function(index_) {
			var index = index_ || __.getCurrentViewIndex(),
				max = __.maxViewIndex;
			index--;
			if (index < 0) {
				index = max;
			}
			return index;
		};

		/**
		 * show next view
		 */
		__.showNextView = function() {
			return __.getViewAtIndex(__.getNextIndex());
		};

		/**
		 * show previous view
		 */
		__.showPreviousView = function() {
			return __.getViewAtIndex(__.getPreviousIndex());
		};


		__.checkForExtendedCTA = function() {
			if (__.currentView.hasClass(__.oDefaults.sClassExtendedCTA)) {
				__.currentView.find(__.oDefaults.sSelectorStageContentWrap).on('click', __.extendedCTAClickHandler);
				__.currentView.find(__.oDefaults.sSelectorStageMobileImage).on('click', __.extendedCTAClickHandler);
			} else {
				__.currentView.find(__.oDefaults.sSelectorStageContentWrap).off('click', __.extendedCTAClickHandler);
				__.currentView.find(__.oDefaults.sSelectorStageMobileImage).off('click', __.extendedCTAClickHandler);
			}
		};


		__.extendedCTAClickHandler = function(e) {
			var target = $( e.target );
			var ctaLink = target.find(__.oDefaults.sSelectorCTALink);
			if (ctaLink && ctaLink.length > 0) {
				var linkURL = ctaLink.attr('href');
				target = ctaLink.attr('target');
				if (linkURL && target) {
					window.open(linkURL, target);
				} else {
					location.href = linkURL;
				}
			}
		};

		/**
		 * update selection status in the menu
		 */
		__.updateSelectionStatus = function(domElement, stage) {
			__.checkForExtendedCTA();
			__.buildOrUpdateDotNavi(stage);
			//Icons aktualisieren
			var categoryItems = domElement.find(__.oDefaults.sSelectorMenuIcons);
			categoryItems.removeClass(__.oDefaults.sClassSelectedMenu);
			categoryItems.filter(['.nm-stage-list-', __.selectedCategory].join('')).addClass(__.oDefaults.sClassSelectedMenu);
		};

		/**
		 * update all renderimage data atributes matching the currenty selected car perspective
		 * data-renderimage-type="thumbnail" data-renderimage-view="$item.View" data-renderimage-context="stage"
		*/
		__.updateRenderImageDataViewAttr = function(domElement) {
			var $item, viewName;

			//current view of the car (exterior,exterior_front,exterior_back...)
			viewName = __.currentView.attr(__.oDefaults.sAttrViewName);
			__.domElement.find(__.oDefaults.sSelectorRenderImage, domElement).each(function() {
				$item = jQuery(this);
				//Items mit fixed scope ignorieren!!! (z.B. die Renderbilderattribute 'data-renderimage-view' der Specials)
				if ($item.attr("data-renderimage-context") === "fixed") {
					return;
				}
				//replace image src with 1x1 pixel Base64 Image to aviod flickering
				$item.attr({
					"data-renderimage-view": viewName
				}); //,src:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',alt:''});
			});
			//trigger Event for Image updates
			__.eventBus.emit(EVENTS.UPDATE_VIEW_STATE, {
				"currentView": viewName,
				"domElement": domElement
			});
		};

		/**
		 * handle page loaded
		 */
		__.handlePageLoaded = function(payload) {
			__.initializeOnDomElement(payload.domElement);
		};

		/**
		 * reset stage
		 */
		__.resetStage = function(domElement, stage) {
			__.maxViewIndex = domElement.find(__.oDefaults.sSelectorMenuItems).length - 1;
			var dotNavi = stage.find(__.oDefaults.sSelectorDotNavi),
				bsNavi = domElement.find(__.oDefaults.sSelectorBsRemote);
			if (__.maxViewIndex === 0) {
				dotNavi.addClass(__.oDefaults.sClassHidden);
				bsNavi.addClass(__.oDefaults.sClassHidden);
			} else {
				dotNavi.removeClass(__.oDefaults.sClassHidden);
				bsNavi.removeClass(__.oDefaults.sClassHidden);
			}
			__.viewNamesArr = __.buildViewIndexArr(domElement);
			__.isAnimating = false;
			__.currentView = domElement.find([__.oDefaults.sSelectorStageContainer, ">div", __.oDefaults.sSelectorStageContent].join('')).first();
			__.selectedCategory = __.currentView.attr(__.oDefaults.sAttrViewCategory);
			__.updateSelectionStatus(domElement, stage);
			//Update Scrollayer image only
			__.updateRenderImageDataViewAttr(domElement.find(".nm-basket-image"));
		};

		/**
		 * add module-specific events
		 */
		__.addEvents = function() {
			//handle page animation end
			__.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		};

		/**
		 * add stage events
		 */
		__.addStageEvents = function(stageElement) {
			//handle menu click
			stageElement.on('click.stage.menuitem', __.oDefaults.sSelectorMenuIcons, __.handleMenuClick);
			//handle Arrow clicks
			stageElement.on('click.stage.remote', __.oDefaults.sSelectorNext, __.handlePrevNextClick);
			stageElement.on('click.stage.remote', __.oDefaults.sSelectorPrevious, __.handlePrevNextClick);
			//handle dot click
			stageElement.on('click.stage.dot touchend.stage.dots', __.oDefaults.sSelectorDot, __.handleDotClick);

			// only temporary for christimas 2015
			stageElement.on('click.temp-next', '[href*="#next"]', function(event){
				event.preventDefault();
				console.info('clicked next');
				jQuery('.nm-homepage li.nm-nextarrow').trigger('click');
			});
		};

		/**
		 * dispose module
		 */
		exports.dispose = function() {
			__.eventBus.off(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		};

		exports.initializePromise = function(eventBus_) {
			return new Promise(function(resolve) {
				__.eventBus = eventBus_;
				__.initialize();
				resolve("module/stage.js");
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 115 */
/*!**********************************!*\
  !*** ./js/app/module/pattern.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// TODO: #pattern-001 - fix dependency to html-template
/*global SETUPS */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! utils/polling */ 17),
	__webpack_require__(/*! utils/format */ 87)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, EVENTS, CONFIGURATOR_API, POLLING, FORMAT) { //eslint-disable-line max-params
	"use strict";

	var __ = {},
	exports = {
		__: __
	};

    var localizeStandard = '',
        localizeFrom = '',
        currencyRemoveRegex = '',
        localizeStandardGroupPrice = '';

    __.setGroupPrice = function() {
        // console.log('_setGroupPrice');
        var getCurrencySeparatorsRegEx = /[,]/g;
        // #pattern-001
        DOM_UTILS.getElementsArray('.js-configurator-group').forEach(function(el_) {
            var groupInfo = el_,
                patternBlock = DOM_UTILS.closest(groupInfo, '.nm-pattern-block, .nm-pattern-block-dynamic, .nm-tile-block'),
                itemsArr = DOM_UTILS.getElementsArray('.nm-j-configurator-item:not(.nm-j-configurator-status_00000)', patternBlock),
                smallestPrice = Number.MAX_VALUE,
                priceFormatted,
                pricesAreAllEqual = true;
            // console.log('_setGroupPrice', itemsArr);
            itemsArr.forEach(function(item_) {
                var item,
                    itemPrice,
                    itemPriceRaw;
                item = CONFIGURATOR_API.getItem(item_.getAttribute('data-configurator-id'));
                itemPrice = !!(item && item.price) ? item.price : '';
                itemPriceRaw = FORMAT.getRawPrice(itemPrice, false);

                //round price
                itemPriceRaw = itemPriceRaw.toFixed(2);
                if ((itemPriceRaw * 1) === 0) {
                    priceFormatted = localizeStandardGroupPrice;
                }
                // if this item's price is smaller than the current smallest price,
                // we take this item's price as new smallest price
                if ((smallestPrice * 1) > (itemPriceRaw * 1)) {
                    //Price String used in the outputfield
                    priceFormatted = itemPrice;
                    smallestPrice = itemPriceRaw;
                }
                // remembering, if the prices are equal or not
                if (pricesAreAllEqual && smallestPrice !== itemPriceRaw) {
                    pricesAreAllEqual = false;
                }
            });
            if (!pricesAreAllEqual) {
                priceFormatted = localizeFrom + ' ' + priceFormatted;
            }
            // console.log('Neuer Gruppenpreis:', priceFormatted);
            DOM_UTILS.getElement('.nm-price', groupInfo).textContent = priceFormatted;
        });
    };
    __.setSelectedGroup = function() {
        var groups = DOM_UTILS.getElementsArray('.nm-pattern-list-dynamic');
        groups.forEach(function(el_) {
            var activeItems = DOM_UTILS.getElementsArray('li.nm-j-configurator-status_11010, li.nm-j-configurator-status_10011',el_).length;
            el_.classList.remove('nm-pattern-selected');
            if (activeItems) {
                el_.classList.add('nm-pattern-selected');
            }
        });
        return;
    };
    __.handleUpdates = function() {
        //wait until carinfo is loaded or no carline is selected (startpage)
        POLLING.wait(function() {
            return (CONFIGURATOR_API.isInitialized() || !nemo.configurator.api.getCarline());
        }, 5000, 250).then(function() {
            __.setSelectedGroup();
            __.setGroupPrice();
        });
    };
    __.subscribe = function() {
        // #pattern-001
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleUpdates);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handleUpdates);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handleUpdates);
    };
    __.initialize = function() {
        // #pattern-002
        localizeFrom = window.i18n['from'];
        localizeStandardGroupPrice = window.i18n['standard-group-price'];
        if (SETUPS.get('commaseparator.scope') === 0) {
            //Characterset not(!) matching Numbers and comma=>to be removed
            currencyRemoveRegex = /[^0-9,]/g;
        } else {
            //Characterset not(!) matching Numbers and dots =>to be removed
            currencyRemoveRegex = /[^0-9.]/g;
        }
        //console.log("currencyRemoveRegex:"+currencyRemoveRegex.toString());
        __.subscribe();
        return;
    };
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/pattern.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 116 */
/*!*************************************************!*\
  !*** ./js/app/module/scroll-sticky-elements.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// TODO: #scroll-layer-001 - fix dependency to html-template
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! lib */ 117),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! core/scroll */ 19),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function($, LIB, API, SCROLL, EVENTS) {//eslint-disable-line max-params
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	var
	$basketOverlay,
	$basketSuperWrap,
	$basketWrap,
	$basket,
	$basketImage,
	_basketBottomTop = 0,
	_basketFixedTop = false,
	_basketFixedBottom = false;

	__.updateBasketImage = function(data) {
		/*
		closeup_lights
		closeup_wheels
		dashboard
		exterior
		exterior_back
		exterior_front
		interior
		*/
		var $mapping = {
			'exclusive': 'exterior',
			'extcolors': 'exterior',
			'upholstery': 'interior',
			'roofcolors': 'exterior_front',
			'lights': 'closeup_lights',
			'seats': 'interior',
			'steering-wheels': 'dashboard',
			'wheels': 'closeup_wheels'
		},
		$element = jQuery(data.element),i;

		// if an element left the viewport we switch to the renderimage of the preceding or following element
		if (data.where === SCROLL.WHERE.ABOVE) {
			// find element after the firing one
			for (i in data.elements) {
				if (data.elements.hasOwnProperty(i)) {
					if ((data.elements[i] === data.element) && !!data.elements[i+1]) {
						$element = jQuery(data.elements[i+1]);
						break;
					}
				}
			}
		} else if (data.where === SCROLL.WHERE.BELOW) {
			// find element before the firing one
			for (i in data.elements) {
				if (data.elements.hasOwnProperty(i)) {
					if ((data.elements[i] === data.element) && !!data.elements[i-1]) {
						$element = jQuery(data.elements[i-1]);
						break;
					}
				}
			}
		}
		if (!!$basketImage && !!$mapping[$element.data('render-view')]) {
			$basketImage.attr('data-renderimage-view', $mapping[$element.data('render-view')]);
			__.eventBus.emit(EVENTS.UPDATE_VIEW_STATE, {
				"currentView": $mapping[$element.data('render-view')],
				"domElement": $basket
			});
		}
	};
	__.setBasketBottomCheckPosition = function() {
		jQuery('.nm-footer-basket-scroll-check').css({
			'bottom': ($basket.height() + 25 + 100) + "px"
		});
	};

	__.fixBasketTop = function() {
		if(typeof $basketSuperWrap ==='undefined') {
			return;
		}
		$basketSuperWrap.addClass('nm-basket-fixed');
		$basketOverlay.addClass('nm-basket-overlay-fixed');
		$basketWrap.addClass('nm-basket-fixed-top');
		$basket.css({
			top: 0
		});
		_basketFixedTop = true;
	};
	__.unfixBasketTop = function(tempUnfix) {
		if( typeof $basketSuperWrap ==='undefined') {
			return;
		}
		tempUnfix = !!tempUnfix;
		$basketSuperWrap.removeClass('nm-basket-fixed');
		$basketOverlay.removeClass('nm-basket-overlay-fixed');
		$basketWrap.removeClass('nm-basket-fixed-top');
		$basket.css({
			top: 0
		});
		if (!tempUnfix) {
			_basketFixedTop = false;
		}
	};
	__.fixBasketBottom = function() {
		if(typeof $basketWrap ==='undefined' ) {
			return;
		}
		$basketWrap.addClass('nm-basket-fixed-bottom');
		$basket.css({
			top: jQuery('.nm-footer').offset().top - ($basket.height() + 25 + jQuery('.nm-basket-overlay-wrap').offset().top)
		});
		_basketFixedBottom = true;
	};
	__.keepfixBasketBottom = function() {
		if(typeof $basketWrap ==='undefined' ) {
			return;
		}
		if ($basketWrap.hasClass('nm-basket-fixed-bottom')) {
			__.fixBasketBottom();
		}
	};


	__.unfixBasketBottom = function() {
		if(typeof $basketWrap==='undefined') {
			return;
		}
		$basketWrap.removeClass('nm-basket-fixed-bottom');
		_basketFixedBottom = false;
	};
	__.handleNaviStateChanged = function(data) {
		if (data.where === SCROLL.WHERE.ABOVE) {
			jQuery('body').addClass('nm-nav-fixed');
			__.fixBasketTop();
		} else {
			jQuery('body').removeClass('nm-nav-fixed');
			__.unfixBasketTop();
		}
		// we need to get the new basket size here - after the animation finishes
		if( typeof $basket!=='undefined' ) {
			setTimeout(__.setBasketBottomCheckPosition, 500);
		}
	};
	__.setVariables = function(domElement) {
		if (API.isConfigurable()) {
			$basketOverlay          = domElement.find('.nm-basket-overlay');
			$basketSuperWrap        = domElement.find('.nm-basket-superwrap');
			$basketWrap             = domElement.find('.nm-basket-wrap');
			$basket                 = domElement.find('.nm-basket');
			$basketImage            = domElement.find('.nm-basket-image>.nm-j-configurator-renderimage');
		}
	};
		/*
	possible basket states:
	not fixed at all (initial and when window is not high enough to contain the whole basket)
	fixed top, when we it scrolls out
	fixed bottom, when to close to footer

	*/
	__.handleBasketStateChanged = function(data) {
		var isNotResponsive = jQuery('.nm-state-is-responsive').length === 0;
		if ((jQuery(window).height() < jQuery('.nm-basket').height() + 40) || (isNotResponsive && jQuery(window).width() < 960)) {
			__.unfixBasketTop();
			__.unfixBasketBottom();
		} else {
			if (data.eventName === 'basket-bottom-changed') {
				if (data.where === SCROLL.WHERE.ABOVE) {
					__.unfixBasketTop(true);
					__.fixBasketBottom();
				} else {
					__.unfixBasketBottom();
					// fix top, if needed
					if (_basketFixedTop) {
						__.fixBasketTop();
					}
				}
			} else if (data.where === SCROLL.WHERE.ABOVE) {
				__.fixBasketTop();
			} else {
				__.unfixBasketTop();
			}
		}
	};
	__.addEvents = function(payload) {
		__.setVariables(payload);
		jQuery(window).on('resize', __.keepfixBasketBottom);
	};
	__.initialize = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, function(payload) {
			__.addEvents(payload.domElement);
		});
		__.addEvents(jQuery('.nm-wrapper-content .nm-area-content:first-child'));
		jQuery('body').addClass('nm-not-sticky');

		/* basket render view scroll 
		SCROLL.register('*[data-render-view]', {
			notifyWhen: SCROLL.NOTIFY.AFTERSCROLL,
			eventName: 'renderview'
		}, __.updateBasketImage); */

		/* navigation sticky scroll */
		SCROLL.register('.nm-navigation-scroll-check', {
			eventName: 'navigation-changed'
		}, __.handleNaviStateChanged);

		/* basket top scroll */
		if (API.isConfigurable()) {
			__.setBasketBottomCheckPosition();
			SCROLL.register('.nm-basket-overlay-wrap', {
				eventName: 'basket-top-changed'
			}, __.handleBasketStateChanged);
			SCROLL.register('.nm-footer-basket-scroll-check', {
				eventName: 'basket-bottom-changed'
			}, __.handleBasketStateChanged);
		}
		//SCROLL.register('body', {notifyWhen: SCROLL.NOTIFY.AFTERSCROLL, mode: SCROLL.MODE.SCROLLDOWN, eventName: 'scrolldown'}, function() {console.log('down')});
		//SCROLL.register('body', {notifyWhen: SCROLL.NOTIFY.AFTERSCROLL, mode: SCROLL.MODE.SCROLLUP, eventName: 'scrollup'}, function() {console.log('up')});
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/scroll-sticky-elements.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 117 */
/*!***********************!*\
  !*** ./js/app/lib.js ***!
  \***********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! es6-promise */ 38),
	__webpack_require__(/*! iecors */ 47),
	__webpack_require__(/*! doT */ 7),
	__webpack_require__(/*! dom-delegate */ 37),
	__webpack_require__(/*! requestanimationframe */ 67),
	__webpack_require__(/*! mediaelement */ 118),
	__webpack_require__(/*! jquery-geolocation */ 119),
	__webpack_require__(/*! jquery-placeholder */ 120),
	__webpack_require__(/*! jquery-easing */ 121),
	__webpack_require__(/*! markerclusterer */ 32),
	__webpack_require__(/*! eventemitter */ 66)/*,
	'svg4everybody'*/
], __WEBPACK_AMD_DEFINE_RESULT__ = function() {"use strict";}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 118 */
/*!********************************!*\
  !*** ./js/lib/mediaelement.js ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

/* jshint maxlen: 246 */

/*!
* MediaElement.js
* HTML5 <video> and <audio> shim and player
* http://mediaelementjs.com/
*
* Creates a JavaScript object that mimics HTML5 MediaElement API
* for browsers that don't understand HTML5 or can't play the provided codec
* Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3
*
* Copyright 2010-2013, John Dyer (http://j.hn)
* License: MIT
*
*/
// Namespace
var mejs = mejs || {};

// version number
mejs.version = '2.13.2';


// player number (for missing, same id attr)
mejs.meIndex = 0;

// media types accepted by plugins
mejs.plugins = {
	silverlight: [
		{version: [3,0], types: ['video/mp4','video/m4v','video/mov','video/wmv','audio/wma','audio/m4a','audio/mp3','audio/wav','audio/mpeg']}
	],
	flash: [
		{version: [9,0,124], types: ['video/mp4','video/m4v','video/mov','video/flv','video/rtmp','video/x-flv','audio/flv','audio/x-flv','audio/mp3','audio/m4a','audio/mpeg', 'video/youtube', 'video/x-youtube']}
		//,{version: [12,0], types: ['video/webm']} // for future reference (hopefully!)
	],
	youtube: [
		{version: null, types: ['video/youtube', 'video/x-youtube', 'audio/youtube', 'audio/x-youtube']}
	],
	vimeo: [
		{version: null, types: ['video/vimeo', 'video/x-vimeo']}
	]
};

/*
Utility methods
*/
mejs.Utility = {
	encodeUrl: function(url) {
		return encodeURIComponent(url); //.replace(/\?/gi,'%3F').replace(/=/gi,'%3D').replace(/&/gi,'%26');
	},
	escapeHTML: function(s) {
		return s.toString().split('&').join('&amp;').split('<').join('&lt;').split('"').join('&quot;');
	},
	absolutizeUrl: function(url) {
		var el = document.createElement('div');
		el.innerHTML = '<a href="' + this.escapeHTML(url) + '">x</a>';
		return el.firstChild.href;
	},
	getScriptPath: function(scriptNames) {
		var
			i = 0,
			j,
			codePath = '',
			testname = '',
			slashPos,
			filenamePos,
			scriptUrl,
			scriptPath,
			scriptFilename,
			scripts = document.getElementsByTagName('script'),
			il = scripts.length,
			jl = scriptNames.length;

		// go through all <script> tags
		for (; i < il; i++) {
			scriptUrl = scripts[i].src;
			slashPos = scriptUrl.lastIndexOf('/');
			if (slashPos > -1) {
				scriptFilename = scriptUrl.substring(slashPos + 1);
				scriptPath = scriptUrl.substring(0, slashPos + 1);
			} else {
				scriptFilename = scriptUrl;
				scriptPath = '';
			}

			// see if any <script> tags have a file name that matches the
			for (j = 0; j < jl; j++) {
				testname = scriptNames[j];
				filenamePos = scriptFilename.indexOf(testname);
				if (filenamePos > -1) {
					codePath = scriptPath;
					break;
				}
			}

			// if we found a path, then break and return it
			if (codePath !== '') {
				break;
			}
		}

		// send the best path back
		return codePath;
	},
	secondsToTimeCode: function(time, forceHours, showFrameCount, fps) {
		//add framecount
		if (typeof showFrameCount === 'undefined') {
			showFrameCount=false;
		} else if(typeof fps === 'undefined') {
			fps = 25;
		}

		var hours = Math.floor(time / 3600) % 24,
			minutes = Math.floor(time / 60) % 60,
			seconds = Math.floor(time % 60),
			frames = Math.floor(((time % 1)*fps).toFixed(3)),
			result =
				( (forceHours || hours > 0) ? (hours < 10 ? '0' + hours : hours) + ':' : '') +
				(minutes < 10 ? '0' + minutes : minutes) + ':' +
				(seconds < 10 ? '0' + seconds : seconds) +
				((showFrameCount) ? ':' + (frames < 10 ? '0' + frames : frames) : '');

		return result;
	},

	timeCodeToSeconds: function(hh_mm_ss_ff, forceHours, showFrameCount, fps){
		if (typeof showFrameCount === 'undefined') {
			showFrameCount=false;
		} else if(typeof fps === 'undefined') {
			fps = 25;
		}

		var tc_array = hh_mm_ss_ff.split(":"),
			tc_hh = parseInt(tc_array[0], 10),
			tc_mm = parseInt(tc_array[1], 10),
			tc_ss = parseInt(tc_array[2], 10),
			tc_ff = 0,
			tc_in_seconds = 0;

		if (showFrameCount) {
			tc_ff = parseInt(tc_array[3], 10)/fps;
		}

		tc_in_seconds = ( tc_hh * 3600 ) + ( tc_mm * 60 ) + tc_ss + tc_ff;

		return tc_in_seconds;
	},


	convertSMPTEtoSeconds: function (SMPTE) {
		if (typeof SMPTE !== 'string') {
			return false;
		}

		SMPTE = SMPTE.replace(',', '.');

		var secs = 0,
			decimalLen = (SMPTE.indexOf('.') !== -1) ? SMPTE.split('.')[1].length : 0,
			multiplier = 1;

		SMPTE = SMPTE.split(':').reverse();

		for (var i = 0; i < SMPTE.length; i++) {
			multiplier = 1;
			if (i > 0) {
				multiplier = Math.pow(60, i);
			}
			secs += Number(SMPTE[i]) * multiplier;
		}
		return Number(secs.toFixed(decimalLen));
	},

	/* borrowed from SWFObject: http://code.google.com/p/swfobject/source/browse/trunk/swfobject/src/swfobject.js#474 */
	removeSwf: function(id) {
		var obj = document.getElementById(id);
		if (obj && /object|embed/i.test(obj.nodeName)) {
			if (mejs.MediaFeatures.isIE) {
				obj.style.display = "none";
				(function(){
					if (obj.readyState === 4) {
						mejs.Utility.removeObjectInIE(id);
					} else {
						setTimeout(arguments.callee, 10);
					}
				})();
			} else {
				obj.parentNode.removeChild(obj);
			}
		}
	},
	removeObjectInIE: function(id) {
		var obj = document.getElementById(id);
		if (obj) {
			for (var i in obj) {
				if (typeof obj[i] === "function") {
					obj[i] = null;
				}
			}
			obj.parentNode.removeChild(obj);
		}
	}
};


// Core detector, plugins are added below
mejs.PluginDetector = {

	// main public function to test a plug version number PluginDetector.hasPluginVersion('flash',[9,0,125]);
	hasPluginVersion: function(plugin, v) {
		var pv = this.plugins[plugin];
		v[1] = v[1] || 0;
		v[2] = v[2] || 0;
		return (pv[0] > v[0] || (pv[0] === v[0] &&
				pv[1] > v[1]) || (pv[0] === v[0] &&
				pv[1] === v[1] &&
				pv[2] >= v[2])) ? true : false;
	},

	// cached values
	nav: window.navigator,
	ua: window.navigator.userAgent.toLowerCase(),

	// stored version numbers
	plugins: [],

	// runs detectPlugin() and stores the version number
	addPlugin: function(p, pluginName, mimeType, activeX, axDetect) {
		this.plugins[p] = this.detectPlugin(pluginName, mimeType, activeX, axDetect);
	},

	// get the version number from the mimetype (all but IE) or ActiveX (IE)
	detectPlugin: function(pluginName, mimeType, activeX, axDetect) {

		var version = [0,0,0],
			description,
			i,
			ax;

		// Firefox, Webkit, Opera
		if (typeof(this.nav.plugins) !== 'undefined' && typeof this.nav.plugins[pluginName] === 'object') {
			description = this.nav.plugins[pluginName].description;
			if (description && !(typeof this.nav.mimeTypes !== 'undefined' && this.nav.mimeTypes[mimeType] && !this.nav.mimeTypes[mimeType].enabledPlugin)) {
				version = description.replace(pluginName, '').replace(/^\s+/,'').replace(/\sr/gi,'.').split('.');
				for (i=0; i<version.length; i++) {
					version[i] = parseInt(version[i].match(/\d+/), 10);
				}
			}
		// Internet Explorer / ActiveX
		} else if (typeof(window.ActiveXObject) !== 'undefined') {
			try {
				ax = new ActiveXObject(activeX);
				if (ax) {
					version = axDetect(ax);
				}
			}
			catch (e) { }
		}
		return version;
	}
};

// Add Flash detection
mejs.PluginDetector.addPlugin('flash','Shockwave Flash','application/x-shockwave-flash','ShockwaveFlash.ShockwaveFlash', function(ax) {
	// adapted from SWFObject
	var version = [],
		d = ax.GetVariable("$version");
	if (d) {
		d = d.split(" ")[1].split(",");
		version = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];
	}
	return version;
});

// Add Silverlight detection
mejs.PluginDetector.addPlugin('silverlight','Silverlight Plug-In','application/x-silverlight-2','AgControl.AgControl', function (ax) {
	// Silverlight cannot report its version number to IE
	// but it does have a isVersionSupported function, so we have to loop through it to get a version number.
	// adapted from http://www.silverlightversion.com/
	var v = [0,0,0,0],
		loopMatch = function(ax, v, i, n) {
			while(ax.isVersionSupported(v[0]+ "."+ v[1] + "." + v[2] + "." + v[3])){
				v[i]+=n;
			}
			v[i] -= n;
		};
	loopMatch(ax, v, 0, 1);
	loopMatch(ax, v, 1, 1);
	loopMatch(ax, v, 2, 10000); // the third place in the version number is usually 5 digits (4.0.xxxxx)
	loopMatch(ax, v, 2, 1000);
	loopMatch(ax, v, 2, 100);
	loopMatch(ax, v, 2, 10);
	loopMatch(ax, v, 2, 1);
	loopMatch(ax, v, 3, 1);

	return v;
});
// add adobe acrobat
/*
PluginDetector.addPlugin('acrobat','Adobe Acrobat','application/pdf','AcroPDF.PDF', function (ax) {
	var version = [],
		d = ax.GetVersions().split(',')[0].split('=')[1].split('.');

	if (d) {
		version = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];
	}
	return version;
});
*/
// necessary detection (fixes for <IE9)
mejs.MediaFeatures = {
	init: function() {
		var
			t = this,
			d = document,
			nav = mejs.PluginDetector.nav,
			ua = mejs.PluginDetector.ua.toLowerCase(),
			i,
			v,
			html5Elements = ['source','track','audio','video'];

		// detect browsers (only the ones that have some kind of quirk we need to work around)
		t.isiPad = (ua.match(/ipad/i) !== null);
		t.isiPhone = (ua.match(/iphone/i) !== null);
		t.isiOS = t.isiPhone || t.isiPad;
		t.isAndroid = (ua.match(/android/i) !== null);
		t.isBustedAndroid = (ua.match(/android 2\.[12]/) !== null);
		t.isBustedNativeHTTPS = (location.protocol === 'https:' && (ua.match(/android [12]\./) !== null || ua.match(/macintosh.* version.* safari/) !== null));
		t.isIE = (nav.appName.toLowerCase().indexOf("microsoft") !== -1 || nav.appName.toLowerCase().match(/trident/gi) !== null);
		t.isChrome = (ua.match(/chrome/gi) !== null);
		t.isFirefox = (ua.match(/firefox/gi) !== null);
		t.isWebkit = (ua.match(/webkit/gi) !== null);
		t.isGecko = (ua.match(/gecko/gi) !== null) && !t.isWebkit && !t.isIE;
		t.isOpera = (ua.match(/opera/gi) !== null);
		t.hasTouch = ('ontouchstart' in window); //  && window.ontouchstart != null); // this breaks iOS 7

		// borrowed from Modernizr
		t.svg = !! document.createElementNS &&
				!! document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;

		// create HTML5 media elements for IE before 9, get a <video> element for fullscreen detection
		for (i=0; i<html5Elements.length; i++) {
			v = document.createElement(html5Elements[i]);
		}

		t.supportsMediaTag = (typeof v.canPlayType !== 'undefined' || t.isBustedAndroid);

		// Fix for IE9 on Windows 7N / Windows 7KN (Media Player not installer)
		try{
			v.canPlayType("video/mp4");
		}catch(e){
			t.supportsMediaTag = false;
		}

		// detect native JavaScript fullscreen (Safari/Firefox only, Chrome still fails)

		// iOS
		t.hasSemiNativeFullScreen = (typeof v.webkitEnterFullscreen !== 'undefined');

		// W3C
		t.hasNativeFullscreen = (typeof v.requestFullscreen !== 'undefined');

		// webkit/firefox/IE11+
		t.hasWebkitNativeFullScreen = (typeof v.webkitRequestFullScreen !== 'undefined');
		t.hasMozNativeFullScreen = (typeof v.mozRequestFullScreen !== 'undefined');
		t.hasMsNativeFullScreen = (typeof v.msRequestFullscreen !== 'undefined');

		t.hasTrueNativeFullScreen = (t.hasWebkitNativeFullScreen || t.hasMozNativeFullScreen || t.hasMsNativeFullScreen);
		t.nativeFullScreenEnabled = t.hasTrueNativeFullScreen;

		// Enabled?
		if (t.hasMozNativeFullScreen) {
			t.nativeFullScreenEnabled = document.mozFullScreenEnabled;
		} else if (t.hasMsNativeFullScreen) {
			t.nativeFullScreenEnabled = document.msFullscreenEnabled;
		}

		if (t.isChrome) {
			t.hasSemiNativeFullScreen = false;
		}

		if (t.hasTrueNativeFullScreen) {

			t.fullScreenEventName = '';
			if (t.hasWebkitNativeFullScreen) {
				t.fullScreenEventName = 'webkitfullscreenchange';

			} else if (t.hasMozNativeFullScreen) {
				t.fullScreenEventName = 'mozfullscreenchange';

			} else if (t.hasMsNativeFullScreen) {
				t.fullScreenEventName = 'MSFullscreenChange';
			}

			t.isFullScreen = function() {
				if (v.mozRequestFullScreen) {
					return d.mozFullScreen;

				} else if (v.webkitRequestFullScreen) {
					return d.webkitIsFullScreen;

				} else if (v.hasMsNativeFullScreen) {
					return d.msFullscreenElement !== null;
				}
			};

			t.requestFullScreen = function(el) {

				if (t.hasWebkitNativeFullScreen) {
					el.webkitRequestFullScreen();

				} else if (t.hasMozNativeFullScreen) {
					el.mozRequestFullScreen();

				} else if (t.hasMsNativeFullScreen) {
					el.msRequestFullscreen();

				}
			};

			t.cancelFullScreen = function() {
				if (t.hasWebkitNativeFullScreen) {
					document.webkitCancelFullScreen();

				} else if (t.hasMozNativeFullScreen) {
					document.mozCancelFullScreen();

				} else if (t.hasMsNativeFullScreen) {
					document.msExitFullscreen();

				}
			};

		}


		// OS X 10.5 can't do this even if it says it can :(
		if (t.hasSemiNativeFullScreen && ua.match(/mac os x 10_5/i)) {
			t.hasNativeFullScreen = false;
			t.hasSemiNativeFullScreen = false;
		}

	}
};
mejs.MediaFeatures.init();

/*
extension methods to <video> or <audio> object to bring it into parity with PluginMediaElement (see below)
*/
mejs.HtmlMediaElement = {
	pluginType: 'native',
	isFullScreen: false,

	setCurrentTime: function (time) {
		this.currentTime = time;
	},

	setMuted: function (muted) {
		this.muted = muted;
	},

	setVolume: function (volume) {
		this.volume = volume;
	},

	// for parity with the plugin versions
	stop: function () {
		this.pause();
	},

	// This can be a url string
	// or an array [{src:'file.mp4',type:'video/mp4'},{src:'file.webm',type:'video/webm'}]
	setSrc: function (url) {

		// Fix for IE9 which can't set .src when there are <source> elements. Awesome, right?
		var
			existingSources = this.getElementsByTagName('source');
		while (existingSources.length > 0){
			this.removeChild(existingSources[0]);
		}

		if (typeof url === 'string') {
			this.src = url;
		} else {
			var i, media;

			for (i=0; i<url.length; i++) {
				media = url[i];
				if (this.canPlayType(media.type)) {
					this.src = media.src;
					break;
				}
			}
		}
	},

	setVideoSize: function (width, height) {
		this.width = width;
		this.height = height;
	}
};

/*
Mimics the <video/audio> element by calling Flash's External Interface or Silverlights [ScriptableMember]
*/
mejs.PluginMediaElement = function (pluginid, pluginType, mediaUrl) {
	this.id = pluginid;
	this.pluginType = pluginType;
	this.src = mediaUrl;
	this.events = {};
	this.attributes = {};
};

// JavaScript values and ExternalInterface methods that match HTML5 video properties methods
// http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/fl/video/FLVPlayback.html
// http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html
mejs.PluginMediaElement.prototype = {

	// special
	pluginElement: null,
	pluginType: '',
	isFullScreen: false,

	// not implemented :(
	playbackRate: -1,
	defaultPlaybackRate: -1,
	seekable: [],
	played: [],

	// HTML5 read-only properties
	paused: true,
	ended: false,
	seeking: false,
	duration: 0,
	error: null,
	tagName: '',

	// HTML5 get/set properties, but only set (updated by event handlers)
	muted: false,
	volume: 1,
	currentTime: 0,

	// HTML5 methods
	play: function () {
		if (this.pluginApi != null) {
			if (this.pluginType === 'youtube') {
				this.pluginApi.playVideo();
			} else {
				this.pluginApi.playMedia();
			}
			this.paused = false;
		}
	},
	load: function () {
		if (this.pluginApi != null) {
			if (this.pluginType === 'youtube') {
			} else {
				this.pluginApi.loadMedia();
			}

			this.paused = false;
		}
	},
	pause: function () {
		if (this.pluginApi != null) {
			if (this.pluginType === 'youtube') {
				this.pluginApi.pauseVideo();
			} else {
				this.pluginApi.pauseMedia();
			}


			this.paused = true;
		}
	},
	stop: function () {
		if (this.pluginApi != null) {
			if (this.pluginType === 'youtube') {
				this.pluginApi.stopVideo();
			} else {
				this.pluginApi.stopMedia();
			}
			this.paused = true;
		}
	},
	canPlayType: function(type) {
		var i,
			j,
			pluginInfo,
			pluginVersions = mejs.plugins[this.pluginType];

		for (i=0; i<pluginVersions.length; i++) {
			pluginInfo = pluginVersions[i];

			// test if user has the correct plugin version
			if (mejs.PluginDetector.hasPluginVersion(this.pluginType, pluginInfo.version)) {

				// test for plugin playback types
				for (j=0; j<pluginInfo.types.length; j++) {
					// find plugin that can play the type
					if (type === pluginInfo.types[j]) {
						return 'probably';
					}
				}
			}
		}

		return '';
	},

	positionFullscreenButton: function(x,y,visibleAndAbove) {
		if (this.pluginApi != null && this.pluginApi.positionFullscreenButton) {
			this.pluginApi.positionFullscreenButton(Math.floor(x),Math.floor(y),visibleAndAbove);
		}
	},

	hideFullscreenButton: function() {
		if (this.pluginApi != null && this.pluginApi.hideFullscreenButton) {
			this.pluginApi.hideFullscreenButton();
		}
	},


	// custom methods since not all JavaScript implementations support get/set

	// This can be a url string
	// or an array [{src:'file.mp4',type:'video/mp4'},{src:'file.webm',type:'video/webm'}]
	setSrc: function (url) {
		if (typeof url === 'string') {
			this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(url));
			this.src = mejs.Utility.absolutizeUrl(url);
		} else {
			var i, media;

			for (i=0; i<url.length; i++) {
				media = url[i];
				if (this.canPlayType(media.type)) {
					this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(media.src));
					this.src = mejs.Utility.absolutizeUrl(url);
					break;
				}
			}
		}

	},
	setCurrentTime: function (time) {
		if (this.pluginApi != null) {
			if (this.pluginType === 'youtube') {
				this.pluginApi.seekTo(time);
			} else {
				this.pluginApi.setCurrentTime(time);
			}



			this.currentTime = time;
		}
	},
	setVolume: function (volume) {
		if (this.pluginApi != null) {
			// same on YouTube and MEjs
			if (this.pluginType === 'youtube') {
				this.pluginApi.setVolume(volume * 100);
			} else {
				this.pluginApi.setVolume(volume);
			}
			this.volume = volume;
		}
	},
	setMuted: function (muted) {
		if (this.pluginApi != null) {
			if (this.pluginType === 'youtube') {
				if (muted) {
					this.pluginApi.mute();
				} else {
					this.pluginApi.unMute();
				}
				this.muted = muted;
				this.dispatchEvent('volumechange');
			} else {
				this.pluginApi.setMuted(muted);
			}
			this.muted = muted;
		}
	},

	// additional non-HTML5 methods
	setVideoSize: function (width, height) {

		//if (this.pluginType == 'flash' || this.pluginType == 'silverlight') {
			if ( this.pluginElement.style) {
				this.pluginElement.style.width = width + 'px';
				this.pluginElement.style.height = height + 'px';
			}
			if (this.pluginApi != null && this.pluginApi.setVideoSize) {
				this.pluginApi.setVideoSize(width, height);
			}
		//}
	},

	setFullscreen: function (fullscreen) {
		if (this.pluginApi != null && this.pluginApi.setFullscreen) {
			this.pluginApi.setFullscreen(fullscreen);
		}
	},

	enterFullScreen: function() {
		if (this.pluginApi != null && this.pluginApi.setFullscreen) {
			this.setFullscreen(true);
		}

	},

	exitFullScreen: function() {
		if (this.pluginApi != null && this.pluginApi.setFullscreen) {
			this.setFullscreen(false);
		}
	},

	// start: fake events
	addEventListener: function (eventName, callback, bubble) {
		this.events[eventName] = this.events[eventName] || [];
		this.events[eventName].push(callback);
	},
	removeEventListener: function (eventName, callback) {
		if (!eventName) { this.events = {}; return true; }
		var callbacks = this.events[eventName];
		if (!callbacks) { return true; }
		if (!callback) { this.events[eventName] = []; return true; }
		for (var i = 0; i < callbacks.length; i++) {
			if (callbacks[i] === callback) {
				this.events[eventName].splice(i, 1);
				return true;
			}
		}
		return false;
	},
	dispatchEvent: function (eventName) {
		var i,
			args,
			callbacks = this.events[eventName];

		if (callbacks) {
			args = Array.prototype.slice.call(arguments, 1);
			for (i = 0; i < callbacks.length; i++) {
				callbacks[i].apply(null, args);
			}
		}
	},
	// end: fake events

	// fake DOM attribute methods
	hasAttribute: function(name){
		return (name in this.attributes);
	},
	removeAttribute: function(name){
		delete this.attributes[name];
	},
	getAttribute: function(name){
		if (this.hasAttribute(name)) {
			return this.attributes[name];
		}
		return '';
	},
	setAttribute: function(name, value){
		this.attributes[name] = value;
	},

	remove: function() {
		mejs.Utility.removeSwf(this.pluginElement.id);
		mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id);
	}
};

// Handles calls from Flash/Silverlight and reports them as native <video/audio> events and properties
mejs.MediaPluginBridge = {

	pluginMediaElements:{},
	htmlMediaElements:{},

	registerPluginElement: function (id, pluginMediaElement, htmlMediaElement) {
		this.pluginMediaElements[id] = pluginMediaElement;
		this.htmlMediaElements[id] = htmlMediaElement;
	},

	unregisterPluginElement: function (id) {
		delete this.pluginMediaElements[id];
		delete this.htmlMediaElements[id];
	},

	// when Flash/Silverlight is ready, it calls out to this method
	initPlugin: function (id) {

		var pluginMediaElement = this.pluginMediaElements[id],
			htmlMediaElement = this.htmlMediaElements[id];

		if (pluginMediaElement) {
			// find the javascript bridge
			switch (pluginMediaElement.pluginType) {
				case "flash":
					pluginMediaElement.pluginElement = pluginMediaElement.pluginApi = document.getElementById(id);
					break;
				case "silverlight":
					pluginMediaElement.pluginElement = document.getElementById(pluginMediaElement.id);
					pluginMediaElement.pluginApi = pluginMediaElement.pluginElement.Content.MediaElementJS;
					break;
			}

			if (pluginMediaElement.pluginApi != null && pluginMediaElement.success) {
				pluginMediaElement.success(pluginMediaElement, htmlMediaElement);
			}
		}
	},

	// receives events from Flash/Silverlight and sends them out as HTML5 media events
	// http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html
	fireEvent: function (id, eventName, values) {

		var
			e,
			i,
			bufferedTime,
			pluginMediaElement = this.pluginMediaElements[id];

		if(!pluginMediaElement){
			return;
		}

		// fake event object to mimic real HTML media event.
		e = {
			type: eventName,
			target: pluginMediaElement
		};

		// attach all values to element and event object
		for (i in values) {
			pluginMediaElement[i] = values[i];
			e[i] = values[i];
		}

		// fake the newer W3C buffered TimeRange (loaded and total have been removed)
		bufferedTime = values.bufferedTime || 0;

		e.target.buffered = e.buffered = {
			start: function(index) {
				return 0;
			},
			end: function (index) {
				return bufferedTime;
			},
			length: 1
		};

		pluginMediaElement.dispatchEvent(e.type, e);
	}
};

/*
Default options
*/
mejs.MediaElementDefaults = {
	// allows testing on HTML5, flash, silverlight
	// auto: attempts to detect what the browser can do
	// auto_plugin: prefer plugins and then attempt native HTML5
	// native: forces HTML5 playback
	// shim: disallows HTML5, will attempt either Flash or Silverlight
	// none: forces fallback view
	mode: 'auto',
	// remove or reorder to change plugin priority and availability
	plugins: ['flash','silverlight','youtube','vimeo'],
	// shows debug errors on screen
	enablePluginDebug: false,
	// use plugin for browsers that have trouble with Basic Authentication on HTTPS sites
	httpsBasicAuthSite: false,
	// overrides the type specified, useful for dynamic instantiation
	type: '',
	// path to Flash and Silverlight plugins
	pluginPath: mejs.Utility.getScriptPath(['mediaelement.js','mediaelement.min.js','mediaelement-and-player.js','mediaelement-and-player.min.js']),
	// name of flash file
	flashName: 'flashmediaelement.swf',
	// streamer for RTMP streaming
	flashStreamer: '',
	// turns on the smoothing filter in Flash
	enablePluginSmoothing: false,
	// enabled pseudo-streaming (seek) on .mp4 files
	enablePseudoStreaming: false,
	// start query parameter sent to server for pseudo-streaming
	pseudoStreamingStartQueryParam: 'start',
	// name of silverlight file
	silverlightName: 'silverlightmediaelement.xap',
	// default if the <video width> is not specified
	defaultVideoWidth: 480,
	// default if the <video height> is not specified
	defaultVideoHeight: 270,
	// overrides <video width>
	pluginWidth: -1,
	// overrides <video height>
	pluginHeight: -1,
	// additional plugin variables in 'key=value' form
	pluginVars: [],
	// rate in milliseconds for Flash and Silverlight to fire the timeupdate event
	// larger number is less accurate, but less strain on plugin->JavaScript bridge
	timerRate: 250,
	// initial volume for player
	startVolume: 0.8,
	success: function () { },
	error: function () { }
};

/*
Determines if a browser supports the <video> or <audio> element
and returns either the native element or a Flash/Silverlight version that
mimics HTML5 MediaElement
*/
mejs.MediaElement = function (el, o) {
	return mejs.HtmlMediaElementShim.create(el,o);
};

mejs.HtmlMediaElementShim = {

	create: function(el, o) {
		var
			options = mejs.MediaElementDefaults,
			htmlMediaElement = (typeof(el) === 'string') ? document.getElementById(el) : el,
			tagName = htmlMediaElement.tagName.toLowerCase(),
			isMediaTag = (tagName === 'audio' || tagName === 'video'),
			src = (isMediaTag) ? htmlMediaElement.getAttribute('src') : htmlMediaElement.getAttribute('href'),
			poster = htmlMediaElement.getAttribute('poster'),
			autoplay =  htmlMediaElement.getAttribute('autoplay'),
			preload =  htmlMediaElement.getAttribute('preload'),
			controls =  htmlMediaElement.getAttribute('controls'),
			playback,
			prop;

		// extend options
		for (prop in o) {
			options[prop] = o[prop];
		}

		// clean up attributes
		src =		(typeof src === 'undefined'	|| src === null || src === '') ? null : src;
		poster =	(typeof poster === 'undefined'	|| poster === null) ? '' : poster;
		preload =	(typeof preload === 'undefined'	|| preload === null || preload === 'false') ? 'none' : preload;
		autoplay =	!(typeof autoplay === 'undefined' || autoplay === null || autoplay === 'false');
		controls =	!(typeof controls === 'undefined' || controls === null || controls === 'false');

		// test for HTML5 and plugin capabilities
		playback = this.determinePlayback(htmlMediaElement, options, mejs.MediaFeatures.supportsMediaTag, isMediaTag, src);
		playback.url = (playback.url !== null) ? mejs.Utility.absolutizeUrl(playback.url) : '';

		if (playback.method === 'native') {
			// second fix for android
			if (mejs.MediaFeatures.isBustedAndroid) {
				htmlMediaElement.src = playback.url;
				htmlMediaElement.addEventListener('click', function() {
					htmlMediaElement.play();
				}, false);
			}

			// add methods to native HTMLMediaElement
			return this.updateNative(playback, options, autoplay, preload);
		} else if (playback.method !== '') {
			// create plugin to mimic HTMLMediaElement

			return this.createPlugin( playback,  options, poster, autoplay, preload, controls);
		} else {
			// boo, no HTML5, no Flash, no Silverlight.
			this.createErrorMessage( playback, options, poster );

			return this;
		}
	},

	determinePlayback: function(htmlMediaElement, options, supportsMediaTag, isMediaTag, src) {
		var
			mediaFiles = [],
			i,
			j,
			k,
			l,
			n,
			type,
			result = { method: '', url: '', htmlMediaElement: htmlMediaElement, isVideo: (htmlMediaElement.tagName.toLowerCase() !== 'audio')},
			pluginName,
			pluginVersions,
			pluginInfo,
			dummy,
			media;

		// STEP 1: Get URL and type from <video src> or <source src>

		// supplied type overrides <video type> and <source type>
		if (typeof options.type !== 'undefined' && options.type !== '') {

			// accept either string or array of types
			if (typeof options.type === 'string') {
				mediaFiles.push({type:options.type, url:src});
			} else {

				for (i=0; i<options.type.length; i++) {
					mediaFiles.push({type:options.type[i], url:src});
				}
			}

		// test for src attribute first
		} else if (src !== null) {
			type = this.formatType(src, htmlMediaElement.getAttribute('type'));
			mediaFiles.push({type:type, url:src});

		// then test for <source> elements
		} else {
			// test <source> types to see if they are usable
			for (i = 0; i < htmlMediaElement.childNodes.length; i++) {
				n = htmlMediaElement.childNodes[i];
				if (n.nodeType === 1 && n.tagName.toLowerCase() === 'source') {
					src = n.getAttribute('src');
					type = this.formatType(src, n.getAttribute('type'));
					media = n.getAttribute('media');

					if (!media || !window.matchMedia || (window.matchMedia && window.matchMedia(media).matches)) {
						mediaFiles.push({type:type, url:src});
					}
				}
			}
		}

		// in the case of dynamicly created players
		// check for audio types
		if (!isMediaTag && mediaFiles.length > 0 && mediaFiles[0].url !== null && this.getTypeFromFile(mediaFiles[0].url).indexOf('audio') > -1) {
			result.isVideo = false;
		}


		// STEP 2: Test for playback method

		// special case for Android which sadly doesn't implement the canPlayType function (always returns '')
		if (mejs.MediaFeatures.isBustedAndroid) {
			htmlMediaElement.canPlayType = function(type) {
				return (type.match(/video\/(mp4|m4v)/gi) !== null) ? 'maybe' : '';
			};
		}


		// test for native playback first
		if (supportsMediaTag && (options.mode === 'auto' || options.mode === 'auto_plugin' || options.mode === 'native')  && !(mejs.MediaFeatures.isBustedNativeHTTPS && options.httpsBasicAuthSite === true)) {

			if (!isMediaTag) {

				// create a real HTML5 Media Element
				dummy = document.createElement( result.isVideo ? 'video' : 'audio');
				htmlMediaElement.parentNode.insertBefore(dummy, htmlMediaElement);
				htmlMediaElement.style.display = 'none';

				// use this one from now on
				result.htmlMediaElement = htmlMediaElement = dummy;
			}

			for (i=0; i<mediaFiles.length; i++) {
				// normal check
				if (htmlMediaElement.canPlayType(mediaFiles[i].type).replace(/no/, '') !== '' ||
					// special case for Mac/Safari 5.0.3 which answers '' to canPlayType('audio/mp3') but 'maybe' to canPlayType('audio/mpeg')
					htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/mp3/,'mpeg')).replace(/no/, '') !== '') {
					result.method = 'native';
					result.url = mediaFiles[i].url;
					break;
				}
			}

			if (result.method === 'native') {
				if (result.url !== null) {
					htmlMediaElement.src = result.url;
				}

				// if `auto_plugin` mode, then cache the native result but try plugins.
				if (options.mode !== 'auto_plugin') {
					return result;
				}
			}
		}

		// if native playback didn't work, then test plugins
		if (options.mode === 'auto' || options.mode === 'auto_plugin' || options.mode === 'shim') {
			for (i=0; i<mediaFiles.length; i++) {
				type = mediaFiles[i].type;

				// test all plugins in order of preference [silverlight, flash]
				for (j=0; j<options.plugins.length; j++) {

					pluginName = options.plugins[j];

					// test version of plugin (for future features)
					pluginVersions = mejs.plugins[pluginName];

					for (k=0; k<pluginVersions.length; k++) {
						pluginInfo = pluginVersions[k];

						// test if user has the correct plugin version

						// for youtube/vimeo
						if (pluginInfo.version == null ||

							mejs.PluginDetector.hasPluginVersion(pluginName, pluginInfo.version)) {

							// test for plugin playback types
							for (l=0; l<pluginInfo.types.length; l++) {
								// find plugin that can play the type
								if (type === pluginInfo.types[l]) {
									result.method = pluginName;
									result.url = mediaFiles[i].url;
									return result;
								}
							}
						}
					}
				}
			}
		}

		// at this point, being in 'auto_plugin' mode implies that we tried plugins but failed.
		// if we have native support then return that.
		if (options.mode === 'auto_plugin' && result.method === 'native') {
			return result;
		}

		// what if there's nothing to play? just grab the first available
		if (result.method === '' && mediaFiles.length > 0) {
			result.url = mediaFiles[0].url;
		}

		return result;
	},

	formatType: function(url, type) {
		var ext;

		// if no type is supplied, fake it with the extension
		if (url && !type) {
			return this.getTypeFromFile(url);
		} else {
			// only return the mime part of the type in case the attribute contains the codec
			// see http://www.whatwg.org/specs/web-apps/current-work/multipage/video.html#the-source-element
			// `video/mp4; codecs="avc1.42E01E, mp4a.40.2"` becomes `video/mp4`

			if (type && ~type.indexOf(';')) {
				return type.substr(0, type.indexOf(';'));
			} else {
				return type;
			}
		}
	},

	getTypeFromFile: function(url) {
		url = url.split('?')[0];
		var ext = url.substring(url.lastIndexOf('.') + 1).toLowerCase();
		return (/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(ext) ? 'video' : 'audio') + '/' + this.getTypeFromExtension(ext);
	},

	getTypeFromExtension: function(ext) {

		switch (ext) {
			case 'mp4':
			case 'm4v':
				return 'mp4';
			case 'webm':
			case 'webma':
			case 'webmv':
				return 'webm';
			case 'ogg':
			case 'oga':
			case 'ogv':
				return 'ogg';
			default:
				return ext;
		}
	},

	createErrorMessage: function(playback, options, poster) {
		var
			htmlMediaElement = playback.htmlMediaElement,
			errorContainer = document.createElement('div');

		errorContainer.className = 'me-cannotplay';

		try {
			errorContainer.style.width = htmlMediaElement.width + 'px';
			errorContainer.style.height = htmlMediaElement.height + 'px';
		} catch (e) {}

    if (options.customError) {
      errorContainer.innerHTML = options.customError;
    } else {
      errorContainer.innerHTML = (poster !== '') ?
        '<a href="' + playback.url + '"><img src="' + poster + '" width="100%" height="100%" /></a>' :
        '<a href="' + playback.url + '"><span>' + mejs.i18n.t('Download File') + '</span></a>';
    }

		htmlMediaElement.parentNode.insertBefore(errorContainer, htmlMediaElement);
		htmlMediaElement.style.display = 'none';

		options.error(htmlMediaElement);
	},

	createPlugin:function(playback, options, poster, autoplay, preload, controls) {
		var
			htmlMediaElement = playback.htmlMediaElement,
			width = 1,
			height = 1,
			pluginid = 'me_' + playback.method + '_' + (mejs.meIndex++),
			pluginMediaElement = new mejs.PluginMediaElement(pluginid, playback.method, playback.url),
			container = document.createElement('div'),
			specialIEContainer,
			node,
			initVars;

		// copy tagName from html media element
		pluginMediaElement.tagName = htmlMediaElement.tagName;

		// copy attributes from html media element to plugin media element
		for (var i = 0; i < htmlMediaElement.attributes.length; i++) {
			var attribute = htmlMediaElement.attributes[i];
			if (attribute.specified === true) {
				pluginMediaElement.setAttribute(attribute.name, attribute.value);
			}
		}

		// check for placement inside a <p> tag (sometimes WYSIWYG editors do this)
		node = htmlMediaElement.parentNode;
		while (node !== null && node.tagName.toLowerCase() !== 'body') {
			if (node.parentNode.tagName.toLowerCase() === 'p') {
				node.parentNode.parentNode.insertBefore(node, node.parentNode);
				break;
			}
			node = node.parentNode;
		}

		if (playback.isVideo) {
			width = (options.pluginWidth > 0) ? options.pluginWidth : (options.videoWidth > 0) ? options.videoWidth : (htmlMediaElement.getAttribute('width') !== null) ? htmlMediaElement.getAttribute('width') : options.defaultVideoWidth;
			height = (options.pluginHeight > 0) ? options.pluginHeight : (options.videoHeight > 0) ? options.videoHeight : (htmlMediaElement.getAttribute('height') !== null) ? htmlMediaElement.getAttribute('height') : options.defaultVideoHeight;

			// in case of '%' make sure it's encoded
			width = mejs.Utility.encodeUrl(width);
			height = mejs.Utility.encodeUrl(height);

		} else {
			if (options.enablePluginDebug) {
				width = 320;
				height = 240;
			}
		}

		// register plugin
		pluginMediaElement.success = options.success;
		mejs.MediaPluginBridge.registerPluginElement(pluginid, pluginMediaElement, htmlMediaElement);

		// add container (must be added to DOM before inserting HTML for IE)
		container.className = 'me-plugin';
		container.id = pluginid + '_container';

		if (playback.isVideo) {
				htmlMediaElement.parentNode.insertBefore(container, htmlMediaElement);
		} else {
				document.body.insertBefore(container, document.body.childNodes[0]);
		}

		// flash/silverlight vars
		initVars = [
			'id=' + pluginid,
			'isvideo=' + ((playback.isVideo) ? "true" : "false"),
			'autoplay=' + ((autoplay) ? "true" : "false"),
			'preload=' + preload,
			'width=' + width,
			'startvolume=' + options.startVolume,
			'timerrate=' + options.timerRate,
			'flashstreamer=' + options.flashStreamer,
			'height=' + height,
      'pseudostreamstart=' + options.pseudoStreamingStartQueryParam];

		if (playback.url !== null) {
			if (playback.method === 'flash') {
				initVars.push('file=' + mejs.Utility.encodeUrl(playback.url));
			} else {
				initVars.push('file=' + playback.url);
			}
		}
		if (options.enablePluginDebug) {
			initVars.push('debug=true');
		}
		if (options.enablePluginSmoothing) {
			initVars.push('smoothing=true');
		}
    if (options.enablePseudoStreaming) {
      initVars.push('pseudostreaming=true');
    }
		if (controls) {
			initVars.push('controls=true'); // shows controls in the plugin if desired
		}
		if (options.pluginVars) {
			initVars = initVars.concat(options.pluginVars);
		}

		switch (playback.method) {
			case 'silverlight':
				container.innerHTML =
'<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="' + pluginid + '" name="' + pluginid + '" width="' + width + '" height="' + height + '" class="mejs-shim">' +
'<param name="initParams" value="' + initVars.join(',') + '" />' +
'<param name="windowless" value="true" />' +
'<param name="background" value="black" />' +
'<param name="minRuntimeVersion" value="3.0.0.0" />' +
'<param name="autoUpgrade" value="true" />' +
'<param name="source" value="' + options.pluginPath + options.silverlightName + '" />' +
'</object>';
					break;

			case 'flash':

				if (mejs.MediaFeatures.isIE) {
					specialIEContainer = document.createElement('div');
					container.appendChild(specialIEContainer);
					specialIEContainer.outerHTML =
'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" ' +
'id="' + pluginid + '" width="' + width + '" height="' + height + '" class="mejs-shim">' +
'<param name="movie" value="' + options.pluginPath + options.flashName + '?x=' + (new Date()) + '" />' +
'<param name="flashvars" value="' + initVars.join('&amp;') + '" />' +
'<param name="quality" value="high" />' +
'<param name="bgcolor" value="#000000" />' +
'<param name="wmode" value="transparent" />' +
'<param name="allowScriptAccess" value="always" />' +
'<param name="allowFullScreen" value="true" />' +
'<param name="scale" value="default" />' +
'</object>';

				} else {

					container.innerHTML =
'<embed id="' + pluginid + '" name="' + pluginid + '" ' +
'play="true" ' +
'loop="false" ' +
'quality="high" ' +
'bgcolor="#000000" ' +
'wmode="transparent" ' +
'allowScriptAccess="always" ' +
'allowFullScreen="true" ' +
'type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" ' +
'src="' + options.pluginPath + options.flashName + '" ' +
'flashvars="' + initVars.join('&') + '" ' +
'width="' + width + '" ' +
'height="' + height + '" ' +
'scale="default"' +
'class="mejs-shim"></embed>';
				}
				break;

			case 'youtube':

				var	videoId = playback.url.substr(playback.url.lastIndexOf('=')+1),
					youtubeSettings = {
						container: container,
						containerId: container.id,
						pluginMediaElement: pluginMediaElement,
						pluginId: pluginid,
						videoId: videoId,
						height: height,
						width: width
					};

				if (mejs.PluginDetector.hasPluginVersion('flash', [10,0,0]) ) {
					mejs.YouTubeApi.createFlash(youtubeSettings);
				} else {
					mejs.YouTubeApi.enqueueIframe(youtubeSettings);
				}

				break;

			// DEMO Code. Does NOT work.
			case 'vimeo':
				//

				pluginMediaElement.vimeoid = playback.url.substr(playback.url.lastIndexOf('/')+1);

				container.innerHTML ='<iframe src="http://player.vimeo.com/video/' + pluginMediaElement.vimeoid + '?portrait=0&byline=0&title=0" width="' + width +'" height="' + height +'" frameborder="0" class="mejs-shim"></iframe>';

				/* jshint maxlen: 416 */
				/*
				container.innerHTML =
					'<object width="' + width + '" height="' + height + '" class="mejs-shim">' +
						'<param name="allowfullscreen" value="true" />' +
						'<param name="allowscriptaccess" value="always" />' +
						'<param name="flashvars" value="api=1" />' +
						'<param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=' + pluginMediaElement.vimeoid  + '&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" />' +
						'<embed src="//vimeo.com/moogaloop.swf?api=1&amp;clip_id=' + pluginMediaElement.vimeoid + '&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="' + width + '" height="' + height + '" class="mejs-shim"></embed>' +
					'</object>';
					*/

				break;
		}
		// hide original element
		htmlMediaElement.style.display = 'none';
		// prevent browser from autoplaying when using a plugin
		htmlMediaElement.removeAttribute('autoplay');

		// FYI: options.success will be fired by the MediaPluginBridge

		return pluginMediaElement;
	},

	updateNative: function(playback, options, autoplay, preload) {

		var htmlMediaElement = playback.htmlMediaElement,
			m;


		// add methods to video object to bring it into parity with Flash Object
		for (m in mejs.HtmlMediaElement) {
			htmlMediaElement[m] = mejs.HtmlMediaElement[m];
		}

		/*
		Chrome now supports preload="none"
		if (mejs.MediaFeatures.isChrome) {

			// special case to enforce preload attribute (Chrome doesn't respect this)
			if (preload === 'none' && !autoplay) {

				// forces the browser to stop loading (note: fails in IE9)
				htmlMediaElement.src = '';
				htmlMediaElement.load();
				htmlMediaElement.canceledPreload = true;

				htmlMediaElement.addEventListener('play',function() {
					if (htmlMediaElement.canceledPreload) {
						htmlMediaElement.src = playback.url;
						htmlMediaElement.load();
						htmlMediaElement.play();
						htmlMediaElement.canceledPreload = false;
					}
				}, false);
			// for some reason Chrome forgets how to autoplay sometimes.
			} else if (autoplay) {
				htmlMediaElement.load();
				htmlMediaElement.play();
			}
		}
		*/

		// fire success code
		options.success(htmlMediaElement, htmlMediaElement);

		return htmlMediaElement;
	}
};

/*
 - test on IE (object vs. embed)
 - determine when to use iframe (Firefox, Safari, Mobile) vs. Flash (Chrome, IE)
 - fullscreen?
*/

// YouTube Flash and Iframe API
mejs.YouTubeApi = {
	isIframeStarted: false,
	isIframeLoaded: false,
	loadIframeApi: function() {
		if (!this.isIframeStarted) {
			var tag = document.createElement('script');
			tag.src = "//www.youtube.com/player_api";
			var firstScriptTag = document.getElementsByTagName('script')[0];
			firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
			this.isIframeStarted = true;
		}
	},
	iframeQueue: [],
	enqueueIframe: function(yt) {

		if (this.isLoaded) {
			this.createIframe(yt);
		} else {
			this.loadIframeApi();
			this.iframeQueue.push(yt);
		}
	},
	createIframe: function(settings) {

		var
		pluginMediaElement = settings.pluginMediaElement,
		player = new YT.Player(settings.containerId, {
			height: settings.height,
			width: settings.width,
			videoId: settings.videoId,
			playerVars: {controls:0},
			events: {
				'onReady': function() {

					// hook up iframe object to MEjs
					settings.pluginMediaElement.pluginApi = player;

					// init mejs
					mejs.MediaPluginBridge.initPlugin(settings.pluginId);

					// create timer
					setInterval(function() {
						mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'timeupdate');
					}, 250);
				},
				'onStateChange': function(e) {

					mejs.YouTubeApi.handleStateChange(e.data, player, pluginMediaElement);

				}
			}
		});
	},

	createEvent: function (player, pluginMediaElement, eventName) {
		var obj = {
			type: eventName,
			target: pluginMediaElement
		};

		if (player && player.getDuration) {

			// time
			pluginMediaElement.currentTime = obj.currentTime = player.getCurrentTime();
			pluginMediaElement.duration = obj.duration = player.getDuration();

			// state
			obj.paused = pluginMediaElement.paused;
			obj.ended = pluginMediaElement.ended;

			// sound
			obj.muted = player.isMuted();
			obj.volume = player.getVolume() / 100;

			// progress
			obj.bytesTotal = player.getVideoBytesTotal();
			obj.bufferedBytes = player.getVideoBytesLoaded();

			// fake the W3C buffered TimeRange
			var bufferedTime = obj.bufferedBytes / obj.bytesTotal * obj.duration;

			obj.target.buffered = obj.buffered = {
				start: function(index) {
					return 0;
				},
				end: function (index) {
					return bufferedTime;
				},
				length: 1
			};

		}

		// send event up the chain
		pluginMediaElement.dispatchEvent(obj.type, obj);
	},

	iFrameReady: function() {

		this.isLoaded = true;
		this.isIframeLoaded = true;

		while (this.iframeQueue.length > 0) {
			var settings = this.iframeQueue.pop();
			this.createIframe(settings);
		}
	},

	// FLASH!
	flashPlayers: {},
	createFlash: function(settings) {

		this.flashPlayers[settings.pluginId] = settings;

		/* jshint maxlen: 257 */
		/*
		settings.container.innerHTML =
			'<object type="application/x-shockwave-flash" id="' + settings.pluginId + '" data="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=' + settings.pluginId  + '&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0" ' +
				'width="' + settings.width + '" height="' + settings.height + '" style="visibility: visible; " class="mejs-shim">' +
				'<param name="allowScriptAccess" value="always">' +
				'<param name="wmode" value="transparent">' +
			'</object>';
		*/

		var specialIEContainer,
			youtubeUrl = '//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=' + settings.pluginId  + '&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0';

		if (mejs.MediaFeatures.isIE) {

			specialIEContainer = document.createElement('div');
			settings.container.appendChild(specialIEContainer);
			specialIEContainer.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" ' +
'id="' + settings.pluginId + '" width="' + settings.width + '" height="' + settings.height + '" class="mejs-shim">' +
	'<param name="movie" value="' + youtubeUrl + '" />' +
	'<param name="wmode" value="transparent" />' +
	'<param name="allowScriptAccess" value="always" />' +
	'<param name="allowFullScreen" value="true" />' +
'</object>';
		} else {
		settings.container.innerHTML =
			'<object type="application/x-shockwave-flash" id="' + settings.pluginId + '" data="' + youtubeUrl + '" ' +
				'width="' + settings.width + '" height="' + settings.height + '" style="visibility: visible; " class="mejs-shim">' +
				'<param name="allowScriptAccess" value="always">' +
				'<param name="wmode" value="transparent">' +
			'</object>';
		}

	},

	flashReady: function(id) {
		var
			settings = this.flashPlayers[id],
			player = document.getElementById(id),
			pluginMediaElement = settings.pluginMediaElement;

		// hook up and return to MediaELementPlayer.success
		pluginMediaElement.pluginApi =
		pluginMediaElement.pluginElement = player;
		mejs.MediaPluginBridge.initPlugin(id);

		// load the youtube video
		player.cueVideoById(settings.videoId);

		var callbackName = settings.containerId + '_callback';

		window[callbackName] = function(e) {
			mejs.YouTubeApi.handleStateChange(e, player, pluginMediaElement);
		};

		player.addEventListener('onStateChange', callbackName);

		setInterval(function() {
			mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'timeupdate');
		}, 250);
	},

	handleStateChange: function(youTubeState, player, pluginMediaElement) {
		switch (youTubeState) {
			case -1: // not started
				pluginMediaElement.paused = true;
				pluginMediaElement.ended = true;
				mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'loadedmetadata');
				//createYouTubeEvent(player, pluginMediaElement, 'loadeddata');
				break;
			case 0:
				pluginMediaElement.paused = false;
				pluginMediaElement.ended = true;
				mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'ended');
				break;
			case 1:
				pluginMediaElement.paused = false;
				pluginMediaElement.ended = false;
				mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'play');
				mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'playing');
				break;
			case 2:
				pluginMediaElement.paused = true;
				pluginMediaElement.ended = false;
				mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'pause');
				break;
			case 3: // buffering
				mejs.YouTubeApi.createEvent(player, pluginMediaElement, 'progress');
				break;
			case 5:
				// cued?
				break;

		}

	}
};

// IFRAME
function onYouTubePlayerAPIReady() {
	mejs.YouTubeApi.iFrameReady();
}
// FLASH
function onYouTubePlayerReady(id) {
	mejs.YouTubeApi.flashReady(id);
}

window.mejs = mejs;
window.MediaElement = mejs.MediaElement;

/*!
 * Adds Internationalization and localization to mediaelement.
 *
 * This file does not contain translations, you have to add the manually.
 * The schema is always the same: me-i18n-locale-[ISO_639-1 Code].js
 *
 * Examples are provided both for german and chinese translation.
 *
 *
 * What is the concept beyond i18n?
 *   http://en.wikipedia.org/wiki/Internationalization_and_localization
 *
 * What langcode should i use?
 *   http://en.wikipedia.org/wiki/ISO_639-1
 *
 *
 * License?
 *
 *   The i18n file uses methods from the Drupal project (drupal.js):
 *     - i18n.methods.t() (modified)
 *     - i18n.methods.checkPlain() (full copy)
 *
 *   The Drupal project is (like mediaelementjs) licensed under GPLv2.
 *    - http://drupal.org/licensing/faq/#q1
 *    - https://github.com/johndyer/mediaelement
 *    - http://www.gnu.org/licenses/old-licenses/gpl-2.0.html
 *
 *
 * @author
 *   Tim Latz (latz.tim@gmail.com)
 *
 *
 * @params
 *  - context - document, iframe ..
 *  - exports - CommonJS, window ..
 *
 */
;(function(context, exports, undefined) {
    "use strict";
    var i18n = {
        "locale": {
            "language" : '',
            "strings" : {}
        },
        "methods" : {}
    };
// start i18n


    /**
     * Get language, fallback to browser's language if empty
     */
    i18n.getLanguage = function () {
        var language = i18n.locale.language || window.navigator.userLanguage || window.navigator.language;
        // convert to iso 639-1 (2-letters, lower case)
        return language.substr(0, 2).toLowerCase();
    };

    // i18n fixes for compatibility with WordPress
    if ( typeof mejsL10n !== 'undefined' ) {
        i18n.locale.language = mejsL10n.language;
    }



    /**
     * Encode special characters in a plain-text string for display as HTML.
     */
    i18n.methods.checkPlain = function (str) {
        var character, regex,
        replace = {
            '&': '&amp;',
            '"': '&quot;',
            '<': '&lt;',
            '>': '&gt;'
        };
        str = String(str);
        for (character in replace) {
            if (replace.hasOwnProperty(character)) {
                regex = new RegExp(character, 'g');
                str = str.replace(regex, replace[character]);
            }
        }
        return str;
    };

    /**
     * Translate strings to the page language or a given language.
     *
     *
     * @param str
     *   A string containing the English string to translate.
     *
     * @param options
     *   - 'context' (defaults to the default context): The context the source string
     *     belongs to.
     *
     * @return
     *   The translated string, escaped via i18n.methods.checkPlain()
     */
    i18n.methods.t = function (str, options) {

        // Fetch the localized version of the string.
        if (i18n.locale.strings && i18n.locale.strings[options.context] && i18n.locale.strings[options.context][str]) {
            str = i18n.locale.strings[options.context][str];
        }

        return i18n.methods.checkPlain(str);
    };


    /**
     * Wrapper for i18n.methods.t()
     *
     * @see i18n.methods.t()
     * @throws InvalidArgumentException
     */
    i18n.t = function(str, options) {

        if (typeof str === 'string' && str.length > 0) {

            // check every time due language can change for
            // different reasons (translation, lang switcher ..)
            var language = i18n.getLanguage();

            options = options || {
                "context" : language
            };

            return i18n.methods.t(str, options);
        }
        else {
            throw {
                "name" : 'InvalidArgumentException',
                "message" : 'First argument is either not a string or empty.'
            };
        }
    };

// end i18n
    exports.i18n = i18n;
}(document, mejs));

// i18n fixes for compatibility with WordPress
;(function(exports, undefined) {

    "use strict";

    if ( typeof mejsL10n !== 'undefined' ) {
        exports[mejsL10n.language] = mejsL10n.strings;
    }

}(mejs.i18n.locale.strings));

/*!
 * This is a i18n.locale language object.
 *
 * German translation by Tim Latz, latz.tim@gmail.com
 *
 * @author
 *   Tim Latz (latz.tim@gmail.com)
 *
 * @see
 *   me-i18n.js
 *
 * @params
 *  - exports - CommonJS, window ..
 */
;(function(exports, undefined) {

    "use strict";

    if (typeof exports.de === 'undefined') {
        exports.de = {
            "Fullscreen" : "Vollbild",
            "Go Fullscreen" : "Vollbild an",
            "Turn off Fullscreen" : "Vollbild aus",
            "Close" : "Schließen"
        };
    }

}(mejs.i18n.locale.strings));
/*!
 * This is a i18n.locale language object.
 *
 * Traditional chinese translation by Tim Latz, latz.tim@gmail.com
 *
 * @author
 *   Tim Latz (latz.tim@gmail.com)
 *
 * @see
 *   me-i18n.js
 *
 * @params
 *  - exports - CommonJS, window ..
 */
;(function(exports, undefined) {

    "use strict";

    if (typeof exports.zh === 'undefined') {
        exports.zh = {
            "Fullscreen" : "全螢幕",
            "Go Fullscreen" : "全屏模式",
            "Turn off Fullscreen" : "退出全屏模式",
            "Close" : "關閉"
        };
    }

}(mejs.i18n.locale.strings));



/***/ }),
/* 119 */
/*!**************************************!*\
  !*** ./js/lib/jquery.geolocation.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global navigator */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
    __webpack_require__(/*! jquery */ 1)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery) {

    var _wasAlreadyLoaded = false;

    //guard js from loading several times
    if(!_wasAlreadyLoaded) {
        _wasAlreadyLoaded = true;

        (function($){
            $.geoLocator = function(el, radius, opts){

                var base = this;

                base.$el = $(el);
                base.el = el;

                base.$el.data("geoLocator", base);

                base.init = function() {
                    // Mix default options with those passed in.
                    base.opts = $.extend({},$.geoLocator.defaults, opts);

                    // The input field to which we inject the location string
                    base.$input = $(base.opts.inputSelector);

                    // Made a call to navigator.geoLocation.getCurrentPosition() ?
                    base.gettingPosition = false;

                    // Set up event listening
                    base.$el.on('click', base.onClick);

                    // Is html5 geolocation API supported?
                    base.geoLocationSupported = !!('geolocation' in navigator);

                    // Hide button if geolocation unsupported
                    // This is handled via CSS anyway, but to be sure.
                    if(!base.geoLocationSupported) {
                        base.$el.hide();
                        base.$el.siblings('.textfield-wrap').css('margin-left', 0);
                    }

                    base.finishInit();
                };

                base.finishInit = function() {
                    base.initialized = true;
                    base.$el.trigger('initialized', base);
                };

                base.onClick = function(e) {

                    if(!base.gettingPosition) {
                        base.gettingPosition = true;
                        navigator.geolocation.getCurrentPosition(
                            base.handleSuccess,
                            base.handleError,base.opts.getCurrentPositionOpts);
                    }

                    e.preventDefault();
                };

                base.handleSuccess = function(pos) {
                    base.gettingPosition = false;
                    base.pos = pos;

                    var lat = base.pos.coords.latitude;
                    var lng = base.pos.coords.longitude;
                    base.getLocationFromCoords(lat, lng, base.setInputValue);
                };


                var _loadMaps = function(googleApiKey, language, callback, options) {

					var otherParams = 'sensor=false';
					if (googleApiKey) {
						otherParams += '&key=' + googleApiKey;
					}
					if (language) {
						otherParams += '&language=' + language;
					}
					if (typeof options === "object " && Object.prototype.toString.call(options) === "[object Array]" &&
							options.length > 0 && options[0].length > 0) {
						otherParams += '&' + options.join("&");
					}

					//internal helper function to load maps
					var _loadMaps = function() {
						google.load('maps', '3', {
							'other_params' : otherParams,
							'callback' : callback
						});
					};

					if (typeof google === 'object' &&
							typeof google.maps === 'object' &&
							typeof google.maps.Map === 'function' &&
							typeof google.maps.MapTypeControlStyle === 'object') {
						callback();
					} else if (typeof google === 'undefined' ) {
						//google might not be defined so far (lib not loaded yet)

						var _waitUntilGoogleLoaded = function() {
							//check every 100 millisecs until google is defined

							if(typeof google !== 'undefined') {
								_loadMaps();
							} else {
								window.setTimeout(_waitUntilGoogleLoaded, 100);
							}
						};

						_waitUntilGoogleLoaded();

					} else {
						_loadMaps();
					}
				};

                base.getLocationFromCoords = function(lat, lng, callback) {
                    _loadMaps(
                        this.$el.data('googleapikey'),
                        this.$el.data('googlelanguage'),
                        function () {
                            var latLng = {
                                'location' : new google.maps.LatLng(lat, lng)
                            };

                            // Set up geo coder for converting to postcode / place
                            var geocoder = new google.maps.Geocoder();
                            geocoder.geocode(latLng, function(results, status) {

                                if (status === google.maps.GeocoderStatus.OK) {
                                    if (results[0]) {
                                        // Look for postal code and level 1 administrative area
                                        for (var i = 0; i < results[0].address_components.length; i++) {
                                            for (var b = 0; b < results[0].address_components[i].types.length;b++) {
                                                switch (results[0].address_components[i].types[b]) {
                                                    case base.opts.addressTypes.postcode:
                                                        base.postcode = results[0].address_components[i].long_name;
                                                        break;
                                                    case base.opts.addressTypes.adminAreaLevelOne:
                                                        base.adminAreaLevelOne =
                                                            results[0].address_components[i].long_name;
                                                        break;
                                                 }
                                             }
                                        }
                                        base.locationFound = true;
                                        callback(base.postcode, base.adminAreaLevelOne);

                                    }
                                }
                            }); // geocoder geocode
                        } // callback
                    ); // load maps
                };

                base.setInputValue = function(postcode, adminAreaLevelOne) {
                    base.$input.val(postcode + " " + adminAreaLevelOne);
                };

                base.handleError = function(error) {
                    base.gettingPosition = false;
                    // Do nothing on error,
                    // Perhaps these could be load these into an error message
                    switch(error.code)
                    {
                        case error.PERMISSION_DENIED:
                            // Do nothing
                            break;
                        case error.POSITION_UNAVAILABLE:
                            // Do nothing
                            break;
                        case error.TIMEOUT:
                            // Do nothing
                            break;
                        case error.UNKNOWN_ERROR:
                            // Do nothing
                            break;
                    }
                };

                // Initialize
                base.init();
            };

            $.geoLocator.defaults = {
                inputSelector: 'input#location_selection',
                addressTypes: { postcode : "postal_code", adminAreaLevelOne : "administrative_area_level_1" },
                getCurrentPositionOpts: { timeout: 10000, maximumAge: 600000 }
            };

            $.fn.geoLocator = function(opts, callback) {
                return this.each(function(){
                    return (new $.geoLocator(this, opts, callback));
                });
            };

        })(jQuery, window, document);
    }

}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));




/***/ }),
/* 120 */
/*!**************************************!*\
  !*** ./js/lib/jquery.placeholder.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {/*! http://mths.be/placeholder v2.0.7 by @mathias */
;(function(window, document, $) {

	var isInputSupported = 'placeholder' in document.createElement('input'),
	    isTextareaSupported = 'placeholder' in document.createElement('textarea'),
	    prototype = $.fn,
	    valHooks = $.valHooks,
	    hooks,
	    placeholder;

	if (isInputSupported && isTextareaSupported) {

		placeholder = prototype.placeholder = function() {
			return this;
		};

		placeholder.input = placeholder.textarea = true;

	} else {

		placeholder = prototype.placeholder = function() {
			var $this = this;
			$this
				.filter((isInputSupported ? 'textarea' : ':input') + '[placeholder]')
				.not('.placeholder')
				.bind({
					'focus.placeholder': clearPlaceholder,
					'blur.placeholder': setPlaceholder
				})
				.data('placeholder-enabled', true)
				.trigger('blur.placeholder');
			return $this;
		};

		placeholder.input = isInputSupported;
		placeholder.textarea = isTextareaSupported;

		hooks = {
			'get': function(element) {
				var $element = $(element);
				return $element.data('placeholder-enabled') && $element.hasClass('placeholder') ? '' : element.value;
			},
			'set': function(element, value) {
				var $element = $(element);
				if (!$element.data('placeholder-enabled')) {
					return element.value = value;
				}
				if (value == '') {
					element.value = value;
					// Issue #56: Setting the placeholder causes problems if the element continues to have focus.
					if (element != document.activeElement) {
						// We can't use `triggerHandler` here because of dummy text/password inputs :(
						setPlaceholder.call(element);
					}
				} else if ($element.hasClass('placeholder')) {
					clearPlaceholder.call(element, true, value) || (element.value = value);
				} else {
					element.value = value;
				}
				// `set` can not return `undefined`; see http://jsapi.info/jquery/1.7.1/val#L2363
				return $element;
			}
		};

		isInputSupported || (valHooks.input = hooks);
		isTextareaSupported || (valHooks.textarea = hooks);

		$(function() {
			// Look for forms
			$(document).delegate('form', 'submit.placeholder', function() {
				// Clear the placeholder values so they don't get submitted
				var $inputs = $('.placeholder', this).each(clearPlaceholder);
				setTimeout(function() {
					$inputs.each(setPlaceholder);
				}, 10);
			});
		});

		// Clear placeholder values upon page reload
		$(window).bind('beforeunload.placeholder', function() {
			$('.placeholder').each(function() {
				this.value = '';
			});
		});

	}

	function args(elem) {
		// Return an object of element attributes
		var newAttrs = {},
		    rinlinejQuery = /^jQuery\d+$/;
		$.each(elem.attributes, function(i, attr) {
			if (attr.specified && !rinlinejQuery.test(attr.name)) {
				newAttrs[attr.name] = attr.value;
			}
		});
		return newAttrs;
	}

	function clearPlaceholder(event, value) {
		var input = this,
		    $input = $(input);
		if (input.value == $input.attr('placeholder') && $input.hasClass('placeholder')) {
			if ($input.data('placeholder-password')) {
				$input = $input.hide().next().show().attr('id', $input.removeAttr('id').data('placeholder-id'));
				// If `clearPlaceholder` was called from `$.valHooks.input.set`
				if (event === true) {
					return $input[0].value = value;
				}
				$input.focus();
			} else {
				input.value = '';
				$input.removeClass('placeholder');
				input == document.activeElement && input.select();
			}
		}
	}

	function setPlaceholder() {
		var $replacement,
		    input = this,
		    $input = $(input),
		    $origInput = $input,
		    id = this.id;
		if (input.value == '') {
			if (input.type == 'password') {
				if (!$input.data('placeholder-textinput')) {
					try {
						$replacement = $input.clone().attr({ 'type': 'text' });
					} catch(e) {
						$replacement = $('<input>').attr($.extend(args(this), { 'type': 'text' }));
					}
					$replacement
						.removeAttr('name')
						.data({
							'placeholder-password': true,
							'placeholder-id': id
						})
						.bind('focus.placeholder', clearPlaceholder);
					$input
						.data({
							'placeholder-textinput': $replacement,
							'placeholder-id': id
						})
						.before($replacement);
				}
				$input = $input.removeAttr('id').hide().prev().attr('id', id).show();
				// Note: `$input[0] != input` now!
			}
			$input.addClass('placeholder');
			$input[0].value = $input.attr('placeholder');
		} else {
			$input.removeClass('placeholder');
		}
	}

}(this, document, jQuery));
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 121 */
/*!*************************************!*\
  !*** ./js/lib/jquery.easing.1.3.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery = jQuery || __webpack_require__(/*! jquery */ 1);
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend( jQuery.easing,
{
	def: 'easeOutQuad',
	swing: function (x, t, b, c, d) {
		//alert(jQuery.easing.default);
		return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
	},
	easeInQuad: function (x, t, b, c, d) {
		return c*(t/=d)*t + b;
	},
	easeOutQuad: function (x, t, b, c, d) {
		return -c *(t/=d)*(t-2) + b;
	},
	easeInOutQuad: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t + b;
		return -c/2 * ((--t)*(t-2) - 1) + b;
	},
	easeInCubic: function (x, t, b, c, d) {
		return c*(t/=d)*t*t + b;
	},
	easeOutCubic: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t + 1) + b;
	},
	easeInOutCubic: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t + b;
		return c/2*((t-=2)*t*t + 2) + b;
	},
	easeInQuart: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t + b;
	},
	easeOutQuart: function (x, t, b, c, d) {
		return -c * ((t=t/d-1)*t*t*t - 1) + b;
	},
	easeInOutQuart: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
		return -c/2 * ((t-=2)*t*t*t - 2) + b;
	},
	easeInQuint: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t*t + b;
	},
	easeOutQuint: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t*t*t + 1) + b;
	},
	easeInOutQuint: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
		return c/2*((t-=2)*t*t*t*t + 2) + b;
	},
	easeInSine: function (x, t, b, c, d) {
		return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
	},
	easeOutSine: function (x, t, b, c, d) {
		return c * Math.sin(t/d * (Math.PI/2)) + b;
	},
	easeInOutSine: function (x, t, b, c, d) {
		return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
	},
	easeInExpo: function (x, t, b, c, d) {
		return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
	},
	easeOutExpo: function (x, t, b, c, d) {
		return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
	},
	easeInOutExpo: function (x, t, b, c, d) {
		if (t==0) return b;
		if (t==d) return b+c;
		if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
		return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
	},
	easeInCirc: function (x, t, b, c, d) {
		return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
	},
	easeOutCirc: function (x, t, b, c, d) {
		return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
	},
	easeInOutCirc: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
		return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
	},
	easeInElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
	},
	easeOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
	},
	easeInOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
		return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
	},
	easeInBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*(t/=d)*t*((s+1)*t - s) + b;
	},
	easeOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
	},
	easeInOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158; 
		if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
		return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
	},
	easeInBounce: function (x, t, b, c, d) {
		return c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;
	},
	easeOutBounce: function (x, t, b, c, d) {
		if ((t/=d) < (1/2.75)) {
			return c*(7.5625*t*t) + b;
		} else if (t < (2/2.75)) {
			return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
		} else if (t < (2.5/2.75)) {
			return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
		} else {
			return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
		}
	},
	easeInOutBounce: function (x, t, b, c, d) {
		if (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;
		return jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;
	}
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 122 */
/*!**********************************!*\
  !*** ./js/app/module/compare.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 141 */
// TODO: #compare-001 - resolve dependency to 'nemo.core.router'
// TODO: #compare-002 - resolve dependency to html-template
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! doT */ 7),
	__webpack_require__(/*! router */ 8),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, doT, ROUTER, EVENTS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	var _selectorIndexArray = [];
	var _oDefaults = {
		sSelectorOpenFormButton: '.nm-change-engine',
		sSelectorSubmitForm: 'form.nm-compare-search',
		sSelectorSelect: 'form.nm-compare-search select',
		sSelectorOptions: 'form.nm-compare-search option',
		sSelectorSearchWrapper: ".nm-compare-search-wrapper"
	};
	// private vars
	__.filterItems = function(startIndex, context_) {
		var _$selects = jQuery(_oDefaults.sSelectorSelect, context_),
		_$options, _selectedItem, _$availableItems, _$item, _$option, i, j,
		_type, _key,
		_len = _$selects.length,
		indexArr = [],
		fnFilter = function() {
			_$option = jQuery(this);
			return (_$option.data(_type) === _key);
		},
		startIndex_ = startIndex || 0;
		// fill the select with all available options
		_$selects.each(function(p) {
			if (p > startIndex_) {
				_$item = jQuery(this);
				i = _$item.find('option:selected').index('option');
				_$item.empty();
				_$item.data('allOptions').each(function() {
					_$item.append(jQuery(this));
				});
				_$item.find('option').eq(i).attr('selected', 'selected');
			}
		});
		for (i = startIndex_; i < _len; i++) {
			_$item = jQuery(_$selects[i]);
			_type = _$item.attr("data-compare-type");
			//build index array of all selects
			indexArr.push(_type);
			_selectedItem = _$item.find("option:selected");
			_key = _selectedItem.val();
			for (j = (i + 1); j < _len; j++) {
				_$options = jQuery(_$selects[j]).find("option");
				_$options.attr('disabled', 'disabled').addClass("nm-hidden");
				//_$options.addClass("nm-hidden");
				_$availableItems = _$options.filter(fnFilter).removeAttr('disabled').removeClass("nm-hidden");
				// remove not available items
				_$options.filter('.nm-hidden').remove();
				//check if a selected is available and select first available item
				_selectedItem = _$availableItems.filter(":selected");
				if (_selectedItem.length === 0) {
					//remove selections from all /or unavailable options
					_$options.removeAttr("selected");
					//select first available item
					_$availableItems.first().attr('selected', true);
				}
			}
		}
		if (startIndex_ === 0 && indexArr.length > 0) {
			_selectorIndexArray = indexArr;
		}
	};
	__.filterInvisible = function(_context) {
		// NEMOBA-3336
		// since "form:visible" doesn't take visibility:hidden into account we have to check for that too
		return _context.filter(function() {
			return (jQuery(this).find('form:visible').css('visibility') !== 'hidden');
		});
	};
	exports.initForm = function(context_) {
		var $context = context_ || jQuery(_oDefaults.sSelectorSearchWrapper).has("form:visible"),
				len;
		$context = __.filterInvisible($context);
		// alle options initial merken
		jQuery(_oDefaults.sSelectorSelect, $context).each(function() {
			if (!jQuery(this).data('allOptions')) {
				jQuery(this).data('allOptions', jQuery(this).find('option'));
			}
		});
		len = $context.length;
		//filter through all visible forms
		if (len > 0) {
			while (len--) {
				__.filterItems(0, jQuery($context.get(len)));
			}
		}
	};
	exports.showForm = function(event) {
		var $this = jQuery(this),
				_$selectedContainer = $this.closest(_oDefaults.sSelectorSearchWrapper);
		event.preventDefault();
		_$selectedContainer.toggleClass('nm-compare-search-show');
		exports.initForm(_$selectedContainer.has('form:visible'));
	};
	__.handleLayerLoaded = function() {
		exports.initForm();
		/*
		//show/activate all configuration Links
		var $item,statusString,$configButtons= jQuery(_oDefaults.sSelectorSearchWrapper).find(".nm-j-configurator-item");
		$configButtons.each(function(){
		$item=jQuery(this);
		statusString=_getClassNameByPrefix(this,"nm-j-configurator-status_")[0];
		if(!!statusString && statusString.substr(statusString.length-5,statusString.length)==="00000"){
		$item.removeClass(statusString);
		statusString="nm-j-configurator-status_11000";
		$item.addClass(statusString);
		}});
		*/
	};
	exports.handleSelectionChanges = function(event_) {
		var $target = jQuery(event_.target); //.find("option:selected").removeAttr('selected').next('option').attr('selected', 'selected'));
		//console.log("_handleSelectionChanges", event_);
		var changedType = $target.attr("data-compare-type");
		var startIndex = jQuery.inArray(changedType, _selectorIndexArray);
		var _$selectedContainer = $target.closest(_oDefaults.sSelectorSearchWrapper).has("form:visible");
		if (startIndex < 0) {
			startIndex = 0;
		}
		if (changedType !== "engine") {
			__.filterItems(startIndex, _$selectedContainer);
		}
	};
	exports.getSelectedMotorCodes = function() {
		var motorCodesArr = [];
		//get all selected engines
		var _$engineSelections = jQuery([_oDefaults.sSelectorSelect, '[data-compare-type="engine"]'].join('')).find("option:selected");
		_$engineSelections.each(function() {
			motorCodesArr.push(this.value);
		});
		return motorCodesArr;
	};
	exports.submitForm = function(event_) {
		//TODO get left and right form data and submit both
		var motorCodes = exports.getSelectedMotorCodes().join(), _url, _linkPattern, tempFn;
		event_.preventDefault();
		//{{it.motorcodes}} dotJs Pattern
		_linkPattern = jQuery(_oDefaults.sSelectorSubmitForm).attr("data-link-pattern");
		//"/content/de_nemo-t/brand/de/neuwagen/a6/a6-limousine.engine_compare.{{=it.motorcodes}}.standard.html";//
		if (!!_linkPattern) {
			tempFn = doT.template(_linkPattern);
			_url = tempFn({
				'motorcodes': motorCodes
			});
			//(re)load layer with new URL
			// #compare-001
			ROUTER.open("layer", _url);
		}
	};
	__.addEvents = function() {
		// #compare-002
		__.legacyEventBus.on('click.nemo.compare', _oDefaults.sSelectorOpenFormButton, exports.showForm);
		__.legacyEventBus.on("submit", _oDefaults.sSelectorSubmitForm, exports.submitForm);
		__.legacyEventBus.on("change", _oDefaults.sSelectorSelect, exports.handleSelectionChanges);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handleLayerLoaded);
	};
	exports.dispose = function _removeEvents() {
		// #compare-002
		__.legacyEventBus.off('click.nemo.compare', _oDefaults.sSelectorOpenFormButton, exports.showForm);
		__.legacyEventBus.off("submit", _oDefaults.sSelectorSubmitForm, exports.submitForm);
		__.legacyEventBus.off("change", _oDefaults.sSelectorSelect, exports.handleSelectionChanges);
		__.eventBus.off(EVENTS.LAYER_LOADED, __.handleLayerLoaded);
	};
	/**
	* Constructorchar
	* @return {void}
	*/
	exports.initialize = function(legacyEventBus_) {
		__.legacyEventBus = legacyEventBus_;
		__.addEvents();
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			exports.initialize(jQuery('body'));
			resolve("module/compare.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 123 */
/*!*************************************!*\
  !*** ./js/app/module/fullscreen.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
// TODO: #fullscreen-001 - fix dependency to html-template

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! doT */ 7),
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! utils/animate */ 57)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (EVENTS, doT, DOM_UTILS, ANIMATE) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};


	__.open = function(event) {

		var iframeSrc, bodyElem, renderedTemplate;

		event.preventDefault();
		iframeSrc = event.target.getAttribute('href');
		bodyElem = DOM_UTILS.getElement('body');

		renderedTemplate = __.templateFunction({
			'src': iframeSrc
		});
		DOM_UTILS.appendHtmlString(bodyElem, renderedTemplate);
	};

	__.close = function(event) {
		var layer, parent;
		try {
			if (event && event.preventDefault) {
				event.preventDefault();
			}
		} catch (e) {
			console.warn(e);
		}

		// #fullscreen-001
		layer = DOM_UTILS.getElement('.nm-layer-full');
		if(DOM_UTILS.isElement(layer)){
			DOM_UTILS.handleTransition(layer, 'nm-j-is-animating-layer').then(function(){
				parent = layer.parentNode;
				layer.style.display = 'none';
				if(DOM_UTILS.isElement(parent)){
					parent.removeChild(layer);
				}
			});
		}
	};
	__.addEvents = function() {

		// #fullscreen-001
		__.domDelegate.on('click', '.nm-j-fullscreen-open', __.open);
		__.domDelegate.on('click', '.nm-fullscreen-close', __.close);
		__.eventBus.on(EVENTS.HASH_CHANGE, __.close);
	};

	/**
	 * Constructor
	 * @returns {void}
	 */
	__.initialize = function() {

		// #fullscreen-001
		var template = DOM_UTILS.getElement('#nm-configuration-fullscreen-tpl').innerHTML || '';

		template = template.trim();
		__.templateFunction = doT.template(template);
		__.addEvents();
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/fullscreen.js");
		});
	};
	return exports;

}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 124 */
/*!****************************************************!*\
  !*** ./js/app/module/scroll-sticky-progressbar.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 161 */
/*global SETUPS */
/**
* TODO: #audicode-003 - resolve dependency to template
*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! core/scroll */ 19), __webpack_require__(/*! events */ 0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, SCROLL, EVENTS) {
	'use strict';
	//Private Methods
	var __ = {},
	//Public API
	exports = {
		__: __
	};
	// private vars
	__.oDefaults = {
		progressNavigationLinks: 'nav.nm-md-progress-navigation a.nm-progress-navigation-scroll',
		progressNavigationBarTabs: 'nav.nm-md-progress-navigation li',
		progressNavigationBarlabels: '.nm-md-progress-navigation-wrap label',
		progressNavigationSections: '.nm-md-dac-wrapper',
		progressNavigationBar: '.nm-md-progress-navigation-wrap',
		mainSubNavigationBar: '.nm-nav-wrap',
		progressNavigationBarCheckbox: '#nm-progress-navigation-switch'
	};
	__.addEvents = function() {
		__.legacyEventBus.on('click.navlinks', __.oDefaults.progressNavigationLinks, __.handleNavLinkClick);
	};

	__.removeEvents = function() {
		__.legacyEventBus.off('click.navlinks', __.oDefaults.progressNavigationLinks, __.handleNavLinkClick);
	};

	__.handleNavLinkClick = function(event) {
		event.preventDefault();
		var target = jQuery(this).attr('href');
		var offset = jQuery(target).offset();
		var menu = jQuery(__.oDefaults.progressNavigationBarCheckbox);
		var progressNavigationBar = jQuery(__.oDefaults.progressNavigationBar);
		var ownHeight = progressNavigationBar.height();
		var stickyNavHeight = jQuery(__.oDefaults.mainSubNavigationBar).height();
		var dest = offset.top - ownHeight - stickyNavHeight;
		if (!progressNavigationBar.hasClass('nm-sticky-progress')) {

			dest = dest - ownHeight;
		}

		if (menu.prop('checked')) {
			menu.prop('checked', false);
		}

		jQuery('html,body').animate({
			scrollTop: dest
		}, 450, 'swing');
	};

	__.handleProgressbarState = function(data) {
		var $progressBar = jQuery(data.element).next('.nm-md-progress-navigation-wrap');
		if (data.where === SCROLL.WHERE.ABOVE) {
			$progressBar.addClass('nm-sticky-progress');
		} else {
			$progressBar.removeClass('nm-sticky-progress');
		}
	};

	__.setNavigationItemActive = function(element) {
		jQuery(__.oDefaults.progressNavigationBarlabels).removeClass('active');
		jQuery(__.oDefaults.progressNavigationBarTabs).removeClass('active');

		var _id = jQuery(element).attr('id'),
				_link = jQuery('.nm-md-progress-navigation a[href="#'+_id+'"]'),
				_labelRef = _id.replace('nm-', '#nm-label-'),
				_label = jQuery(_labelRef);

		_link.parent().addClass('active');
		_label.addClass('active');

	};

	__.handleProgressBarSetState = function(data) {
		if (data.where === SCROLL.WHERE.IN) {
			__.handleProgressBarSetActive(data);
		} else {
			__.handleProgressBarSetInActive(data);
		}
	};

	__.handleProgressBarSetActive = function(data) {
		__.setNavigationItemActive(data.element);
	};

	__.handleProgressBarSetInActive = function(data) {
		if (data.where === SCROLL.WHERE.BELOW && data.was === SCROLL.WHERE.IN) {
			for (var i in data.elements) {
				if (data.elements.hasOwnProperty(i)) {
					if ((data.elements[i] === data.element) && !!data.elements[i-1]) {
						__.setNavigationItemActive(data.elements[i-1]);
						break;
					}
				}
			}
		}
	};
	/**
	* Constructor
	* @return {Void}
	*/
	__.initialize = function() {
		__.addEvents();
		SCROLL.register('.nm-md-progress-navigation-scroll-check', {eventName: 'anchornav-changed'}, __.handleProgressbarState);
		SCROLL.register('.nm-md-dac-wrapper', {
			eventName: 'progressBar-setState'
		}, __.handleProgressBarSetState);
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.initialize();
			resolve("module/scroll-sticky-progressbar.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 125 */
/*!******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/default-error.tpl ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-layer-wrapper nm-layer-wrapper-dialogue\">\n\t<div class=\"nm-layer nm-layer-dialogue nm-error-layer nm-layer-visible\">\n\t\t<div class=\"nm-layer-inner\">\n\t\t\t<div class=\"nm-layer-dialogue-content clearfix\">\n\t\t\t\t<h1 class=\"nm-el-hdl nm-el-hdl-02 nm-at-hdl-b\">{{=it.errorHeadline}}</h1>\n\t\t\t\t<p class=\"nm-error nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator\" style=\"float:none;\" data-defaultErrorMessage=\"{{=window.i18n['error-layer.unknown-error']}}\">{{=it.errorMessage}}</p>\n\t\t\t\t<div class=\"nm-layer-btn-ok\"><a class=\"nm-el-btn nm-el-btn-01 nm-j-ok-btn\" href=\"#\">{{=window.i18n['ok-label']}}</a></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"

/***/ }),
/* 126 */
/*!***************************************!*\
  !*** ./js/app/module/notification.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! core/layer/api */ 10), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/default-notification.tpl */ 127), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, LAYER, TPL_RENDERER, NOTIFICATION_TPL, DOM_UTILS) { //eslint-disable-line max-params
	/**
	 * @exports configurator/conflict
	 */
	'use strict';
	var
	//Private
		__ = {},
		//Public API
		exports = {
			__: __
		};
	__.layerInstance = null;
	// private vars
	__.onNotification = function() {
		exports.handleNotification();
	};
	/**
	 * add event Listener
	 */
	__.addEvents = function() {
		__.domDelegate.on('click', '.nm-notification-layer .nm-button-close', __.closeLayer);
		__.domDelegate.on('click', '.nm-notification-layer .nm-j-ok-btn', __.closeLayer);
	};
	/**
	 * remove event Listener
	 */
	__.removeEvents = function() {
		__.domDelegate.off('click', '.nm-notification-layer .nm-button-close', __.closeLayer);
		__.domDelegate.off('click', '.nm-notification-layer .nm-j-ok-btn', __.closeLayer);
	};
	/**
	 * @retruns {Promise} - a Promise (returning a layer instance on resolve)
	 */
	__.openLayer = function(layerName, tplHtml, closeCallBackFn) {
		//returns promise on open
		return new Promise(function(resolve, reject) {
			var layerPromise = LAYER.open(layerName, tplHtml, closeCallBackFn);
			layerPromise.then(function(layerInstance) {
				__.layerInstance = layerInstance;
				__.addEvents();
				resolve(__.layerInstance);
			}, function(err) {
				reject(err);
			});
		});
	};
	/**
	 * close layer by triggering the close method on the layer instance
	 * @returns {Promise}
	 */
	__.closeLayer = function(event) {
		var promise;
		__.cancelEvent(event);
		//Layer Instance returns promise on close
		promise = __.layerInstance.close();
		return promise.then(function() {
			__.layerInstance = null;
			__.onLayerClose();
		}, function(err) {
			throw new TypeError("Error closing notification Layer: " + err.message);
		});
	};
	/**
	 * prevent default event behavior
	 * @param  {Object} event_ e.g. e click event
	 * @return {Void}
	 */
	__.cancelEvent = function(event_) {
		if (!!event_ && typeof event_.preventDefault === 'function') {
			event_.preventDefault();
		}
	};
	/**
	 * close CallBack (e.g. on shader click)
	 */
	__.onLayerClose = function() {
		__.removeEvents();
	};
	__.initialize = function() {
		var scope = SETUPS.get('notification.scope'),
			sectionToShowLayer = window.i18n['notification-layer.urls'] || '',
			currentUrl = document.location.pathname,
			sectionToShowLayerArray = [],
			i = 0;
		__.eventBus.on(EVENTS.NOTIFICATION, __.onNotification);
		sectionToShowLayer = sectionToShowLayer.replace(' ', '');
		// if scope is not true, we won't show the layer initially
		if (scope !== '1') {
			return;
		}
		try {
			sectionToShowLayerArray = sectionToShowLayer.split(',');
		} catch (e) {
			console.error(e);
		}
		for (i = 0; i < sectionToShowLayerArray.length; i++) {
			if (currentUrl.indexOf(sectionToShowLayerArray[i] !== -1)) {
				if (document.cookie.indexOf('nm-notification-' + encodeURIComponent(sectionToShowLayerArray[i])) !== -1) {
					console.info('show no notification-layer because of cookie:', sectionToShowLayerArray[i], currentUrl, currentUrl.indexOf(sectionToShowLayerArray[i], document.cookie));
					break;
				}
				console.info('show notification-layer:', sectionToShowLayerArray[i], currentUrl, currentUrl.indexOf(sectionToShowLayerArray[i]));
				document.cookie = 'nm-notification-' + encodeURIComponent(sectionToShowLayerArray[i]) + '=1';
				__.onNotification();
				break;
			} else {
				console.info('no notification-layer: ', currentUrl, sectionToShowLayerArray[i], currentUrl.indexOf(sectionToShowLayerArray[i]));
			}
		}
	};
	/**
	 * handle an error response
	 * opens an error layer
	 * @param {object} error_ - the raw error object
	 * calls LAYER_API.open
	 */
	exports.handleNotification = function() {
		return new Promise(function(resolve, reject) {
			var renderedElement = TPL_RENDERER.render(NOTIFICATION_TPL, {});
			var promise = __.openLayer('error-layer', renderedElement, __.closeLayer);
			promise.then(resolve, reject);
		});
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/notification.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 127 */
/*!*************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/default-notification.tpl ***!
  \*************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-layer-wrapper nm-layer-wrapper-dialogue\">\n\t<div class=\"nm-layer nm-layer-dialogue nm-error-layer nm-notification-layer nm-layer-visible\">\n\t\t<div class=\"nm-button-close\">\n\t\t\t<svg class=\"nm-icon-cancel\">\n\t\t\t\t<use xlink:href={{=SETUPS.get('coreci.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-cancel\"}}></use>\n\t\t\t</svg>\n\t\t</div>\n\t\t<div class=\"nm-layer-inner\">\n\t\t\t<div class=\"nm-layer-dialogue-content clearfix\">\n\t\t\t\t<h1 class=\"nm-el-hdl nm-el-hdl-02 nm-at-hdl-b\">{{=window.i18n['notification-layer.headline']}}</h1>\n\t\t\t\t<p class=\"nm-notification nm-el-pg nm-el-pg-01\" style=\"float:none;\">{{=window.i18n['notification-layer.submessage']}}</p>\n\t\t\t\t<p class=\"nm-notification nm-el-pg nm-el-pg-03\" style=\"float:none;\">{{=window.i18n['notification-layer.message']}}</p>\n\t\t\t\t<div class=\"nm-layer-btn-ok\"><a class=\"nm-el-btn nm-el-btn-01 nm-j-ok-btn\" href=\"#\">{{=window.i18n['notification-layer.button']}}</a></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"

/***/ }),
/* 128 */
/*!**********************************!*\
  !*** ./js/app/module/infobox.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
/* global s */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (DOM_UTILS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	__.oDefaults = {
		sSelectorDelegateClick:'.nm-infobox',
		sSelectorInfoboxContainer:".nm-infobox-container",
		sToggleClass:"nm-infobox-show"
	};
	__.clickedElement = null;

	/**
	 * handleOutsideClick - close infobox whenever the user clicks outside of togglelink
	 * @param {Event} event_ - element which is clicked
	 * @returns {void} - returns nothing
	 */
	__.handleOutsideClick = function _handleOutsideClick(event_){
		var element = DOM_UTILS.getElement(__.oDefaults.sSelectorInfoboxContainer, __.clickedElement),
			clickedOutside;
		if (element.classList.contains(__.oDefaults.sToggleClass)) {
			clickedOutside = DOM_UTILS.isElementOutsideOfElementWithSelector(event_.target, __.oDefaults.sSelectorDelegateClick);
			if(clickedOutside){
				__.domEventDelegate.off("click", __.handleOutsideClick);
				__.closeInfoBox(element);
				__.clickedElement = null;
			}
		}
	};

	/**
	 * __.handleToggleClick
	 * add class to open element or close element
	 * @return {void} returns nothing
	 */
	__.handleToggleClick = function _handleToggleClick(){
		var element = DOM_UTILS.getElement(__.oDefaults.sSelectorInfoboxContainer, this);
		__.clickedElement = this;
		if (!element.classList.contains(__.oDefaults.sToggleClass)) {
			//show infobox
			element.classList.add(__.oDefaults.sToggleClass);
			// register outside click event
			__.registerOutsideClickEvent();

		} else {
			__.closeInfoBox(element);
		}
	};

	/**
	 * registerOutsideClickEvent
	 * @returns {void} returns nothing
	 */
	__.registerOutsideClickEvent = function () {
		//add click outside handler to close infobox on click outside the Infobox
		__.domEventDelegate.on("click",'*',__.handleOutsideClick);
	};

	/**
	 * __.closeInfoBox
	 * @param  {HTMLnode} element_ - element to close
	 * @return {void} returns nothing
	 */
	__.closeInfoBox = function(element_){
		element_.classList.remove(__.oDefaults.sToggleClass);
	};

	/**
	 * Add Module-specific events
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.domEventDelegate.on("click",__.oDefaults.sSelectorDelegateClick,__.handleToggleClick);
	};

	__.initialize = function(){
		if(!__.init){
			__.addEvents();
		}
		__.init=true;
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/infobox.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 129 */
/*!******************************!*\
  !*** ./js/app/form/group.js ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint smarttabs: true */


!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! doT */ 7),
	__webpack_require__(/*! form/item */ 130)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, doT, FormItem) {

	"use strict";

	var

	// mapped templates
	_templateMap = {},

	// doT template functions; lazily loaded and cached;
	_templateFuncs = {},

	// Internal module methods
	__ = {};

	// TODO: #form-group-001 - refactor to helper or 'service'
	__.getTemplateFunc = function () {
		var tplId, tplDOMid;

		// This func is added to the prototype of all __.FormX instances.
		// 'this' is assumed to be the instance. To prevent errors, if
		// templateKey is not defined a function returning an empty string
		// is returned.
		var key = this.templateKey || null,
			tpl,
			fallbackFunc = function () {
				return '';
			};
		if (key === null) {
			return fallbackFunc;
		}
		tplId = __.getTemplateId(this, key);
		if (_templateFuncs[tplId] === undefined) {
			tpl = jQuery('#' + tplId);
			if (tpl.length > 0) {
				_templateFuncs[tplId] = doT.template(tpl.html().trim());
			} else {
				return fallbackFunc;
			}
		}
		return _templateFuncs[tplId];
	};

	/**
	 * Sanitize Id to get a DOM-usable id string
	 */
	__.sanitizeId = function (id) {
		if (id !== undefined) {
			return id.replace(/[^a-z0-9_-]/gi, '');
		}
		return '';
	};

	/**
	 * TODO: #form-group-002 - refactor to helper or 'service'
	 *
	 * Chose the correct template id in this order of specificity:
	 * 1. <form.id>-<obj.id> found in _templateMap
	 * 2. <form.id>-<form.pageId> found in _templateMap
	 * 3. <form.id>-<key> found in _templateMap
	 * 4. <form.id>-<form.pageId>-<obj.id>
	 * 5. <form.id>-<obj.id>
	 * 6. <form.id>-<form.pageId>-<key>
	 * 7. <form.id>-<key>
	 * 7. <key>
	 */
	__.getTemplateId = function (obj, key) {
		var tplId,
			pre = 'nm-id-form-',
			post = '-tpl',
			form = obj.form || obj,
			customTemplateIds = form.customTemplateIds || {},
			pageId = form.pageId,
			objDOMId,
			idStr;
		key = key.toLowerCase();
		if (obj.id !== undefined) {
			objDOMId = __.sanitizeId(obj.id);
			// try very very very high specificity (mapped)
			idStr = _templateMap[form.id + '-' + objDOMId];
			if (idStr !== undefined) {
				return idStr;
			}
			// try very high specificity
			idStr = pre + form.id + '-' + form.pageId + '-' + objDOMId + post;
			if (customTemplateIds[idStr] !== undefined) {
				return idStr;
			}
			// try high specificity
			idStr = pre + form.id + '-' + objDOMId + post;
			if (customTemplateIds[idStr] !== undefined) {
				return idStr;
			}
		}
		// try mapped page
		if (obj.formConstructorName === 'Form') {
			idStr = _templateMap[form.id + '-' + form.pageId];
			if (idStr !== undefined) {
				return idStr;
			}
		}
		// try mapped with <formid>-<key> (field type)
		idStr = pre + form.id + '-' + key + post;
		if (_templateMap[form.id + '-' + key] !== undefined) {
			return idStr;
		}
		// try normal specificity
		idStr = pre + form.id + '-' + form.pageId + '-' + key + post;
		if (customTemplateIds[idStr] !== undefined) {
			return idStr;
		}
		// try low specificity
		idStr = pre + form.id + '-' + key + post;
		if (customTemplateIds[idStr] !== undefined) {
			return idStr;
		}
		// return id string with very low specificity (default)
		idStr = pre + key + post;
		return idStr;
	};

	/**
	 * FormGroup
	 */
	__.FormGroup = function FormGroup(data, form) {
		var key;
		// TODO: refactor this into a helper method (?)
		for (key in data) {
			if (data.hasOwnProperty(key)) {
				this[key] = data[key];
			}
		}
		this.formConstructorName = 'FormGroup';
		this.form = form;
		this.domId = __.sanitizeId(this.id);
		this.templateKey = 'group';
		this.dataItems = data.items;
		this.items = [];
		this.namedItems = {};
		this.processItems();
		this.getString = this.getTemplateFunc();
		return this;
	};

	__.FormGroup.prototype.getTemplateFunc = __.getTemplateFunc;

	__.FormGroup.prototype.processItems = function () {
		var i, l, item;
		if ( !!this.dataItems) {
			for (i = 0, l = this.dataItems.length; i < l; i++) {
				item = new FormItem(this.dataItems[i], this.form);
				this.items.push(item);
				this.namedItems[item.id] = item;
			}
		}
	};

	__.FormGroup.prototype.toString = function toString() {
		return this.getString(this);
	};

	return __.FormGroup;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 130 */
/*!*****************************!*\
  !*** ./js/app/form/item.js ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint smarttabs: true */

// FIXME: #item-001, #item-002
// TODO: is this the best structure ? (RFC)
// TODO: what about an 'Item-Factory' ?
//
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! doT */ 7),
	__webpack_require__(/*! form/field */ 131)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, doT, FormField) {

	"use strict";

	var

	// mapped templates
	_templateMap = {},

	// doT template functions; lazily loaded and cached;
	_templateFuncs = {},

	// Internal module methods
	__ = {};


	__.getTemplateFunc = function () {
		var tplId, tplDOMid;
		// This func is added to the prototype of all __.FormX instances.
		// 'this' is assumed to be the instance. To prevent errors, if
		// templateKey is not defined a function returning an empty string
		// is returned.
		var key = this.templateKey || null,
			tpl,
			fallbackFunc = function () {
				return '';
			};
		if (key === null) {
			return fallbackFunc;
		}
		tplId = __.getTemplateId(this, key);
		if (_templateFuncs[tplId] === undefined) {
			tpl = jQuery('#' + tplId);
			if (tpl.length > 0) {
				_templateFuncs[tplId] = doT.template(tpl.html().trim());
			} else {
				return fallbackFunc;
			}
		}
		return _templateFuncs[tplId];
	};

	/**
	 * Sanitize Id to get a DOM-usable id string
	 */
	__.sanitizeId = function (id) {
		if (id !== undefined) {
			return id.replace(/[^a-z0-9_-]/gi, '');
		}
		return '';
	};

	/**

	// TODO: (#item-002)
	// move to separate helper as this is shared over all form related modules (!?)

	 * Chose the correct template id in this order of specificity:
	 * 1. <form.id>-<obj.id> found in _templateMap
	 * 2. <form.id>-<form.pageId> found in _templateMap
	 * 3. <form.id>-<key> found in _templateMap
	 * 4. <form.id>-<form.pageId>-<obj.id>
	 * 5. <form.id>-<obj.id>
	 * 6. <form.id>-<form.pageId>-<key>
	 * 7. <form.id>-<key>
	 * 7. <key>
	 */
	__.getTemplateId = function (obj, key) {
		var tplId,
			pre = 'nm-id-form-',
			post = '-tpl',
			form = obj.form || obj,
			customTemplateIds = form.customTemplateIds || {},
			pageId = form.pageId,
			objDOMId,
			idStr;
		key = key.toLowerCase();
		if (obj.id !== undefined) {
			objDOMId = __.sanitizeId(obj.id);
			// try very very very high specificity (mapped)
			idStr = _templateMap[form.id + '-' + objDOMId];
			if (idStr !== undefined) {
				return idStr;
			}
			// try very high specificity
			idStr = pre + form.id + '-' + form.pageId + '-' + objDOMId + post;
			if (customTemplateIds[idStr] !== undefined) {
				return idStr;
			}
			// try high specificity
			idStr = pre + form.id + '-' + objDOMId + post;
			if (customTemplateIds[idStr] !== undefined) {
				return idStr;
			}
		}
		// try mapped page
		if (obj.formConstructorName === 'Form') {
			idStr = _templateMap[form.id + '-' + form.pageId];
			if (idStr !== undefined) {
				return idStr;
			}
		}
		// try mapped with <formid>-<key> (field type)
		idStr = pre + form.id + '-' + key + post;
		if (_templateMap[form.id + '-' + key] !== undefined) {
			return idStr;
		}
		// try normal specificity
		idStr = pre + form.id + '-' + form.pageId + '-' + key + post;
		if (customTemplateIds[idStr] !== undefined) {
			return idStr;
		}
		// try low specificity
		idStr = pre + form.id + '-' + key + post;
		if (customTemplateIds[idStr] !== undefined) {
			return idStr;
		}
		// return id string with very low specificity (default)
		idStr = pre + key + post;
		return idStr;
	};


	var _copyValues = function(source, target) {

		if (!source || !target) { return false; }

		var key;

		for (key in source) {
			if (source.hasOwnProperty(key)) {
				target[key] = source[key];
			}
		}
	};


	/**
	 * FormItem
	 */
	__.FormItem = function FormItem(data, form) {

		_copyValues(data, this);

		this.formConstructorName = 'FormItem';

		this.domId = __.sanitizeId(this.id);

		if (data && 'fields' in data) {
			this.dataFields = data.fields;
		}
		else {
			this.dataFields = [];
		}

		this.form = form;
		this.templateKey = 'item';
		this.fields = [];
		this.namedFields = {};
		this.getString = this.getTemplateFunc();
		this.processFields();
		return this;
	};

	__.FormItem.prototype.getTemplateFunc = __.getTemplateFunc;

	__.FormItem.prototype.processFields = function () {
		var i, l, field;
		if (this.dataFields !== undefined) {
			// move label and info to field if only a fake label exists
			// and the item contains only one field.
			if (this.dataFields.length === 1) {
				if (this.dataFields[0].label === undefined) {
					this.dataFields[0].label = this.name;
					delete this.name;
					if (!!this.info) {
						this.dataFields[0].info = this.info;
						delete this.info;
					}
				}
			}
			// create fields
			for (i = 0, l = this.dataFields.length; i < l; i++) {
				field = new FormField(this.dataFields[i], this.form);
				this.fields.push(field);
				this.namedFields[field.id] = field;
			}
		}
	};

	__.FormItem.prototype.toString = function toString() {
		return this.getString(this);
	};

	return __.FormItem;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 131 */
/*!******************************!*\
  !*** ./js/app/form/field.js ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint smarttabs: true */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! doT */ 7)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (doT) {

	"use strict";

	var

	// mapped templates
	_templateMap = {},

	// doT template functions; lazily loaded and cached;
	_templateFuncs = {},

	// Internal module methods
	__ = {};


	__.getTemplateFunc = function () {
		var tplId, tplDOMid;
		// This func is added to the prototype of all __.FormX instances.
		// 'this' is assumed to be the instance. To prevent errors, if
		// templateKey is not defined a function returning an empty string
		// is returned.
		var key = this.templateKey || null,
			tpl,
			fallbackFunc = function () {
				return '';
			};
		if (key === null) {
			return fallbackFunc;
		}
		tplId = __.getTemplateId(this, key);
		if (_templateFuncs[tplId] === undefined) {
			tpl = jQuery('#' + tplId);
			if (tpl.length > 0) {
				_templateFuncs[tplId] = doT.template(tpl.html().trim());
			} else {
				return fallbackFunc;
			}
		}
		return _templateFuncs[tplId];
	};


	/**
	 * Sanitize Id to get a DOM-usable id string
	 */
	__.sanitizeId = function (id) {
		if (id !== undefined) {
			return id.replace(/[^a-z0-9_-]/gi, '');
		}
		return '';
	};


	/**
	 * Chose the correct template id in this order of specificity:
	 * 1. <form.id>-<obj.id> found in _templateMap
	 * 2. <form.id>-<form.pageId> found in _templateMap
	 * 3. <form.id>-<key> found in _templateMap
	 * 4. <form.id>-<form.pageId>-<obj.id>
	 * 5. <form.id>-<obj.id>
	 * 6. <form.id>-<form.pageId>-<key>
	 * 7. <form.id>-<key>
	 * 7. <key>
	 */
	__.getTemplateId = function (obj, key) {
		var tplId,
			pre = 'nm-id-form-',
			post = '-tpl',
			form = obj.form || obj,
			customTemplateIds = form.customTemplateIds || {},
			pageId = form.pageId,
			objDOMId,
			idStr;
		key = key.toLowerCase();
		if (obj.id !== undefined) {
			objDOMId = __.sanitizeId(obj.id);
			// try very very very high specificity (mapped)
			idStr = _templateMap[form.id + '-' + objDOMId];
			if (idStr !== undefined) {
				return idStr;
			}
			// try very high specificity
			idStr = pre + form.id + '-' + form.pageId + '-' + objDOMId + post;
			if (customTemplateIds[idStr] !== undefined) {
				return idStr;
			}
			// try high specificity
			idStr = pre + form.id + '-' + objDOMId + post;
			if (customTemplateIds[idStr] !== undefined) {
				return idStr;
			}
		}
		// try mapped page
		if (obj.formConstructorName === 'Form') {
			idStr = _templateMap[form.id + '-' + form.pageId];
			if (idStr !== undefined) {
				return idStr;
			}
		}
		// try mapped with <formid>-<key> (field type)
		idStr = pre + form.id + '-' + key + post;
		if (_templateMap[form.id + '-' + key] !== undefined) {
			return idStr;
		}
		// try normal specificity
		idStr = pre + form.id + '-' + form.pageId + '-' + key + post;
		if (customTemplateIds[idStr] !== undefined) {
			return idStr;
		}
		// try low specificity
		idStr = pre + form.id + '-' + key + post;
		if (customTemplateIds[idStr] !== undefined) {
			return idStr;
		}
		// return id string with very low specificity (default)
		idStr = pre + key + post;
		return idStr;
	};


	/**
	 * FormField
	 */
	__.FormField = function FormField(data, form) {
		var key;
		for (key in data) {

			// TODO: (#field-002) refactor this into a helper method (?)
			if (data.hasOwnProperty(key)) {
				this[key] = data[key];
			}
		}
		this.formConstructorName = 'FormField';
		this.domId = __.sanitizeId(this.id);
		// ad name attr if not defined
		if (this.name === undefined) {
			this.name = this.id;
		}
		this.form = form;

		// TODO: (#field-003) refactor to either of one
		// 'type' (probably from 'opts') or 'templateKey'
		//
		this.templateKey = this.type;
		this.getString = this.getTemplateFunc();
		this.registerChange();
		return this;
	};


	__.FormField.prototype.getTemplateFunc = __.getTemplateFunc;


	__.FormField.prototype.registerChange = function () {
		var field = this,
			context,
			selector,
			type = this.type.toLowerCase();


		//-- refactoring start
		// #field-001 - install test before refactoring
/*
		var _callback	= !! field.auto_submit ? field.form.autoSubmit : field.form.changed;
			context		= '#' + this.form.id,
			selector	= '#' + this.domId;

		if (type in ['radio', 'select', 'checkbox']) {

			// special selector for 'radio'
			//
			if (type === 'radio') {
				selector = 'input[name=' + this.domId + ']';
			}

			jQuery(context).on('change', selector, function () {
				_callback.apply(field.form, [field.action]);
			});
		}
		else {
			jQuery(context).on('blur', selector, function () {
				_callback.apply(field.form, [field.action]);
			});
		}
*/
		//-- refactoring end
		//

		if (type === 'radio') {
			context = '#' + this.form.id;
			selector = 'input[name=' + this.domId + ']';
			jQuery(context).on('change', selector, function () {
				// FIXME: DRY
				var callFn = !!field.auto_submit ? field.form.autoSubmit : field.form.changed;
				callFn.apply(field.form, [field.action]);
			});
		}
		else if (type === 'select') {
			context = '#' + this.form.id;
			selector = '#' + this.domId;
			jQuery(context).on('change', selector, function () {
				// FIXME: DRY
				var callFn = !!field.auto_submit ? field.form.autoSubmit : field.form.changed;
				callFn.apply(field.form, [field.action]);
			});
		}
		else if (type === 'checkbox') {
			context = '#' + this.form.id;
			selector = '#' + this.domId;
			jQuery(context).on('change', selector, function () {
				// FIXME: DRY
				var callFn = !!field.auto_submit ? field.form.autoSubmit : field.form.changed;
				callFn.apply(field.form, [field.action]);
			});
		}
		else {
			context = '#' + this.form.id;
			selector = '#' + this.domId;
			jQuery(context).on('blur', selector, function () {
				// FIXME: DRY
				var callFn = !!field.auto_submit ? field.form.autoSubmit : field.form.changed;
				callFn.apply(field.form, [field.action]);
			});
		}
	};

	__.FormField.prototype.toString = function () {
		return this.getString(this);
	};


	return __.FormField;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 132 */
/*!*******************************!*\
  !*** ./js/app/form/simple.js ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 131 */
/*global SETUPS,Promise*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! form/core.form */ 33), __webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/ajax */ 6), __webpack_require__(/*! router */ 8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, FORM, CONFIGURATOR_API, EVENTS, AJAX, ROUTER) { //eslint-disable-line max-params
	"use strict";
	var
	// options
		_opts = {
			formSelector: '.nm-j-simpleform'
		},
		// internals
		__ = {},
		// api
		exports = {
			__: __
		};
	/**
	 * Scan context for forms.
	 */
	__.scanSource = function ($context) {
		$context.find(_opts.formSelector).each(function () {
			__.initForm(jQuery(this));
		});
	};
	/**
	 * Initialize a form.
	 */
	__.initForm = function (context) {
		var id, submitButton, form, action, formContainer;
		formContainer = context;
		id = formContainer.attr('id');
		submitButton = formContainer.find('.nm-button-submit');
		form = formContainer.find('form');
		// bind button click and form submit
		form.on('submit', function (e) {
			e.preventDefault();
			__.onSubmit(e, id, form);
		});
	};
	__.onSubmit = function (e, id, form) {
		var button;
		var formData = form.serialize();
		if (id === 'audicode-input') {
			var code = formData.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i);
			if (code) {
				formData = "audicode=" + formData.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)[1].toUpperCase();
			}
		}
		__.call(id, {
			data: formData
		});
	};
	__.getUrl = function (id) {
		var url, confComplete, context, subsession, prstring, args;
		url = SETUPS.get('nemo.url.form.' + id);
		args = [];
		// try to add context
		context = CONFIGURATOR_API.getContext();
		if (context) {
			args.push('context=' + context);
		}
		// try to add the subsession
		subsession = CONFIGURATOR_API.getSubsessionID();
		if (subsession) {
			args.push('subsession=' + subsession);
		}
		// try to add the prstring
		prstring = CONFIGURATOR_API.getPrString();
		if (prstring) {
			args.push('ids=' + encodeURIComponent(prstring));
		}
		url += (url.indexOf('?') === -1) ? '?' : '&';
		return url + args.join('&');
	};
	__.call = function (id, options) {
		var
		// DPU form id.
			dpuId,
			// Request payload.
			payload = options.data,
			// Form container.
			$container = jQuery('#' + id);
		// Use data-dpu-form-id as dpuId if set (used if we have two different
		// forms that call the same dpu resource).
		// Defaults to the DOM id of the form container.
		dpuId = $container.attr('data-dpu-form-id') || id;
		$container.addClass('nm-j-simpleform-loading').removeClass('nm-j-simpleform-error').removeClass('nm-j-simpleform-success');
		var url = __.getUrl(dpuId);
		var promise = AJAX.getJSON(url, payload, {
			/*'requestMethod': 'POST'*/
		});
		/*
		var promise =Promise.resolve(jQuery.ajax({
			type: 'POST',
			url: __.getUrl(dpuId),
			xhrFields: {
				withCredentials: true
			},
			timeout: 15000,
			data: payload
		}));*/
		promise.then(function (data) {
			__.handleSuccess(data, id, dpuId);
		}, function (data) {
			__.handleFail(data, id, dpuId);
		});
	};
	__.handleSuccess = function (data, id, dpuId) {
		var container = jQuery('#' + id),
			errorMessage;
		data = FORM.responseToObj(data);
		if (!data || !data[dpuId]) {
			return __.handleFail(data, id, dpuId);
		}
		if (Math.floor(data[dpuId].statuscode / 100) === 2) {
			container.find('.nm-error').html('');
			if (!!data[dpuId].message) {
				container.find('.nm-success').html(data[dpuId].message);
			}
			container.removeClass('nm-j-simpleform-error').addClass('nm-j-simpleform-success');
			__.legacyEventBus.trigger(EVENTS.FORM_FINISHED, {
				'id': id,
				'response': data
			});
			// mark form as finished
			container.attr('data-form-is-finished', 1);
			if (id === 'audicode-input') {
				// always go to the defined url to start a configuration
				ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());
				//close Layer (trigger close button click)
				jQuery(".nm-button-close.nm-ajaxLayerClose").trigger("click");
			}
		} else {
			//container.find('.nm-success').html('');
			if(!!data.login && !data.login.success && !!data.login.message){
				errorMessage = data.login.message;
			}else{
				errorMessage = CONFIGURATOR_API.getErrorMessage(data.header.error.id);
				errorMessage = errorMessage || data[dpuId].message;
			}
			container.find('.nm-error').html(errorMessage);
			container.addClass('nm-j-simpleform-error').removeClass('nm-j-simpleform-success');
			__.eventBus.emit(EVENTS.FORM_ERROR, {
				'id': id,
				'response': data
			});
		}
		container.removeClass('nm-j-simpleform-loading');
	};
	__.handleFail = function (data, id, dpuId) {
		var container = jQuery('#' + id),
			message,
			dpuMessage;
		if (!!data) {
			if (!!dpuId && !!data[dpuId]) {
				dpuMessage = data[dpuId].message;
			}
			message=CONFIGURATOR_API.getErrorMessage(data.header.error.id)||dpuMessage;
		}
		message=message||CONFIGURATOR_API.getErrorMessage();
		container.find('.nm-error').html(message);
		container.addClass('nm-j-simpleform-error').removeClass('nm-j-simpleform-success').removeClass('nm-j-simpleform-loading');
	};
	__.addEvents = function () {
		// bind to layer.loaded
		__.eventBus.on(EVENTS.LAYER_LOADED, function (data) {
			if (!!data && !!data.element) {
				__.scanSource(jQuery(data.element));
			}
		});
		/*
        // Listen to the page.loaded event.
        jQuery('body').on(EVENTS.PAGE_LOADED, function(data) {
            if ( !!data && !!data.domElement) {
               __.scanSource(data.domElement);
            }
        });*/
		//check for forms without layer context
		__.scanSource(jQuery("body"));
	};
	exports.initializePromise = function (eventBus_) {
		return new Promise(function (resolve) {
			__.legacyEventBus = jQuery("body");
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("form/simple.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 133 */
/*!*******************************!*\
  !*** ./js/app/form/select.js ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// listen to document.ready, pageloaded, formloaded and add onchange handler to select
// add .nm-at-select-selected if checked & not first-item / default value

// FORM_LOADED
// PAGE_LOADED
// APP_READY

/*jslint maxlen: 145 */
/*jslint maxparams: 7 */
/*global Promise*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS) {
	/**
	 * @exports module/startlayer
	 */
	'use strict';
	var __ = {},
		exports = {
			__: __
		};
	__.instance = false;
	__.oDefaults = {
		sDropdownSelectionClass:"nm-at-select-default-val"
	};

	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED,__.onPageLoaded);
		__.eventBus.on(EVENTS.FORM_LOADED,__.onFormLoaded);


		__.handleSelectChanges();
	};

	__.onPageLoaded=function(){
		__.handleSelectChanges();
	};

	__.onFormLoaded=function(){
		__.handleSelectChanges();
	};

	__.handleSelectChanges = function(event) {
		var $selects = jQuery("select");
		jQuery.each($selects, function() {

			var $select = jQuery(this);

			__.legacyEventBus.on('change.select', __.updateSelect);

			__.setSelectState($select);
		});
	};

	__.updateSelect = function(event_) {
		var $select = jQuery(event_.target);

		__.setSelectState($select);
	};

	__.setSelectState = function(select_) {

		var $selected = select_.find("option:selected");
		var $filterValue, $el, $isDefault;
		jQuery.each($selected, function() {
			$el = jQuery(this);
			$filterValue = $el.val();
			$isDefault = ($el.attr("data-is-default") !== undefined);
			$el.parent().toggleClass(__.oDefaults.sDropdownSelectionClass, ( ($filterValue && $filterValue === "*") || $isDefault ));
		});
	};

	__.removeEvents = function() {};

	__.initialize = function() {
		__.addEvents();
		__.handleSelectChanges();
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.initialize();
			resolve("form/select.js");
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 134 */
/*!***************************************************!*\
  !*** ./js/app/configurator/last-configuration.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams:10, maxlen: 175 */
/* global Promise*/
/**
 * @description module to store and user´s last configuration in the Browser´s session storage
 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(CONFIGURATOR_API, EVENTS) {
	/**
	 * @exports configurator/user-configurations
	 */
	'use strict';
	var __ = {},
		//Public API
		exports = {
			__: __
		};
	//reference to the global EventBus
	__.globalEventBus = null;
	//im SETUP definierter Wert (zunächst 72 Stunden)
	__.EXPIRED_THRESHOLD = 72;
	//create public API
	window.audi = window.audi || {};
	window.audi.api = window.audi.api || {};
	/**
	 * check if time expired
	 * @param {Date} savedDate_ - last saved configuration date
	 * @returns {boolean} configuration is expired
	 */
	__.isExpired = function(savedDate_) {
		var now = new Date().getTime()/(60*60*60);
		return (now - savedDate_ >= __.EXPIRED_THRESHOLD);
	};
	/**
	 * add Events
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.globalEventBus.on(EVENTS.CONFIG_UPDATE, __.handleConfigurationUpdate);
	};
	/**
	 * get user´s last configuration from storage (LocalStorage)
	 * @returns {object|false} configuration object or false
	 */
	__.getLastConfiguration = function() {
		var configuration = __.getStoredConfiguration();
		if (!!configuration && configuration.lastChanged) {
			return __.isExpired(configuration.lastChanged) ? false : configuration;
		} else {
			return false;
		}
	};
	window.audi.api.lastConfiguration = __.getLastConfiguration;
	/**
	 * handle configuration updates
	 * @returns {void}
	 */
	__.handleConfigurationUpdate = function() {
		var lastStoredConfiguration = __.getConfigurationObject();
		if (__.hasSorage() && lastStoredConfiguration) {
			__.writeEntry(lastStoredConfiguration);
		}
	};
	/**
	 * check if Storage is available
	 * @returns {boolean} is available ?
	 */
	__.hasSorage = function() {
		return !!__.getStorage();
	};
	/**
	 * return storage Object
	 * @returns {Object} Storage (LocalStorage)
	 */
	__.getStorage=function(){
		return window.localStorage||null;
	};
	/**
	 * normalize data and write string to storage (LocalStorage)
	 * @param {object} data_ - user´s last configuration
	 * @returns {void}
	 */
	__.writeEntry = function(data_) {
		var dataString,_storage;
		try {
			dataString = JSON.stringify(data_);
			_storage=__.getStorage();
			_storage.setItem('lastConfiguration', dataString);
		} catch (err) {
			console.warn(err);
		}
	};
	/**
	 * @example
	 * "assets": {
	 *	"exterior_front": "<configuration.assets.exterior_front.stage.hd>",
	 *	"closeup_lights": "<configuration.assets.closeup_lights.stage.hd>",
	 *	"exterior": "<configuration.assets.exterior.stage.hd>"
	 *  },
     *  "assetsMobile": {
	 *	"exterior_front": "<configuration.assets.exterior_front.stage.hdx>",
	 *	"closeup_lights": "<configuration.assets.closeup_lights.stage.hdx>",
	 *	"exterior": "<configuration.assets.exterior.stage.hdx>"
	 *  },
	 *	"price": "<configuration.price>",
	 *	"carlineName": "<configuration.carlineName>",
	 *	"description": "<configuration.description>",
	 *	"prstring": "<configuration.prstring>",
	 *	"carline": "<configuration.carline>",
	 *	"lastChanged": "<timestampOfLastConfiguration>",
	 *	"mv-version": "<header.marketVersion>",
	 *	"context": "<header.context>",
	 *	"url": "<urlToConfiguration>"
	 *	}
	 * @returns {object} configuration object
	 */
	__.getConfigurationObject = function() { //eslint-disable-line max-statements
		var configuration = CONFIGURATOR_API.getConfiguration(),renderBaseURL,
			last_configuration = {
				assets: {},
				assetsMobile: {}
			},
			images_assets =	CONFIGURATOR_API.getConfigurationAssets();
		renderBaseURL=CONFIGURATOR_API.getRenderUrl();
		//do not write empty configuration or configuration  with conflicts!!!
		if (!configuration || !!CONFIGURATOR_API.getConflicts()||!images_assets||Object.keys(images_assets).length === 0) {
			return null;
		}
		last_configuration.assets.exterior_front = images_assets.exterior_front&&images_assets.exterior_front['stage.hd']?renderBaseURL+images_assets.exterior_front['stage.hd'] : '';
		last_configuration.assets.closeup_lights = images_assets.closeup_lights&&images_assets.closeup_lights['stage.hd']?renderBaseURL+images_assets.closeup_lights['stage.hd'] : '';
		last_configuration.assets.exterior = images_assets.exterior&&images_assets.exterior['stage.hd']?renderBaseURL+images_assets.exterior['stage.hd']: '';
		last_configuration.assetsMobile.exterior_front = images_assets.exterior_front&&images_assets.exterior_front['stage.hdx']?renderBaseURL+images_assets.exterior_front['stage.hdx'] : '';
		last_configuration.assetsMobile.closeup_lights = images_assets.closeup_lights&&images_assets.closeup_lights['stage.hdx']?renderBaseURL+images_assets.closeup_lights['stage.hdx'] : '';
		last_configuration.assetsMobile.exterior = images_assets.exterior&&images_assets.exterior['stage.hdx']?renderBaseURL+images_assets.exterior['stage.hdx']: '';
		last_configuration.price = configuration.price;
		last_configuration.carline = configuration.carline;
		last_configuration.carlineName = configuration.carlineName;
		last_configuration.eec = configuration.eec;
		last_configuration.lastChanged = new Date().getTime();
		last_configuration['mv-version'] = CONFIGURATOR_API.getMarketVersion();
		last_configuration.context = CONFIGURATOR_API.getContext();
		last_configuration.url = __.getEntryUrl(configuration.prstring);
		return last_configuration;
	};
	/**
	 * get last stored configuration from session storage
	 * @returns {object} configuation object
	 */
	__.getStoredConfiguration = function() {
		var _storage=__.getStorage();
		if (!!_storage && _storage.lastConfiguration) {
			try {
				return JSON.parse(_storage.lastConfiguration);
			} catch (err) {
				console.warn(err);
				return null;
			}
		} else {
			return null;
		}
	};
	/**
	 * get entry url for entrering configuratzion via prString
	 * @param {string} prString_ - comma separated string representing the configuration
	 * @returns {string} url string
	 */
	__.getEntryUrl = function(prString_) {
		var baseUrl = window.location.href.split("#")[0],
			url;
		url = baseUrl;
		url += (url.indexOf("?") > 0) ? '&' : '?';
		url += "prString=" + prString_;
		return url;
	};
	/**
	 * @param {Emitter} eventBus_ - global Event Emitter
	 * @returns {Promise} module´s name
	 */
	__.initialize = function(eventBus_) {
		var expiredTime;
		return new Promise(function(resolve) {
			__.globalEventBus = eventBus_;
			__.addEvents();
			expiredTime = parseInt(SETUPS.get('nemo.last_config.expires'), 10);
			if (expiredTime > 0) {
				__.EXPIRED_THRESHOLD = expiredTime;
			}
			resolve('configurator/last-configuration.js');
		});
	};
	exports.initializePromise = __.initialize;
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 135 */
/*!*********************************!*\
  !*** ./js/app/module/search.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 12 */
/* global SETUPS*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! configurator/dpu-controller */ 11), __webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! module/state */ 40), __webpack_require__(/*! utils/ajax */ 6), __webpack_require__(/*! events */ 0), __webpack_require__(/*! router */ 8), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/search-layer.tpl */ 136), __webpack_require__(/*! text!templates/search-audicode-error.tpl */ 137)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, API, DPU_CONTROLLER, DOM_UTILS, STATE, AJAX, EVENTS, ROUTER, TPL_RENDERER, SEARCH_TPL, SEARCH_ERROR_TPL) {//eslint-disable-line max-params
	'use strict';
	//Private Methods
	var SEARCH_OVERLAY = '.nm-header-overlay-container .nm-navigation-header-search-overlay.nm-header-overlay-is-open',
		ADDITIONAL_LOGO = '.nm-has-additional-logo',
		ADDITIONAL_LOGO_HEIGHT_ADJUSTMENT = 30,
		__ = {},
		//Public API
		exports = {
			__: __
		};
	// private vars
	__.mobileBreakpoint = 1000;
	__.searchLayerOpen = false;
	__.searcListProposalsArr = null;
	__.audicodeActivated = false;
	__.oDefaults = {
		sAcceptAudicodeButton: ".nm-j-audicode-accept"
	};
	__.searchForm;
	__.loadedConfiguration;
	__.loadSearchListProposals = function() {
		var url = SETUPS.get("nemo.url.searchproposals");
		return AJAX.getJSON(url).then(function(response) {
			__.searcListProposalsArr = (!!response && !!response.Proposals) ? response.Proposals : [];
		}, function(err) {
			console.log("error", err.message);
		});
	};
	__.searchResultListProposals = function(searchString_) {
		var searchString, searchResults = [];
		if (!!searchString_) {
			searchString = searchString_.toLowerCase();
			if (!!__.searcListProposalsArr && __.searcListProposalsArr.length) {
				jQuery.each(__.searcListProposalsArr, function(index, value) {
					if (!value.Search) {
						return true;
					}
					if (value.Search.indexOf(searchString) > -1) {
						searchResults.push(value);
					}
				});
			}
		}
		return searchResults;
	};
	__.addEvents = function() {
		var eventType = "click";
		__.legacyEventBus.on('keyup', '.nm-su .nm-su-input', __.onOpenSearchLayer);
		__.legacyEventBus.on('paste', '.nm-su .nm-su-input', __.onOpenSearchLayerDelayed);
		__.legacyEventBus.on('click', '.nm-su .nm-su-input', __.onOpenSearchLayer);
		__.legacyEventBus.on('click', '.nm-su .nm-su-submit', __.onOpenSearchLayer);
		__.legacyEventBus.on('click', '.nm-su .nm-su-reset', __.resetSearch);
		__.legacyEventBus.on('submit', '.nm-su form', __.formSubmit);
		__.eventBus.on(EVENTS.MENUFLYOUT_OPEN, __.clearSearch);
		__.eventBus.on(EVENTS.MENUFLYOUT_CLOSE, __.emptySearchResults);
		//add event handler to close search layer
		//this line is needed to make closing work on the iPad !!!
		if (typeof document.documentElement.ontouchstart !== "undefined") {
			eventType = "touchstart";
		}
		__.legacyEventBus.on(eventType, __.onClickOutsideOfSearchLayer);
	};
	__.removeEvents = function() {
		var eventType = "click";
		__.legacyEventBus.off('keyup', '.nm-su .nm-su-input', __.onOpenSearchLayer);
		__.legacyEventBus.off('paste', '.nm-su .nm-su-input', __.onOpenSearchLayerDelayed);
		__.legacyEventBus.off('click', '.nm-su .nm-su-input', __.onOpenSearchLayer);
		__.legacyEventBus.off('click', '.nm-su .nm-su-submit', __.onOpenSearchLayer);
		__.legacyEventBus.off('click', '.nm-su .nm-su-reset', __.resetSearch);
		__.legacyEventBus.off('submit', '.nm-su form', __.formSubmit);
		__.eventBus.off(EVENTS.MENUFLYOUT_OPEN, __.clearSearch);
		__.eventBus.off(EVENTS.MENUFLYOUT_CLOSE, __.emptySearchResults);
		//remove event handler to close search layer
		if (typeof document.documentElement.ontouchstart !== "undefined") {
			eventType = "touchstart";
		}
		__.legacyEventBus.off(eventType, __.onClickOutsideOfSearchLayer);
	};
	__.emptySearchResults = function() {
		jQuery('.nm-su-result-container').empty();
	};
	__.resetSearch = function() {
		jQuery(SEARCH_OVERLAY).find('input.nm-su-input').focus();
		__.emptySearchResults();
		jQuery(SEARCH_OVERLAY).find('input.nm-su-input').keyup();
	};
	__.clearSearch = function(data) {
		if (typeof data.item !=='undefined') {
			jQuery(SEARCH_OVERLAY).find('input.nm-su-input').val('');
			jQuery(SEARCH_OVERLAY).find('input.nm-su-input').focus();
		}
	};
	//prevent url form submit on return
	__.formSubmit = function(event_) {
		var searchString, gsaUrl;
		if (!!event_ && typeof event_.preventDefault === 'function') {
			event_.preventDefault();
		}
		//audicode configuration was loaded
		if (__.loadedConfiguration) {
			__.acceptLoadedConfiguration();
			return false;
		}
		//audicode loading
		if (jQuery(".nm-j-audicode-loading").length) {
			return false;
		}

		searchString = __.getSearchString();
		if (searchString.length <= 0) {
			console.log("Search String is empty -> stop!");
			return false;
		}

		gsaUrl = __.buildGsaSearchUrl(searchString);
		if (!!gsaUrl) {
			document.location = gsaUrl;
		}
		return false;
	};
	__.getSearchString = function() {
		// get the user input
		var searchString = jQuery('.nm-su .nm-su-input').val();
		//remove leading and trailing whitespaces
		searchString = searchString.replace(/^\s+/g, "").replace(/</g, "").replace(/>/g, "");
		return searchString;
	};
	__.onOpenSearchLayerDelayed = function() {
		var element = this;
		setTimeout(function() {
			jQuery(element).keyup();
		}), 50;
	};
	__.preventEvent = function(e) {
		return false;
	};
	__.onOpenSearchLayer = function(event) {
		if (!__.audicodeActivated) {
			__.loadedConfiguration = null;
		}
		else{
			//search result is visible=> accept audicode on return
			if(event.keyCode === 13 && jQuery(".nm-j-audicode-accept").is(":visible")){
				__.acceptLoadedConfiguration();
				return false;
			}
		}
		//#Bugfix NEMOBA-955  ignore shift and return
		if (event.keyCode === 16 || event.keyCode === 13) {
			return;
		}
		__.searchForm = jQuery(event.target).parents('form');
		var $container = jQuery(this).closest('.nm-su'),
			$currentLayerContainer = $container.find('.nm-su-result-container'),
			searchString = __.getSearchString(),
			resultList = {},
			renderedTemplate;
		//check if input changed
		var currentInput = $container.data("current") || '';
		//open search layer on click or change of text input
		var changed = (currentInput !== searchString) || event.type === "click";
		if (currentInput !== searchString) {
			__.audicodeActivated = false;
			__.loadedConfiguration = null;
		}
		$container.data("current", searchString);
		if (searchString.length>1 && changed) {
			__.searchLayerOpen = true;
			if ( searchString.length===8 && searchString.search(/[Aa]{1}[a-zA-Z0-9]{7}/)!==-1) {
				resultList.audicode = searchString.toUpperCase();
				// Deactivate submit.
				__.legacyEventBus.off('submit', '.nm-su form', __.formSubmit);
				__.legacyEventBus.on('submit', '.nm-su form', __.preventEvent);
			} else {
				// Re-activate submit.
				__.legacyEventBus.off('submit', '.nm-su form', __.preventEvent);
				__.legacyEventBus.on('submit', '.nm-su form', __.formSubmit);
			}
			//EASTEREGG for Andi R.to be removed after 07/2017
			if((/Goodbye Andi/gi).exec(searchString)!==null){
				window.location.hash=((!!window.location.hash)?'&':'')+"layer=/de/brand/de/tools/andi.html";
				return false;
			}
			if (searchString.indexOf('|')!==-1) {
				resultList.prstring = searchString;
			}
			if (searchString.search(/^[a-z0-9]*=[true|false]*$/)!==-1) {
				var resultArray = (/^([a-z0-9]*)=([true|false]*)$/).exec(searchString);
				STATE.triggerModeChange(resultArray[1], resultArray[2]);
			}
			//remove stop words from search string
			if (!!API.getSearchStopWords()) {
				//var replaceSearchStopWordsRegExp=new RegExp("(\\?:^|\\s)("+API.getSearchStopWords()+")\\b","gi");
				var replaceSearchStopWordsRegExp = new RegExp("\\b(?:i|" + API.getSearchStopWords() + ")\\b\\s*", "gi");
				//console.log(">>"+searchString);
				searchString = searchString.replace(replaceSearchStopWordsRegExp, "");
			}
			console.log("<<" + searchString, API.search(searchString, true));
			//show search result only for inputs with at least 2 Chars
			resultList.search = (!!searchString && searchString.length) > 1 ? API.search(searchString, true) : [];
			//only check for Audicode if search did not return a match
			if (resultList.audicode && !resultList.search.length) {
				console.warn("Audicode detected");
				__.triggerAudicodeLoad(resultList.audicode);
			} else {
				resultList.audicode = null;
			}
			resultList.searchString = !!searchString ? searchString : __.getSearchString();
			resultList.siteMapSearch = API.searchNavigation(searchString, "siteMap");
			resultList.modelSearch = API.searchNavigation(searchString, "model");
			resultList.footerSearch = API.searchNavigation(searchString, "footer");
			resultList.gsaSearchUrl = __.buildGsaSearchUrl(searchString);
			resultList.searchListProposals = __.searchResultListProposals(searchString);
			renderedTemplate = TPL_RENDERER.render(SEARCH_TPL, resultList);
			$currentLayerContainer.empty().html(renderedTemplate);
			__.eventBus.emit(EVENTS.SEARCH_OPEN, resultList);
		} else if (searchString.length <= 1) {
			// FIX NEMOBA-3649 nur schließen, wenn wir ein zu kurzes suchwort haben, bei keiner änderung offen bleiben.
			__.closeSearchLayer();
		}
		__.setFlyoutHeight($currentLayerContainer);
		if (jQuery(window).width() < __.mobileBreakpoint && jQuery(event.target).hasClass("nm-su-submit")) {
			//audicode loading
			if (jQuery(".nm-j-audicode-loading").length) {
				if (__.audicodeActivated) {
					console.log("audicode has been loaded=>accept configuration");
					__.acceptLoadedConfiguration();
				} else {
					console.log("Loading AudiCode has not yet been completed");
				}
			} else {
				searchString = __.getSearchString();
				var gsaUrl = __.buildGsaSearchUrl(searchString);
				if (gsaUrl!==null) {
					document.location = gsaUrl;
				}
			}
		}
		return;
	};
	__.buildGsaSearchUrl = function(searchString) {
		var url;
		url = API.getGsaSearchUrl();
		if (!url) {
			return null;
		}
		url += "#search=" + encodeURIComponent(searchString.toLowerCase());
		return url;
	};
	__.onClickOutsideOfSearchLayer = function(event) {
		//only close the layer if there are no other layers opened on top of it or
		//it is clicked inside of the search layer
		var clickedTarget = event.target; /*jslint maxlen: 225 */
		if (__.searchLayerOpen &&
				__.isClickedTargetOutsideSearchLayer(clickedTarget) &&
				__.isClickedTargetOutsideSearchSearchInputField(clickedTarget) &&
				__.isClickedTargetOutsideAnyOtherLayer(clickedTarget)) {
			__.closeSearchLayer();
		}
	};
	__.isClickedTargetOutsideSearchLayer = function(clickedTarget) {
		//test if element is child of a search layer
		return DOM_UTILS.isElementOutsideOfElementWithSelector(clickedTarget, '.nm-su-result-container');
	};
	__.isClickedTargetOutsideSearchSearchInputField = function(clickedTarget) {
		//test if element is child of a search layer
		return DOM_UTILS.isElementOutsideOfElementWithSelector(clickedTarget, 'div.nm-su');
	};
	__.isClickedTargetOutsideAnyOtherLayer = function(clickedTarget) {
		//test if element is child of a any layer
		return DOM_UTILS.isElementOutsideOfElementWithSelector(clickedTarget, '.nm-layer-wrapper');
	};
	__.closeSearchLayer = function() {
		/*
		 * Delay emptying of container, so other listeners on elements
		 * in the container can be executed (e.g. audicode button tracker).
		 */
		setTimeout(function() {
			__.searchLayerOpen = false;
			jQuery('.nm-su-result-container').empty();
			__.eventBus.emit(EVENTS.SEARCH_CLOSE);
		}, 100);
	};
	__.triggerAudicodeLoad = function(audiCode) {
		DPU_CONTROLLER.loadConfigurationByAudiCode(audiCode).then(function(data) {
			__.onAudiCodeLoaded(data);
		}, function(error) {
			error.message = error.message || window.i18n['standard-audicode-error'];
			__.showAudiCodeLoadError(error);
			//jQuery('body').trigger("nemo.error", window.i18n['standard-audicode-error'], error.message);
		});
	};
	__.showAudiCodeLoadError = function(error_) {
		if(!!error_.id){
			error_.message = API.getErrorMessage(error_.id) || error_.message;
		}
		console.error(error_);
		// Re-activate form submition.
		__.legacyEventBus.off('submit', '.nm-su form', __.preventEvent);
		__.legacyEventBus.on('submit', '.nm-su form', __.formSubmit);
		var $resultContainer = jQuery(".nm-su-result-container");
		var renderedTemplate = TPL_RENDERER.render(SEARCH_ERROR_TPL, error_);
		$resultContainer.empty().html(renderedTemplate);
		__.setFlyoutHeight($resultContainer);
	};
	__.onAudiCodeLoaded = function(data) {
		__.loadedConfiguration = data;
		var error = null;
		//look for an input field with the same Audicode
		if (__.loadedConfiguration && data.audicode && __.loadedConfiguration.audicode.id) {
			var audicode = __.loadedConfiguration.audicode.id.toUpperCase();
			//search for an input field with the returne Audicode
			var $el = jQuery(".nm-su-input").filter(function() {
				return jQuery(this).val().toUpperCase() === audicode;
			});
			if (!!$el && $el.length === 1) {
				__.audicodeActivated = true;
				console.log("matching Audicode input found:", __.loadedConfiguration);
				__.showLoadedConfiguration($el);
			}
			//forget loaded Configuration Data
			else {
				__.audicodeActivated = false;
				//input changed during request=> ignore loaded AudiCode
				console.log("NO matching Audicode input found");
				__.loadedConfiguration = undefined;
				error = {};
				//error.message=window.i18n['search-layer.audicode.error.no-match'];
				__.showAudiCodeLoadError(error);
			}
		} else {
			console.error("ERROR loading Audicode");
			__.loadedConfiguration = undefined;
			error = {};
			error.message = window.i18n['standard-audicode-error'];
			__.showAudiCodeLoadError(error);
			__.showAudiCodeLoadError(error);
		}
	};
	//show loaded Configuration
	__.showLoadedConfiguration = function($input) {
		//TODO implement AUDICODE View in the search-alyer component
		var $container = $input.closest('.nm-su'),
			$currentLayerContainer = $container.find('.nm-su-result-container');
		$currentLayerContainer.one("click.accept.loaded.audicode", __.oDefaults.sAcceptAudicodeButton, __.acceptLoadedConfiguration);
		var configData = {
			'search': {},
			'audicode': __.loadedConfiguration.audicode.id,
			'configuration': __.loadedConfiguration,
			'mediaservice': API.getRenderUrl(),
			'success': (!!__.loadedConfiguration.audicode.success),
			'vtp-audicode': (!!__.loadedConfiguration.audicode['other-url']),
			'other-url': (!!__.loadedConfiguration.audicode['other-url']) ? __.loadedConfiguration.audicode['other-url'] : null,
			'message': __.loadedConfiguration.audicode.message
		};
		console.log("configData=>DotJS Template", configData);
		var renderedTemplate = TPL_RENDERER.render(SEARCH_TPL, configData);
		$currentLayerContainer.empty().html(renderedTemplate);
		__.setFlyoutHeight($currentLayerContainer);
	};
	__.acceptLoadedConfiguration = function(event_) {
		var audicode = !!(__.loadedConfiguration && __.loadedConfiguration.audicode) ? __.loadedConfiguration.audicode : null;
		if (!!event_ && !SETUPS.get('nemo.audicode.externallink') && typeof event_.preventDefault === 'function') {
			event_.preventDefault();
		}
		if(!!event_ && SETUPS.get('nemo.audicode.externallink')) {
			return true;
		}
		__.eventBus.emit(EVENTS.SEARCH_LOAD_AUDICODE, {
			'audicode': audicode
		});
		if (!__.loadedConfiguration.audicode['other-url']) {
			DPU_CONTROLLER.handleExternalConfiguration(__.loadedConfiguration, {
				startType: 'audicode-search'
			});
			// always go to the defined url to start a configuration
			ROUTER.open('page', API.getCurrentCarlineUrl());
		} else if (__.loadedConfiguration.audicode['other-url'] !== '') {
			if(SETUPS.get('nemo.audicode.externallink')) {
				event.target.href = __.loadedConfiguration.audicode['other-url'];
				return true;
			}
			else {
				window.location =  __.loadedConfiguration.audicode['other-url'];
			}
		}
		__.closeSearchLayer();
	};
	__.setFlyoutHeight = function($overlay, $isError) {
		jQuery('.nm-su').removeClass("noSrcollbars");
		if ($overlay.height() < 410) {
			jQuery('.nm-su').addClass("noSrcollbars");
		}
		var flyoutHeight = $overlay.height() + 150;
		var doubleRow = jQuery(ADDITIONAL_LOGO);
		if (doubleRow.length > 0) {
			flyoutHeight += ADDITIONAL_LOGO_HEIGHT_ADJUSTMENT;
		}
		jQuery(SEARCH_OVERLAY + '.nm-header-overlay-is-open').height(flyoutHeight);
	};
	/**
	 * Constructor
	 * @return {Void}
	 */
	__.initialize = function() {
		__.addEvents();
		__.loadSearchListProposals();
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.initialize();
			resolve("module/search.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 136 */
/*!*****************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/search-layer.tpl ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-su-result\">\n\t{{?!!it.audicode}}\n\t\t{{?!!it.configuration}}\n\t\t<div class=\"nm-su-result-wrap\">\n\t\t\t<div class=\"nm-su-result-audicode clearfix\">\n\t\t\t\t{{? SETUPS.get('nemo.audicode.externallink')}}\n\t\t\t\t\t{{var target = \"target='blank'\";}}\n\t\t\t\t\t{{var link = '/' + it.audicode;}}\n\t\t\t\t{{??}}\n\t\t\t\t\t{{var target = \"\";}}\n\t\t\t\t\t{{var link = \"#\";}}\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.success===false}}\n\t\t\t\t\t{{?it['vtp-audicode'] && it['other-url']}}\n\t\t\t\t\t<div class=\"nm-su-vtp\">\n\t\t\t\t\t\t<a href=\"{{=it['other-url']}}\" class=\"nm-link-cta\" {{=target}}>\n\t\t\t\t\t\t\t<span class=\"nm-su-result-audicode-label\">{{=window.i18n['search-layer.your-audicode']}}</span>&nbsp;\n\t\t\t\t\t\t\t <strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class=\"nm-su-vtp-image\"></div>\n\t\t\t\t\t\t<div class=\"nm-su-vtp-description\">\n\t\t\t\t\t\t\t<span class=\"nm-headline-teaser\">\n\t\t\t\t\t\t\t\t{{=window.i18n['search-layer.available-cars']}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div class=\"nm-description nm-label-info\">\n\t\t\t\t\t\t\t\t{{=window.i18n['search-layer.available-cars-info']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a href=\"{{=it['other-url']}}\" class=\"nm-el-btn nm-el-btn-01 nm-el-btn-ast\" {{=target}}>\n\t\t\t\t\t\t\t\t<span>{{=window.i18n['search-layer.your-car']}}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class=\"nm-text-list\">\n\t\t\t\t\t\t\t\t<span class=\"nm-text-list-bold\">\n\t\t\t\t\t\t\t\t\t{{=window.i18n['search-layer.label.disclaimer']}}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{{=window.i18n['search-layer.vtp-warning']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{??}}\n\t\t\t\t\t\t<strong class=\"nm-headline-teaser\">{{=it.message}}</strong>\n\t\t\t\t\t{{?}}\n\t\t\t\t{{??}}\n\t\t\t\t\t<a href=\"{{=link}}\" class=\"nm-link-cta nm-j-audicode-accept\" {{=target}}>\n\t\t\t\t\t\t<span class=\"nm-su-result-audicode-label\">{{=window.i18n['search-layer.your-audicode']}}</span>&nbsp;\n\t\t\t\t\t\t<strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<img src=\"{{=it.mediaservice}}{{=it.configuration.configuration.assets['exterior_front']['compare.new']}}\"/>\n\t\t\t\t\t<div class=\"nm-su-result-audicode-description\">\n\t\t\t\t\t\t<span class=\"nm-headline-teaser\">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.carlineName}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class=\"nm-description nm-label-info\">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.description}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<strong class=\"nm-headline-teaser nm-su-result-audicode-price\">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.price}}\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<a href=\"{{=link}}\" data-tracking-link=\"{&quot;prop5&quot;:&quot;load_configuration&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event27&quot;}\" {{=target}} class=\"nm-j-audicode-accept nm-el-btn nm-el-btn-01 nm-el-btn-ast\">{{=window.i18n['search-layer.load-configuration']}}</a>\n\t\t\t\t\t\t<div class=\"nm-text-list\">\n\t\t\t\t\t\t\t<span class=\"nm-text-list-bold\">\n\t\t\t\t\t\t\t\t{{=window.i18n['search-layer.label.disclaimer']}}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{{=window.i18n['search-layer.configuration-overwrite-warning']}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t</div>\n\t\t{{??}}\n\t\t\t<div class=\"nm-su-result-audicode\">\n\t\t\t\t<strong class=\"nm-headline-teaser\">\n\t\t\t\t\t{{=window.i18n['search-layer.audicode-loading']}}\n\t\t\t\t</strong>\n\t\t\t\t<div class=\"nm-j-audicode-loading nm-loading\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n\t{{?!it.audicode}}\n\t\t<div class=\"nm-su-result-wrap\">\n\t\t\t{{?it.search.length}}\n\t\t\t\t<ul class=\"nm-su-result-list-group\">\n\t\t\t\t\t{{~ it.search :entry }}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<h2><span class=\"nm-label-text-bold\">{{=entry.value.carlineName}}</span><span class=\"nm-label-text-bold\">{{=entry.key}}</span></h2>\n\t\t\t\t\t\t\t<ul class=\"nm-su-result-list\">\n\t\t\t\t\t\t\t\t{{~ entry.value.items :item }}\n\t\t\t\t\t\t\t\t\t<li class=\"nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix\"\n\t\t\t\t\t\t\t\t\tdata-configurator-id=\"{{=item.id}}\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-image\">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"{{=item.image}}\" alt=\"{{=item.name}}\" class=\"nm-image\" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-list-content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"nm-j-configurator-name nm-text-list-bold\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-text-list\"><br />{{=window.i18n['configuration.not-rendable-message']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-list-description nm-text-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{= item.description || ''}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-list-actions\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-list-add clearfix\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class=\"nm-info nm-layerLink\" href=\"{{=item.url}}\" title=\"{{=window.i18n['more-information']}}\" data-tracking-link=\"{&quot;prop5&quot;:&quot;{{=window.i18n['more-information']}}&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}\"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-conflict-icon\" title=\"#I18N(\"nemo.ui.common.conflict\" \"Konflikt\")\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-list-price nm-text-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-j-configurator-text-price\">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-list-add-btn\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a class=\"nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-at-btn-state01\">{{=window.i18n['search-layer.add-item']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-at-btn-state02\">{{=window.i18n['search-layer.item-included']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-at-btn-state03\">{{=window.i18n['search-layer.remove-item']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t<div class=\"nm-su-sitesearch-list\">\n\t\t\t\t{{?it.modelSearch.length}}\n\t\t\t\t\t<ul class=\"nm-su-modelsearch-group\">\n\t\t\t\t\t\t{{~it.modelSearch :modelItem}}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a data-tracking-link=\"{&quot;prop5&quot;:&quot;{{=modelItem.name}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}\" class=\"nm-link-basic\" href=\"{{=modelItem.url}}\">\n\t\t\t\t\t\t\t\t<span>{{=modelItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.siteMapSearch.length}}\n\t\t\t\t\t<ul class=\"nm-su-sitemapsearch-group\">\n\t\t\t\t\t\t{{~it.siteMapSearch :siteMapItem}}\n\t\t\t\t\t\t\t{{var itemName = siteMapItem.name;\n\t\t\t\t\t\t\tvar rhombus = /\\[rhombus\\]/ig;\n\t\t\t\t\t\t\tvar plus = /\\:plus/ig;\n\t\t\t\t\t\t\tvar replacedName = itemName.replace( rhombus, '***');/*<span class=\"nm-icon-rhombus\"></span>' );*/\n\t\t\t\t\t\t\treplacedName = replacedName.replace( plus, '<span class=\"nm-brand-plus\">:plus</span>' );\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a data-tracking-link=\"{&quot;prop5&quot;:&quot;{{=itemName}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}\" class=\"nm-link-basic\" href=\"{{=siteMapItem.url}}\">\n\t\t\t\t\t\t\t\t<span>{{=replacedName}}</span>\n\t\t\t\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.footerSearch.length}}\n\t\t\t\t\t<ul class=\"nm-su-footersearch-group\">\n\t\t\t\t\t\t{{~it.footerSearch :footerItem}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a data-tracking-link=\"{&quot;prop5&quot;:&quot;{{=footerItem.name}}&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}\" class=\"nm-link-basic\" href=\"{{=footerItem.url}}\">\n\t\t\t\t\t\t\t\t<span>{{=footerItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t\t/*Proposals*/\n\t\t\t<ul class=\"nm-su-result-list-group\">\n\t\t\t\t{{?it.searchListProposals.length}}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<ul class=\"nm-su-result-list nm-su-proposal-list\">\n\t\t\t\t\t\t\t{{~it.searchListProposals :proposalItem}}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"{{=proposalItem.Url}}\" data-tracking-link=\"{&quot;prop5&quot;:&quot;{{=proposalItem.Headline}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}\" x-cq-linkchecker=\"valid\" class=\"nm-su-proposol-item{{?proposalItem.Type==\"Layer\"}} nm-layerLink{{?}}\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-image\">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!proposalItem.ImageUrl}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"{{=proposalItem.ImageUrl}}\" alt=\"{{=proposalItem.Headline}}\" class=\"nm-image\" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-proposal-list-content\">\n\t\t\t\t\t\t\t\t\t\t\t<strong class=\"nm-text-list-bold\">{{=proposalItem.Headline}}</strong>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"nm-su-result-list-description nm-text-list\">{{=proposalItem.Description}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-link-basic\" >\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{=window.i18n['discover-now']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t{{?}}\n\t\t\t</ul>\n\t\t</div>\n\t\t{{?!!it.gsaSearchUrl}}\n\t\t\t<div class=\"nm-su-gsa\">\n\t\t\t\t<a data-tracking-link=\"{&quot;prop5&quot;:&quot;{{=window.i18n['search-layer.search-audi-web']}} {{=it.searchString}} {{=window.i18n['search-layer.search-for']}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}\" class=\"nm-link-basic\" href=\"{{=it.gsaSearchUrl}}\">\n\t\t\t\t\t<span>{{=window.i18n['search-layer.search-audi-web']}} &quot;<span class=\"nm-highlight\">{{=it.searchString}}</span>&quot; {{=window.i18n['search-layer.search-for']}}</span>\n\t\t\t\t\t<svg class=\"nm-icon-arrow\">\n\t\t\t\t\t\t<use xlink:href={{=SETUPS.get('nemo.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-arrow\"}}></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n</div>\n"

/***/ }),
/* 137 */
/*!**************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/search-audicode-error.tpl ***!
  \**************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-su-result-audicode-wrap\">\n\t<div class=\"nm-su-result-audicode\">\n\t\t<h2 class=\"nm-el-hdl nm-el-hdl-05 nm-at-hdl-b\">{{=window.i18n['search-layer.audicode.error']}}: </h2>\n\t\t<p class=\"nm-error nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator\">{{=it.message}}</p>\n\t</div>\n</div>"

/***/ }),
/* 138 */
/*!***********************************!*\
  !*** ./js/app/module/carstore.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! doT */ 7), __webpack_require__(/*! events */ 0), __webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! configurator/dpu-controller */ 11), __webpack_require__(/*! router */ 8), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/carstore-list.tpl */ 139), __webpack_require__(/*! text!templates/carstore-empty.tpl */ 140), __webpack_require__(/*! text!templates/carstore-fail.tpl */ 141)], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, doT, EVENTS, CONFIGURATOR_API, DPU_CONTROLLER, ROUTER, TPL_RENDERER, CARSTORE_LIST_TPL, CARSTORE_EMPTY_TPL, CARSTORE_FAIL_TPL) { //eslint-disable-line max-params
		"use strict";
		var
			//Private Methods
			__ = {},
			exports = {
				__: __
			};
		__.loadAgents = function(imageArray) {
			var images = [];
			var i;
			for (i = 0; i < imageArray.length; i++) {
				images[i] = new Image();
				images[i].src = imageArray[i];
			}
		};
		__.addEvents = function() {
			//DOM EVENTS
			__.legacyEventBus.on('submit', '.nm-carstore-picker', __.handleSubmitClick);
			//custom Events
			__.eventBus.on(EVENTS.FORM_FINISHED, __.handleFormFinished);
			__.eventBus.on(EVENTS.FORM_ERROR, __.checkLogin);
			__.eventBus.on(EVENTS.MYAUDI_LOGIN, __.list);
			__.eventBus.on(EVENTS.LAYER_LOADED, __.list);
			__.eventBus.on(EVENTS.CONFIG_UPDATE, __.checkLogin);
		};
		// check/update visual login state via CSS
		__.checkLogin = function(data) {
			var $body = DOM_UTILS.getElement('body');
			//set Login state on form result
			if (data && data.response && data.response.header && data.response.header['logged-in'] && data.response.header.subsession) {
				CONFIGURATOR_API.setLogin(data.response.header['logged-in'], data.response.header.subsession);
			}
			if (CONFIGURATOR_API.isLoggedIn()) {
				if (!$body.classList.contains('nm-logged-in')) {
					$body.classList.add('nm-logged-in');
					if (!!data && data.response && !!data.response.header && !!data.response.header['visitor-id']) {
						__.eventBus.emit(EVENTS.MYAUDI_LOGIN, data.response.header['visitor-id']);
					} else {
						__.eventBus.emit(EVENTS.MYAUDI_LOGIN);
					}
				}
			} else {
				$body.classList.remove('nm-logged-in');
				__.eventBus.emit(EVENTS.MYAUDI_LOGOUT);
			}
		};
		//handle carstore submit clicks (delete-, abort-, load-carstoreItem)
		__.handleSubmitClick = function(event_) {
			var $form,
				carstoreID, select,
				action;
			event_.preventDefault();
			$form = this;
			carstoreID = this['carstore-position'].value;
			select = $form.querySelector("select.nm-selection");
			action = (select && select.options) ? select.options[select.selectedIndex].value : "none";
			switch (action) {
				case "configuration-delete":
					__.deleteCarstoreItem(carstoreID, $form);
					break;
				case "configuration-load":
					__.loadCarstoreItem(carstoreID);
					break;
				default:
					break;
			}
		};
		__.renderCarstoreList = function(data) {
			var renderedTemplate, $element = DOM_UTILS.getElement('.nm-j-carstore-list');
			if (!!data.carstore.list) {
				//add fallback image
				data.carstore.altImage = CONFIGURATOR_API.getAltImagePath('selection-compare', 'none');
				renderedTemplate = TPL_RENDERER.render(CARSTORE_LIST_TPL, data.carstore);
				$element.innerHTML = "";
				$element.innerHTML = renderedTemplate;
				$element.classList.remove('nm-loader');
			} else if (!!data.carstore.statuscode && data.carstore.statuscode === 800) {
				renderedTemplate = TPL_RENDERER.render(CARSTORE_FAIL_TPL, {});
				//$element.empty().html(renderedTemplate).classList.remove('nm-loader');
				$element.innerHTML = "";
				$element.innerHTML = renderedTemplate;
			} else {
				renderedTemplate = TPL_RENDERER.render(CARSTORE_EMPTY_TPL, {});
				$element.innerHTML = "";
				$element.innerHTML = renderedTemplate;
			}
		};
		__.handleFormFinished = function(data_) {
			var promise, message, element;
			if (!!data_.id) {
				switch (data_.id) {
					case 'login':
						__.loadAgents(data_.response.login.agents.standard);
						__.loadAgents(data_.response.login.agents.secure);
						promise = CONFIGURATOR_API.setLogin(true, data_.response.header.subsession);
						promise.then(function() {
							__.checkLogin(data_);
						}).catch(function(err) {
							console.error("CARSTORE Login failed:" + err);
							message = CONFIGURATOR_API.getErrorMessage(err);
							__.eventBus.emit(EVENTS.ERROR, ["Carstore Login-Error", message]);
						});
						break;
					case "carstore":
						//show carstore list after save
						element = DOM_UTILS.getElement('.nm-carstore-save .nm-j-carstore-save');
						element.classList.remove('nm-j-carstore-save');
						element.classList.add('nm-j-carstore-list');
						element.innerHTML = "";
						__.list('carstore');
						break;
					default:
						break;
				}
			}
			return;
		};
		__.list = function(type) {
			var promise, audicode, loaderAdded, message;
			__.checkLogin();
			if (CONFIGURATOR_API.isLoggedIn()) {
				loaderAdded = __.showLoader();
				if (loaderAdded) {
					promise = DPU_CONTROLLER.listCarstoreItems();
					promise.then(function(data) {
						__.renderCarstoreList(data);
						if (type && type === 'carstore') {
							audicode = DOM_UTILS.getElement('.nm-j-audicode').innerText;
							__.eventBus.emit(EVENTS.CONFIG_SAVED, audicode);
						}
					}).catch(function(err) {
						console.error("Error listing Carstore Item: " + err);
						message = CONFIGURATOR_API.getErrorMessage(err);
						__.eventBus.emit(EVENTS.ERROR, [window.i18n['carstore-layer.error-loading-stots'], message]);
					}).then(function() {
						__.hideLoader();
						console.log("Always hide loader");
					});
				}
			}
		};
		//clear Carstore List and show loading indicator
		__.showLoader = function() {
			var $elements = DOM_UTILS.getElementsArray('.nm-j-carstore-list');
			if ($elements.length) {
				$elements.forEach(function(item) {
					//NEMOBA-515 clear Carlstore list first
					item.innerHTML = "";
					item.classList.add('nm-loader');
				});
				//loader was added
				return true;
			}
			//no loader or carstore list available
			return false;
		};
		__.hideLoader = function() {
			DOM_UTILS.getElement('.nm-j-carstore-list').classList.remove('nm-loader');
		};
		__.deleteCarstoreItem = function(carstoreID_, $elem_) {
			var $elem = $elem_;
			$elem = $elem.parentNode;
			DOM_UTILS.getElement(".nm-carstore-delete", $elem).classList.remove("nm-hidden");
			DOM_UTILS.getElement(".nm-carstore-picker", $elem).classList.add("nm-hidden");
			//abortBtn
			__.legacyEventBus.on("click", "ul.nm-button-list a.nm-j-abort-btn", __.handleDeleteAbort);
			//submitBtn
			__.legacyEventBus.on("click", "ul.nm-button-list a.nm-j-delete-btn", __.handleDeleteSubmit);
		};
		__.handleDeleteAbort = function(event_) {
			var $el, $container;
			event_.preventDefault();
			$el = this;
			$container = DOM_UTILS.closest($el, ".nm-carstore-listing-item");
			//hide delete dialog
			DOM_UTILS.getElement(".nm-carstore-delete", $container).classList.add("nm-hidden");
			//show action list
			DOM_UTILS.getElement(".nm-carstore-picker", $container).classList.remove("nm-hidden");
			//remove event handler
			__.legacyEventBus.off("click", "ul.nm-button-list a.nm-j-abort-btn", __.handleDeleteAbort);
			__.legacyEventBus.off("click", "ul.nm-button-list a.nm-j-delete-btn", __.handleDeleteSubmit);
			return false;
		};
		__.handleDeleteSubmit = function(event_) {
			var promise, message, form, carstoreID;
			event_.preventDefault();
			__.legacyEventBus.off("click", "ul.nm-button-list a.nm-j-abort-btn", __.handleDeleteAbort);
			__.legacyEventBus.off("click", "ul.nm-button-list a.nm-j-delete-btn", __.handleDeleteSubmit);
			form = DOM_UTILS.closest(this, ".nm-carstore-listing").querySelector("form");
			if (form && form['carstore-position']) {
				carstoreID = form['carstore-position'].value;
				promise = DPU_CONTROLLER.deleteCarstoreItem(carstoreID);
				promise.then(function(data) {
					__.list(data);
				}).catch(function(err) {
					console.error("Error deleting Carstore Item: " + err);
					message = CONFIGURATOR_API.getErrorMessage(err);
					__.eventBus.emit(EVENTS.ERROR, [window.i18n['carstore-layer.error-deleting-stot'], message]);
				});
			}
			return false;
		};
		__.loadCarstoreItem = function(carstoreID_) {
			//load configuration
			var promise = DPU_CONTROLLER.loadCarstoreItem(carstoreID_),
				message;
			promise.catch(function(error) {
				console.error("Error loading Carstore Item: " + error);
				// always go to the defined url to start a configuration
				message = CONFIGURATOR_API.getErrorMessage(error);
				__.eventBus.emit(EVENTS.ERROR, [window.i18n['carstore-layer.error-loading-car'], message]);
			}).then(function() {
				//close Layer (trigger close button click)
				ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());
				setTimeout(function() {
					jQuery(".nm-button-close.nm-ajaxLayerClose").trigger("click");
				}, 100);
			});
			return false;
		};
		exports.initializePromise = function(eventBus_) {
			return new Promise(function(resolve) {
				__.eventBus = eventBus_;
				__.legacyEventBus = DOM_UTILS.getEventDelegate("body");
				__.addEvents();
				resolve('carstore.js');
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 139 */
/*!******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/carstore-list.tpl ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "\t<div class=\"nm-module nm-md-carstore-list nm-carstore\">\n\t\t<div class=\"nm-3col\">\n\t\t\t<h2 class=\"nm-el-hdl nm-el-hdl-02 nm-at-hdl-b\">{{=window.i18n['carstore-layer.saved-slots']}}</h2>\n\t\t\t<p class=\"nm-el-pg nm-el-pg-01\">{{=window.i18n['carstore-layer.manage-slots']}}</p>\n\t\t\t<ul class=\"nm-carstore-listing\">\n\t\t\t\t{{~ it.list :value }}\n\t\t\t\t\t<li class=\"clearfix\">\n\t\t\t\t\t\t<div class=\"nm-position nm-el-pg nm-el-pg-03 nm-at-pg-b\">{{=value.position}}</div>\n\t\t\t\t\t\t<div class=\"nm-carstore-listing-item nm-carstore-listing-image\">\n\t\t\t\t\t\t\t\t<img src=\"{{? !!value['exterior-image']}}{{=value['exterior-image']}}?alt={{?}}{{=it.altImage}}\" alt=\"{{=value.name}}\" width=\"350\" height=\"196\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"nm-carstore-listing-item nm-carstore-listing-text\">\n\t\t\t\t\t\t\t<ul class=\"nm-carstore-list-overview\">\n\t\t\t\t\t\t\t\t{{? !!value.name}}\n\t\t\t\t\t\t\t\t\t<li class=\"nm-name\">\n\t\t\t\t\t\t\t\t\t\t<strong class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=value.name}}</strong>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t{{? !!value.shoppingCartName}}\n\t\t\t\t\t\t\t\t\t<li class=\"nm-description\">\n\t\t\t\t\t\t\t\t\t\t<p class=\"nm-el-pg nm-el-pg-03\">{{=value.shoppingCartName}}<br />\n\t\t\t\t\t\t\t\t\t\t{{? !!value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t\t\t{{=value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t\t{{?}}</p>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t{{? !!value.price && value.valid !== false}}\n\t\t\t\t\t\t\t\t\t<li class=\"nm-price\">\n\t\t\t\t\t\t\t\t\t\t<strong class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=value.price}}</strong>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t{{? !!value.audicode}}\n\t\t\t\t\t\t\t\t\t<li class=\"nm-audicode\">\n\t\t\t\t\t\t\t\t\t\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['audicode-label']}}: {{=value.audicode}}</p>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<form class=\"nm-stz nm-carstore-picker\" action=\"#\">\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<legend class=\"nm-legend\"></legend>\n\t\t\t\t\t\t\t\t<label for=\"carstore-selection\"></label>\n\t\t\t\t\t\t\t\t<select id=\"carstore-selection\" class=\"nm-selection\">\n\t\t\t\t\t\t\t\t\t{{? value.valid !== false}}\n\t\t\t\t\t\t\t\t\t\t<option value=\"configuration-load\">{{=window.i18n['carstore-layer.load-slot']}}</option>\n\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t<option>{{=window.i18n['carstore-layer.invalid-slot']}}</option>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t<option value=\"configuration-delete\">{{=window.i18n['delete-configuration-label']}}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"carstore-position\" value=\"{{=value.position}}\">\n\t\t\t\t\t\t\t\t<button class=\"nm-el-btn nm-el-btn-04 nm-el-btn-ast nm-j-carstore-submit\" type=\"submit\">submit</button>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t<div class=\"nm-carstore-delete nm-hidden\">\n\t\t\t\t\t\t\t\t<strong class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=window.i18n['carstore-layer.delete-slot']}}</strong>\n\t\t\t\t\t\t\t\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.delete-dialog']}}</p>\n\t\t\t\t\t\t\t\t<ul class=\"nm-button-list\">\n\t\t\t\t\t\t\t\t\t<li><a class=\"nm-el-btn nm-el-btn-01 nm-j-abort-btn\" href=\"#\">{{=window.i18n['abort-label']}}</a></li>\n\t\t\t\t\t\t\t\t\t<li><a class=\"nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-j-delete-btn\" href=\"#\">{{=window.i18n['delete-label']}}</a></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t{{~}}\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n"

/***/ }),
/* 140 */
/*!*******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/carstore-empty.tpl ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>"

/***/ }),
/* 141 */
/*!******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/carstore-fail.tpl ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.error-loading-stots']}}</p>"

/***/ }),
/* 142 */
/*!***************************************!*\
  !*** ./js/app/module/zip-download.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint quotmark:single, undef:true, unused: true */
/*global SETUPS*/
/**
 * This module intercepts clicks on <a> elements
 * decorated with <TODO> attribute and sends
 * a request to the DP
 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! core/storage */ 46), __webpack_require__(/*! events */ 0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(API, STORAGE, EVENTS) {
	"use strict";
	var __ = {},
		exports = {
			__: __
		};
	__.oDefaults = {
		sLinkSelector: '.nm-j-zip-download-delegate-click',
		sZipGateway: '/media-zip'
	};
	__.handleLayerLoaded = function() {
		var downloadLink = document.querySelector(__.oDefaults.sLinkSelector);
		if (!!downloadLink) {
			downloadLink.setAttribute('href', __.updateHrefAttribute());
		}
	};
	__.addEvents = function() {
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handleLayerLoaded);
	};
	__.getImageListFromConfigurationObject = function() {
		var i = 0,
			image,
			assets = API.getConfigurationAssets() || [],
			list = [];
		for (i = 0; i < assets.length; i++) {
			image = API.getRenderUrl() + (assets[i].fullscreen || assets[i]['stage.new']);
			list.push(image);
		}
		return list;
	};
	__.updateHrefAttribute = function() {
		var imageList, payload, downloadUrl;
		imageList = encodeURIComponent(__.getImageListFromConfigurationObject().join('\n'));
		payload = ['&carline=', API.getCarline(), '&audicode=', '', '&images=', imageList].join('');
		downloadUrl = SETUPS.get('nemo.url.dpu') + __.oDefaults.sZipGateway + '?' + payload;
		return downloadUrl;
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/zip-download.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 143 */
/*!******************************!*\
  !*** ./js/app/module/vtp.js ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! utils/ajax */ 6),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! module/iph */ 23)
	// TODO rewrite passing callbacks from own api.
], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS,AJAX, CONFIGURATOR_API, EVENTS,IPH) {/*eslint max-params: [2, 6]*/
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	var _plainLink, _entryLink, _$VTPlinks=[], $item;

	__.oDefaults = {
		sSelectorVTPlink: ".nm-j-vtp-link"
	};
	__.handleJSONresponse = function(data_) {
		//TODO if items>0 update linkTarget plainLink=>entryLink
		var _link = _plainLink, suffix, oldText;
		suffix = "";
		if ( !!data_ && !!data_.num && data_.num > 0) {
			_link = _entryLink;
			suffix = " (" + data_.num + ")";
		} else {
			_link = false;
		}
		_$VTPlinks=_$VTPlinks||[];
		_$VTPlinks.forEach(function(item) {
			$item = item;
			//use original CQ-link if nor results have been returned
			if (!_link) {
				_link = $item.getAttribute("data-vtp-original");
			}
			$item.setAttribute("href",_link);
			oldText = $item.textContent.split(" (")[0];
			$item.textContent=oldText + suffix;
		});
	};
	__.sendJSONPrequest = function(serviceUrl_) {
		//remove jQuery JSONP callback if it exists
		var url=serviceUrl_.replace(/&callback=\?$/,'');
		AJAX.getJSONP(url).then(function(data) {
			__.handleJSONresponse(data);
		}, function(err) {
			console.log("VTP JSON request failed! ", err.message);
			__.handleJSONresponse(null);
		});
	};
	__.checkForIPHDealerLink = function(origHref) {
		var href = origHref;

		if (IPH.inIPHMode()) {
			href = IPH.addPartnerId(href);
			href = IPH.updateNWB(href);
		}
		return href;
	};
	__.handleUpdates = function() {
		var _nwb = CONFIGURATOR_API.getNwbLink();
		var restoredLink = "";
		_$VTPlinks = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorVTPlink);
		// Links available in the current page and configuration?
		//only update when last request returned any results
		if (_$VTPlinks.length) {
			//restore original CQ-link from data-attribute
			_$VTPlinks.forEach(function(item) {
				$item = item;
				if (!$item.getAttribute("data-vtp-original")) {
					restoredLink = $item.getAttribute("href");
					$item.setAttribute("data-vtp-original", restoredLink);
				}
			});
			if (!!_nwb) {
				_plainLink = __.checkForIPHDealerLink(_nwb.plainLink);
				_entryLink = __.checkForIPHDealerLink(_nwb.entryLink);
				__.sendJSONPrequest(__.checkForIPHDealerLink(_nwb.queryLink));
			}
		}
	};
	__.addEvents = function() {
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleUpdates);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handleUpdates);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handleUpdates);
	};
	__.initialize = function() {
		// force singleton
		if (!__.instance) {
			__.addEvents();
			__.instance = true;
		}
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/vtp.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 144 */
/*!************************************!*\
  !*** ./js/app/module/dealermap.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 24431 */
/* global google, InfoBox */

// TODO: #dealermap-001 - resolve dep html-template

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! doT */ 7),
	__webpack_require__(/*! form/core.form */ 33),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, doT, FORM, EVENTS) {

	"use strict";

	var _opts = {
			zoomDetailView: 15,
			markerSprite: '/cms4i-nemo/assets/img/maps/sprite_marker.png',
			markerDetailSprite: '/cms4i-nemo/assets/img/maps/sprite_marker_partner.png',
			markerDetailUri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAABkCAYAAADJ9hMcAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH3QMIEAIGJxOTqQAACvNJREFUeNrtmnmQFNUZwH99Tc+x7C67CAYjyLVELkVYCQaCxlDhKBNNogGNljFGyiorZRI0FLk0pVUaTcCDMqZSVDRlYrDMUUaKBPGCgEpRUEHXyCEoKlGy7O7s7hzdPd35Y17Pvn307C7rQlgyXdXVM33N93vf8b7ve6MFQcDptGnvnDkLwARmATcASwAHqD1FZfaBPwCPANsAb9ThV0oXdQGzDNgigJKnMEwo81LgZSG3qV6cBTw8SC3sYSF/N6DrB7nbXK8CLRnkQEtUIGeQA3kqUN0gB6pVgU6rrQJ0qm9mr6lEKkHqii+QWDgPq2EMmq7hvfMB2ee30rluPYWPmrEbp5G6ciH2zGnoQ2vw0+04O5vofHoDuc3b0aurSF21iMT8uZjjzi568v5DZJ/bQue69fht7cTnzCR15UJi509Crx6C39JGfsduOtc9S3777uNKfcomc7EpDdSt/iGxyQ1FIV/fC66HNXEsxpnD8A6+T37HblJfWQCA++Z+vA8+xBheT2zqRAAyf96IOWF08R1HW3He2Ft89+QJ6HW1uE37cPccIHn5fACc1/dQ+PA/mCNHYJ07DoD2R39P691rCFwvUs5Rh1/RetWQ1TCGM55YhVFXS+tda+h48hn85taS1pILL6buFytJnbMAZ2cTR1f8DPfNfcUfNXSshjEMvePWkqAtK++n8+m/4afbi7ZePYTUVxcw9O7vYU0aT27zdlp+shp3zwEo+GiWiTWlgdrbb2LIsqVoqQRHb7unnz5kGtTdczvG8HqO3PB90mt+W4IBCDqzFI40o2ni8ZiFu+dA1wgWfNy3DqBZXeNVaE2XYAD8dDuF5pYuUzHNEgxA4Ho4O5s4ct1yMs++QNXXLye56OL+AcVnnY89ezrtv15HduOWiKd0apZ/i0JzC+kHHyM2eQJVSy/rdkty8SXYs6eT/uXvcPcepHb5jWhxuwvAjlF7+zLcvQdJP/gY9uzpJBddcsxPBa5Hy8r78dPtVN9yXT+B5hXzvc6n1kcrcORw7BlTyD63lbZVa/E7MsQ/N1t5x4UErkf6ocfJ/OU5zLGjsMaN6mbS5tizya5/kfQjTxC4LolLL4r8vcJHzWQ3vFzyy+MGMs4aQZB38A4djnzI+MQZoGl4+w4S5PIU3juMMWIY6F2vM0efhX+kGf9oK+7b75beW/rhYUOLgWT/u/itafzmNszRI8sK6ryxD0yjnz7kuGiGgRazIi8HTtFXtERcmI8NXqH7PXmneF7X0exY6VzXsBdKpoeuo8VMgrxbXtBkvP8Tq/Ov/WAaxKZ9KjobfPcDgs4ssRlTMMeejTlqJO7eA+D7pXvc1/eg19cSO3c8duM08Ap4bx/q9g4KPvaMKVgTzkGvq8XZ/VZZQe05M/HTHf0Dym7cQuC6VN98TTczKkWoljYyz2wi/tlG6lf/GHSNzj9t7HZPZsPLBI5L3X0rSF52KdmXXsV7799dQAffJ/vCNhKL5lF33woCxyXz7AuRQsbnzCT+mRnRAaovQN7bh2j/1ZPYs6cz9M5bI02v7aHHwfWwG6eSe/FVci++0l3Lu5rIPLOJ2PRJ6MkE6VVrQWnItK1ai55MYjdOI/PX53F2NR07uU+dSP0DP8LvyJB+4De9AhnfqfrkHVEX8q/9E2viGKq+tpj4nJmQdyAAo6Yae9Z5VN+0hNjkhuKo1NegV6UIXA8tZmKNH03VVYtJfmk+eioJulYMGsKHjPpa4hddwJCblpYinzGsDt2OgeuhxWNYDWMYct2XqVv1A/SqFM3f/in5bTsjIWqW33hnn1IfzTKpvvUbVC+7Gi2VOOZ6+9qnyG/ZQfUt1xK7YPIx190399O2ei2xyQ0MuflqNMtS5hiX9kefxNnVRM13v4k1afyx/ryrida71pD7x46yWpFTnx6BSg7ZOJXE/LlY545DMwzcA4fIbdpK9qVXoeBjDK8nsWAe8U+fj15Xi9/WTv61XWQ3bMZ7v+g38bmNJD5/Eeb4c4pmvfcg2U1byW3eXtTQyBEkF83DvvC8UnKa27aT7IaXKHzU3KN8xw10qm8ykF51zRdPrwKv7t4VnE5QOobO6QRVnIdOI6iuiXXwQvnlM4XBCfX3nlOfEOraKwYL0L29lw+GTt09t5G6avGpDnMLxWWgPvTldJ36n6/EOPOMU9Fn/gjMBR5Ve9va6bYkWWkFV4AqQBWgClAFqAJUAaoAVYAqQBWg/1eg3v94UVrqLg2AKX0+0QPii4rUD/feClKzDzAqxMkG0mUwTSu1sb0ouGNKcAXCBGKAJX2XfwgFTj8BmtHFZw8IpPNOeD4IAj8SSMDExW5R/EOtLaAMcdQUzeri3EBugdT88IFwNbkgQPJADsgCGcAJoUwJJiZAUgJEPtoCyBJHVRvaAIMFQnhfHEOwEKRTgHQKhoymaTnAMyXNxIAh0j4UqBZAcfGgDEUE0ED6juwLBaGlvIDoEMejijyZUENxAVEjIOqBYeJ7qKnQj8r5ijFAYL60B5K2PEk7HUCLdF8InJMjVgxICJjhFP+LWi0B2ZK5qdrRFLCPa26hoKWIJnwnK/l0IDSWFzAWEFM1VCWET0pmlxTXY5KGZIhAMg9tgPwoUOBCDYXBypfMLyf5UgnIEuS2AEhIWgm/WwLGULKMgYAJIt5VEHv4Tlc6xoVMKeFHYXTOq/NKQjK9MHzboToV7WgRAmn9BAuUIBCarq9ct4Xp2dLAWnKENaWMIXTqUHhbMjMZRlecXxamvwFBUwYm/KxJUU6TAFTTN9TUJ8wMwhBoSOal95INlNNIb5qK0koopK+8I1Bk0CLSrwDwzYjYrym73odJM+qH+6qVvlwLB9yRIqCuDL4nA4VCW2LXpAhDRGRTNaANYDkSRJhgECGHDBNal2lGTGooE2iYV8UUAP0k1FZaGb/SI+YqEzBkDckphN+DSegnINXpq5/JliD7dym/1HsYXb+MNk72kl8Q4ctlB1xX8id6yaBPlmb60joIeuspqLE9iMh6gwjwE71pPYT5PjVJwgf1iGTxfwGjRcD4Ed8HTddHU1wjkD4XlArXk4FcKcVQZ2sjYh7yT0KAUM1eizD7btZjKic9Sb1hYRWU8SNduqYNMETUHlWyaFJpEQCBChRImpIrRhlAHiUtYvI7UUDyIKv9hpK21EzBk3bVtHzJFPW+Rp0Bgioogy7LWpDlMJVWUVibexEjYSgOSZlZPOjDfNWbKUXd50oyekqvoWRlarbtSg/npCajEZH2aIqjqpl6cBwOH5QJ0yqMK/UQctJnR822w5tDqLCBFxcPIlWJamkh++AxBddxNkO0MmV52CRxpGZJVuopuCqQLy50AG1CK2E5XpBGwSpTuGllcq/e2lVhNapHvMdXNOSIQU5Le9hsDLs/pb5c2FZNSzVRCJNQmo1ahMCqqfQlI5d7anqZRmO4O1J3p1305FoFUF4cc7KGHKkVFO6BOJcSUHZEG9j4mCsRgTJRqt3SQLGQjABqE8ej4tjeDSgIAkf0hnWpQ5kWjcak6NeZEXXTiehtq33tQAoGGeEWHeJ7m9hziLUjOcrlJKcLX5YV2jGkMteKyA6i+nX96WHLOZo8gbuSnzhKgzEnrxVFrQ/FpPaVrXRMLan8VTtBHyfR9cusC+kSUDiR5iUrcuS1oUggZa1IV4DMiDWhgc7Y/YiwLmcwPmVW73oEigAzIwpCGPilSVlLckrWI0ifgQbbVvmfQgWoAlQBqgBVgCpAFaDy238BUxBuU8uF3bsAAAAASUVORK5CYII=',

			/* jshint maxlen: 24440 */
			markerUri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAYACAYAAABhPPhzAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABh0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzT7MfTgAAABZ0RVh0Q3JlYXRpb24gVGltZQAwOC8xNi8xMCwi7ioAAAQRdEVYdFhNTDpjb20uYWRvYmUueG1wADw/eHBhY2tldCBiZWdpbj0iICAgIiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDQuMS1jMDM0IDQ2LjI3Mjk3NiwgU2F0IEphbiAyNyAyMDA3IDIyOjM3OjM3ICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4YXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eGFwOkNyZWF0b3JUb29sPkFkb2JlIEZpcmV3b3JrcyBDUzM8L3hhcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhhcDpDcmVhdGVEYXRlPjIwMTAtMDgtMTZUMTE6MTk6NTRaPC94YXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhhcDpNb2RpZnlEYXRlPjIwMTAtMDgtMTZUMTQ6MzI6MDFaPC94YXA6TW9kaWZ5RGF0ZT4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIJ/ii10AACAASURBVHic7Z13fFP1/v9fJ6sr6U6B0jZddKUjLauMQpE9lSmX60C/4kVBvThQ1Cte5arI5QLKEgQRUBAsoyyBi4xCoSCrBREsFIS2lNJ0pG2SZrx/f3TYYpOT5sTcx6+c1+PB4wFN+nn2c04S3s9+FkNE+F9E8D+h/i/Bola+9mdde6b5Px7s8Z95w1u0/fDdYx7stLT2dmo1l3++goKbtxAgl6NH964tHissKkb2yRzI/f2Q3j/NtgaJqPmfVrNk6UoK7ZJI3XsPIEVkPM16/W0yGI1ERLR5SwYpVankJQ+hMeMmW2qiMU0s1ktdfPculixdidSe3XH44G68PHM61qzbgP/+9zAAYMO33yEuNgahoSEQiyW2XkB2cN6ln6FWlyO1Zzd4uLtj+NDB8PBwx5FjxwEASxcvwFerl8HVxQVms9lx4IKbv8FsNsPH2xsAIBGL4eriivKKCgBAqCIEDMPAZDLZDLUJLBDUP4Ue+DRlmn30tqWnNoPDw0IhFAigVpcDAPR1ddBqa+Hr59NmWJvACfFxCAiQ48fDx1B8twTfbt4Kvb4OQwY+0uJ5RqOxTZebFRwg98e7c95AUfFdDBkxFjsy9+DNN2ahf78+Tc9hGAa+vr7w8vKyGcw8UPpY/G+xvKICv+bfQFDnQAR26tjiMSKCRqOBQCCAVCq1ymsz2EFpAre81Mdn/Mnc39MS/PNy4PCT/wMwAPy6ETgx838ABoDLy4DjL/wPwADw80rgxyf+NHDL/48F4paP5n8DuHcAujwF+CU5FPzg28lpefhqLh7stPC26LTw4PYP5myLVVUaZJ04idLS+wgJCUJqj25wd3dnb9BeWzSbzXSvtJQGDX+UwqNVNHz0BAqLTqKJk5+mKo2G1RZZwUXFxRQeo6LJT/wfVdfU0MLFS8nTP5iOZp2gnbv2UKeQaFq7biMREc394GPy9A+mY1knuGuqJVvc98NBDByQjvOnj+GpJyb/fu+EQohEYistNjyP7QmWbFFdXg4PD3d4eNTfzxPZOVi/cROSVYmIV8awgh1ii0eOZuGJqdPQOTAQyz9fCJlMxh1syRb9/HwBAJm79+H5GX/HwAHp2L8nA1FdIlmhNoEt2eKjo0dgwzebMfW5FxGmUGDE8ME4fPQ4tu/c3fRDWotN7rTx2y1Y9Nly1NXVgYjw5F8n483XX8GHHy3Ath27IJNJodPpYDKaYDSZsH7tCiQlJrTKaxMYaN0WdTo9DAYDGKblN7u7uUEoFDoG7KDwttgsvC3+SeFtkQfzYIeFt0WnhQe3fzBnW6wzGHDmp3O4X3ofwcFBSFYlgmEYKy01hIstVmk0NGnKVAqJUFLagGEU2iWRXpo1m/R6/Z9ni4ePZtGZn85RZGwyzf/3YjIajTTjldcpICiSfr5y9c+zxR/2H0JSYjzOnjqC2a+9AiJCTU0NZFIpZDKrIzEAONhieUU5xGIxxGIxvvr6GyxdvgrlFZX41wfvIqhzICvYblts/tEbr4zFqJHDIJV64FhWNnQ6HSuYtceWbFEu90dZmRql98vQvVsKundLgclkwqov12Hmi89DGWfdke22xcdGj8CRY8fRs+9ALPpsOao0Gvx2+w7EEglcXV1Ze2zT22nDN99RSs/+FJ/ci5SqVPpkwWIiIiorU9OUp6ZRRIyKuqb2p4SU3rRw8VIymUysr2qHjC2eO38RZWo1EuKV6NghwFo/eVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wQ6ZiQoAGk019u0/iA4BAS1mt1mMLeVtqzNRDcYWz/nnvPnk5tWRxk16wlIzLcpbu21xz74DTc/JPnWawqNVFBKhpClPPWcT2G5bPNowE1Wn0+Ott+ciKVEJXx8fm+do2j0TtbKyCgDw+bIvoNXq8Pabr8HoyOmRlmzR1c0VFy7mYemKVXht1kwEBMhRV1cHg8GAWq2WO7h1W9SiQ4Acu/fuR1WVBvMXLMbIRydBIBDg9Jlz+OTTRaxg1rdTc1ucPGl8gy3qkda3N/x8fRAT1QUCgQClZWVYsHAJQhUheHT0CFaw3bb4oBGWqcupe+8B9PyLr9j0qnaILQL1M441mmoIhUJIpR6WmuFtsSG8LTodDPC26PA8fDUXD3ZaeFt0Wnhw+wdzskWdTo+8S5dhNBoB1FesYrEYyapEiEQsTdtS3rZmiyaTiW4U3KQoZVcKCosjRWQCdQ6NocRufai8vIK1vLXbFg8dPkq3b98hRWQ8fTT/P3Sj4CZdv1FAV6/lk9FobK2pFmC7bfFY1gkYjUYwDIOAAH9cuJiHi7mX0Dmwo6X5ei1i99hiZWUVarU66PR6LF2+GsFBnXHp8s/oEhmBzRvXwsfH22q7dtuiyWyGp0yGUSOG4aUZf0Pmtk14d84bOJlzBgcPHWFr1v6xRZlUik6dOuDzRfObhvRioqMgEAhQWFTECrZ7bHHMqOG4eu1XxCX1xDtz56H0fhk2b8mAUMCgR7c//nLmD7Hl7WRpbFGn09Frs9+hLnFdKSGlNyWk9KZ5Hy1w3thiwc1bKCwsQpfICHTgxxYthLfF+vC2yNsiD+bBNoS3RaeFB7d/sEPGFq9ey8f16zfg6+uDlGQVJBL2xXQcxhYNRES0cdMWiohRUa+0wRQUHkeTpkwlTXU1a3lrty0e+O9hqqyqoihlV3pu+stERLRy9Vc0cOgYuvZrPivYbls8deo0cnMvo0ytxiPpaTiVcwZxMdHI3LYZXSIjWK+03bZYpanGr9evw9XFBV+u3QAiwo2CAqQkJ2HV8iXw9/ez2i6HmaiAtlaLmlotVEkJ2JO5BTNemIb9B3/E1m072JrlsMuNrw+8vb1gNpnQp3dPuLm6IrVHd0jEYpuWD9ptiwPS09Czeze4urpi/8FDUJeXY+8PB0AAUnt2ZwXbbYvmhscWLVlGSlUqJfdII6Uqld6ZO8+m34E4xBbvlpQgP78ACkUwgoM6W+snb4sN4W3R6WCAt0WH5+GruXiw08LbotPCg9s/mJMt3r5TiJu3foOocYCrYb1ifFws+4I6W8rb1myx8evecgUpIuNJEZlA4dFJFKiIoZzTZ1nLW7ttcf+BQ3Sv9D6dv5BLuXmX6NLlKzTj5dcpPDqJbt76jRVsty0eOnwUcn8/qJISkBCvRER4KHLOnEWfXqlQhASz3joOM1ErWzzv4KEjuFFwE09MmcQKtQlsy7pFAFi/cTOUcdFIT7dtw12H7Imam3cJWcezMXnieEjENvz+wxawLXuirl6zHjKZDOPGjrEJCoCDLZrrfbFMraZe/QbT31+bY+nbW31Vc7ZFg8EIjUYDqdQDEgnrFsO8LTaEt0WngwHeFh2eh6/m4sFOC2+LTgsPbv9gzmOLOp0O2SdPo/huCeRyf3TrqoKvjw3nENhS3ra6y43JTOUVlTTu8ScpIkZFQ0eOo7CoRBo4dAzdu1fKWt5y2hN1z779JPPtTDsy9xARUcb2TPL0D6aM7ZmsYLtt8fCRLATI5XBzd0dRUTGqa2pw714pZFIpgoOtjsQA4DC2WHz3Lrp1TcY7b76Kj+b/BytWr0W5ugIvzfgbundNYQXbbYsSsQRFRXex54eDiI2JwvRpzyAuNhqZu/bi+o0CVrCdM1G1CAzsiB2Ze3Dy1Gkc2LMNqT27Q5WYiOGjx2Pbjt1449WXrHeIDdy6LeoxaGA6PD1lMJvNOHP2PKqrq5Fz+ieYyYyAAH/WHnOaiaour6Cpz71IYVFJlNKzH4VHq+jZaTOoqqqK9VXtkLHFi7mXcKewCIqQYMQrY631k7fFhvC26HQwwNuiw/Pw1Vw82GnhbdFp4cHtH8zZFg0GA05k56CwqBjBQYHoldoDYltGYmwpb1tdt2g2U3V1DU156jkKj06i4aMnUGhUIk2fOatplqq18paTLX6/bSd5+ATS8i/WEBHRB/Pmk39gBOXmXWIFc1i3mI2Cm7cgEgmbNuUMDVOgTl+H3LzLrFfa/hM01GpMHD8WEokEy1asRnl5BbZm7IDERYKKikqWVjnYYq1Wi16p3bFq+WKUV1Ri5aq1cHN1hVgsgre39cWSNoGtnaCh0+kxbOhg7Mvcin27vsewIYOg1+sdM4xraWxx7JhR2PvDAUREq7B6zdeoqtJg5+69CJDLERMTxQrmZIuFRUU0euxkioxNppSe/Sg+uRet2/CtpWZavKo526LZbMb5C7moqKxEQrwSAXKrbszbYkN4W3Q6GOBt0eF5+GouHuy08LbotPDg9g+22RbLyyvw45Fj8HB3x+BBA1psr3Lu/EUU3y1BUOdAJCXG29agLeXtzl17KTVtEPl2CKNeaYOotraWiIjMZjPN+2gBBYcrqVtqOoVEKOn9Dz8ms9lSS22QNgBYu24DvLw8ER4eComLS9PXL+TmYcmylZgwbgx+PJCJkcOHYuXqr/DL1WusbbKCiQj/+fQjbP32a3h4uDeczl7/IXT4SBYMBiPGjBoBmUyGEcMGQ6vV4WjWCe5ghmHqeyoR/+FIeLW6HC4SCby8PAEA/nJ/iEQilJaWcgc3xtbdXRt+XMeBW4tc7g+dXo8ytRoAcPduCYxGY6sbeXICG40mGI0mNH7eD3qkP9xc3bD5uwwUFhbh+207IZN6YEB/9vm3Nr+PGYaBb8PuRI0n3SjjYvHeO29g+RdrMHTUeIjFIsyZ/RrCw0PZ27NV2ogImupqAIBMKm1xzE7JvVLcvn0HYWEK+Pn6WuW1Geyg8LbYLLwt/knhbZEH82CHhbdFp4UHt3+wQ2yxsKgY2SdzIPf3Q7oNpS0AbrZIRLR5SwYpVankJQ+hMeMmWxsIaWGLNvXYki0SETZ8+x3iYmMgEosgFrMutLK9x2azma5fL6CqKg31HzSS+g4Y1tRjk8lEBTdvUXV1DfXsO5DGTrR6Xkjb/NiaLQoEAoQqQsAwzB8eY4tDbLFtJtlGsKNj89sJQIMpWnrM2KbLzckWWzzm6wsvLy+bwQ6xRSKCRqOBQCCAVGp1wTNviw3hbdHpYIC3RYfn4au5eLDTwtui08KD2z+Ysy1WVWmQdeIkSkvvIyQkCKk9usHd3Z29QS62eLfkHg0a/iiFR6to+OgJFBadRBMnP01VGg13dwIs2+KPR47h8uVf8O6c17E3cyue+utk7P/vj7hwIZe1TdZLTQ1ji3K5P0aPm9zCFkYNH4JH+qe12IZUJBRCJGKf9MsKbrRFvV7/B0WRyWSQyWQAgBPZOVi/cROSVYmIV1o/px5wkC0eOZqFJ6ZOQ+fAQCz/fGHTD+MQsKXs3LUPz8/4OwYOSMf+PRmI6hJp0/fZObZY/x/Nqi/X4dlpLyJMocCI4YNx+OhxbN+526bNWDnZ4t2SewgJCYZWp8MnCxbBZDTBaDJh/doV8PW1vgaZky3q9HoY6gyNu2M1fbO7m5uls2F4W2wIb4tOBwO8LTo8D1/NxYOdFt4WnRYe3P7BnG2xzmDAmZ/O4X7pfQQHByFZlfiHMYtWw8UWKyoradKUqRQSoaS0AcMotEsivTRrNun1+j/XFi9cvIRz5y9ixgvTcPjgbowcMQTfbd2G6zdusrbJyRZTe3TD2VNH4OnpCaPRiJqaGsikUvatZ20BW7NFFxcJXFwk+Orrb7B0+SqUV1TiXx+8i6DOgaxgh9hivDIWo0YOg1TqgWNZ2dDpdKzttWmI78HcK70Ptboc3buloHu3FJhMJqz6ch1mvvh807JRS7HTFuuz/8Ah9Ow7EIs+W44qjQa/3b4DsUTSdPCjtXCyxRHDBmPUiGFYtmI1vtm0BXV1Brz29xkICw1hb88RY4vnzl9EmVqNhHglOvLnLVoIb4v14W2Rt0UezINtCG+LTgsP5sFNKS+vQMb2TPyw/7+tTpHTaKqx5fvtOHqMfSEdAO4zURvzz3nzyc2rI42bZHVupmNssTEnc87g6w2bIPf3s6mYB+xet/h7dDod3np7LpISlfD18bF5jianmagA8NmyVdBqdXj7zddgbMP0SE62eCrnDJYuX4XXZs1EQIAcdXV1MBgMqNVqHQdumfrP+x2Ze6DRVGH+gsUY+egkCAQCnD5zDp98uoi1BTtnotZ/3k+eNB7dUpIhEAhQWlaGBQuXIFQRgkdHj3AcuDVbVCUlQJWUAABQl1dgzVfrERsbha4pKvb2HGGLQP1rQKOphlAohFTqYZHXZrCDwttis/C2+CeFt0UezIMdFt4WnRYe3P7BnMYWdXo98vIuw2g0AqgvCMViMZJViRCJWJrmYovXrxdQlLIrBYXFkSIygTqHxlBitz5UXl7Baouc1i0ajAbo9Xq8OP05TJ40DkQEo9HkmCE+sjK2aDAYAYZBQIA/LlzMAwAMeWD5qN1ga2OLer0eep0eS5evRnBQZ1y6/DO6REZg88a18PGxvj0pJ1v08fbGqJFD8dKMvyFz2ya8O+cNnMw5g4OHjrC2x2lsMTgkCJ8v+rTptwAx0VEQCAQoLCpi/V5OY4u5uZcQl9QT78ydh9L7Zdi8JQNCAYMe3bpaaaU+nGwxLi4G4x4bja3f78Cu3fsAAK++MhO9Uruzt+cIWyy4eQuFhUXoEhmBDvzYooXwtlgf3hZ5W+TBPNiG8LbotPDg9g92yC43V6/l4/r1G/D19UFKsgoSiYNO0LA2trhx0xaKiFFRr7TBFBQeR5OmTCVNdfWfO7Z4t+QePpg3HwPS+yH72AG8O+cNlJWpUVx8l3uPre1ys2//f8mvYxh9u3krnTx1mo5lZVNNzR9HWu3yY2u2eKPgJlxcXPDl2g0gItwoKEBKchJWLV/SYhFla7HTFus/drW1taitrYUqKQF7MrdgxgvTsP/gj9i6bQdre3a+neo/dmWeMpjMZvTp3RNurq5I7dEdErHYpuWDnGwxtUd3uLm6Yv/BQ1CXl2PvDwdAAFJ7sksbJ1tMiI/DnNmz8OVXGzBo2KOoqzNg5ovPI71fX/b2HGGLd0tKkJ9fAIUiGMFBVk8Q5W2xIbwtOh0M8Lbo8Dx8NRcPdlp4W3RaeHD7B3OyxTt3ClFw6zeIGs2xoQCMj4tlH23jYouLliwnb7mCFJHxpIhMoPDoJApUxFDO6bPc3QmwbIt/mTwB6f37QigUQCAQYsUXa7Bv/0F06CBnb5SLLTaPVqulbr0G0JNT/2aTLXKeidqYg4eO4EbBTTwxZZItF9Ex6xYBYP3GzVDGRSM93bYNdx3ydsrNu4Ss49mYPHE8JLacIAoH7Ym6es16yGQyjBs7xua2OO+Jqi4vx9nzFzBqxFC2pYMt2+NqiwaDERqNBlKpByQS1i2GeVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wZzHFnU6HbJPnkbx3RLI5f7o1lUFXx/r+ygC4GaLanU5jX/8SYqIUdHQkeMoLCqRBg4dQ/fulbK6k03gR8f/hYaOGkfdeg2g/oNGNoG3fL+dZL6daUfmHiIiytieSZ7+wZSxPZO7tJGVdYsBAXK4ubuhqKgY1TU1uHevFDKpFMHBVkdibL/UREQ6nY76Dhj2B01d/PkKCgqLo4SuvSkoLK7pVHfOPW5Ma7Z489Zv2LvvAGJjojB92jOIi41G5q69uH6jwHE9rq2tbdZjLRERzf/3YpL5daaTp04TEdGJ7Bzy9AuiTxd+5rgeA388b9HbywtmM+HM2fOorq5GzumfYCYzAgKsnlcPgKMtThj/KE7mnMGiJcuxbv03qKiowqTxYzHu0VHs7ZEDxhYv5l7CncIiKEKCEa+MtcprM9hB4W2xWXhb/JPC2yIP5sEOC2+LTgsPbv9gzrZoMBhwIjsHhUXFCA4KRK/UHhDbMhJjS0FvyRarNBqa8tRzFB6dRMNHT6DQqESaPnMWGQwGxxT0lsYWt+/YhZ279uL1V1/G3sytePapv+L7bZm48stV1jbttMX6D6GCm7cgEgqbNuUMDVOgTl+H3LzL3MGtjy3Wfwj169sHEokEy1asxs5de7E1YwckLhJUVFRyBzemNVsckJ6GL5YvRnlFJVauWgs3V1eIxSJ4e1tfLNkmcGvRarUYPmww9mVuxb5d32PYkEHQ6/VQhAQ7FvzgTNRtO3YjIlqF1Wu+RlWVBjt370WAXI6YmCjWtjjZYnq/PuiaosLCxUuxeu3XqKsz4K3Zs+Dv58veHldbNJvNOH8hFxWVlUiIVyJAbtWNeVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wTZVmbVaLbKzc3D7TiE6dAhA39494enp2fT4ufMXUXy3BEGdA5GUGG8bmc0WNdXVNOEvT1NIRDyNGDOBopRdafCIsVRUfJeIiOZ9tICCw5XULTWdQiKU9P6HH5PZbEkW2zC2eO5CLim6JNB7//wXERFt+u578vDuRGu+2kC/5t8geecImvX6HKqqqqIXZr5KHUOi6OcrV7lralxMFE5l/RdzZr/acIUARiCAu7s7Dh/NgsFgxJhRIyCTyTBi2GBotToczWLfgpYV7OLigo4dAuDq6orLP/+CTxcuQXSXSAweNABFRcVwkUjg5VV/v/3l/hCJRCgtLWUF26wweXmX8fhfn4VAyODLNSvh5+sDg8Fg4dnsx7PY9HY6cvQ4nv6/FxAXF42De3c07QAq9/eHTq9HmVoNALh7twRGoxGBnTpyB+/ddwCTn3gWEokEkyaMxYXcS/h+204U3LyFYUMGws3VDZu/y0BhYRG+37YTMqkHBvRnn3/LeqnvFBYhIEAOFxcJFi5aCpPJhOqaWrz/jzcxedJ4vPfOG1j+xRoMHTUeYrEIc2a/hvDwUFYwq7TV1dVBr69D8y1QiQAXV5emCb4l90px+/YdhIUp4OdrVVF5W2wIb4tOBwO8LTo8D1/NxYOdFt4WnRYe3P7BDrHFwqJiZJ/MgdzfD+k2lLYAuNhiMRERbd6SQUpVKnnJQ2jMuMkWNbHN0vZr/g2c+ekcpj71F+zZuRX/fG8OsrNPYcfOPQCADd9+h7jYGISGhkAsZl1o1RTWS91oi94NYtZoiyJx/bcuXbwAcn9/DBw2xubTMwA7bTGqSyRGDBsMAAhVhIBhGKtrGluLXbb49ZqV6Bz4+2GObelpYzjZIpfYbYsPHthpNBrbdLnttsW5785GRIMVMgwDX19feHl52Qy22xZdXV2aJiEQETQaDQQCAaRSqwueeVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wZxtsapKg6wTJ1Faeh8hIUFI7dEN7u7u7I3aa4v3SkupTK2mQcMfpfBoFQ0fPYHCopNo4uSnqUqjYbVFu8cW163/lnbt+YE6hUTT2nUbiYho7gcfk6d/MB3LOsEKttsWDUYDBvRPw/nTx1psQyoSCiESOWjSb2MuXb5Cqu5plNKzP925U9jiseMnTjUtEa2qquJ+qRuTm3uJYhN6kFLVk346e77FY4ePHKPQLgnUN30YXb32q7Vm2gY+fCSLkrun0fjHn6SiouIWj+3I3EtdlCn0f8+/RDU1NdagLcCsCrN33wE8+/xMhCpC8OrfZ0Amk6GmpgY9unXFfw8fwRtv/gPduibjb9OegYuLC+rq6tA/rQ98fVtdCtz0P5Tdtjj/o/dRUV6JkJBgaHU6fLJgEUxGE4wmE9avXWEJ/PtPwNZjy7boCrPZjLq63x9r/GZ3NzdLZ8PwttgQ3hadDgZ4W3R4Hr6aiwc7LbwtOi08uP2DOdtincGAMz+dw/3S+wgODkKyKvEPB2+3GraC3pItlty7RzU1NTRpylQKiVBS2oBhFNolkV6aNZv0ej13k7Bki2vXbaCz5y5QZGwyzf/3YjIajTTjldcpICjSppmodtuiyWRGvDIOZ08dgaenJ4xGI2pqaiCTSm066NEhtrh23UZK6dGPwqKS6NvNW6010fY9X/LyLmPi5KdhMNRh1fLF6Nz597HFeGUsRo0cBqnUA8eysqHT6RzTY0u2WFJyj678cq3p3++89yHJAyPo0uUr3HtsaWzxt9t38OORLPTsOxCLPluOKo0Gv92+A7FE0nTwo7XYbYvz/vkORo8cil17hmHZitX4ZtMW1NUZ8NrfZyAsNIQVbP9MVBdJ0x6o585fRJlajYR4JduGrLwtNoS3RaeDAd4WHZ6Hr+biwU4Lb4tOCw9u/2CHzEQFAI2muv4siYAA9O/Xh71RtoLe4kzUB4aB/jlvPrl5daRxk56wSWHstsWlK1Y1PSf71GkKj1ZRSISSpjz1nE1gu21R0jDdVafT4a235yIpUYmCgls2z9G0fybq8CEAgM+WrYJWq8Pbb74GY1tmo7Jd6sa0NrZ48tRpCg5X0uYtGXTrt9sUpexK4x9/kmpaOVOkzfeYyLItvvn2XPKWB1Ny9zSKT+5FMQndKThcSf94/1+sYLvHFpNVSdBoNMjPvwGBQIDSsjIsWLgEgZ06YdG/P7I0TZb72OLcd2fjL49PgCopAQCgLq/Amq/WIzY2yqa5uQ6ZiQrUzzjWaKohFAohlXpY5NkMdnB4W2wW3hb/pPC2yIN5sMPC26LTwoPbP5iTLep0OuRd+hlGoxFAfY0uFouRrEqESGS9adZir7qmBs9Mm4HTp88iXhmD/OsFUChC8M26VdDpdBg0/DHU1mohFAphNBrg5++Howf3wNu71UVXv7+X2UzCki1+ufZrKiwqJkVkPH00/z90o+AmXb9RQFev5ZPRaGQ1Cbtt0cXFpX7PF4ZBQIA/LlzMAwAMabY1rdXY4k6NaT62WFp6n3LzLlHH4ChSdU+j0WMnU1hUIg0ZMZbU6nLWHnOyxfzrN+i56S/RmoZJv2u+2kAyvyD6but2x4At2WJdXR1ptdqmf5/IziEveQj9Z8kyVrDdY4u3bt3GlV+uIS6pJ96ZOw+l98uweUsGhAIGPbp1Zb3FdtviB3PnYNxjozHusdHY+v0O7Nq9DwDw6isz0Su1OyuYw9iiCySS+nK44OYtFBYWoUtkBDrwY4sWwttifXhb5G2RB/Ng6IwkqAAAIABJREFUG8LbotPCg9s/2CFji1ev5eP69Rvw9fVBSrKqqQi0GraCnm1sceOmLRQRo6JeaYMpKDyOJk2ZSprqau4mYckWv1j9FVVpNBSl7ErPTX+ZiIhWrv6KBg4dQ9d+zWcF222LMpkUeXmXUVamxiPpaTiVcwZxMdHI3LYZ7u5u3C918zS3RbW6nFav+ZoCFTH0yJAxNGDwaFJExtPYiX+l0tL7rD22eyaqj483KisrUVtbC1VSAvZkbsGMF6Zh/8EfsXXbDtb2OO1yI5PJYDKb0ad3T7i5uiK1R3dIxGKo1eXcwZZs8ebN35DWtxfcXF2x/+AhqMvLsfeHAyAAqT3Zpc3+PVHfewuTJ47DnNmz8OVXGzBo2KOoqzNg5ovPI71fX1awQ/ZEvVtSgvz8AigUwQgOsnqCKG+LDeFt0elggLdFh+fhq7l4sNPC26LTwoPbP5iTLd6+U4ibt36DqHGAq6EijI+LZV9Qx6YwlmxRXV5Oy1asJm+5ghSR8aSITKDw6CQKVMRQzumzrApjty2uWLWG7t8vo/MXcik37xJdunyFZrz8OoVHJ9HNW7+xgu22RYFAAD8/X/g1HH+n0+mQc+Ys+vRKtekQQPvXLRa23OUmc/c+8u0YRvsPHLLWhGPGFptnwuSnKe2RYaSvq3Mc2NouN0REF3PzqENQF1q2YrU1aAuwQ/ZEXb1mPWQyGcaNHcN+bxvCeU9UdXk5zp6/gFEjhrItHWwRzjNRDQYjNBoNpFKPpnWM1ng2gx0c3habhbfFPym8LfJgHuyw8LbotPDg9g/mPLao0+mQffI0iu+WQC73R7euKvj6WN9HEQCXXW5KSaOppvGPP0kRMSoaOnJc00ad9+6VcjcJa3ui7tt/kGS+nWlH5h4iIsrYnkme/sGUsT2TFWz/CRoiIeRyOdzc3VBUVIzqmhrcu1cKmVSK4GCrIzG2XermaW6LhYVFRES0+PMVFBQWRwlde1NQWBx9smCxtSa4jy0GBnZCwc1b2LvvAGJjojB92jOIi41G5q69uH6jwDE9tmSLnyxYTDK/znTy1Gkiqp+J6ukXRJ8u/Ix7j63tchMg94fZTDhz9jyqq6uRc/onmMmMgACr59UD4LjLzeMTx+HY8WwsWrIc69Z/g4qKKkwaPxbjHh3FCnbILjcXcy/hTmERFCHBiFfGWuXZDHZweFtsFt4W/6TwtsiDebDDwtui08KD2z+Ysy0aDAacyM5BYVExgoMC0Su1R4vNKyyGraC3aIsl90ir1dKUp56j8OgkGj56AoVGJdL0mbPIYDCwFvT22+KGb2nbjl3k4RNIy79YQ0REH8ybT/6BEZSbd4kVbP+6RYkEBTdvQSQUQhkXAwAIDVOgTl+H3LzLSIhXWm2XFdy4yw2AFrvcDBn0CH7+5SokEgmWrViN8vIKbM3YAYmLBBUVlay32G5b9PX1Qd/eqfhi+WKUV1Ri5aq1cHN1hVgsgre3N3uDbPeYyLIt1tTUklana1qLunbdRvLtGEpZx0+y3mNOtrh77w+IiFZh9ZqvUVWlwc7dexEglyMmJoq1w3bb4r8+eBcDH+mPrikqLFy8FKvXfo26OgPemj0L/g2D2dbC2RbNZjPOX8hFRWUlEuKVCJBbdWPeFhvC26LTwQBviw7Pw1dz8WCnhbdFp4UHt3+wTbZoMplw7vxFFBYVIyBAjh7dukIk+n17lXPnL6L4bgmCOgciKTHeNjJbQa/T6en5F16hoLA46vfICIqIUdFTz06nqqr6MxXnfbSAgsOV1C01nUIilPT+hx+T2Wypnm+DLeZfv0GJXfvQrNffJqPRSAsWLiF370509Nhxunotn+SdI2jW63OoqqqKXpj5KnUMibLpBA3We6wICUHWj/vw7/kfQigUQlNdA6mHBzp16oRDh4/CYDBizKgRkMlkGDFsMLRaHY5mnWC90qxgkUgIT08ZDv14FL36DcbXGzZh7rtvoktkOAoLi+AikcCrQWH95f4QiUQoLS3lDm5MWJgCY0YNR0CAHFknTqK2ttbKNknsx7Owvqo1mmoUFhUhJCQYc2a/ig4BAXj51dk4e+4igoM7Q6fXo0ytBgDcvVsCo9GIwE4dWcGsPb76az76DRyBt9/9ADU1tbhRcBNCoRCurhIM6N8Pbq5u2PxdBgoLi/D9tp2QST0woH8aK5j1VV1bW0vTZ8yiyNhk6tYrneKSetI/533S9AuW5Su/pPjkXqRUpZKqe19atuJLi++l5iybpe3nK7/g9p1CRHWJRFioosVjJfdKcfv2HYSFKeDna1VReVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wQ6xxcKiYmSfzIHc3w/ptpS2AHdb3Lwlg5SqVPKSh9CYcZOtlbZtk7Y7hYU4dfonTBz/GH48kInp057B99t24mTOGQDAhm+/Q1xsDEJDQyAWsy60agrrpW60RanUAwKBAJrqGnh4eEDu7wcAWLp4AeT+/hg4bIzNp2cAHGwxWZUIAAhVhIBhGJjacnqGLeDGPGiL5eUVTY+1pac2gzWaavxy9RoCAzthzuxXMX3aM9i1Zx+yT51uM6xN4NZsUSQUQiZtuczXaDS26XKzvriUsdEY/9gY7Nm3HydOnkJtrRav/b3lvqcMw8DX1xdeXq1uK9xqHGKLRASNRgOBQACp1OqCZ94WG8LbotPBAG+LDs/DV3PxYKeFt0WnhQe3fzBnW6yq0iDrxEmUlt5HSEgQUnt0g7u7O3uj9tpibU0t3b9fRoOGP0rh0SoaPnoChUUn0cTJT1OVRsNqi3aPLR4/cZJ27tpLnUKiaW3DsQ5zP/iYPP2D6VjWCVaw3bbo4eEBVVICzp8+Bv8GcwQAkVAIkcgBk34bc+Dgj5SaNogUkQm0tJW9XY6fONW0RLSqqoq1x3bborqZLR45moUnpk5D58BALP98IWQyGfceV1Vp6MovV5sOb1zz1QZy9+lEe/btJyKiHZl7qYsyhf7v+ZeopqbG2kVrW49bt0URAgICsOGbzXh22osIUygwYvhgHD56HNt37rZpM1a7bTFFlYgf9h9ESEgwtDodPlmwCCajCUaTCevXroCvr/U1yJxsUafTw2AwNM1Sbfxmdzc3S2fD8LbYEN4WnQ4GeFt0eB6+mosHOy28LTotPLj9gznbYp3BgDM/ncP90vsIDg5CsioRDMM+WdBuW6ypqSFNdTVNmjKVQiKUlDZgGIV2SaSXZs0mvV7PWtDbbYvHsk7QmZ/OUWRsMs3/92IyGo0045XXKSAo0qaZqHbbolQqhTIuFmdPHYGnpyeMRiNqamogk0rZt5615VI3xpotrl23kVJ69KOwqCT6dvNWa804whZ/96N4ZSxGjRwGqdQDx7KyodPpuPfYki3u++Eg3b9fRld+udb03Hfe+5DkgRF06fIV7j22NLbYoUMAjhw7jp59B2LRZ8tRpdHgt9t3IJZI4Orqyr3HlmaiGo0mUqvLacpT0ygiRkVdU/tTQkpvWrh4KZlMJtYeO2Rs8dz5iyhTq5EQr2TbkJW3xYbwtuh0MMDbosPz8NVcPNhp4W3RaeHB7R/skJmoQP3cvn37D6JDQAD69+vD3ihbeWvJFisfGNT657z55ObVkcZNesJSadu2gt7iTNSTv89SPJlzBl9v2AS5v59txTy4zERt2PdDp9PhrbfnIilRiYKCWzbP0bR7JmpKcn1F8tmyVdBqdXj7zddgbMP0SLttsaa2Fj+dPY+ly1fhtVkzERAgR11dHQwGA2q1WvYG2V5crdmih08gHT12gj78aAF5y4MpuXsaxSf3opiE7hQcrqR/vP8v1hcX6z2++ms+RoyZgCmPT8S/PvhH07pFkUiEcY+NRkxUFwgEApSWlWHBwiUIVYTg0dEjuPfYki0+eChJmbqcuvceQM+/+IpNbyeH2CJQP+NYo6mGUCiEVOphqRneFhvC26LTwQBviw7Pw1dz8WCnhbdFp4UHt38wJ1vU6fTIu3QZRqMRQH3FKhaLkaxKtLJJSX1Yiz29vg4vz5qNvT8cRHhYKAqLitCndypWfL4QpffLMGTEWNTWaiEUCmE0GuDn74ejB/fA27vVRVe/v5fZ6mpLY4tHjmbR7TuFpIiMp4/m/4duFNyk6zcK6Oq1/Kb9MzmZhGVblEOv1wMMg4AAf1y4mAcAGDJogKX5ei3D1uPGtDa2ePbcBeoYHEWq7mk0euxkCotKpCEjxpJaXc7aY7ttsbKyCj4+3hg1cihemvE3ZG7bhHfnvIGTOWdw8NAR7j22PBP1ABmNRtJqtU3PPZGdQ17yEPrPkmXce2xpbFEu98PVa/mIS+qJd+bOQ+n9MmzekgGhgEGPbl2599jy2KKRdDo9vTb7HeoS15USUnpTQkpvmvfRAueNLRbcvIXCwiJ0iYxAB35s0UJ4W6wPb4u8LfJgHmxDeFt0Wnhw+wc7ZGzx6rV8XL9+A76+PkhJVkEiccBiOraxxY2btlBEjIp6pQ2moPA4mjRlKmmqq1nLW7tt8dDho1RZWUVRyq703PSXiYho5eqvaODQMXTt13xWsN222DkwEBcu5qKsTI1H0tNwKucM4mKikbltM9zd3bhf6sa0ZovLV35JgYoYemTIGBoweDQpIuNp7MS/UmnpfdYe22WLx0+cRG2tFnV1daitrYUqKQF7MrdgxgvTsP/gj9i6bQdre3btifrSq7Nx9vwFyOVymMxm9OndE26urkjt0R0Ssdim5YN226Kriwt6dO8KN1dX7D94COrycuz94QAIQGrP7mzNct8TddGSZaRUpVJyjzRSqlLpnbnzbPodiENs8W5JCfLzC6BQBCM4yOoJorwtNoS3RaeDAd4WHZ6Hr+biwU4Lb4tOCw9u/2BOtnj7TiFu3voNosYBrob1ivFxsewL6tjKW0u2qNPp6fNlX5C3XEGKyHhSRCZQeHQSBSpiKOf0Wdby1m5bPHjoMJWW3qfzF3IpN+8SXbp8hWa8/DqFRyfRzVu/sYLttkVfHx/4+/s17XCj0+mQc+Ys+vRKhSIkmP3+sfW4MWy73GTu3ke+HcNo/4FD1prhPrbYfE9UAFi/cTOUcdFIT3fQhruWxhZ3793f9JyLuXnUIagLLWvlStjdY1v2RF29Zj1kMhnGjR1j6wXkviequrwcZ89fwKgRQ9mWDrYIZ1s0GIzQaDSQSj0gkbBuMczbYkN4W3Q6GOBt0eF5+GouHuy08LbotPDg9g/mPLao0+mQffI0iu+WQC73R7euKvj6WN9HEQC3XW4qK6to/ONPUkSMioaOHNe0Uee9e6WsBb3dtng8+xTt2XeAZL6daUfmHiIiytieSZ7+wZSxPZMVbLct+vn6QiwSwc3dDUVFxaiuqcG9e6WQSaUIDrY6EmPbpW6MJVtc/PkKCgqLo4SuvSkoLI4+WbDYWjPcbbG6ugZ37hRi774DiI2JwvRpzyAuNhqZu/bi+o0C7j22tG7xWFY2LVvxJcn8OtPJU6eJqH4mqqdfEH268DPuPbZ03qJU6gFPTxnMZsKZs+dRXV2NnNM/wUxmBARYPa/eth5b2+WmvLyCpj73IoVFJVFKz34UHq2iZ6fNsGnfW4eMLV7MvYQ7hUVQhAQjXhlrrZ+8LTaEt0WngwHeFh2eh6/m4sFOC2+LTgsPbv9gzrZoMBhwIjsHhUXFCA4KRK/UHhCL/8SZqDU1NVRTU0tTnnqOwqOTaPjoCRQalUjTZ85qmlZnrbzlZIvfb9tJHj6BtPyLNURE9MG8+eQfGEG5eZdYwXbZotTDAwFyf5w4cQoioRDKuBgAQGiYAnX6OuTmXUZCvNJqu6zgxl1uDv73MN774CMUF5fgvXffRJfICPTongKJRIJlK1ajvLwCWzN2QOIiQUVFJesttn9PVHU50vun4Yvli1FeUYmVq9bCzdUVYrEI3t7e7A2y3WNr6xa1Wh1pdbqmeZhr120k346hlHX8JOs9tntssVPHDtj7wwFERKuwes3XqKrSYOfuvQiQyxETE8W9x5Zs0WQyUWFRMY0eO5kiY5MppWc/ik/uRes2fGupty16zNkWzWYzzl/IRUVlJRLilQiQW3Vj3hYbwtui08EAb4sOz8NXc/Fgp4W3RaeFB7d/sE222BiDwYDde/fD28sTA9L7NX393PmLKL5bgqDOgUhKjLetMbbytnmWrlhFHj6BNOqxx4mIyGwmmvfRAgoOV1K31HQKiVDS+x9+TGYze3lrM/jar/kUk9CdFJEJNGHyU0REdOFiHsk7R9Cs1+dQVVUVvTDzVeoYEmXTCRo23+N33vsQsTFRCA9TwGis34L08JEsGAxGjBk1AjKZDCOGDYZWq8PRrBOs7dkEXrtuI3LzLuPD998FI/j9W8rUarhIJPDy8gQA+Mv9IRKJUFpayh1ccPMWPlmwCE/+dTIUimDU1tbCYDSiprbWyjEs7MezsIJ/PHIMJSWl2PL9dvTuNwQVFZW4dOlnvPveh+gc2Al6vR5lajUA4O7dEhiNRgR26sgKZn079U/rgzWrPodAIIBOp8OnCz+Dj7c3Hp84Dj4+3nB1c8Pm7zIQGx2F77fthEzqgQH9bZh/25a3ExHRsNET6Klnpzf9e/nKLyk+uRcpVamk6t6Xlq340tq3t90WG39IjaYaAgEDabO5tyX3SnH79h2EhSng5+trrQneFhvC26LTwQBviw7Pw1dz8WCnhbdFp4UH8+AWMRgM2L5zNw4fOdbi64VFxdiasQNHjmbZ3lhbytsHbZGIaPOWDFKqUslLHkJjxk1ma8L2Ib7G/Jp/HUuXr4a/nx9cXV2afugN336HuNgYiMQiiMWsC62aYjO40RYrKiqbbJGIsHTxAsj9/TFw2BibT88AONqiQCBAqCIEDMPA1IbTM2wCW7TFmpqm57SlpzaDLdniK6++1WZY89hti0898ZcWzzMajW263KzgyIhwREaEN/17w7dbECD3R7+03k1fYxgGvr6+8PJqdVvhVuMQW6z/ugYCgaDF11vj2QV2QHhbbBbeFv+k8LbIg3mww8LbotPCg9s/mPPYYlWVBlknTqK09D5CQoKQ2qMb3N3d2RvjYosl90pp0PBHKTxaRcNHT6Cw6CSaOPlpqtJoWG2R09ji5i0Z1Ckkmtau20hERHM/+Jg8/YPpWNYJx2lqa7Y4YtgQpPfr27TTDQCIhEKIROyTfjnZokwmRYcOARAKhTiRnYP1GzchWZWIeGUMe6Nsl/pGwU3qEpdC8z7+N2mqqyk1bRCNfOzxFnvbHj5yjEK7JFDf9GF09dqv1u6Y7ff4y6/Wk6dfMCV27UMJKb2b7vO0hr1ud+7aS12UKfR/z79ENTU11qAtwKwKk3/9Bi5czGthi+5ublj46Tz8fOUqZs95D926JuNv056Bi4sL6urq0D+tD3x9W10KbL87DR8zEQFyf3y9ZgU+/GgBtu3YBZlMCp1OB5PRBKPJhPVrVyApMcFxYHrAFvV6PerqDI27YzV9s7ubm6WzYXhbbAhvi04HA7wtOjwPX83Fg50W3hadFh7c/sGcbbHOYMCZn87hful9BAcHIVmVaGUSYbOwFfTN86AtVlZW0aQpUykkQklpA4ZRaJdEemnWbNLr9awFvc2XurWxxYu5l3Du/EXMeGEaDh/cjZEjhuC7rdtw/cZN1vY42WKPHl1x9tQReHp6wtgw+iaTStm3ngVsu9RrvtpA0fHd6NLlK/TI0DH02IS/tnh87bqNlNKjH4VFJdG3m7dau1u2X2pLY4vV1b+PLcYrYzFq5DBIpR44lpUNnU7HvceWbPFvL7xCpaX36ZdfrjU99533PiR5YARdunyFe48bxxbnvvsm3nrj73BxcUFgp454ZuoTOHjoMHr0HYhFny1HlUaD327fgVgigaurK/ceP5jmM1Hvl6lpylPPUUSMirqm9qeElN60cPFSx5632PhDtja2eO78RZSp1UiIV7JtyMrbYkN4W3Q6GOBt0eF5+GouHuy08LbotPBgHtwilmaiAvUn2G35fjuOHmNfSAeA+0zUxvxz3nxy8+pI4yY9Ya0Jx9hiY07mnMHXGzZB7u9nWzEPjrYI1G8/+9bbc5GUqERBwS2b52hyGlsEgM+WrYJWq8Pbb74GYxumR3Jat3j6zFksXb4Kr82aiYAAOerq6mAwGFCr1bKCWU1izboNePX1dxAaGgIigsFggFarw6NjRsDH2wtLPl+JsFAFDEZjg5zXYupTU/DB3Ldb5TX+xe6ZqJMnjoNUKkW8Mg4CRoDSsjIsWLgEoYoQPDp6BGuPOa9bbEyZupy69x5Az7/4ik1vJ4fYIlA/41ijqW7aIdZCeFtsCG+LTgcDvC06PP9/lD48+P9LMG+LTgsPbv9gTmOLer0euXmXYTQaAdQXg2KxGMmqRIhELE23pbx90BZvFNykKGVXCgqLI0VkAnUOjaHEbn2ovLyCtbzltG7RYDBCr9fjxenPYfKkcSAiGI0mm4b4ONmi0WAAGAYBAf64cDEPADBk0ABL8/XaDm60xYzvNuDlV99s+rpOr4dep8fS5asRHNQZly7/jC6REdi8cS18fKxvT2r/2GJNDby9vTBq5FC8NONvyNy2Ce/OeQMnc87g4KEj7L1he3FZm4lqMBhIq9U2PfdEdg55yUPoP0uWcX9xWbLFZ57+Ky5dvoJxk57AXyZPxN9fegGbt2RAKGDQo1tX7j1+MM1tUavV0Wuz36EucV0pIaU3JaT0pnkfLXDe2GLBzVsoLCxCl8gIdODHFi2Et8X68LbI2yIP5sE2hLdFp4UHt3+wQ/ZEvXotH9ev34Cvrw9SklWQSBxwgkbztDa2uHHTFoqIUVGvtMEUFB5Hk6ZMbbHezVJ5y2ls8V5pKT6YNx8D0vsh+9gBvDvnDZSVqVFcfJe1PU62eOFiHsrK1HgkPQ2ncs4gLiYamds2w93dzTFgS7Z448ZNuLi44Mu1G0BEuFFQgJTkJKxavqTFIsrWYrct1tbWQqvVora2FqqkBOzJ3IIZL0zD/oM/Yuu2HaydsXuXm3fe+xB+fn4wm83o07sn3FxdkdqjOyRiMdTqclYwpz1RPT094erqiv0HDyG9f1/s/eEACEBqz+6sYE62aDabadGSZaRUpVJyjzRSqlLpnbnzms4QsfZ2cogt3i0pQX5+ARSKYAQHWT1BlLfFhvC26HQwwNuiw/Pw1Vw82GnhbdFp4cHtH8zJFu/cKUTBrd8gahzgalivGB8Xyz7a1pby9kFbXPz5CvKWK0gRGU+KyAQKj06iQEUM5Zw+y1rechpb/Muk8eif1gdCoQACgRArvliDffsPokMHOWt7nGwxIECOgIB6iE6nQ86Zs+jTKxWKkGDW9jjPRG3MwUNHcKPgJp6YMsmmjjhkT1QAWL9xM5Rx0UhPt+EsCVvAtuyJmpt3CVnHszF54nhIbDlBFA7aE3X1mvWQyWQYN3aMTVCbwGx7oqrLy3H2/AWMGjGUbelgi3C2RYPBCI1GA6nUAxIJ6xbDvC02hLdFp4MB3hYdnoev5uLBTgtvi04LD27/YM5jizqdDtknT6P4bgnkcn9066qCr0+rGzi2DBdbLC+voPGPP0kRMSoaOnIchUUl0sChY+jevVJWW+S0J+rWjJ0k8+1MOzL3EBFRxvZM8vQPpoztmY7T1NZt0R9u7m4oKipGdU0N7t0rhUwqRXCw1ZEY2y+1tV1uFn++goLC4iiha28KCoujTxYstnbhuO9yU1tbi1u/3cbefQcQGxOF6dOeQVxsNDJ37cX1GwXce2xpJurfX5tDSz5fSTK/IDp56jQR1c9E9fQLok8Xfsb9HltctzhpHC7//AvMZjPOnD2PeGUsck7/BDOZERBg9bx62+9x8zQfW1Sry2nqcy9SWFQSpfTsR+HRKnp22gyqqqpi7bFDxhYv5l7CncIiKEKCEa+MtdYEb4sN4W3R6WCAt0WH5+GruXiw08LbotPCg9s/mLMtGgwGnMjOQWFRMYKDAtErtQfEtozEtKW8fdAWNZpqmvLUcxQenUTDR0+g0KhEmj5zFhkMBtby1k5bfJqIiNZ/s5k8fAJp+RdriIjog3nzyT8wgnLzLrGCbb7HjbYYHqZoWhJaUHALIqEQyrj6gytCwxSo09chN+8ya3ucxhb7pfWGRCLBshWrsXPXXmzN2AGJiwQVFZXcwdb2RE3v1xdfLF+M8opKrFy1Fm6urhCLRfD2tr5YEgC3dYtarZa0Ol3TPMy16zaSb8dQyjp+kvuL69f867Q1YwdlbM+kbzZtoaRufalX2mA6eeo0bfougwIVMbTiizVUWVlFj06YQjEJ3an0fhl38INpbot3Coto9NjJFBmbTCk9+1F8ci9at+Fba9/uOFs0m804fyEXFZWVSIhXIkBu1Y15W2wIb4tOBwO8LTo8D1/NxYOdFt4WnRYe3P7BrLZoMplwMfcS9Ho9gPqXpoBhkJQYDze3+kVz585fRPHdEgR1DkRSYrxtZLbytrKyilJ69qPOoTGkiEyg4PA4iohRUX7+DSIimvfRAgoOV1K31HQKiVDS+x9+TGYze3nLCi4rU1NcUk+a8fLrdP3GTbpRcJN+uXqN9Ho9XbiYR/LOETTr9TlUVVVFL8x8lTqGRNHPV66yglnvcZ3BALPZDE9PT/x85QrO/HQOHQICIJFI8N8fj8JgMGLMqBGQyWQYMWwwtFodjmaxb0HLeo8btxvdtiMTV375BVev5WPh4mXI+G49ampq4CKRwMvLEwDgL/eHSCRCaWkpd7CbqytGDh8KhSIYr74yA0eOHce4SU/i+4wdcHGRPPAJ3Bj241lYwb6+Ppj/0ftN+9lGhIVBKvVAeUUlgoM7Q6/To0ytBgDcvVsCo9GIwE4dWcGs97io6C569HkE06a/DLW6HNt27EJ5eQXiYmMw6JF0uLq6YfN3GSgsLML323ZCJvXAgP42zL9le1UbjUaa+8HHFJvYgxJTelNcUg96461/kE6nIyKi5SvhK+hWAAACnUlEQVS/pPjkXqRUpZKqe19atuJLi+8lsscWi4rvIv/6DShCgv8wf7rkXilu376DsDAF/Hx9rfWTt8WG8LbodDDA26LDw9dcYOqPHGNQ/0M1/t2eULM/ZnrgnrYAMwwjEAgEQpFIJCYikclkEpnN5kZ4W34AAkBCodAsEokMZrPZyDCMEYCxkd/04mIYRuji4iIG4EZEUpPJ5EpEYiISElFbwAQAAoGAGIYxMAyjEwqFtQzDaI1Go87Y8KteUWNPXVxcJEQkJSJvIvIG4EFELkQktKfHZrPZzDCMUSgUas1mcyXDMOVCoZAxm81ahmGMIoZhGGH9HoSuRORtNpsDiMi34YcQN4O2+VIDMJpMJp1AIHBruI0kFotNdXV1ZhEARigUipv11peIfIjIFUDjpoh2gYmIGIZxNZvNQoFAYAKgA6BlGMYgAiAwm80iInJrgHs0QJv3Fmg7GA1wAcMwZiLSmUwmqUAgqCIirQgAYzKZRAzDiBvuqaShp/Zc4sY0/x5BwwvUhWEYl4YXrECE+lc2Q0QC/P7eba0Be9L8ajFEJGjgMILmD7Tyx1Fp/mHEOBP8hzYfvv8keDAP5sE82NbQg3/+bHALGMMwZoZh/gD+w0/lQKiZYRhjQw1mBECiVp7kaLCRYRg9wzA1AoFAKxAIDAKBwCx6AGRs+GMAYIb9/zU2HnlkZhhGxzCMRiAQVDEMo2EYRgfA1Ag2AdADqAVQ1QDmcv8b76mRYZhahmEqGYZRN9RberPZ3AQ2AqgBoAZQB0AC7vpiFggERoZhtAzDVDMMUwmgtq6uzgCgSU9EAFwBuAFwwe/Fnr1pVBijUCg0MAyjIyJ9XV2dgYjMQMuSRNjsD9fS5/f3a309bTKbzeZGKMCLOQ9uj+D/B0E2h22cLtSIAAAAAElFTkSuQmCC'
		},
		_container,
		_listMap,
		_mapEl,
		_detailMap,
		_stepTplFunc,
		__ = {},
		api = {
			__: __
		};

	__.initMap = function (form) {
		var mapItems,
			formDOMId;
		formDOMId = __.sanitizeIdAndClass(form.id);
		mapItems = __.getMapItems(formDOMId);
		_mapEl = __.getMapElement(formDOMId);
		_container = jQuery('#' + formDOMId).find('.nm-dealermap');
		_listMap = __.createListMap(_mapEl, mapItems, form);
		_listMap.markers = __.addMarkers(_listMap, mapItems);
		_container.attr('data-view', 'list-map');
	};

	__.getMapElement = function (formDOMId) {
		// #dealermap-001
		return jQuery('.nm-map-canvas', '#' + formDOMId)[0];
	};

	__.createListMap = function (mapEl, mapItems, form) {
		var options;
		if (window.google === undefined) {
			return false;
		}
		options = {
			center: new google.maps.LatLng(
				mapItems[0].latitude,
				mapItems[0].longitude),
			mapTypeId: google.maps.MapTypeId.ROADMAP,
			zoom: __.getListMapZoom(form)
		};
		return new google.maps.Map(mapEl, options);
	};

	__.getListMapZoom = function (form) {
		return 10;
	};

	__.createDetailMap = function (mapEl, data) {
		var map, options;
		if (window.google === undefined) {
			return false;
		}
		options = {
			center: new google.maps.LatLng(data.latitude,
				data.longitude),
			mapTypeId: google.maps.MapTypeId.ROADMAP,
			zoom: _opts.zoomDetailView
		};
		_detailMap = new google.maps.Map(mapEl, options);
		_detailMap.marker = new google.maps.Marker({
			position: new google.maps.LatLng(
				data.latitude, data.longitude),
			map: _detailMap,
			icon: {
				url: _opts.markerDetailUri,
				size: new google.maps.Size(52, 52),
				origin: new google.maps.Point(0, 0),
				anchor: new google.maps.Point(0, 52)
			},
			title: data.name
		});
		return _detailMap;
	};

	__.addMarkers = function (map, mapItems) {
		var i, marker, marker_offset = 0,
			markers = [];
		for (i = mapItems.length - 1; i > -1; i--) {
			marker_offset = i * 30;
			marker = new google.maps.Marker({
				position: new google.maps.LatLng(
					mapItems[i].latitude, mapItems[i].longitude),
				map: map,
				icon: {
					url: _opts.markerUri,
					size: new google.maps.Size(30, 30),
					origin: new google.maps.Point(0, marker_offset),
					anchor: new google.maps.Point(0, 30)
				},
				title: mapItems[i].name
			});
			marker._distance = mapItems[i].distance;
			marker._street = mapItems[i].street;
			marker._zip = mapItems[i].zip;
			marker._city = mapItems[i].city;
			markers.push(marker);
		}
		for (i = markers.length - 1; i > -1; i--) {
			__.addMarkerWindow(markers, i);
			__.addMarkerEvent(markers, i);
		}
		return markers;
	};

	__.addMarkerWindow = function (markers, index) {
		var marker = markers[index];
		// Add window.
		marker.infoWindow = new InfoBox({
			content: '<div><strong>' + marker.title + '</strong><br >' + marker._street + '<br />' + marker._zip + ' ' + marker._city + '<br />' + marker._distance + '</div>',
			pixelOffset: new google.maps.Size(30, 0),
			boxClass: 'nm-map-info-window',
			enableEventPropagation: true,
			closeBoxURL: ""
		});
	};

	__.addMarkerEvent = function (markers, index) {
		var marker = markers[index],
			i;
		// Add event.
		google.maps.event.addListener(marker, 'click', function (e) {
			for (i = markers.length - 1; i > -1; i--) {
				markers[i].infoWindow.close();
			}
			marker.infoWindow.open(_listMap, marker);
		});
	};

	__.getMapItems = function (formId) {
		var mapItems = [];
		// #dealermap-001
		jQuery('.nm-map-list .nm-j-map-dealer', '#' + formId).each(function () {
			var item = jQuery(this);
			mapItems.push({
				latitude: item.attr('data-latitude'),
				longitude: item.attr('data-longitude'),
				name: item.attr('data-name'),
				distance: item.attr('data-distance'),
				street: item.attr('data-street'),
				zip: item.attr('data-zip'),
				city: item.attr('data-city')
			});
		});
		return mapItems;
	};

	__.sanitizeIdAndClass = function (name) {
		return name.replace(/[^a-z0-9_-]/gi, '');
	};

	__.handleFormLoaded = function (data_) {
		// does the form contain a dealer map container?
		// #dealermap-001
		var form = data_.form;

		if (jQuery('#' + data_.id + ' .nm-dealermap').length === 1) {
			// saveguard against missing values
			if (form && !!(form.groups && form.groups[1] && form.groups[1].items && form.groups[1].items[0] && form.groups[1].items[0].namedFields && form.groups[1].items[0].namedFields['Dealer.DealerId'] && form.groups[1].items[0].namedFields['Dealer.DealerId'].options)) {
				__.bindEvents(form);
				__.initMap(form);
			}
		}
	};

	__.handleDealerDetail = function (e) {
		var map, data, mapId, link, listItem, container, dealerId;
		// #dealermap-001
		link = jQuery(e.target);
		dealerId = link.attr('data-dealer-id');
		listItem = link.parents('.nm-j-map-dealer');
		container = link.parents('.nm-dealermap');
		data = {
			latitude: listItem.attr('data-latitude'),
			longitude: listItem.attr('data-longitude'),
			name: listItem.attr('data-name')
		};
		mapId = __.sanitizeIdAndClass(link.attr('data-map-id'));
		map = __.createDetailMap(__.getMapElement(mapId), data);
		container.attr('data-view', 'detail-map');
		container.attr('data-active-dealer', dealerId);
		container.find('.nm-dealer-detail').hide();
		container.find('.nm-dealer-detail[data-dealer-id=' + dealerId + ']').show();
	};

	__.handleRouteFormSwitch = function (e) {
		// #dealermap-001
		var link = jQuery(e.target),
			showRouteForm = link.hasClass('nm-map-show-route-form'),
			container = link.parents('.nm-dealermap');
		if (showRouteForm) {
			container.attr('data-view', 'route-form');
		} else {
			container.attr('data-view', 'detail-map');
		}
	};

	__.handleRouteFormSubmit = function (e) {
		// #dealermap-001
		var form = jQuery(e.target).parents('form'),
			container = form.parents('.nm-dealermap'),
			activeDealerId = container.attr('data-active-dealer'),
			dealerItem = jQuery('#nm-id-dealer-' + activeDealerId),
			formData = form.serializeArray(),
			origin,
			destination,
			directionsRenderer = new google.maps.DirectionsRenderer(),
			directionsService = new google.maps.DirectionsService(),
			map;
		e.preventDefault();
		origin = formData[0].value + ' ' + formData[1].value + ' ' + formData[2].value;
		destination = new google.maps.LatLng(dealerItem.attr('data-latitude'),
			dealerItem.attr('data-longitude'));
		directionsRenderer.setMap(_detailMap);
		directionsRenderer.setPanel(_container.find('.nm-map-route-panel')[0]);
		directionsService.route({
			origin: origin,
			destination: destination,
			travelMode: google.maps.DirectionsTravelMode.DRIVING
		}, function (response) {
			directionsRenderer.setDirections(response);
			_container.attr('data-view', 'route-panel');
		});
	};

	__.handleDealerSet = function (e) {
		var dealerId;
		// #dealermap-001
		dealerId = jQuery(e.target).attr('data-dealer-id');
		if (!!dealerId) {
			jQuery('#nm-id-map-selected-dealer').attr('value', dealerId);
			jQuery('.nm-dealermap button[data-button-action="set-dealer-selected"]').trigger('click');
		}
	};

	__.bindEvents = function () {

		// #dealermap-001

		__.unbindEvents();
		// bind dealer detail links
		__.legacyEventBus.delegate('.nm-map-dealer-detail', 'click', __.handleDealerDetail);
		// show route form
		__.legacyEventBus.delegate('.nm-map-show-route-form, .nm-map-show-dealer-detail',
			'click', __.handleRouteFormSwitch);
		// handle route address submit
		__.legacyEventBus.delegate('.nm-map-route-form button', 'click',
			__.handleRouteFormSubmit);
		// handle submit
		__.legacyEventBus.delegate('.nm-map-dealer-choose', 'click', __.handleDealerSet);
		// back to dealer list
		__.legacyEventBus.delegate('.nm-map-show-dealer-list', 'click',
			__.handleDealerList);
		__.legacyEventBus.delegate('.nm-route-new a', 'click',
			__.handleDealerList);
	};

	__.unbindEvents = function () {
		// unbind dealer detail links
		__.legacyEventBus.undelegate('.nm-map-dealer-detail', 'click');
		// show route form
		__.legacyEventBus.undelegate('.nm-map-show-route-form, .nm-map-show-dealer-detail',
			'click');
		// handle route address submit
		__.legacyEventBus.undelegate('.nm-map-route-form button', 'click');
		// handle submit
		__.legacyEventBus.undelegate('.nm-map-dealer-choose', 'click');
		// back to dealer list
		__.legacyEventBus.undelegate('.nm-map-show-dealer-list', 'click');
		__.legacyEventBus.undelegate('.nm-route-new a', 'click');
	};

	__.handleDealerList = function (e) {
		var formId;
		if(!!e && !!e.preventDefault) {
			e.preventDefault();
		}
		formId = jQuery(e.target).attr('data-form-id');

		// #dealermap-002
		__.initMap(FORM.getForm(formId));
	};

	api.initialize = function () {
		__.legacyEventBus = jQuery('body');
		_stepTplFunc = doT.template('<p>{{=it.instructions}}</p>');
		// bind form.loaded
		// #dealermap-001
		__.eventBus.on(EVENTS.FORM_LOADED, __.handleFormLoaded);
	};

	api.dispose = function dispose () {
		__.eventBus.off(EVENTS.FORM_LOADED, __.handleFormLoaded);
		__.unbindEvents();
	};

	api.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			api.initialize();
			resolve("module/dealermap.js");
		});
	};
	return api;

}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 145 */
/*!*************************************!*\
  !*** ./js/app/module/expertmode.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 152 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! utils/dom */ 2)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, DOM_UTILS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};
	// private vars
	var _oDefaults = {
		sExpertContainerSelector: '.nm-mode-expert',
		sSelectorDelegateClick: 'nm-toggle',
		sToggleClass: 'nm-toggle-open',
		sOptionsListHeadSelector: '.nm-options-list-head',
		sOptionsGroupListWrapperSelector: '.nm-mode-expert-group-list-wrap'
	};

	__.handleToggleClick = function (event_) {
		event_.preventDefault();

		var toggleBtn = event_.target;
		var optionsGroupListWrapperParent = DOM_UTILS.closest(toggleBtn, '.nm-mode-expert-group-wrap ');
		var optionsGroupListWrappers = DOM_UTILS.getElementsArray(_oDefaults.sOptionsGroupListWrapperSelector, optionsGroupListWrapperParent);

		if(toggleBtn.classList.contains(_oDefaults.sToggleClass)){
			toggleBtn.classList.remove(_oDefaults.sToggleClass);
		}else{
			toggleBtn.classList.add(_oDefaults.sToggleClass);
		}

		optionsGroupListWrappers.forEach(function(optionsGroupListWrapper) {

			if(optionsGroupListWrapper.classList.contains('nm-closed')){
				optionsGroupListWrapper.classList.remove('nm-closed');
			}else{
				optionsGroupListWrapper.classList.add('nm-closed');
			}
		});
		__.eventBus.emit(EVENTS.CONTENT_RESIZE);
	};

	//helper method to get item with a selected state
	__.itemIsSelected = function(item_) {
		var str = 'nm-j-configurator-status_';
		var ind = item_.className.indexOf(str);
		if (ind < 0) {
			return false;
		}
		//get staus code
		var statusCode = item_.className.split(str)[1].split(' ')[0];
		//fourth position in the status code is equal 1=>selected?
		if (statusCode.substr(3, 1) === "1") {
			return true;
		} else {
			return false;
		}
	};

	__.itemIsSelectedStandard = function(item_) {
		var statusCode,
			pattern,
			str = 'nm-j-configurator-status_',
			ind = item_.className.indexOf(str);
		if (ind < 0) {
			return false;
		}
		//get staus code
		statusCode = item_.className.split(str)[1].split(' ')[0];
		pattern = /1001[0,1]/;
		return pattern.test(statusCode);
	};
	__.getSelectedItemsFromList = function(list_) {
		var items = DOM_UTILS.getElementsArray("li[class*='nm-j-configurator-status_']", list_.parentNode),
			returnItems = [];

		items.forEach(function(item_) {
			//item is selected and not standart
			var isSelected = __.itemIsSelected(item_);
			var isStandard = __.itemIsSelectedStandard(item_);

			if(isSelected && !isStandard) {
				returnItems.push(item_);
			}
		});
		return returnItems;
	};
	__.updateListCounter = function(list_) {
		var title,
			counterText,
			selected = __.getSelectedItemsFromList(list_).length,
			counter = DOM_UTILS.getElement('span.nm-selected-items', list_);

		if(!DOM_UTILS.isElement(counter)){
			return;
		}

		counterText = selected > 0 ? selected : '';
		counter.textContent = counterText;

		if (selected > 0 ) {
			title = counterText + ' ';
			title += (selected === 1) ? counter.getAttribute('data-text-selected-single') : counter.getAttribute('data-text-selected-multi');
			counter.parentNode.setAttribute('title', title);
			counter.parentNode.classList.remove('nm-hidden');
		} else {
			counter.parentNode.setAttribute('title', '');
			counter.parentNode.classList.add('nm-hidden');
		}
	};
	__.updateLists = function() {
		var expertContainer = DOM_UTILS.getElementsArray(_oDefaults.sExpertContainerSelector);
		var optionsListHeads = DOM_UTILS.getElementsArray(_oDefaults.sOptionsListHeadSelector);

		//Expert MOde available?
		if (expertContainer.length < 1) {
			return;
		}

		//loop through all lists
		optionsListHeads.forEach(function(elem) {
			//var list = jQuery(this);
			//update seleected-items counter
			__.updateListCounter(elem);
		});
	};

	//handle layer loaded (updates initial conuters)
	__.handleLayerLoaded = function() {
		//upddate all lists
		__.updateLists();
	};

	/**
	 * Add Module-specific events
	 * @return {Void}
	 */
	__.addEvents = function() {
		__.domEventDelegate.on('click', _oDefaults.sOptionsListHeadSelector, __.handleToggleClick);
		__.eventBus.on(EVENTS.DOM_UPDATED, __.handleLayerLoaded);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handleLayerLoaded);
	};


	/**
	 * Constructor
	 * @returns {void}
	 */
	__.initialize = function() {
		__.addEvents();
		__.updateLists();
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/expertmode.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 146 */
/*!*******************************************!*\
  !*** ./js/app/module/summary-techdata.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 152 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/common */ 18),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! utils/polling */ 17)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(COMMON, EVENTS, DPU_API, DOM_UTILS, POLLING) { //eslint-disable-line max-params
	'use strict';
	// private vars
	var __ = {},
		exports = {
			__: __
		};

	__.oDefaults = {
		ssButtonCompactMode: '.nm-summary-list-toggle-btn',
		sSelectorSummaryTechDataContainer: '.nm-summary-list-techdata-container',
		sSelectorSummaryContainer:'.nm-md-summary-engine',
		sSelectorSummaryListContainer:'.nm-summary-list-container.nm-techdata-container',
		sSelectorTechRow: '.nm-techrow',
		sSelectorCompactMode: 'nm-is-compact-mode',
		hiddenClass: 'nm-hidden',
		maxModelsinfoWaitTime: 30000
	};

	__.handlePageLoaded = function(payload) {
		var context = (!!payload && !!payload.domElement) ? payload.domElement[0] : document;
		__.bindClicks(context);
		__.patchMotorInfo(context);
	};
	__.bindClicks = function(context_) {
		__.summaryTechDataContainer = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorSummaryTechDataContainer, context_);
		__.buttonCompactMode = DOM_UTILS.getElementsArray(__.oDefaults.ssButtonCompactMode, context_);
		//__.removeEvents();

		if (__.summaryTechDataContainer.length > 0 && __.buttonCompactMode.length > 0) {
			__.domDelegate.off('click', __.oDefaults.ssButtonCompactMode, __.handleToggleBtnClick);
			__.domDelegate.on('click', __.oDefaults.ssButtonCompactMode, __.handleToggleBtnClick);
		}
	};
	__.handleLayerLoaded = function(payload) {
		var context = (!!payload && !!payload.element) ? payload.element : document;
		__.bindClicks(context);
		__.patchMotorInfo(context);
	};

	__.handleConfigurationUpdates = function() {
		POLLING.wait(DPU_API.isInitialized, __.oDefaults.maxModelsinfoWaitTime).then(function() {
			__.patchMotorInfo(document);
		});
	};

	__.initialize = function() {
		__.addEvents();
		__.handlePageLoaded();
	};

	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handleLayerLoaded);
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleConfigurationUpdates);

	};
	//handle compact mode switch
	__.handleToggleBtnClick = function(event_) {
		event_.preventDefault();

		var elem = event_.target;
		var container = DOM_UTILS.closest(elem, __.oDefaults.sSelectorSummaryTechDataContainer);

		if(DOM_UTILS.isElement(container)){
			if(container.classList.contains(__.oDefaults.sSelectorCompactMode)){
				container.classList.remove(__.oDefaults.sSelectorCompactMode);
			} else {
				container.classList.add(__.oDefaults.sSelectorCompactMode);
			}
		}
	};

	/**
	 * patch all motor infos for the current model
	 * updates all DOM elements with the classname prefix 'nm-j-summary-text-'
	 */
	__.patchMotorInfo = function(context_) {
		var context = context_;
		var summaryContainer = DOM_UTILS.getElement('[data-template="summary"]', context);
		var info,
			i,
			elems,
			infoKey,
			currentModel = DPU_API.getEngine(),
			currentModelInfo = __.getMotorTechdata(currentModel);

		if (DOM_UTILS.isElement(summaryContainer)) {
			if(currentModelInfo){
				for(infoKey in currentModelInfo) {
					info = currentModelInfo[infoKey];
					elems = DOM_UTILS.getElementsArray('.nm-j-summary-text-' + infoKey, summaryContainer);
					for(i = 0; i < elems.length; i++) {
						if(DOM_UTILS.isElement(elems[i])){
							__.patchDOMfragment(elems[i], info);
						}
					}
				}
			}
		}
		__.hideInvisibleCategories();
	};

	//merge MotorInfo with TechData from current configuration if available
	__.getMotorTechdata=function (currentModel_) {
		var modelInfo = DPU_API.getModelsInfo(currentModel_);
		var techData = DPU_API.getTechdata();
		var motorTechData = COMMON.extend({}, modelInfo, techData);
		return motorTechData;
	};

	//update DOM text fragments
	__.patchDOMfragment = function(elem_, content_) {
		var surroundingTechRow = DOM_UTILS.closest(elem_, __.oDefaults.sSelectorTechRow);

		if (DOM_UTILS.isElement(elem_)) {
			if (!!content_) {
				//show item (remove class __.oDefaults.hiddenClass if available)
				if (!!surroundingTechRow && !!surroundingTechRow.classList) {
					surroundingTechRow.classList.remove(__.oDefaults.hiddenClass);
				}
				elem_.innerHTML = content_;
			} else {
				//add class __.oDefaults.hiddenClass to hide item from list
				if (!!surroundingTechRow && !!surroundingTechRow.classList) {
					surroundingTechRow.classList.add(__.oDefaults.hiddenClass);
				}
			}
		}
	};
	//hide table is no visible <dl> available
	__.hideInvisibleCategories = function() {
		var container = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorSummaryListContainer + ', ' +__.oDefaults.sSelectorSummaryContainer),
			visibleElements,
			i,
			j,
			hiddenCount;

		if(container.length > 0){
			for (i = 0; i < container.length; i++){
				hiddenCount = 0;
				visibleElements = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorTechRow, container[i]);

				for (j = 0; j < visibleElements.length; j++){
					if(visibleElements[j].classList.contains(__.oDefaults.hiddenClass)){
						hiddenCount++;
					}
				}


				if (visibleElements.length !== hiddenCount) {
					container[i].classList.remove(__.oDefaults.hiddenClass);
				} else {
					container[i].classList.add(__.oDefaults.hiddenClass);
				}
			}
		}
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve('module/summary-techdata.js');
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 147 */
/*!******************************!*\
  !*** ./js/app/module/poa.js ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global vee24 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (DOM_UTILS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};
	// private vars
	__.poaHandler = function (event) {

		event.preventDefault();

		try {
			// #poa-002
			if (!!vee24) {
				vee24.api.helpMe();
			}
		} catch (e) {
			console.warn(e);
		}
	};

	__.cookieHandler = function (event) {

		event.preventDefault();

		try {
			if (!!blueConicClient) {
				blueConicClient.event.publish('optin_optout_openPermissionLevelSelector');
			}

		} catch (e) {
			console.warn(e);
		}

	};

	__.addEvents = function () {

		// #poa-001
		__.domEventDelegate.on('click', '.nm-j-poa', __.poaHandler);
		__.domEventDelegate.on('click', '.nm-j-ext-cookie', __.cookieHandler);
	};

	__.initialize = function () {
		__.addEvents();
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/poa.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 148 */
/*!*********************************!*\
  !*** ./js/app/module/iframe.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! events */ 0), __webpack_require__(/*! module/pattern-matching/pattern-matching */ 12)], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, EVENTS, PATTERN) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 *
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 *
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {
			'module': '.nm-j-iframe'
		};
		 //reference to the global eventEmitter
		__.eventBus = null;

		/**
		 * add listeners to events of interest for this modeule
		 * @returns {void}
		 */
		__.addEvents = function() {
			__.eventBus.on(EVENTS.APP_INITIALIZED, __.setIframeUrl);
			__.eventBus.on(EVENTS.PAGE_LOADED, __.setIframeUrl);
			__.eventBus.on(EVENTS.LAYER_LOADED, __.setIframeUrl);
		};

		/**
		 * get iframe container
		 * @returns {HTMLElement}
		 **/
		__.getIframeContainer = function(context_) {
			if (context_) {
				return [].slice.call(context_.querySelectorAll(__.oDefaults.module));
			}
			return false;
		};

		/**
		 * get context
		 * @returns {HTMLElement}
		 **/
		__.getContext = function(data_) {
			var contextElement;
			if(data_ && !data_.context) {
				contextElement=(data_.domElement?data_.domElement[0]:data_.element);
			}
			else {
				contextElement = document;
			}
			return contextElement;
		};
		/**
		 * set iframe url
		 * @returns {void}
		 **/
		__.setIframeUrl = function(data) {
			var	context = __.getContext(data),
				iFrames;

			iFrames = __.getIframeContainer(context);
			if (iFrames && iFrames.length>0) {
				iFrames.forEach(function(iFrame_) {
					var patterUrl, defaultUrl, iframeHeight;
					patterUrl = iFrame_.getAttribute('data-pattern') || '';
					defaultUrl = iFrame_.getAttribute('data-src') || '';
					iframeHeight = iFrame_.getAttribute('data-height') || '0';

					if (!!patterUrl && !!defaultUrl) {
						PATTERN.getReplacedUrl(patterUrl, defaultUrl).then(function(url) {
							console.log("PATTERN URL: ",url);
							iFrame_.innerHTML = '<iframe src="' + url + '" height="' + iframeHeight + '" frameborder="0" ></iframe>';
						}).catch(function(err){
							console.error(err);
						});
					}
				});
			}
		};

		exports.initializePromise = function(globalEventBus) {
			return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
				__.addEvents();
				resolve('iframe.js');
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 149 */
/*!****************************************!*\
  !*** ./js/app/module/iframe-height.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! core/layer/animation */ 39)], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, LAYER_ANIMATION) { //eslint-disable-line max-params
	"use strict";
	//Private Methods
	/**
	 * Private API
	 *
	 * @var {Object} __
	 */
	var __ = {},
		/**
		 * Public API
		 *
		 * @var {Object} exports
		 */
		exports = {
			'__': __
		};
	 //reference to the global eventEmitter
	__.eventBus = null;

	__.getIframeForUrl = function (url) {
		var frame = document.querySelector('iframe[src*="' + url + '"]');
		var a;
		var newUrl;

		if( frame === null ) {
			a = document.createElement('a');
			a.href = url;
			newUrl = a.pathname;
			frame = document.querySelector('iframe[src*="' + newUrl + '"]');
		}

		return jQuery(frame);
	};

	__.toggleShader = function(show, url) {
		var $iframe = __.getIframeForUrl(url);
		var headerHeight = jQuery('.nm-header').height();
		var responsiveMobile = 479;
		var parentHeight = window.document.body.offsetHeight;
		var iframeHeight = $iframe.height();
		if(show) {
			$iframe.css({
				"zIndex": 101,
				"position": 'relative'
			});
			if ((window.document.body.offsetWidth <= responsiveMobile)||(parentHeight - 70 <= iframeHeight)) {
				$iframe.css({
					"top": -headerHeight
				});
			}
			//Quickfix NEMOBA-7405 - COEXIST WITH  NEMOBA-6604
			jQuery('body').addClass('nm-carpark-shader-visible');
			LAYER_ANIMATION.showShader();
		} else {
			//Quickfix NEMOBA-7405 - COEXIST WITH  NEMOBA-6604
			jQuery('body').removeClass('nm-carpark-shader-visible');
			LAYER_ANIMATION.hideShader();
			$iframe.css({
				"position": 'static',
				"top": 0
			});
		}
	};

	__.parseJsonDataFromEvent = function (event) {
		var data;
		try {
			data = window.JSON.parse(event.data);
		} catch(e) {
			console.warn(e);
		}
		return data;
	};

	__.removeClassFromModule = function(iFrame_) {
		var $module, moduleClasses, className, iFrame = iFrame_;
		if(iFrame) {
			$module = iFrame_.closest('.nm-md-iframe')[0];
			if ($module) {
				moduleClasses = $module.classList;

				[].slice.call(moduleClasses).forEach(function(module, index){
					var match = module.indexOf("nm-md-iframe-pageformat-")>=0;
					if(match){
						className = moduleClasses[index];
						moduleClasses.remove(className);
					}
				});
			}
		}
	};

	__.setAndAnimateIframeHeight = function (origin, height) {
		var $iframe = __.getIframeForUrl(origin);

		__.removeClassFromModule($iframe);

		height = parseInt(height, 10) + 'px';
		//$iframe.style.height = height;

		$iframe.animate({'height': height}, 400, 'swing', function() {
			$iframe.animate({
				'opacity': 1
			});
		});

	};


	__.setIframeHeight = function (origin, height, url) {
		var $iframe = __.getIframeForUrl(url);

		__.removeClassFromModule($iframe);

		height = parseInt(height, 10) + 'px';
		//$iframe.style.height = height;
		$iframe.height(height);

	};

	__.handler = function (event) {
		var data;
		if(typeof event==='undefined' || typeof event.data ==='undefined') {
			return;
		}

		data = __.parseJsonDataFromEvent(event);

		if(!!data){
			if (!!data.originurl && !!data.layerExternalizerBridgeSetHeight) {

				__.setAndAnimateIframeHeight(data.originurl, data.layerExternalizerBridgeSetHeight);

			} else if( !!data.height) {

				__.setIframeHeight(event.origin, data.height, data.url);

			} else if(!!data.shader) {

				__.toggleShader(data.shader === "show", data.url);

			}
		}

	};

	__.addEvents = function () {

		if (window.addEventListener) {
			window.addEventListener("message", __.handler, false);
		} else {
			window.attachEvent("onmessage", __.handler);
		}

	};


	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/iframe-height.js");
		});
	};
	return exports;

}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ }),
/* 150 */
/*!************************************************************!*\
  !*** ./js/app/module/pattern-matching/pattern-audicode.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! module/pattern-matching/pattern-matching */ 12), __webpack_require__(/*! module/audicode */ 30)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, PATTERN, AUDICODE) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 *
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 *
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {};
		__.pendingPromise;
		__.resolved = false;

		//reference to the global eventEmitter
		__.eventBus = null;
		__.register = function() {
			PATTERN.register('audicode', __.getAudiCode);
			PATTERN.register('conf_audicode', __.getAudiCode);
		};

		/**
		 * checks if an audicode is currently getting fetched
		 * and returns this promise -> to prevent multiple
		 * loadAudiCode calls / different audicodes
		 */
		__.getAudiCode = function() {
			if(!__.resolved && !!__.pendingPromise) {
				return __.pendingPromise;
			} else {
				__.pendingPromise = __.fetchAudiCode().catch(function(error) {
					__.resolved = true;
					__.pendingPromise = null;
					return error;
				}).then(function(audicode) {
					__.resolved = true;
					__.pendingPromise = null;
					return audicode;
				});
				return __.pendingPromise;
			}
		};

		__.fetchAudiCode = function() {
			return new Promise(function(resolve, reject) {
				var promise = AUDICODE.loadAudiCode();
				promise.then(function(data) {
					resolve(data);
				}, function(err) {
					reject(err);
					console.error(err);
				});
			});
		};

		exports.initializePromise = function(globalEventBus) {
			return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
				__.register();
				resolve('pattern-matching/pattern-audicode.js');
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ }),
/* 151 */
/*!*************************************************************!*\
  !*** ./js/app/module/pattern-matching/pattern-partnerId.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! module/pattern-matching/pattern-matching */ 12), __webpack_require__(/*! module/iph */ 23)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, PATTERN, IPH) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 *
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 *
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {};
		 //reference to the global eventEmitter
		__.eventBus = null;

		__.register = function () {
			PATTERN.register('partnerid', __.getPartnerId);
		};

		__.getPartnerId = function() {
			var data;
			return new Promise(function(resolve, reject) {
				data = IPH.inIPHMode(); // returns iphdealerBNR
				if(data) {
					resolve(data);
				}
				else {
					reject(new TypeError("load pattern -partnerid- failed"));
				}
			});
		};

        exports.initializePromise = function(globalEventBus) {
            return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
				__.register();
                resolve('pattern-matching/pattern-partnerId.js');
            });
        };

		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 152 */
/*!**************************************************************!*\
  !*** ./js/app/module/pattern-matching/pattern-leadsource.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! module/pattern-matching/pattern-matching */ 12), __webpack_require__(/*! module/iph */ 23)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, PATTERN, IPH) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 *
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 *
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {
			'sourceName': 'IPH'
		};
		 //reference to the global eventEmitter
		__.eventBus = null;

		__.register = function () {
			PATTERN.register('lead_source', __.getLeadSource);
		};

		__.getLeadSource = function() {
			return new Promise(function(resolve, reject) {
				// if in IPH mode resolve with IPH string
				if(IPH.inIPHMode()) {
					resolve(__.oDefaults.sourceName);
				}
				else {
					reject(new TypeError("load pattern -leadsource- failed"));
				}
			});
		};

        exports.initializePromise = function(globalEventBus) {
            return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
				__.register();
                resolve('pattern-matching/pattern-leadsource.js');
            });
        };

		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 153 */
/*!*****************************************************************!*\
  !*** ./js/app/module/pattern-matching/pattern-configuration.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! module/pattern-matching/pattern-matching */ 12), __webpack_require__(/*! configurator/dpu-api */ 3)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, PATTERN, CONFIGURATOR_API) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 *
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 *
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {};
		//reference to the global eventEmitter
		__.eventBus = null;
		__.register = function() {
			PATTERN.register('conf_finance', __.getConfigurationAttribute('financeProductName'));
			PATTERN.register('conf_name', __.getConfigurationAttribute('carlineName'));
			PATTERN.register('conf_id', __.getConfigurationAttribute('carline'));
			PATTERN.register('conf_description', __.getConfigurationAttribute('description'));
			PATTERN.register('conf_modelyear', __.getConfigurationAttribute('modelyear'));
			PATTERN.register('conf_power_primary', __.getModelInfoAttribute('power-primary'));
			PATTERN.register('conf_power_secondary', __.getModelInfoAttribute('power-secondary'));
		};
		__.getConfigurationAttribute = function(attr_) {
			return function() {
				var configuration = CONFIGURATOR_API.getConfiguration();
				return new Promise(function(resolve, reject) {
					if (!!configuration && !!configuration[attr_]) {
						resolve(configuration[attr_]);
					} else {
						reject(attr_ + " was not found within the configuration");
					}
				});
			};
		};
		__.getModelInfoAttribute = function(attr_) {
			return function() {
				var modelInfo = CONFIGURATOR_API.getCurrentModelInfo();
				return new Promise(function(resolve, reject) {
					if (!!modelInfo && !!modelInfo[attr_]) {
						resolve(modelInfo[attr_]);
					} else {
						reject(attr_ + " was not found within the model Info");
					}
				});
			};
		};
		exports.initializePromise = function(globalEventBus) {
			return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
				__.register();
				resolve('pattern-matching/pattern-configuration.js');
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 154 */
/*!******************************************!*\
  !*** ./js/app/module/audicode-iframe.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* eslint max-params: [2, 5] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/ajax */ 6),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! configurator/dpu-model */ 31),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! module/audicode */ 30)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(AJAX, CONFIGURATOR_API, DPU_MODEL, EVENTS, AUDICODE) {
	'use strict';
	//Private Methods
	var __ = {},
		//Public API
		exports = {
			__: __
		};
	__.eventBus = null;
	__.dispose = function() {
		__.removeEvents();
	};
	__.addEvents = function() {
		//horcht auf neue Seite bzw. neuer Layer
		__.eventBus.on(EVENTS.LAYER_LOADED, __.loadAudiCode);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.loadAudiCode);
	};
	__.removeEvents = function() {
		__.eventBus.off(EVENTS.LAYER_LOADED, __.loadAudiCode);
		__.eventBus.off(EVENTS.PAGE_LOADED, __.loadAudiCode);
	};
	__.loadAudiCode = function() {
		if (document.querySelector(".nm-audicode-iframe")) {
			//holt neuen Audi Code von der DPU (, wenn es noch keinen lokalen gibt)
			AUDICODE.loadAudiCode().then(__.setAudiCodeUrl).catch(function(err) {
				console.warn("AudiCode iFrame Error");
				__.resetAudiCodeUrlonError();
			});
		}
	};
	__.setAudiCodeUrl = function(data) {
		var iframeUrl,
			iFrame = document.querySelector(".nm-audicode-iframe");
		if (data && iFrame) {
			//dann: holt data-url und ersetzt {audicode} mit dem erhaltenen Audi Code
			iframeUrl = iFrame.getAttribute('data-url') || '';
			iframeUrl = iframeUrl.replace('{audicode}', data);
			//schreibt <iframe> in div. nm-audicode-iframe mit der URL
			iFrame.innerHTML = '<iframe src="' + iframeUrl + '"></iframe>';
		}
	};
	__.resetAudiCodeUrlonError = function() {
		var iFrame = document.querySelector(".nm-audicode-iframe"),
			iframeUrl;
		if (iFrame) {
			//dann: holt data-url und entfernt den {audicode} parameter aus der URL
			iframeUrl = iFrame.getAttribute('data-url') || '';
			iframeUrl = iframeUrl.replace('audicode={audicode}', '');
			//schreibt <iframe> in div. nm-audicode-iframe mit der URL
			iFrame.innerHTML = '<iframe src="' + iframeUrl + '"></iframe>';
		}
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/audicode-iframe.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 155 */
/*!******************************************!*\
  !*** ./js/app/module/recommendations.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 8 */

/**
 * Parses and displays 'recommendations' for a given configuration. (NEMOBA-621)
 *
 * author:  Frank Schiemann <fs@dasburo.com>
 * version: 2.0
 * ticket:  https://imt.dasburo.com/browse/NEMOBA-621
 *
 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
    __webpack_require__(/*! jquery */ 1),
    __webpack_require__(/*! doT */ 7),
    __webpack_require__(/*! configurator/dpu-api */ 3),
    __webpack_require__(/*! events */ 0),
    __webpack_require__(/*! core/template */ 5),
    __webpack_require__(/*! text!templates/recommendations-list.tpl */ 156),
    __webpack_require__(/*! text!templates/recommendations-empty.tpl */ 157)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, doT, API, EVENTS,TPL_RENDERER,TEMPLATE_LIST,TEMPLATE_EMPTY) {//eslint-disable-line max-params
    'use strict';
    var
    //Private
    __ = {},
        //Public API
        exports = {
            __: __
        };

    __.oDefaults={

        // the query selector to insert rendered html
        sSelectorTemplateClass :'.nm-recommendation',

        // the query selector to
        sSelectorTabClass:'.nm-j-link-recommendations'
    };
    // get the template function from doTJS
    __.tplFunc = null;

    // doT tpl func for no recommendations
    __.tplFuncNoRecs = function() { return ''; };


    // private helper


    /*
     * Find elementId in DOM or return empty string.
     */
    __.getTplString = function (elementSelector) {
        var element = $(elementSelector);
        if(element.length > 0) {
            return element.html();
        }
        return '';
    };


    __.showTab = function _show () {
        jQuery('body').addClass('nm-has-recommendations');
    };

    __.hideTab = function _hide () {
        jQuery('body').removeClass('nm-has-recommendations');
    };

    __.tabAvailable = function _available () {
        return (jQuery(__.oDefaults.sSelectorTabClass).length > 0);
    };


    __.containerAvailable = function _available () {
        return (jQuery(__.oDefaults.sSelectorTemplateClass).length > 0);
    };





    __.initialize = function () {
        __.addEvents();
    };


    __.dispose = function _dispose () {
        __.disposeEvents();
    };


    __.parse = function (recommendations) {

        var items = API.getItems()||{};

        var r = { recommendations: [] };

        // create a clone to avoid altering passed reference
        var clone = JSON.parse(JSON.stringify(recommendations));

        var mbvItemsMap = {};

        jQuery.each(items, function (index, e) {
            mbvItemsMap[e.mbvId] = e;
        });

        var list = [];

        jQuery.each(clone, function (index, rec) {

            if (rec === null) { return false; } // tmp fix

            rec.recommendation = jQuery.map(rec.recommendation, function (k) {

                var result = null;
                var isShortMbvId = !!mbvItemsMap[k.id];

                if (isShortMbvId) {
                    result = mbvItemsMap[k.id];
                }
                else {
                    result = API.getItem(k.id);
                }

                // console.log('Recommendations::parse(rec) -- short: ', isShortMbvId, result);

                return result;
            });

            rec.chosen = jQuery.map(rec.chosen, function (k) {

                var result = null;
                var isShortMbvId = !!mbvItemsMap[k.id];

                if (isShortMbvId) {
                    result = mbvItemsMap[k.id];
                }
                else {
                    result = items[k.id];
                }

                // console.log('Recommendations::parse(chosen) -- short: ', isShortMbvId, result);

                return result;
            });

            list.push(rec);
        });

        // merge arrays
        jQuery.each(list, function (index, e) {
            Array.prototype.push.call(r.recommendations, e);
        });

        r.recommendations = list;
        r.carlineName = API.getCarlineName();
        return r;
    };


    __.render = function () {
        var recommnds = API.getRecommendations();

        var result = __.parse(recommnds);
        var htmlString=TPL_RENDERER.render(TEMPLATE_LIST, result);
        htmlString=htmlString.replace("{{=it.carlineName}}",result.carlineName.toUpperCase());
        jQuery(__.oDefaults.sSelectorTemplateClass).html(htmlString);
    };


    __.renderNoRecommendations = function () {
        var data=API.getConfiguration();
        var htmlString=TPL_RENDERER.render(TEMPLATE_LIST, data);
        htmlString=htmlString.replace("{{=it.carlineName}}",(API.getCarline()||"").toUpperCase());
        jQuery(__.oDefaults.sSelectorTemplateClass).html(htmlString);
        jQuery(__.oDefaults.sSelectorTemplateClass).html(__.tplFuncNoRecs(data));
    };


    __.addEvents = function () {

        __.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleConfigUpdate);
        __.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
        __.eventBus.on(EVENTS.PAGE_LOADED, __.handleLayerLoaded);
        __.eventBus.on(EVENTS.LAYER_LOADED,  __.handleLayerLoaded);
        __.eventBus.on(EVENTS.LAYER_CLOSED,  __.handleLayerClosed);
    };


    __.disposeEvents = function () {

        __.eventBus.off(EVENTS.CONFIG_UPDATE, __.handleConfigUpdate);
        __.eventBus.off(EVENTS.PAGE_LOADED, __.handlePageLoaded);
        __.eventBus.off(EVENTS.PAGE_LOADED, __.handleLayerLoaded);
        __.eventBus.off(EVENTS.LAYER_LOADED,  __.handleLayerLoaded);
        __.eventBus.off(EVENTS.LAYER_CLOSED,  __.handleLayerClosed);
    };


    __.recommendationsAvailable = function () {
        return API.isConfigurable()&& API.getRecommendations().length;
    };


    __.updateView = function () {

        if (__.containerAvailable()) {
            // noop - do nothing to left the recommendation intact in layer
            return;
        }
        else {
            if (__.recommendationsAvailable()) {
                __.showTab();
                __.render();
            }
            else {
                __.hideTab();
            }
        }
    };


    // event handler

    __.handleConfigUpdate = function () {
        __.updateView();
    };


    __.handlePageLoaded = function () {
        __.updateView();
    };


    __.handleLayerClosed = function () {
        if (!__.recommendationsAvailable()) {
            __.hideTab();
        }
    };


    __.handleLayerLoaded = function () {
        /*
         * There are no recommendations, but the recommendations layer
         * is opened, so show the tab and render the appropriate tpl.
         */
        if (!__.recommendationsAvailable() && __.containerAvailable()) {
            __.showTab();
            __.renderNoRecommendations();
        }
        /*
         * Container is present, recommendations available. Render rec view.
         */
        else if (__.recommendationsAvailable() && __.containerAvailable()) {
            __.showTab();
            __.render();
        }
        /*
         * Container is present, recommendations available. Render rec view.
         */
        else if (__.recommendationsAvailable() && __.tabAvailable()) {
            __.showTab();
        }
    };


	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/recommendations.js");
		});
	};

    return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 156 */
/*!*************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/recommendations-list.tpl ***!
  \*************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<h2 class=\"nm-el-hdl nm-el-hdl-02 nm-at-hdl-b\">\n\t{{=window.i18n['recommendations-layer.your-recommendations-for']}}\n</h2>\n<p class=\"nm-el-pg nm-el-pg-03\">\n\t{{=window.i18n['recommendations-layer.message']}}\n</p>\n{{~it.recommendations :value :index}}\n<div class=\"nm-recommendation-container nm-recommendation-{{=index+1}}\">\n\t<div class=\"nm-module nm-md-recommendations\">\n\t\t<strong class=\"nm-el-hdl nm-el-hdl-04\">\n\t\t\t{{=window.i18n['recommendations-layer.recommendation-index']}} {{=index+1}}\n\t\t</strong>\n\t\t<p class=\"nm-recommendation-title nm-el-pg nm-el-pg-03\">\n\t\t\t{{=value.explanation}}\n\t\t</p>\n\t\t{{~value.recommendation :r}}\n\t\t<div class=\"nm-module nm-md-teaser-equipment nm-md-teaser clearfix nm-j-configurator-item nm-j-configurator-status_{{=r.status}}\"\n\t\tdata-configurator-id=\"{{=r.id}}\">\n\t\t\t<div class=\"nm-md-teaser-img\">\n\t\t\t\t<img src=\"{{=r.image}}\" alt=\"\" />\n\t\t\t</div>\n\t\t\t<div class=\"nm-md-teaser-copy\">\n\t\t\t\t<strong class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">\n\t\t\t\t\t{{=r.name}}\n\t\t\t\t</strong>\n\t\t\t\t<div class=\"nm-info-wrap\">\n\t\t\t\t\t<a class=\"nm-info nm-image-replace nm-layerLink\" href=\"{{=r.url}}\">{{=window.i18n['more-information']}}</a>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"nm-price nm-el-hdl nm-el-hdl-04\">\n\t\t\t\t\t{{=r.price}}\n\t\t\t\t</span>\n\t\t\t\t<div class=\"nm-el-pg nm-el-pg-02\">\n\t\t\t\t\t{{=r.description || \"No descriptive text found\"}}\n\t\t\t\t</div>\n\t\t\t\t<a class=\"nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click\" href=\"#\">\n\t\t\t\t    <span class=\"nm-at-btn-state01\">{{=window.i18n['configuration.add-item']}}</span>\n\t\t\t\t    <span class=\"nm-at-btn-state02\">{{=window.i18n['configuration.item-included']}}</span>\n\t\t\t\t    <span class=\"nm-at-btn-state03\">{{=window.i18n['configuration.remove-item']}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t\t{{~}} {{? 0 !== value.chosen.length}}\n\t\t<p class=\"nm-el-pg nm-el-pg-03 nm-at-pg-b\">\n\t\t\t{{=window.i18n['recommendations-layer.explanation']}}:\n\t\t</p>\n\t\t{{~value.chosen :c}}\n\t\t<ul class=\"nm-options-list\">\n\t\t\t<li class=\"clearfix\">\n\t\t\t\t<div class=\"nm-options-cell-additional\">\n\t\t\t\t\t<div class=\"nm-list-item-text nm-el-pg nm-el-pg-04\">\n\t\t\t\t\t\t{{=c.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"nm-info-wrap\">\n\t\t\t\t\t<a class=\"nm-info nm-layerLink\" href=\"{{=c.url}}\" title=\"#I18N(\" nemo.ui.common.more-information\" \"Mehr Informationen \")\"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"nm-price nm-el-pg nm-el-pg-04 clearfix\">\n\t\t\t\t\t<span class=\"nm-price\">\n\t\t\t\t\t\t{{=c.price}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t\t{{~}} {{?}}\n\t</div>\n</div>\n{{~}}\n"

/***/ }),
/* 157 */
/*!**************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/recommendations-empty.tpl ***!
  \**************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "\t{{? it.carlineName}}\n\t\t<h2 class=\"nm-h2\">{{=window.i18n['recommendations-layer.your-recommendations-for']}}</h2>\n\t{{?}}\n\t<p class=\"nm-c2\">{{=window.i18n['recommendations-layer.no-recommendations-available']}}</p>\n"

/***/ }),
/* 158 */
/*!******************************************!*\
  !*** ./js/app/module/preconfs-teaser.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 152 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! configurator/dpu-controller */ 11),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! router */ 8)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, CONFIGURATOR_API, DPU_CONTROLLER, EVENTS, ROUTER) {//eslint-disable-line max-params
	"use strict";
	// private vars
	var __ = {},
		exports = {
			__: __
		};
	__.oDefaults = {
		sPreconfTeaserSelector: '.nm-md-preconfs-teaser',
		sPreconfsSlide: '.nm-md-preconfs-teaser-slide',
		sButtonSelector: '.j-preconfs-submit',
		sButtonConfigurationClass: 'nm-md-preconfs-teaser-custom-configuration',
		sSelectorDotsNavi: 'ul.nm-dots-navi',
		sSelectorTeaserTemplates: 'j-preconfs-teaser-tpl-',
		sDotsSelectorDelegateClick: 'li.nm-dot',
		sMenuSelectedClass: 'nm-selected',
		sSelectorTeaserContainer: '.nm-peephole'
	};

	__.selectedIndex = 0;
	__.maxIndex = 0;
	__.startPos = {
		x: 0,
		y: 0
	};
	__.sensitivity = 40;
	__.direction = 'left';
	__.isAnimating = false;
	__.xDirection = "none";
	__.yDirection = "none";
	__.deltaX = 0;
	__.deltaY = 0;
	__.eventLookup = {
		touchdevice: {
			down: 'touchstart',
			move: 'touchmove',
			up: 'touchend'
		},
		desktopdevice: {
			down: 'mousedown',
			move: 'mousemove',
			up: 'mouseup'
		}
	};
	__.isDown = false;
	__.deviceType = 'desktopdevice'; //'touchdevice'
	__.isTouchDevice = function() {
		return !!('ontouchstart' in window) || !!(navigator.msMaxTouchPoints);
	};

	__.handlePageLoaded = function() {
		//add module events
		__.$preconfsTeaserContainer = jQuery(__.oDefaults.sPreconfTeaserSelector);
		//teaser exists?
		if (__.$preconfsTeaserContainer.length) {
			var templates = jQuery('script[id^=\'' + __.oDefaults.sSelectorTeaserTemplates + '\']');
			__.maxIndex = templates.length - 1;
			if (__.isTouchDevice()) {
				__.deviceType = 'touchdevice';
			}
			if (__.maxIndex > 0) {
				__.addSwipeEvents();
				__.$preconfsTeaserContainer.on('click.dots touchend.dots', __.oDefaults.sDotsSelectorDelegateClick, __.handleDotClick);
			}
			/*jslint maxlen: 175 */
			__.$preconfsTeaserContainer.on('click.configuration.start touchend.configuration.start', __.oDefaults.sButtonSelector, __.handleConfigurationStartClick);
			__.eventBus.on(EVENTS.CONFIG_UPDATE, __.updateButtonLabel);
			__.updateButtonLabel();
			//}
		}
	};

	__.addSwipeEvents = function() {
		__.removeSwipeEvents();
		/*jslint maxlen: 175 */
		__.$preconfsTeaserContainer.off(__.eventLookup[__.deviceType].down, __.handleMouseDown).on(__.eventLookup[__.deviceType].down, __.handleMouseDown);
	};

	__.removeSwipeEvents = function() {
		__.$preconfsTeaserContainer.off(__.eventLookup[__.deviceType].up, __.handleMouseUp);
		__.$preconfsTeaserContainer.off(__.eventLookup[__.deviceType].move, __.handleMouseMove);
	};

	__.handleMouseDown = function(event) {
		__.isDown = false;
		//swipe not allowed for dropdown,input and option elements
		/*jslint maxlen: 175 */
		if (event.target.nodeName.toLowerCase() !== "select" && event.target.nodeName.toLowerCase() !== "input" && event.target.nodeName.toLowerCase() !== "option") {
			__.isDown = true;
			__.deltaX = 0;
			__.deltaY = 0;
			__.startPos.x = event.pageX || event.originalEvent.changedTouches[0].pageX;
			__.startPos.y = event.pageY || event.originalEvent.changedTouches[0].pageY;
			__.$preconfsTeaserContainer.off(__.eventLookup[__.deviceType].up, __.handleMouseUp).on(__.eventLookup[__.deviceType].up, __.handleMouseUp);
			if (!__.isTouchDevice()) {
				__.$preconfsTeaserContainer.on(__.eventLookup[__.deviceType].move, __.handleMouseMove);
			}
		}
	};

	__.handleMouseUp = function _handleMouseUp(event) {
		__.down = false;
		__.removeSwipeEvents();
		__.deltaX = __.startPos.x - (event.pageX || event.originalEvent.changedTouches[0].pageX);
		__.deltaY = __.startPos.y - (event.pageY || event.originalEvent.changedTouches[0].pageY);

		if (__.deltaX > 0) {
			__.xDirection = "left";
		} else {
			__.xDirection = "right";
		}

		if (__.deltaY > 0) {
			__.yDirection = "up";
		} else {
			__.yDirection = "down";
		}
		//handle horizontal movement only
		if (Math.abs(__.deltaX) > __.sensitivity && Math.abs(__.deltaY) < __.sensitivity) {
			__.triggerViewChange(__.xDirection);
		}
	};

	__.handleMouseMove = function _handleMouseMove(event) {
		if (__.isDown) {
			__.deltaX = __.startPos.x - (event.pageX || event.originalEvent.changedTouches[0].pageX);
			__.deltaY = __.startPos.y - (event.pageY || event.originalEvent.changedTouches[0].pageY);
			if (__.deltaX > 0) {
				__.xDirection = "left";
			} else {
				__.xDirection = "right";
			}

			if (__.deltaY > 0) {
				__.yDirection = "up";
			} else {
				__.yDirection = "down";
			}
			//horizontal move
			if (Math.abs(__.deltaX) > __.sensitivity && Math.abs(__.deltaY) < __.sensitivity) {
				__.removeSwipeEvents();
				__.isDown = false;
				__.triggerViewChange(__.xDirection);
			}
		}
	};

	__.removeEvents = function() {
		__.$preconfsTeaserContainer = jQuery(__.oDefaults.sPreconfTeaserSelector);
		if (__.$preconfsTeaserContainer.length) {
			__.removeSwipeEvents();
			__.$preconfsTeaserContainer.off('click.dots touchend.dots', __.handleDotClick);
			__.$preconfsTeaserContainer.off('click.configuration.start touchend.configuration.start', __.handleConfigurationStartClick);
			jQuery('body').off(EVENTS.CONFIG_UPDATE, __.updateButtonLabel);
		}
	};

	__.handleConfigurationStartClick = function(event) {
		__.cancelEvent(event);
		var $btn = jQuery(this);
		var prString = $btn.data('prstring');
		var audiCode = $btn.data('audicode');

		if (audiCode) {
			//load configuration by AudiCode
			DPU_CONTROLLER.loadConfigurationFromTeaser({
				audicode: audiCode,
				prstring: null
			}, 'audicode.preconfs-teaser').then(function() {
				ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());
			});
			return false;
		}
		if (prString) {
			//load configuration by prString
			DPU_CONTROLLER.loadConfigurationFromTeaser({
				prstring: prString,
				audicode: null
			}, 'prstring.preconfs-teaser').then(function() {
				ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());
			});
			return false;
		}

		// always go to the defined url to start a configuration
		ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());

		//else ==> load Default Configuration
		jQuery("a.nm-configuration-new").trigger('click.configuration.new');

		//console.error("no AudiCode or prString defined!!!");
	};

	__.handleDotClick = function(event) {
		__.cancelEvent(event);
		if (__.isAnimating) {
			return null;
		}
		var index = $(this).index();
		var previous = __.selectedIndex;
		if (index === previous) {
			//no index change!
			return false;
		}
		//animate left or right?
		if (index > previous) {
			__.direction = 'left';
		} else {
			__.direction = 'right';
		}
		__.selectedIndex = index;
		__.updateContent(__.selectedIndex, __.direction);
	};

	__.getNextIndex = function(currIndex) {
		return (currIndex + 1) % (__.maxIndex + 1);
	};

	__.getPreviousIndex = function(currIndex) {
		currIndex = currIndex - 1;
		if (currIndex < 0) {
			currIndex = __.maxIndex;
		}
		return currIndex;

	};

	__.updateContent = function(index_, direction_) {
		//insert new conatent and animate in
		__.insertTeaser(index_, direction_);
		__.updateSelection(index_);
	};

	__.triggerViewChange = function(swipeDirection_) {
		if (__.isAnimating) {
			return null;
		}
		var index = __.selectedIndex;
		//direction
		if (swipeDirection_ === 'right') {
			__.direction = 'right';
			index = __.getPreviousIndex(index);
		} else {
			__.direction = 'left';
			index = __.getNextIndex(index);

		}
		__.selectedIndex = index;
		//update conetnt and start animation
		__.updateContent(__.selectedIndex, __.direction);
	};


	__.handlePageLeave = function() {
		//remove module events
		__.removeEvents();
	};

	__.insertTeaser = function(index_, direction_) {
		var $teaserContainer = jQuery(__.oDefaults.sSelectorTeaserContainer);
		$teaserContainer.addClass('nm-slide-animation-start-' + direction_);
		//append new teaser
		var templateHTML = __.getTemplateByIndex(index_);
		var $template = jQuery(templateHTML); //.clone();
		//_$currentView=$template.appendTo(jQuery(_oDefaults.sPreconfTeaserSelector).first().empty());
		var $currentTemplate = jQuery(__.oDefaults.sPreconfsSlide);
		var currentHeight = $currentTemplate.height() + 'px';

		$template.appendTo($teaserContainer);

		var newHeight = $template.height() + 'px';

		//animate stage
		var contentWidth = $teaserContainer.width();

		var xPos = '-' + (contentWidth * 0.5) + 'px';
		__.isAnimating = true;
		if (direction_ === 'left') {
			$teaserContainer.css('height', currentHeight).animate({
				'margin-left': xPos,
				'height': newHeight
			}, 500, 'easeOutSine', __.animationEnded);
		} else {
			$teaserContainer.css('margin-left', xPos).animate({
				'margin-left': 0,
				'height': newHeight
			}, 500, 'easeOutSine', __.animationEnded);
		}
	};

	__.animationEnded = function() {
		//???
		var $animationContainer = $(this).removeClass(['nm-slide-animation-start-', __.direction].join('')).removeAttr('style');
		var $oldSlide = $animationContainer.find(__.oDefaults.sPreconfsSlide).first();
		$oldSlide.remove();
		__.isAnimating = false;
	};

	__.updateButtonLabel = function() {
		// check for custom configuration
		if (CONFIGURATOR_API.hasCustomConfiguration()) {
			$(__.oDefaults.sSelectorTeaserContainer).addClass(__.oDefaults.sButtonConfigurationClass);
		} else {
			$(__.oDefaults.sSelectorTeaserContainer).removeClass(__.oDefaults.sButtonConfigurationClass);
		}
	};

	//update selected Dot
	__.updateSelection = function(index_) {
		var $dotContainer = __.$preconfsTeaserContainer.find(__.oDefaults.sSelectorDotsNavi);
		var $dots = $dotContainer.find(__.oDefaults.sDotsSelectorDelegateClick);
		$dots.removeClass(__.oDefaults.sMenuSelectedClass);
		var $currDot = jQuery($dots[index_]);
		$currDot.addClass(__.oDefaults.sMenuSelectedClass);
	};

	__.getTemplateByIndex = function(index_) {
		//jQuery 1.9 BUG with client-side templates and whitespaces!!!=>trim()
		var template = jQuery(['#', __.oDefaults.sSelectorTeaserTemplates, index_].join('')).html() || '';
		template = template.trim();
		return template;
	};

	/**
	 * prevent default event behavior
	 * @param  {object} event_ - e.g. click event
	 * @returns {Void}
	 */
	__.cancelEvent = function(event_) {
		if ( !!event_ && typeof event_.preventDefault === 'function') {
			event_.preventDefault();
		}
	};

	__.initialize = function() {
		__.addEvents();
		__.handlePageLoaded();
	};

	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		__.eventBus.on(EVENTS.PAGE_LEAVE, __.handlePageLeave);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handlePageLoaded);
		//__.eventBus.on(EVENTS.LAYER_CLOSED, __.handlePageLeave);
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/preconfs-teaser.js");
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 159 */
/*!**************************************************!*\
  !*** ./js/app/module/preconfiguration-teaser.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* jshint maxlen: 170 */
/* eslint max-params: [1,8] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! jquery */ 1), __webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! configurator/dpu-controller */ 11), __webpack_require__(/*! events */ 0), __webpack_require__(/*! router */ 8), __webpack_require__(/*! tracking/tracking-utils */ 14), __webpack_require__(/*! tracking/swipe-tracker */ 160)], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, jQuery, CONFIGURATOR_API, DPU_CONTROLLER, EVENTS, ROUTER, TRACKING_UTILS, SWIPE_TRACKER) {//eslint-disable-line max-params
	"use strict";
	// private vars
	var __ = {},
		exports = {
			'__': __
		};
	__.oDefaults = {
		sPreconfTeaserSelector: '.nm-module-preconfiguration-teaser',
		spreconfigSlide: '.nm-md-preconfig-teaser-slide',
		sButtonSelector: '.j-preconfig-submit',
		sButtonConfigurationClass: 'nm-md-preconfig-teaser-custom-configuration',
		sSelectorTabsNavi: 'ul.nm-preconfiguration-teaser-thumbs',
		sSelectorTeaserTemplates: 'j-preconfig-teaser-tpl-',
		sTabsSelectorDelegateClick: 'li.nm-preconfiguration-teaser-thumbnail',
		sMenuSelectedClass: 'nm-selected',
		sSelectorTeaserContainer: '.nm-preconfig-teaser-peephole',
		selectorArrow: '.nm-preconfiguration-teaser-slide-arrows a',
		selectorArrowPrev: '.nm-preconfiguration-teaser-slide-prev',
		selectorArrowNext: '.nm-preconfiguration-teaser-slide-next',
		classHidden: 'nm-hidden'
	};

	__.selectedIndex = 0;
	__.maxIndex = 0;
	__.startPos = {
		x: 0,
		y: 0
	};
	__.PREV = "prev";
	__.sensitivity = 40;
	__.direction = 'left';
	__.isAnimating = false;
	__.xDirection = "none";
	__.yDirection = "none";
	__.deltaX = 0;
	__.deltaY = 0;
	__.eventLookup = {
		touchdevice: {
			down: 'touchstart',
			move: 'touchmove',
			up: 'touchend'
		},
		desktopdevice: {
			down: 'mousedown',
			move: 'mousemove',
			up: 'mouseup'
		}
	};
	__.isDown = false;
	__.deviceType = 'desktopdevice'; //'touchdevice'
	__.isTouchDevice = function() {
		return !!('ontouchstart' in window) || !!(navigator.msMaxTouchPoints);
	};

	__.handlePageLoaded = function() {
		//add module events
		if(__.$preconfigTeaserContainer && jQuery.contains(document, __.$preconfigTeaserContainer[0])) {
			return false;
		}
		__.$preconfigTeaserContainer = jQuery(__.oDefaults.sPreconfTeaserSelector);
		//teaser exists?
		if (__.$preconfigTeaserContainer.length) {
			var templates = jQuery('script[id^=\'' + __.oDefaults.sSelectorTeaserTemplates + '\']');
			__.maxIndex = templates.length - 1;
			if (__.isTouchDevice()) {
				__.deviceType = 'touchdevice';
			}
			if (__.maxIndex > 0) {
				__.addSwipeEvents();
				__.$preconfigTeaserContainer.on('click.tabs touchend.tabs', __.oDefaults.sTabsSelectorDelegateClick, __.handleTabClick);
			}
			/*jslint maxlen: 175 */
			__.$preconfigTeaserContainer.on('click.configuration.start touchend.configuration.start', __.oDefaults.sButtonSelector, __.handleConfigurationStartClick);
			__.eventBus.on(EVENTS.CONFIG_UPDATE, __.updateButtonLabel);
			__.updateButtonLabel();
			__.updateArrows(0);
		}
	};

	__.addSwipeEvents = function() {
		__.removeSwipeEvents();
		/*jslint maxlen: 175 */
		__.$preconfigTeaserContainer.off(__.eventLookup[__.deviceType].down, __.handleMouseDown).on(__.eventLookup[__.deviceType].down, __.handleMouseDown);
	};

	__.removeSwipeEvents = function() {
		__.$preconfigTeaserContainer.off(__.eventLookup[__.deviceType].up, __.handleMouseUp);
		__.$preconfigTeaserContainer.off(__.eventLookup[__.deviceType].move, __.handleMouseMove);
	};

	__.handleMouseDown = function(event) {
		__.isDown = false;
		//swipe not allowed for dropdown,input and option elements
		/*jslint maxlen: 175 */
		if (event.target.nodeName.toLowerCase() !== "select" && event.target.nodeName.toLowerCase() !== "input" && event.target.nodeName.toLowerCase() !== "option") {
			__.isDown = true;
			__.deltaX = 0;
			__.deltaY = 0;
			__.startPos.x = event.pageX || event.originalEvent.changedTouches[0].pageX;
			__.startPos.y = event.pageY || event.originalEvent.changedTouches[0].pageY;
			__.$preconfigTeaserContainer.off(__.eventLookup[__.deviceType].up, __.handleMouseUp).on(__.eventLookup[__.deviceType].up, __.handleMouseUp);
			if (!__.isTouchDevice()) {
				__.$preconfigTeaserContainer.on(__.eventLookup[__.deviceType].move, __.handleMouseMove);
			}
		}
	};

	__.getXDirection = function(deltaX) {
		if (deltaX > 0) {
			return "left";
		}
		return "right";
	};
	__.getYDirection = function(deltaY) {
		if (deltaY > 0) {
			return "up";
		}
		return "down";
	};

	__.handleMouseUp = function _handleMouseUp(event) {
		__.down = false;
		__.removeSwipeEvents();
		__.deltaX = __.startPos.x - (event.pageX || event.originalEvent.changedTouches[0].pageX);
		__.deltaY = __.startPos.y - (event.pageY || event.originalEvent.changedTouches[0].pageY);

		__.xDirection = __.getXDirection(__.deltaX);
		__.yDirection = __.getYDirection(__.deltyY);

		//handle horizontal movement only
		if (Math.abs(__.deltaX) > __.sensitivity && Math.abs(__.deltaY) < __.sensitivity) {
			__.triggerViewChange(__.xDirection);
		}
	};

	__.handleMouseMove = function _handleMouseMove(event) {
		if (__.isDown) {
			__.deltaX = __.startPos.x - (event.pageX || event.originalEvent.changedTouches[0].pageX);
			__.deltaY = __.startPos.y - (event.pageY || event.originalEvent.changedTouches[0].pageY);

			__.xDirection = __.getXDirection(__.deltaX);
			__.yDirection = __.getYDirection(__.deltyY);

			//horizontal move
			if (Math.abs(__.deltaX) > __.sensitivity && Math.abs(__.deltaY) < __.sensitivity) {
				__.removeSwipeEvents();
				__.isDown = false;
				__.triggerViewChange(__.xDirection);
			}
		}
	};

	__.removeEvents = function() {
		__.$preconfigTeaserContainer = jQuery(__.oDefaults.sPreconfTeaserSelector);
		if (__.$preconfigTeaserContainer.length) {
			__.removeSwipeEvents();
			__.$preconfigTeaserContainer.off('click.tabs touchend.tabs', __.handleTabClick);
			__.$preconfigTeaserContainer.off('click.configuration.start touchend.configuration.start', __.handleConfigurationStartClick);
			jQuery('body').off(EVENTS.CONFIG_UPDATE, __.updateButtonLabel);
		}
	};

	__.handleConfigurationStartClick = function(event) {
		__.cancelEvent(event);
		var $btn = jQuery(this);
		var prString = $btn.data('prstring');
		var audiCode = $btn.data('audicode');

		jQuery(event.target).closest('a').trigger('click.link-tracking');

		if (audiCode) {
			//load configuration by AudiCode
			DPU_CONTROLLER.loadConfigurationFromTeaser({
				audicode: audiCode,
				prstring: null
			}, 'audicode.preconfig-teaser').then(function() {
				ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());
			});
			return false;
		}
		if (prString) {
			//load configuration by prString
			DPU_CONTROLLER.loadConfigurationFromTeaser({
				prstring: prString,
				audicode: null
			}, 'prstring.preconfig-teaser').then(function() {
				ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());
			});
			return false;
		}

		// always go to the defined url to start a configuration
		ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());

		//else ==> load Default Configuration
		jQuery("a.nm-configuration-new").trigger('click.configuration.new');

		//console.error("no AudiCode or prString defined!!!");
	};

	__.handleTabClick = function(event) {
		if (event && event.preventDefault) {
			event.preventDefault();
		}

		var index,
			previous = __.selectedIndex;

		if (this.hasAttribute('data-direction')) {
			var	direction = this.getAttribute('data-direction');
			if (direction === __.PREV) {
				index = previous - 1;
			} else {
				index = previous + 1;
			}
		} else {
			index = $(this).index();
		}

		__.cancelEvent(event);
		if (__.isAnimating) {
			return null;
		} else if (index === previous) {
			//no index change!
			return false;
		} else if (index > previous) {
			__.direction = 'left';
		} else {
			__.direction = 'right';
		}
		__.selectedIndex = index;
		__.updateContent(__.selectedIndex, __.direction);
	};

	__.updateArrows = function(index_) {
		if (__.maxIndex == 0) {
			return;
		}

		var arrowPrev = DOM_UTILS.getElement(__.oDefaults.selectorArrowPrev),
			arrowNext = DOM_UTILS.getElement(__.oDefaults.selectorArrowNext);

		if (index_ == 0) {
			arrowPrev.classList.add(__.oDefaults.classHidden);
		} else {
			arrowPrev.classList.remove(__.oDefaults.classHidden);
		}
		if (index_ == __.maxIndex) {
			arrowNext.classList.add(__.oDefaults.classHidden);
		} else {
			arrowNext.classList.remove(__.oDefaults.classHidden);
		}
	};

	__.getNextIndex = function(currIndex) {
		return (currIndex + 1) % (__.maxIndex + 1);
	};

	__.getPreviousIndex = function(currIndex) {
		var prevIdx = currIndex - 1;
		if (prevIdx < 0) {
			prevIdx = __.maxIndex;
		}
		return prevIdx;
	};

	__.updateContent = function(index_, direction_) {
		//insert new content and animate in
		__.insertTeaser(index_, direction_);
		__.updateSelection(index_);
	};

	__.triggerViewChange = function(swipeDirection_) {
		var index = __.selectedIndex;

		if (__.isAnimating) {
			return null;
		} else {
			__.legacyEventBus.trigger('swipe.preconfiguration', {
				prop16: "<prefix>:" + CONFIGURATOR_API.getCarlineName(),
				eVar39: "Pre-Config Switch",
				prop39: "Pre-Config Switch",
				eVar44: "Pre-Config Switch",
				prop44: "Pre-Config Switch",
				eVar46: "<pagename>:Pre-Config Switch:Swipe",
				prop46: "<pagename>:Pre-Config Switch:Swipe",
				prop67: "<pagename>"
			});
		}

		//direction
		__.direction = swipeDirection_;
		if (swipeDirection_ === 'right') {
			index = __.getPreviousIndex(index);
		} else {
			index = __.getNextIndex(index);
		}
		__.selectedIndex = index;
		//update content and start animation
		__.updateContent(__.selectedIndex, __.direction);
	};

	__.handlePageLeave = function() {
		//remove module events
		__.removeEvents();
	};

	__.animateStage = function(direction_, $teaserContainer, currentHeight, newHeight) {
		//animate stage
		var contentWidth = $teaserContainer.width();

		var xPos = '-' + (contentWidth * 0.5) + 'px';
		__.isAnimating = true;

		if (direction_ === 'left') {
			$teaserContainer.css('height', currentHeight).animate({
				'margin-left': xPos,
				'height': newHeight
			}, 500, 'easeOutSine', __.animationEnded);
		} else {
			$teaserContainer.css('margin-left', xPos).animate({
				'margin-left': 0,
				'height': newHeight
			}, 500, 'easeOutSine', __.animationEnded);
		}
	};

	__.insertTeaser = function(index_, direction_) {
		var $teaserContainer = jQuery(__.oDefaults.sSelectorTeaserContainer);
		var templateHTML, $template, $currentTemplate, currentHeight, newHeight;
		$teaserContainer.addClass('nm-slide-animation-start-' + direction_);
		//append new teaser
		templateHTML = __.getTemplateByIndex(index_);
		$template = jQuery(templateHTML);
		$currentTemplate = jQuery(__.oDefaults.spreconfigSlide);
		currentHeight = $currentTemplate.height() + 'px';

		$template.appendTo($teaserContainer);
		newHeight = $template.height() + 'px';

		__.animateStage(direction_, $teaserContainer, currentHeight, newHeight);
	};

	__.animationEnded = function() {
		var $animationContainer = $(this).removeClass(['nm-slide-animation-start-', __.direction].join('')).removeAttr('style');
		var $oldSlide = $animationContainer.find(__.oDefaults.spreconfigSlide).first();
		$oldSlide.remove();
		__.isAnimating = false;
		__.updateArrows(__.selectedIndex);
	};

	__.updateButtonLabel = function() {
		// check for custom configuration
		if (CONFIGURATOR_API.hasCustomConfiguration()) {
			$(__.oDefaults.sSelectorTeaserContainer).addClass(__.oDefaults.sButtonConfigurationClass);
		} else {
			$(__.oDefaults.sSelectorTeaserContainer).removeClass(__.oDefaults.sButtonConfigurationClass);
		}
	};

	/**
	 * update selected Tab
	 * @param  {index_}
	 * @return {void}
	 */
	__.updateSelection = function(index_) {
		var $tabContainer = __.$preconfigTeaserContainer.find(__.oDefaults.sSelectorTabsNavi);
		var $tabs = $tabContainer.find(__.oDefaults.sTabsSelectorDelegateClick);
		var $currTab;
		$tabs.removeClass(__.oDefaults.sMenuSelectedClass);
		$currTab = jQuery($tabs[index_]);
		$currTab.addClass(__.oDefaults.sMenuSelectedClass);
	};

	__.getTemplateByIndex = function(index_) {
		//jQuery 1.9 BUG with client-side templates and whitespaces!!!=>trim()
		var template = jQuery(['#', __.oDefaults.sSelectorTeaserTemplates, index_].join('')).html() || '';
		template = template.trim();
		return template;
	};

	/**
	 * prevent default event behavior
	 * @param  {object} event_ - e.g. click event
	 * @return {void}
	 */
	__.cancelEvent = function(event_) {
		if ( !!event_ && typeof event_.preventDefault === 'function') {
			event_.preventDefault();
		}
	};

	__.initialize = function() {
		__.addEvents();
		__.handlePageLoaded();
	};

	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handlePageLoaded);
		__.domEventDelegate.on('swipe.preconfiguration', TRACKING_UTILS.proxyMethod(SWIPE_TRACKER.swipeTrackingHandler, __));
		__.domEventDelegate.on('click', __.oDefaults.selectorArrow, __.handleTabClick);
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/preconfiguration-teaser.js");
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 160 */
/*!******************************************!*\
  !*** ./js/app/tracking/swipe-tracker.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
		__webpack_require__(/*! jquery */ 1),
		__webpack_require__(/*! events */ 0),
		__webpack_require__(/*! tracking/tracking-dispatcher */ 13)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, TRACKING_DISPATCHER) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	__.getCurrentPageName = function() {
		return jQuery("body").attr("page-name");
	};

	/**
	 * handler for swipe tracking
	 * @param {event} event - the swipe event
	 * @param {Object} data - the event data obj containing tracking properties
	 * @returns {void}
	 */
	exports.swipeTrackingHandler = function(event, data) {
		var key;
		var pagename = __.getCurrentPageName();
		var linkProperties = {};
		var audic_mssc = window.mss || null;
        var prefix = (!!audic_mssc) ? 'MSSC' : 'NeMo';

		for (key in data) {
			if (data.hasOwnProperty(key)) {
				linkProperties[key] = data[key].replace(/<pagename>/g, pagename).replace(/<prefix>/g, prefix);
			}
		}
		TRACKING_DISPATCHER.trackNow(linkProperties);
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			resolve("tracking/swipe-tracker.js");
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 161 */
/*!*****************************************************!*\
  !*** ./js/app/module/interactive-image-rotation.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};
	__.clickPosX = false;
	__.controllerOffset = false;
	__.controlOffset = false;
	__.clickOffset = false;
	__.numOfImages = 0;
	__.oDefaults = {
		sSelectorRotationImage: '.nm-rotation-image',
		sSelectorSliderContainer: '.nm-image-container',
		sSelectorSliderControl: '.nm-rotation-control',
		sSelectorSliderController: '.nm-rotation-controller'
	};

	__.addEvents = function () {
		__.eventBus.on(EVENTS.PAGE_LOADED, exports.handler);
		__.eventBus.on(EVENTS.LAYER_LOADED, exports.handler);
		exports.handler();
	};

	exports.dispose = function() {
		__.eventBus.off(EVENTS.PAGE_LOADED, exports.handler);
		__.eventBus.off(EVENTS.LAYER_LOADED, exports.handler);
	};

	exports.handler = function() {
		$(__.oDefaults.sSelectorSliderControl).bind('mousedown touchstart', __.activateDragEventHandler);
	};

	__.ie8AdjustWrapOverlay = function() {
		$(__.oDefaults.sSelectorIE8WrappedImage).each(function() {
			var containerHeight = $(this).closest(__.oDefaults.sSelectorSliderContainer).height();
			var containerWidth = $(this).closest(__.oDefaults.sSelectorSliderContainer).width();

			$(this).height(containerHeight);
			$(this).width(containerWidth);
		});
	};

	__.changeSliderControlPosition = function(overlayImage, controlPosition) {

		var containerWidth = overlayImage.closest(__.oDefaults.sSelectorSliderContainer).width();
		overlayImage.siblings(__.oDefaults.sSelectorSliderControl).animate({left:controlPosition}, 300, false);
		overlayImage.animate({width:containerWidth - controlPosition}, 300, false);
	};

	__.activateDragEventHandler = function(event) {

		if (event.type === 'touchstart') {
			__.clickPosX = event.originalEvent.touches[0].pageX;
		} else {
			__.clickPosX = event.pageX;
		}

		__.numOfImages = $(this).closest(__.oDefaults.sSelectorSliderController).siblings(__.oDefaults.sSelectorRotationImage).length;
		__.controllerOffset = $(this).closest(__.oDefaults.sSelectorSliderController).offset().left;
		__.controlOffset = $(this).closest(__.oDefaults.sSelectorSliderControl).offset().left;
		__.clickOffset = __.clickPosX - __.controlOffset;

		$(this).unbind('mousedown touchstart', __.activateDragEventHandler);
		__.mouseMoveContainer = $(this).closest(__.oDefaults.sSelectorSliderContainer);
		__.mouseMoveContainer.unbind('mousemove touchmove', __.dragMovement);
		__.mouseMoveContainer.bind('mousemove touchmove', __.dragMovement);
		__.legacyEventBus.unbind('mouseup touchend', __.deactivateDragEventHandler);
		__.legacyEventBus.bind('mouseup touchend', __.deactivateDragEventHandler);
	};

	__.dragMovement = function(event) {

		var controllerItem = $(this).find(__.oDefaults.sSelectorSliderController);
		var controlItem = $(this).find(__.oDefaults.sSelectorSliderControl);

		var sliderPositionX = 0;

		var activeImage;

		// implement percentile and interpolate to rot images
		var percentile = 0;

		if (event.type === 'touchmove') {
			sliderPositionX = event.originalEvent.touches[0].pageX - __.controllerOffset - __.clickOffset;
		} else {
			sliderPositionX = event.pageX - __.controllerOffset - __.clickOffset;
		}

		// calc percentile of slider position for image exchange
		percentile = (sliderPositionX + controlItem.width()/2) / (controllerItem.width()) * 100;

		activeImage = Math.min(__.numOfImages-1, Math.max(0, Math.floor(percentile / (100 / __.numOfImages))));

		$(this).closest(__.oDefaults.sSelectorSliderContainer).find(__.oDefaults.sSelectorRotationImage).removeClass('active');
		$(this).closest(__.oDefaults.sSelectorSliderContainer).find(__.oDefaults.sSelectorRotationImage).eq(activeImage).addClass('active');

		if (sliderPositionX >= -controlItem.width()/2 && sliderPositionX <= controllerItem.width() - controlItem.width()/2) {
			$(this).find(__.oDefaults.sSelectorSliderControl).css({left:sliderPositionX});
		}

	};

	__.deactivateDragEventHandler = function() {
		__.deactivatedDrag($(this));
	};

	__.deactivatedDrag = function(targetObject) {
		targetObject.find(__.oDefaults.sSelectorSliderControl).unbind('mousedown touchstart', __.activateDragEventHandler);
		targetObject.find(__.oDefaults.sSelectorSliderControl).bind('mousedown touchstart', __.activateDragEventHandler);
		__.mouseMoveContainer.unbind('mousemove touchmove', __.dragMovement);
		__.legacyEventBus.unbind('mouseup touchend', __.deactivateDragEventHandler);
	};

	__.initialize = function() {
		__.addEvents();
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.initialize();
			resolve("module/interactive-image-rotation.js");
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 162 */
/*!***************************************************!*\
  !*** ./js/app/module/interactive-image-slider.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! utils/dom */ 2)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, DOM_UTILS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};
	__.oDefaults = {
		sSelectorSliderContainer: '.nm-image-container',
		sSelectorSliderMainImage: '.nm-slider-first-image',
		sSelectorSliderOverlayImage: '.nm-slider-second-image',
		sSelectorIE8WrappedImage: '.nm-slider-wrappedImage',
		sSelectorSliderControl: '.nm-slider-control',
		sSelectorSliderControlItems: '.nm-slider-control-items'
	};

	__.addEvents = function () {
		__.eventBus.on(EVENTS.PAGE_LOADED, exports.handler);
		__.eventBus.on(EVENTS.LAYER_LOADED, exports.handler);
		exports.handler();
	};

	exports.dispose = function () {
		__.eventBus.off(EVENTS.PAGE_LOADED, exports.handler);
		__.eventBus.off(EVENTS.LAYER_LOADED, exports.handler);
	};

	exports.handler = function () {

		// click animation listeners
		__.domEventDelegate.on('click', __.oDefaults.sSelectorSliderMainImage, __.clickMainImageEventHandler);
		__.domEventDelegate.on('click', __.oDefaults.sSelectorSliderOverlayImage, __.clickOverlayImageEventHandler);

		// drag listener
		__.domEventDelegate.on('mousedown', __.oDefaults.sSelectorSliderControl, __.activateDragEventHandler);
		__.domEventDelegate.on('touchstart', __.oDefaults.sSelectorSliderControl, __.activateDragEventHandler);
	};

	__.clickMainImageEventHandler = function() {
		var overlayImage,
		associatedContainer = DOM_UTILS.closest(this, __.oDefaults.sSelectorSliderContainer);
		overlayImage = DOM_UTILS.siblings(this, __.oDefaults.sSelectorSliderOverlayImage)[0];
		__.changeSliderControlPosition(overlayImage, associatedContainer.offsetWidth - 1);
	};

	__.clickOverlayImageEventHandler = function() {
		__.changeSliderControlPosition(this, 0);
	};

	__.changeSliderControlPosition = function(overlayImage, controlPosition) {
		var sliderControl, containerWidth = DOM_UTILS.closest(overlayImage, __.oDefaults.sSelectorSliderContainer).offsetWidth;
		sliderControl = DOM_UTILS.siblings(overlayImage, __.oDefaults.sSelectorSliderControl)[0];
		jQuery(sliderControl).animate({left:controlPosition}, 300, false); // TODO replace jQuery animation
		jQuery(overlayImage).animate({width:containerWidth - controlPosition}); // TODO replace jQuery animation
	};

	__.activateDragEventHandler = function() {
		this.removeEventListener('mousedown', __.activateDragEventHandler, true);
		this.removeEventListener('touchstart', __.activateDragEventHandler, true);
		__.domEventDelegate.off('mousemove', __.oDefaults.sSelectorSliderContainer, __.dragMovement);
		__.domEventDelegate.off('touchmove', __.oDefaults.sSelectorSliderContainer, __.dragMovement);
		__.domEventDelegate.on('mousemove', __.oDefaults.sSelectorSliderContainer, __.dragMovement);
		__.domEventDelegate.on('touchmove', __.oDefaults.sSelectorSliderContainer, __.dragMovement);
		__.domEventDelegate.off('mouseup', __.deactivateDragEventHandler);
		__.domEventDelegate.on('mouseup', __.deactivateDragEventHandler);
		__.domEventDelegate.off('touchend', __.deactivateDragEventHandler);
		__.domEventDelegate.on('touchend', __.deactivateDragEventHandler);
	};

	__.getSliderPositionX = function(event, elem) {
		var sliderPositionX = 0;
		if (event.type === 'touchmove') {
			sliderPositionX = event.touches[0].pageX - elem.getBoundingClientRect().left;
		} else {
			sliderPositionX = event.pageX - elem.getBoundingClientRect().left;
		}
		return sliderPositionX;
	};


	__.dragMovement = function(event) {
		var overlayWidth, containerWidth,
		sliderPositionX = __.getSliderPositionX(event, this);

		// make it snappy...
		if (sliderPositionX <= 30) {
			sliderPositionX = 0;
		}
		if (this.clientWidth - sliderPositionX <= 30) {
			sliderPositionX = this.clientWidth-1;
		}
		overlayWidth = this.clientWidth - sliderPositionX;
		containerWidth = DOM_UTILS.closest(this, __.oDefaults.sSelectorSliderContainer).clientWidth;

		if (overlayWidth >= 0 && overlayWidth <= containerWidth ) {
			DOM_UTILS.getElement(__.oDefaults.sSelectorSliderControl, this).style.left = sliderPositionX + "px";
			DOM_UTILS.getElement(__.oDefaults.sSelectorSliderOverlayImage, this).style.width = overlayWidth + "px";
		} else {
			__.deactivatedDrag(this);
		}

	};

	__.deactivateDragEventHandler = function() {
		__.deactivatedDrag(this);
	};

	__.deactivatedDrag = function(targetObject) {
		__.domEventDelegate.off('mousedown', __.oDefaults.sSelectorSliderControl, __.activateDragEventHandler);
		__.domEventDelegate.off('touchstart', __.oDefaults.sSelectorSliderControl, __.activateDragEventHandler);
		__.domEventDelegate.on('mousedown', __.oDefaults.sSelectorSliderControl, __.activateDragEventHandler);
		__.domEventDelegate.on('touchstart', __.oDefaults.sSelectorSliderControl, __.activateDragEventHandler);
		__.domEventDelegate.off('mousemove', __.oDefaults.sSelectorSliderContainer, __.dragMovement);
		__.domEventDelegate.off('touchmove', __.oDefaults.sSelectorSliderContainer, __.dragMovement);
		__.domEventDelegate.off('mouseup', __.deactivateDragEventHandler);
		__.domEventDelegate.off('touchend', __.deactivateDragEventHandler);
	};

	__.initialize = function() {
		__.addEvents();
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate("body");
			__.initialize();
			resolve("module/interactive-image-slider.js");
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 163 */
/*!*********************************************!*\
  !*** ./js/app/module/configuratorteaser.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 120 */
/* global SETUPS */
/*eslint no-use-before-define:1*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! module/homepage */ 51),
	__webpack_require__(/*! events */ 0)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, PAGE_CACHE, EVENTS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	//var _initializeOnceWasAlreadyCalled = false;
	var _oDefaults = {
		teaser: '.nm-homepage-md-configurator-teaser',
		configuratorButton: '.nm-homepage-md-configurator-teaser-button',
		configuratorClick: '.nm-j-enter-configurator-click',
		carClickable: '.nm-homepage-md-configurator-teaser-image-clickable',
		carlineSelect: '#nm-homepage-md-configurator-teaser-selection-type',
		carColorSelect: '#nm-homepage-md-configurator-teaser-selection-color',
		selectors: '.nm-homepage-md-configuration-teaser-selector',
		newCars: '.nm-homepage-md-configurator-teaser-vtp-new-cars',
		usedCars: '.nm-homepage-md-configurator-teaser-vtp-used-cars'
	};

		//current Carline
	var _selectedCarline,
		//current color
		_selectedColor,
		//jQuery refs
		$teaser, $stage, $carColorSelect, $carlineSelect, $carImgWrap, $carImg, $carClickable,
		$top, $bottom, $selectedCarHeadline, $fuel, $co2, $configuratorLink,
		$newUsedCols, $newStat, $newLinks, $newMode, $usedStat, $usedLinks, $usedMode,
		$loadingIndicator, $configuratorTeaser,
		$teaser, $imageBox, $selectionBox, $vtpBox, $eecBox,
		$selectors,
		// no used Link e.g. in STCK
		_hasUsedLink = false,
		//flag for initial loaded carline
		_firstCarlineImageLoaded = false;

	__.initialize = function() {
		var usedCars = DOM_UTILS.getElement(_oDefaults.usedCars);
		$teaser = DOM_UTILS.getElement(_oDefaults.teaser);

		if (!DOM_UTILS.isElement($teaser)){
			return false;
		}

		if (SETUPS.get('nemo.homepage.cacheupdateurl') === true ) {
			PAGE_CACHE.updateCacheUrl("carlinedataurl", function(){} );
		}

		if (DOM_UTILS.isElement(usedCars)){
			_hasUsedLink = true;
		}

		__.setUpStage();
		__.addEvents();
	};

	//setup stage elements
	__.setUpStage = function() {

		// Remember some elements
		$imageBox = DOM_UTILS.getElement('.nm-homepage-md-configurator-teaser-image', $teaser);
		$selectionBox = DOM_UTILS.getElement('.nm-homepage-md-configurator-teaser-selection', $teaser);
		$vtpBox = DOM_UTILS.getElement('.nm-homepage-md-configurator-teaser-vtp', $teaser);
		$eecBox = DOM_UTILS.getElement('.nm-homepage-md-configurator-teaser-box-efficiency', $teaser);

		$carImgWrap = DOM_UTILS.getElement('.nm-homepage-md-configurator-teaser-image-wrap', $imageBox);
		$carImg = DOM_UTILS.getElement('img', $carImgWrap);
		$carClickable = DOM_UTILS.getElement(_oDefaults.carClickable, $imageBox);
		$loadingIndicator = DOM_UTILS.getElement('.loading-indicator', $imageBox);

		// car selection
		$carlineSelect = DOM_UTILS.getElement(_oDefaults.carlineSelect);
		$carColorSelect = DOM_UTILS.getElement(_oDefaults.carColorSelect);
		$configuratorLink = DOM_UTILS.getElement(_oDefaults.configuratorButton, $selectionBox);

		$selectors = DOM_UTILS.getElementsArray(_oDefaults.selectors);

		// vtp
		$selectedCarHeadline = DOM_UTILS.getElement('strong span.carline_label', $vtpBox);
		$newUsedCols = DOM_UTILS.getElement('.nm-homepage-md-configurator-teaser-vtp-cols', $vtpBox);

		$newStat = DOM_UTILS.getElement(_oDefaults.newCars + ' .stat', $vtpBox);
		$newLinks = DOM_UTILS.getElementsArray(_oDefaults.newCars + ' > a', $vtpBox);
		$newMode = DOM_UTILS.getElement(_oDefaults.newCars, $vtpBox).getAttribute('data-mode');

		if(_hasUsedLink) {
			$usedStat = DOM_UTILS.getElement(_oDefaults.usedCars + ' .stat', $vtpBox);
			$usedLinks = DOM_UTILS.getElementsArray(_oDefaults.usedCars + ' > a', $vtpBox);
			$usedMode = DOM_UTILS.getElement(_oDefaults.usedCars, $vtpBox).getAttribute('data-mode');
		}

		// eec
		$fuel = DOM_UTILS.getElement('.fuel_consumption .value', $eecBox);
		$co2 = DOM_UTILS.getElement('.co2_emissions .value', $eecBox);


		// set configurator urls for default carline colors
		var selectedCarlineData =  JSON.parse(DOM_UTILS.getElement('.active-carline', $carlineSelect).getAttribute('data-carline'));

		if (!!selectedCarlineData) {

			var colors = selectedCarlineData.colors;
			var carColors = DOM_UTILS.getElementsArray('li', $carColorSelect);
			carColors.forEach(function(carColor) {
				var confUrl = selectedCarlineData.configuratorUrlBase;
				var colorValue = carColor.getAttribute('value');
				var colorPrString = carColor.getAttribute('data-prstring');

				if (!!confUrl) {
					if (confUrl.indexOf('#') < 0) {
						confUrl = confUrl + colorPrString;
					} else {
						confUrl = confUrl.replace('#', colorPrString + '#');
					}
					carColor.setAttribute('data-configuratorurl', confUrl);

					if (typeof colors[colorValue] !== "undefined") {
						var configuratorTracking = colors[colorValue].configuratorTracking;
						carColor.setAttribute('data-configuratorTracking', configuratorTracking);
					}
				}
			});

			var newUsed = selectedCarlineData.newUsed;
			if (!!newUsed) {
				$newStat.innerHTML = newUsed.numNew;
				$newLinks.forEach(function(link){
					if(!!$newMode && $newMode !== 'editorial') {
						link.setAttribute('href', newUsed.urlNew);
					}
					if(newUsed.urlNew !== "" && link.classList.contains("link-hidden")) {
						link.classList.remove("link-hidden");
						document.querySelector(_oDefaults.newCars).classList.remove("nm-hidden");
					}
				});
				if(_hasUsedLink) {
					$usedStat.innerHTML = newUsed.numUsed;
					$usedLinks.forEach(function(link){
						if(!!$usedMode && $usedMode !== 'editorial') {
							link.setAttribute('href', newUsed.urlUsed);
						}
						if(newUsed.urlUsed !== "" && link.classList.contains("link-hidden")) {
							link.classList.remove("link-hidden");
							document.querySelector(_oDefaults.usedCars).classList.remove("nm-hidden");
						}
					});
				}
			}
		}
	};

	__.onClickOutside = function() {
		__.closeSelectors();
	};

	__.onClickCurrentSelector = function(e) {
		var wrapper = DOM_UTILS.closest(e.target, _oDefaults.selectors);
		e.preventDefault();

		if(wrapper.classList.contains('selector-closed')) {
			__.closeSelectors();
			wrapper.classList.remove('selector-closed');
		} else {
			__.closeSelectors();
		}
		return false;
	};

	__.addEvents = function() {
		__.domEventDelegate.on('click', _oDefaults.configuratorButton, __.openConfiguratorPage);
		__.domEventDelegate.on('click', _oDefaults.carClickable, __.openConfiguratorPage);
		__.domEventDelegate.on('click', _oDefaults.configuratorClick, __.openConfiguratorPage);

		__.domEventDelegate.on('click', _oDefaults.carlineSelect, __.onCarlineSelect);
		__.domEventDelegate.on('click', _oDefaults.carColorSelect, __.onCarColorSelect);
		__.domEventDelegate.on('click', __.onClickOutside);

		__.domEventDelegate.on('click', _oDefaults.selectors + ' .selector-current-selected a', __.onClickCurrentSelector);
		__.domEventDelegate.on('click', _oDefaults.selectors + ' li.close-selector', __.closeSelectors);
	};

	//remove all events on dispose and initinalize
	__.removeEvents = function() {
		/* what stage events ?
		$stage.off("click.dealersearchBtn");
		$stage.off('submit.location');
		*/

		__.domEventDelegate.off('click', _oDefaults.configuratorButton, __.openConfiguratorPage);
		__.domEventDelegate.off('click', _oDefaults.carClickable, __.openConfiguratorPage);
		__.domEventDelegate.off('click', _oDefaults.configuratorClick, __.openConfiguratorPage);

		__.domEventDelegate.off('click', _oDefaults.carlineSelect, __.onCarlineSelect);
		__.domEventDelegate.off('click', _oDefaults.carColorSelect, __.onCarColorSelect);
		__.domEventDelegate.off('click', __.onClickOutside);

		__.domEventDelegate.off('click', _oDefaults.selectors + ' .selector-current-selected a', __.onClickCurrentSelector);
		__.domEventDelegate.off('click', _oDefaults.selectors + ' li.close-selector', __.closeSelectors);
	};

	//jump right into selected configuration-page from the teaser
	__.openConfiguratorPage = function _openConfiguratorPage(event) {
		event.preventDefault();
		var selectedConfiguratorUrl = __.getSelectedConfiguratorUrl();
		//save some tracking info into the sessionStorage
		try {
			sessionStorage.setItem("almo.entryToNemoFromTeaser", "yes");
		} catch (ex) {
			//not important (only for tracking)
		}
		window.document.location.href = selectedConfiguratorUrl;
	};

	__.getSelectedConfiguratorUrl = function() {
		return DOM_UTILS.getElement('.active-color', $carColorSelect).getAttribute('data-configuratorurl');
	};

	/**
	 * Fade images in when they're ready if they aren't already loaded
	 * @return {Void}
	 */
	__.gracefulLoad = function() {
		$('.carline-stage img').each(function() {
			// The image has already loaded
			if (this.complete) {
				$(this).css('visibility', 'visible');
				$(this).stop().fadeTo(1000, 1);
				_firstCarlineImageLoaded = true;
			} else {
				$(this).on('load', function() {
					$(this).css('visibility', 'visible');
					$(this).stop().fadeTo(1000, 1);
					$(this).off('load');
					_firstCarlineImageLoaded = true;
				});
			}
		});
	};

	__.showLoadingIndicator = function() {
		$loadingIndicator.classList.remove('nm-hidden');
	};
	__.hideLoadingIndicator = function() {
		$loadingIndicator.classList.add('nm-hidden');
	};

	__.activateConfiguratorLink = function() {
		// enable carClickable
		$configuratorLink.classList.remove("disabled");
	};

	__.closeSelectors = function() {
		$selectors.forEach(function(selector){
			selector.classList.add('selector-closed');
		});
	};

	__.onCarColorSelect = function(e, animate) {
		var selectedColorElm;
		if(e) {
			e.preventDefault();
			console.log(e.target);
			selectedColorElm = DOM_UTILS.closest(e.target, 'li');
		}

		if ((DOM_UTILS.isElement(selectedColorElm) && selectedColorElm.classList.contains('close-selector')) || !DOM_UTILS.isElement(selectedColorElm)) {
			selectedColorElm = DOM_UTILS.getElement(_oDefaults.carColorSelect + ' li.active-color');
		}

		var allColors = DOM_UTILS.getElementsArray(_oDefaults.carColorSelect + ' li');
		allColors.forEach(function (color){
			color.classList.remove('active-color');
		});
		selectedColorElm.classList.add('active-color');

		var selectedData = JSON.parse(DOM_UTILS.getElement(_oDefaults.carlineSelect + ' li.active-carline').getAttribute('data-carline'));
		var selectedColor = selectedColorElm.getAttribute('data-value');
		var configuratorTracking = DOM_UTILS.getElement(_oDefaults.carColorSelect + ' li.active-color').getAttribute('data-configuratorTracking');
		var newColor = DOM_UTILS.getElement(_oDefaults.carlineSelect).getAttribute('data-mediaserviceurl') + selectedData.colorPrefix + selectedColor + selectedData.colorSuffix;

		//console.log(newColor);

		if (animate === 'imagetext') {
			var selectedCarlineData =  JSON.parse(DOM_UTILS.getElement(_oDefaults.carlineSelect + ' .active-carline').getAttribute('data-carline'));
			__.animateSwitchCar(newColor, true, selectedCarlineData);
			$carImg.setAttribute('alt', selectedCarlineData.name);
		} else if (animate !== 'nothing') {
			__.animateSwitchCar(newColor, false, selectedData);
		}

		__.activateConfiguratorLink();

		_selectedColor = selectedColor;
		__.closeSelectors();

		var carColorSelect = DOM_UTILS.getElement(_oDefaults.carColorSelect);
		var carColorText = DOM_UTILS.getElement('.selector-current-selected a', carColorSelect.parentNode);
		carColorText.innerHTML = selectedColorElm.innerText;

		return false;
	};

	__.onCarlineSelect = function(e, animate) {
		e.preventDefault();
		console.log(e.target);

		// change car image
		var selectedCarline = DOM_UTILS.closest(e.target, 'li');
		var carLines = DOM_UTILS.getElementsArray(_oDefaults.carlineSelect + ' li');
		carLines.forEach(function(carLine){
			carLine.classList.remove('active-carline');
		});
		selectedCarline.classList.add('active-carline');

		var selectedCarlineData =  JSON.parse(selectedCarline.getAttribute('data-carline'));
		if (!selectedCarlineData) {
			return;
		}
		var newColor = $carlineSelect.getAttribute('data-mediaserviceurl') + selectedCarlineData.defaultColorUrl;
		var selectedNewUsedData = selectedCarlineData.newUsed;

		// Change car
		$carImg.setAttribute("alt", selectedCarlineData.name);

		// Change colors
		$carColorSelect.innerHTML = '<li class="close-selector" />';

		var colors = selectedCarlineData.colors;
		var colorClass = "";
		for (var color in colors) {
			if(!!color) {
				// color headlines
				if (colorClass !== colors[color].colorClass) {
					$carColorSelect.innerHTML += '<li /><span>' + colors[color].colorClass + '</span>';
				}
				// actual colors
				colorClass = colors[color].colorClass;
				var $option = document.createElement('li');
				$option.classList.add('selector-value');
				$option.innerHTML = '<a href="#" style="background-image:url('+$carlineSelect.getAttribute('data-mediaserviceurl')+colors[color].tileUrl+')">' + colors[color].name + '</a>';
				$option.setAttribute('data-prstring', colors[color].prstring);
				$option.setAttribute('data-value', color);

				//if current color is the default color, then don't use pr
				var confUrl = selectedCarlineData.configuratorUrlBase;
				var colorPrString = colors[color].prstring;

				if (confUrl.indexOf('#') < 0) {
					confUrl = confUrl + colorPrString;
				} else {
					confUrl = confUrl.replace('#', colorPrString + '#');
				}

				$option.setAttribute('data-configuratorurl', confUrl);
				$option.setAttribute('data-configuratorTracking', colors[color].configuratorTracking);

				if (selectedCarlineData.defaultColor === color) {
					$option.classList.add('active-color');

					var carColorText = DOM_UTILS.getElement('.selector-current-selected a', $carColorSelect.parentNode);
					carColorText.innerHTML = colors[color].name;
				}
				$carColorSelect.appendChild($option);
			}
		}

		if (animate !== false) {
			__.onCarColorSelect(false, 'nothing');
			__.animateSwitchCar(newColor, true, selectedCarlineData);
			_selectedCarline = selectedCarlineData;
		}
		__.closeSelectors();

		var carLineText = DOM_UTILS.getElement('.selector-current-selected a', $carlineSelect.parentNode);
		carLineText.innerHTML = selectedCarlineData.name;

		return false;
	};

	__.replaceNewUsedContent = function(selectedCarlineData) {
		var selectedNewUsedData;
		var waitDuration = 300;

		if (selectedCarlineData) {
			selectedNewUsedData = selectedCarlineData.newUsed;
		}
		if (!selectedNewUsedData) {
			selectedNewUsedData = {
				numNew: "0",
				numUsed: "0"
			};
			if (!!$newUsedCols) {
				var defaultData = JSON.parse($newUsedCols.getAttribute('data-default'));
				selectedNewUsedData.urlNew = defaultData.vtpNewBaseUrl;
				if(_hasUsedLink) {
					selectedNewUsedData.urlUsed = defaultData.vtpUsedBaseUrl;
				}
			}
		}

		$newStat.classList.remove('nm-fade-in');
		$newStat.classList.add('nm-fade-out');
		if(!!$newMode && $newMode !== 'editorial') {
			$newLinks.forEach(function(link){
				link.setAttribute('href', selectedNewUsedData.urlNew);
			});
		}

		if(_hasUsedLink) {
			$usedStat.classList.remove('nm-fade-in');
			$usedStat.classList.add('nm-fade-out');
		}

		setTimeout(function() {
			$newStat.innerHTML = selectedNewUsedData.numNew;
			$newStat.classList.remove('nm-fade-out');
			$newStat.classList.add('nm-fade-in');

			if(_hasUsedLink) {
				$usedStat.innerHTML = selectedNewUsedData.numUsed;
				if(!!$usedMode && $usedMode !== 'editorial') {
					$usedLinks.forEach(function(link){
						link.setAttribute('href', selectedNewUsedData.urlUsed);
					});
				}

				$usedStat.classList.remove('nm-fade-out');
				$usedStat.classList.add('nm-fade-in');
			}
		}, waitDuration);
	};

	__.switchTeaserTexts = function(carlineData) {
		var waitDuration = 300;

		// Replace carline label + eec strings with fade-animation
		$selectedCarHeadline.classList.remove('nm-fade-in');
		$fuel.classList.remove('nm-fade-in');
		$co2.classList.remove('nm-fade-in');

		$selectedCarHeadline.classList.add('nm-fade-out');
		$fuel.classList.add('nm-fade-out');
		$co2.classList.add('nm-fade-out');

		setTimeout(function() {
			$selectedCarHeadline.innerHTML = carlineData.nominativePlural;
			$fuel.innerHTML = carlineData.eecFuel;
			$co2.innerHTML = carlineData.eecCo2;

			$selectedCarHeadline.classList.remove('nm-fade-out');
			$fuel.classList.remove('nm-fade-out');
			$co2.classList.remove('nm-fade-out');

			$selectedCarHeadline.classList.add('nm-fade-in');
			$fuel.classList.add('nm-fade-in');
			$co2.classList.add('nm-fade-in');
		}, waitDuration);

		__.replaceNewUsedContent(carlineData);
	};

	__.animateSwitchCar = function(newSrc, animateText, carlineData) {
		var fadeDuration = 500;
		var waitDuration = 200;
		var loaded = false;
		var spinning = true;

		var oldSrc = $carImg.getAttribute('src');
		if (newSrc !== oldSrc) {
			$carImgWrap.classList.remove('nm-fade-in');
			$carImgWrap.classList.add('nm-fade-out');
			$carImg.removeEventListener('load',null);
			$carImg.addEventListener('load', function() {
				__.showLoadingIndicator();
				loaded = true;
			});

			var timeoutID, i = 0, maxI = 10;
			timeoutID = setInterval(function() {
				//console.log('waiting for image load');
				i++;
				if(loaded || i > maxI) {
					//console.log('image now loaded');
					__.hideLoadingIndicator();
					clearTimeout(timeoutID);
					$carImgWrap.classList.remove('nm-fade-out');
					$carImgWrap.classList.add('nm-fade-in');
					if(animateText) {
						__.switchTeaserTexts(carlineData);
					}
					$carImg.removeEventListener('load',null);
				}
			}, waitDuration);

			$carImg.setAttribute("src", newSrc);
		}
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/configuratorteaser.js");
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 164 */
/*!*************************************!*\
  !*** ./js/app/module/visualizer.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 152 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! configurator/dpu-controller */ 11),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! router */ 8),
	__webpack_require__(/*! module/device */ 25),
	__webpack_require__(/*! utils/dom */ 2)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(CONFIGURATOR_API, DPU_CONTROLLER, EVENTS, ROUTER, DEVICE, DOM_UTILS) {//eslint-disable-line max-params
	"use strict";
	// private vars
	var __ = {},
		exports = {
			__: __
		};
	__.oDefaults = {
		sColors: 'nm-j-visualizer-tiles-color',
		sRims: 'nm-j-visualizer-tiles-rim',
		sCombination: '.nm-md-visualizer-combination',
		sSelectorCombiTemplates: 'nm-j-visualizer-tpl-',
		sCombiItem: '.nm-visualizer-slide',
		sSelectorCombiContainer: '.nm-visualizer-combination',
		sTilesSelectorDelegateClick: 'li.nm-j-visualizer-item',
		sSelectorVisualizer: '.nm-md-visualizer',
		sMenuSelectedClass: 'nm-selected',
		sButtonSelector: '.nm-j-preconfig-submit',
		svisualizerSlide: '.nm-visualizer-slide'
	};

	__.selectedIndex = 0;
	__.selectedColorIndex = 0;
	__.selectedRimIndex = 0;

	__.eventLookup = {
		touchdevice: {
			down: 'touchstart',
			move: 'touchmove',
			up: 'touchend'
		},
		desktopdevice: {
			down: 'mousedown',
			move: 'mousemove',
			up: 'mouseup'
		}
	};
	__.isDown = false;
	__.deviceType = 'desktopdevice'; //'touchdevice'
	__.isTouchDevice = function() {
		return !!('ontouchstart' in window) || !!(navigator.msMaxTouchPoints);
	};

	__.handlePageLoaded = function() {
		var templates;
		//add module events
		__.visualizerContainer = DOM_UTILS.getElement(__.oDefaults.sSelectorVisualizer);
		__.visualizerSlide = DOM_UTILS.getElementsArray(__.oDefaults.sCombiItem);
		__.eventDelegate = DOM_UTILS.getEventDelegate(__.oDefaults.sSelectorVisualizer);

		//combination exists?
		if (DOM_UTILS.isElement(__.visualizerContainer)) {
			__.removeEvents();

			templates = DOM_UTILS.getElementsArray('script[id^=\'' + __.oDefaults.sSelectorCombiTemplates + '\']');

			__.maxIndex = templates.length - 1;

			if (__.isTouchDevice()) {
				__.deviceType = 'touchdevice';
			}

			if (__.maxIndex > 0) {
				__.eventDelegate.on('click', __.oDefaults.sTilesSelectorDelegateClick, __.handleTileClick);
			}

			__.eventDelegate.on('click', __.oDefaults.sButtonSelector, __.handleConfigurationStartClick);
		}

	};

	__.removeEvents = function() {
			__.eventDelegate.off('click', __.handleTileClick);
			__.eventDelegate.off('click', __.handleConfigurationStartClick);
			__.eventDelegate.off('touchend', __.handleTileClick);
			__.eventDelegate.off('touchend', __.handleConfigurationStartClick);
	};

	__.handleConfigurationStartClick = function(event) {
		var options,audiCode,prString;
		var combiItem = DOM_UTILS.getElement(__.oDefaults.sCombiItem);

		__.cancelEvent(event);

		audiCode = DOM_UTILS.getDataAttribute(combiItem, 'audicode');
		prString = DOM_UTILS.getDataAttribute(combiItem, 'prstring');

		if (!!audiCode||!!prString) {
			options={};
			if(!!audiCode){
				options.audicode=audiCode;
			}
			else{
				options.prstring=prString;
			}
			//load configuration by AudiCode
			DPU_CONTROLLER.loadConfigurationFromTeaser(
				options, 'audicode.visualizer').then(function() {
				ROUTER.open('page', CONFIGURATOR_API.getCurrentCarlineUrl());
			});
		}
	};

	__.handleTileClick = function(event_) {
		__.cancelEvent(event_);
		__.updateContent(DOM_UTILS.closest(event_.target, __.oDefaults.sTilesSelectorDelegateClick));
	};

	__.updateContent = function(item_) {
		//insert new conatent and animate in
		__.updateSelection(item_);

		__.insertCombination();
	};

	__.handlePageLeave = function() {
		//remove module events
		__.removeEvents();
	};

	__.insertCombination = function() {
		var newHeight,
			template,
			currentTemplate,
			oldHeight,
			visualizerSlideContainer = DOM_UTILS.getElement(__.oDefaults.sSelectorCombiContainer),
			myREQ,
			duration = 2000,
			animatingHeight;

		//append new teaser
		template = __.getTemplate()[0];

		visualizerSlideContainer.appendChild(template);
		template.classList.add('nm-md-visualizer-hidden');
		newHeight = template.clientHeight;

		currentTemplate = DOM_UTILS.getElement(__.oDefaults.svisualizerSlide);
		currentTemplate.classList.add('nm-md-visualizer-hide');
		oldHeight = currentTemplate.clientHeight;

		setTimeout(function() {
			template.classList.add('nm-md-visualizer-show');
			template.classList.remove('nm-md-visualizer-hidden');
		}, 250);

		__.isAnimating = true;
		visualizerSlideContainer.style.height = oldHeight+ 'px';
		animatingHeight = oldHeight;

		function step() {
			var diff = newHeight - oldHeight;
			var direction = diff < 0 ? -1 : 1;
			animatingHeight = animatingHeight + (diff/(duration/100));

			visualizerSlideContainer.style.height = animatingHeight + 'px';
			if(animatingHeight === newHeight){
				window.cancelAnimationFrame(myREQ);
				__.animationEnded(visualizerSlideContainer);
			}else{
				if (direction === -1 && animatingHeight > newHeight) {
					myREQ = window.requestAnimationFrame(step);
				}else if (direction === 1 && animatingHeight < newHeight) {
					myREQ = window.requestAnimationFrame(step);
				}
			}

		}
		myREQ = window.requestAnimationFrame(step);
	};

	__.animationEnded = function(visualizerSlideContainer) {
		var video,
			videoCon,
			parentContainer,
			slides = DOM_UTILS.getElementsArray(__.oDefaults.svisualizerSlide, visualizerSlideContainer),
			oldSlide = slides[0],
			newSlide = slides[slides.length -1],
			oldVideo = DOM_UTILS.getElementsArray('video', oldSlide),
			vidParent;

		// cleanup old videos
		if(oldVideo.length > 0) {
			oldVideo.forEach(function(video_) {
				vidParent = video_.parentNode;
				vidParent.removeChild(video_);
			});
		}

		video = DOM_UTILS.getElementsArray('video', newSlide);

		if(DEVICE.isMobile()) {
			videoCon = DOM_UTILS.closest(video[0], '.nm-video');
			videoCon.classList.add('nm-hide-controls');
			videoCon.setAttribute("controls", "controls");
		}
		visualizerSlideContainer.removeAttribute('style');

		parentContainer = oldSlide.parentNode;
		parentContainer.removeChild(oldSlide);

		__.isAnimating = false;
	};


	//update selected Tile
	__.updateSelection = function(selectedItem_) {
		var index,
			parentContainer = DOM_UTILS.closest(selectedItem_, '.nm-tile-block'),
			tiles = DOM_UTILS.getElementsArray(__.oDefaults.sTilesSelectorDelegateClick, parentContainer);

		tiles.forEach(function(elem, idx){
			if(elem === selectedItem_){
				selectedItem_.classList.add(__.oDefaults.sMenuSelectedClass);
				index = idx;
			}else {
				elem.classList.remove(__.oDefaults.sMenuSelectedClass);
			}
		});
		if(parentContainer.classList.contains(__.oDefaults.sColors)) {
			__.selectedColorIndex = index;
		}
		else if(parentContainer.classList.contains(__.oDefaults.sRims)) {
			__.selectedRimIndex = index;
		}
	};

	__.getTemplate = function() {
		//jQuery 1.9 BUG with client-side templates and whitespaces!!!=>trim()
		var template;
		var templateSelector = '.nm-visualizer-tpl[data-visualizer-data-counter="' + __.selectedColorIndex + '"][data-visualizer-matrix-counter="' + __.selectedRimIndex + '"]';
		var templateString = DOM_UTILS.getElement(templateSelector).innerText || '';

		templateString = templateString.trim();
		template = DOM_UTILS.createElementsFromHtmlString(templateString);
		return template;
	};

	__.cancelEvent = function(event_) {
		if ( !!event_ && typeof event_.preventDefault === 'function') {
			event_.preventDefault();
		}
	};

	__.initialize = function() {
		__.addEvents();
		__.handlePageLoaded();
	};

	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
		//__.eventBus.on(EVENTS.PAGE_LEAVE, __.handlePageLeave);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handlePageLoaded);
		//__.eventBus.on(EVENTS.LAYER_CLOSED, __.handlePageLeave);
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/visualizer.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 165 */
/*!*************************************!*\
  !*** ./js/app/module/navigation.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 172 */
/* global SETUPS */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS) {
	"use strict";
	var _options = {
		//navigationSelector: '.nm-wrapper .nm-area-content:first-child .nm-navigation-derivative-main-list',
		initialContentAreaSelector: '.nm-wrapper-content .nm-area-content:first-child',
		navigationSelector: '.nm-navigation-derivative-main-list',
		layerNavigationSelector: '.nm-navigation-derivative-sub-list',
		globalLayerNavigationSelector: '.nm-layer .nm-navigation-derivative-sub-list',
		hiddenNavItemClassName: 'nm-navigation-hidden-item',
		showMoreButtonClassName: 'nm-navigation-more-btn-show',
		hasMoreButtonClassName: 'nm-has-more-btn',
		basketToggle: '#nm-basket-toggle',
		mainNavToggle: '#nm-navigation-toggle-btn',
		shoppingToolsToggle: '#nm-supportbar-toggle',
		shoppingToolsLabel: '.nm-supportbar-toggle-label',
		shoppingToolsNav: '.nm-supportbar-navigation',
		stckWidgetToggle: '#nm-matching-toggle',
		stckWidgetLabel: '.nm-matching-toggle-label',
		sSelectorNavWrap: '.nm-nav-wrap',
		sClassLoaded: 'nm-nav-loaded',
		sClassStockCar: '.sc-filter-navigation',
		mobileWidth: 768
	},

	// private methods
	__ = {
		isStockCar: false
	},
	// public api
	api = {
		__: __
	};

	__.showMoreButton = function(domElement, navClass) {
		if(__.isStockCar) {
			return false;
		}
		var moreButton = domElement.find(navClass + ' > li:first-child label');
		var navList = domElement.find(_options.layerNavigationSelector);
		var $lastNavItem;
        if (moreButton.length > 0) {
			$lastNavItem = domElement.find(navClass + ' > li:last-child');
            if ($lastNavItem.hasClass('nm-summary-mobile-link')) {
				$lastNavItem = domElement.find(navClass + ' > li:nth-last-child(2)');
            }
            if (($lastNavItem.position().top > 0 || $lastNavItem.hasClass(_options.hiddenNavItemClassName) ) && $lastNavItem.find('a').is(':visible') ) {
                moreButton.addClass(_options.showMoreButtonClassName);
                navList.addClass(_options.hasMoreButtonClassName);
            } else {
                moreButton.removeClass(_options.showMoreButtonClassName);
                navList.removeClass(_options.hasMoreButtonClassName);
            }
        }
        jQuery(_options.sSelectorNavWrap).addClass(_options.sClassLoaded);
	};

	__.setHiddenNavItems = function(domElement, navClass) {
		if(__.isStockCar) {
			return false;
		}
		if (domElement.find(navClass).length > 0 && domElement.find(navClass + ' > li').length > 0) {
            domElement.find(navClass + ' > li').removeClass(_options.hiddenNavItemClassName);
            jQuery(domElement.find(navClass + ' > li').get().reverse()).each(function() {
                if (jQuery(this).find("a").length && jQuery(this).find("a").position().top > 0) {
                    jQuery(this).addClass(_options.hiddenNavItemClassName);
                } else {
                    return false;
                }
            });
        }
        __.showMoreButton(domElement, navClass);
	};

	__.initNavToggles = function(event) {
		var shoppingToolLabel, shoppingToolNav;
		if(!__.isStockCar) {
			__.legacyEventBus.on("change", _options.basketToggle, __.handleToggleChange );

			/* check for stck widget */
			if(jQuery(_options.stckWidgetToggle).length) {
				__.legacyEventBus.on("change", _options.stckWidgetToggle, __.handleToggleChange );
			}


			if(jQuery(_options.shoppingToolsToggle).length) {
				__.legacyEventBus.on("change", _options.shoppingToolsToggle, __.handleToggleChange );

				if(jQuery(window).width() > _options.mobileWidth && !(('ontouchstart' in window) ||navigator.msMaxTouchPoints)) {
					shoppingToolLabel = jQuery(_options.shoppingToolsLabel);
					shoppingToolNav = jQuery(_options.shoppingToolsNav);

					shoppingToolLabel.on("mouseover mouseout", __.handleShoppingToolsHover );
					shoppingToolNav.on("mouseover mouseout", __.handleShoppingToolsHover );
				}
			}
		}

		__.legacyEventBus.on("change", _options.mainNavToggle, __.handleToggleChange );
	};

	__.handleShoppingToolsHover = function(event) {
		var shoppingToolToggle = jQuery(_options.shoppingToolsToggle);

		shoppingToolToggle.prop("checked", (event.type === "mouseover"));
	};

	__.handleToggleChange = function(event) {

		var hasStckWidget = (jQuery(_options.stckWidgetToggle).length);
		var hasShoppingTools = (jQuery(_options.shoppingToolsToggle).length);

		if(jQuery(event.target).is( _options.basketToggle )) {

			jQuery(".nm-basket").toggleClass("nm-basket-widget-is-open", jQuery(event.target).is(":checked"));
			jQuery("body").removeClass("nm-page-nav-is-open");

			if(jQuery(_options.mainNavToggle).is(":checked") ) {
				jQuery(_options.mainNavToggle).prop("checked",false);
			}
			if(hasShoppingTools && jQuery(_options.shoppingToolsToggle).is(":checked") ) {
				jQuery(_options.shoppingToolsToggle).prop("checked",false);
			}
			if(hasStckWidget && jQuery(_options.stckWidgetToggle).is(":checked") ) {
				jQuery(_options.stckWidgetToggle).prop("checked",false);
			}

		}
		else if(jQuery(event.target).is( _options.mainNavToggle )) {

			jQuery("body").toggleClass("nm-page-nav-is-open", jQuery(event.target).is(":checked"));
			jQuery(".nm-basket").removeClass("nm-basket-widget-is-open");

			if(jQuery(_options.basketToggle).is(":checked") ) {
				jQuery(_options.basketToggle).prop("checked",false);
			}
			if(hasShoppingTools && jQuery(_options.shoppingToolsToggle).is(":checked") ) {
				jQuery(_options.shoppingToolsToggle).prop("checked",false);
			}
			if(hasStckWidget && jQuery(_options.stckWidgetToggle).is(":checked") ) {
				jQuery(_options.stckWidgetToggle).prop("checked",false);
			}
		}
		else if(jQuery(event.target).is( _options.shoppingToolsToggle )) {

			jQuery("body").removeClass("nm-page-nav-is-open");
			jQuery(".nm-basket").removeClass("nm-basket-widget-is-open");

			if(jQuery(_options.basketToggle).is(":checked") ) {
				jQuery(_options.basketToggle).prop("checked",false);
			}
			if(jQuery(_options.mainNavToggle).is(":checked") ) {
				jQuery(_options.mainNavToggle).prop("checked",false);
			}
			if(hasStckWidget && jQuery(_options.stckWidgetToggle).is(":checked") ) {
				jQuery(_options.stckWidgetToggle).prop("checked",false);
			}
		}
		else if (jQuery(event.target).is( _options.stckWidgetToggle )) {

			jQuery(".nm-basket").toggleClass("nm-basket-widget-is-open", jQuery(event.target).is(":checked"));
			jQuery("body").removeClass("nm-page-nav-is-open");

			if(jQuery(_options.basketToggle).is(":checked") ) {
				jQuery(_options.basketToggle).prop("checked",false);
			}
			if(jQuery(_options.mainNavToggle).is(":checked") ) {
				jQuery(_options.mainNavToggle).prop("checked",false);
			}
			if(hasShoppingTools && jQuery(_options.shoppingToolsToggle).is(":checked") ) {
				jQuery(_options.shoppingToolsToggle).prop("checked",false);
			}
		}
	};
	__.checkForMoreBtn = function(domElement) {
		var navElems = domElement.find(_options.navigationSelector);
		__.setHiddenNavItems(domElement, _options.navigationSelector);
        var dataMainnavUrl = domElement.find('.nm-nav-wrap').attr('data-mainnav');
        var selector = (_options.navigationSelector + ' > li > a[data-href="'+dataMainnavUrl+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list');
        __.setHiddenNavItems(domElement, selector);
	};
	__.checkForLayerMoreBtn = function(domElement) {
		var navElems = domElement.find(_options.layerNavigationSelector);
		__.setHiddenNavItems(domElement, _options.layerNavigationSelector);
        var dataMainnavUrl = domElement.find('.nm-nav-wrap').attr('data-mainnav');
        var selector = (_options.navigationSelector + ' > li > a[data-href="'+dataMainnavUrl+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list');
        __.setHiddenNavItems(domElement, selector);
	};
	__.handlerPageLoaded = function(payload) {
		__.checkForMoreBtn(payload.domElement);
		__.initNavToggles();
	};
	__.handlerLayerLoaded = function() {
		var layerDOM = jQuery('.nm-layer');
		__.checkForLayerMoreBtn(layerDOM);
	};
	__.initialize = function() {
		//console.log(_options.sClassStockCar, jQuery(_options.sClassStockCar));
		__.isStockCar = (jQuery(_options.sClassStockCar).length > 0);

		if(!__.isStockCar) {
			__.checkForMoreBtn(jQuery(_options.initialContentAreaSelector));
		}

		var layerDOM = jQuery('.nm-layer');
		if(layerDOM && layerDOM.length > 0) {
			__.checkForLayerMoreBtn(jQuery(_options.globalLayerNavigationSelector).parent());
		}

		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlerPageLoaded);

		if(!__.isStockCar) {
			__.eventBus.on(EVENTS.LAYER_LOADED, __.handlerLayerLoaded);

			jQuery(window).resize(function() {
				__.checkForMoreBtn(jQuery(_options.initialContentAreaSelector));
				__.checkForLayerMoreBtn(jQuery(_options.globalLayerNavigationSelector).parent());
			});
		}
		__.initNavToggles();
	};

	api.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.initialize();
			resolve("module/navigation.js");
		});
	};
	return api;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 166 */
/*!*******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/renderinglayer.tpl ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "\t<div class=\"nm-layer-toolbar\">\n\t\t<div class=\"nm-renderingcounter\">\n\t\t\t&nbsp;<span class=\"nm-renderingcounter-current\">01</span>|\n\t\t\t<span class=\"nm-renderingcounter-total\">--</span>&nbsp;\n\t\t</div>\n\t\t<div class=\"nm-button-close\">\n\t\t\t<svg class=\"nm-icon-cancel\">\n\t\t\t\t<use xlink:href={{=SETUPS.get('coreci.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-cancel\"}}></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class=\"nm-layer-inner nm-renderinglayer-wrapper\">\n\t\t<div class=\"nm-renderinglayer {{? it.open }} nm-cabrio-open{{ } }}\" style=\"{{?it.native_width!=undefined}} width: {{=it.native_width}}px{{?}}\">\n\t\t\t<input type=\"radio\" id=\"nm-renderinglayer-exteriortoggle\" name=\"nm-renderinglayer-toggle-radio\" value=\"exterior\" class=\"nm-renderinglayer-toggle-radio\" {{? it.interiorActive }}{{?? it.open }}{{??}}checked{{?}} >\n\t\t\t<input type=\"radio\" id=\"nm-renderinglayer-exterioropentoggle\" name=\"nm-renderinglayer-toggle-radio\" value=\"exterioropen\" class=\"nm-renderinglayer-toggle-radio\" {{? it.interiorActive }}{{?? it.open }}checked{{??}}{{?}} >\n\t\t\t<input type=\"radio\" id=\"nm-renderinglayer-interiortoggle\" name=\"nm-renderinglayer-toggle-radio\" value=\"interior\" class=\"nm-renderinglayer-toggle-radio\" {{? it.interiorActive }}checked{{?? it.open }}{{??}}{{?}} >\n\t\t\t<!--\n\t\t\t<input type=\"checkbox\" id=\"nm-renderinglayer-opentoggle\" name=\"nm-rl-toggle-open\" class=\"nm-rl-toggle-open\" {{? it.open}}checked{{?}} >\n\t\t-->\n\t\t\t<div class=\"nm-renderinglayer-stagewrapper {{? it.openavailable}} openavailable {{ } }}\">\n\t\t\t\t<ul class=\"nm-renderinglayer-stagebrowse\">\n\t\t\t\t\t<li class=\"nm-backarrow\"><a href=\"\" class=\"nm-b-icon nm-icon-back-arrow-l\"></a></li>\n\t\t\t\t\t<li class=\"nm-nextarrow\"><a href=\"\" class=\"nm-b-icon nm-icon-next-arrow-l\"></a></li>\n\t\t\t\t</ul>\n\t\t\t\t<a href=\"\" class=\"nm-renderinglayer-open nm-el-btn nm-el-btn-01\">{{? it.open}}{{=window.i18n['rendering-layer.cabrio-close']}}{{??}}{{=window.i18n['rendering-layer.cabrio-open']}}{{?}}</a>\n\t\t\t\t\n\t \t\t\t<div class=\"nm-renderinglayer-stage\">\n\t \t\t\t\t<ul class=\"nm-renderinglayer-stageimages\">{{~ it.exterior :value:i }}<li class=\"nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}\" data-view=\"{{=value.name}}\"><div class=\"nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}\" data-renderimage-type=\"fullscreen\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image: url({{=value.image}});\"></div></li>{{~}}{{~ it.exterior_open :value:i }}<li class=\"nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}\"><div class=\"nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}\" data-renderimage-type=\"fullscreen\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image: url({{=value.image}});\"></div></li>{{~}}{{~ it.interior :value:i }}<li class=\"nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}\"><div class=\"nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}\" data-renderimage-type=\"fullscreen\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image: url({{=value.image}});\"></div></li>{{~}}</ul>\n\t \t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"nm-renderinglayer-thumbnails clearfix\">\n\t\t\t\t<ul class=\"nm-renderinglayer-thumbs\">\n{{~ it.exterior :value:i }}\n\t{{? i == 0}}\t\n\t\t\t\t\t<li class=\"nm-renderinglayer-item nm-rl-toggle-exterior\">\n\t\t\t\t\t\t<div class=\"nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}\" data-key=\"{{=value.name}}\">\n\t\t\t\t\t\t\t<label for=\"nm-renderinglayer-exteriortoggle\" class=\"nm-renderinglayer-expander\"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}\" data-renderimage-type=\"{{=value.type}}\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image:url({{=value.thumbnail}})\"><a class=\"nm-b-icon nm-icon-plus\"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class=\"nm-renderinglayer-item nm-rl-item-exterior\">\n\t\t\t\t\t\t<div class=\"nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}\" data-key=\"{{=value.name}}\"></div>\n\t\t\t\t\t\t<div class=\"nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}\" data-renderimage-type=\"{{=value.type}}\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image:url({{=value.thumbnail}})\"></div>\n\t{{?}}\t\t\t\t\t\t\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.exterior_open :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class=\"nm-renderinglayer-item nm-rl-toggle-exterior-open\">\n\t\t\t\t\t\t<div class=\"nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}\" data-key=\"{{=value.name}}\">\n\t\t\t\t\t\t\t<label for=\"nm-renderinglayer-exterioropentoggle\" class=\"nm-renderinglayer-expander\"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}\" data-renderimage-type=\"{{=value.type}}\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image:url({{=value.thumbnail}})\"><a class=\"nm-b-icon nm-icon-plus\"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class=\"nm-renderinglayer-item nm-rl-item-exterior-open\">\n\t\t\t\t\t\t<div class=\"nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}\" data-key=\"{{=value.name}}\"></div>\n\t\t\t\t\t\t<div class=\"nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}\" data-renderimage-type=\"{{=value.type}}\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image:url({{=value.thumbnail}})\"></div>\n\t{{?}}\t\t\t\t\t\t\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.interior :value:i }}\t\t\n\t{{? i == 0}}\n\t\t\t\t\t<li class=\"nm-renderinglayer-item nm-js-toggle nm-rl-toggle-interior\">\n\t\t\t\t\t\t<div class=\"nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}\" data-key=\"{{=value.name}}\">\n\t\t\t\t\t\t\t<label for=\"nm-renderinglayer-interiortoggle\" class=\"nm-renderinglayer-expander\"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}\" data-renderimage-type=\"{{=value.type}}\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image:url({{=value.thumbnail}})\"><a class=\"nm-b-icon nm-icon-plus\"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class=\"nm-renderinglayer-item nm-js-item nm-rl-item-interior\">\n\t\t\t\t\t\t<div class=\"nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}\" data-key=\"{{=value.name}}\"></div>\n\t\t\t\t\t\t<div class=\"nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}\" data-renderimage-type=\"{{=value.type}}\" data-renderimage-view=\"{{=value.name}}\" style=\"background-image:url({{=value.thumbnail}})\"></div>\n\t{{?}}\t\t\t\t\t\t\n\t\t\t\t\t</li>\n{{~}}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n"

/***/ }),
/* 167 */
/*!********************************************!*\
  !*** ./js/app/module/renderinginjector.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 206 */
/*eslint max-params: [2, 6]*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! module/renderinglayer */ 52),
	__webpack_require__(/*! module/ave/ave-api */ 34),
	__webpack_require__(/*! core/layer/api */ 10),
	__webpack_require__(/*! tracking/renderinglayer-tracker */ 20)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, RENDERINGLAYER, AVE_API, LAYERAPI, RENDERINGLAYER_TRACKER) {
	"use strict";

	var __ = {},
		exports = {
			'__': __
		};

	__.oDefaults = {
		'sIdCanvas': 'avecanvas',

		'sClassActive': 'nm-active',
		'sClassAVE': 'ave-layer',

		'sSelectorOptionsWrapper': '.nm-ave-animation-selector-wrapper',
		'sSelectorStageWrapper': '.nm-renderinglayer-stagewrapper',

		'sSelectorBack': '.nm-renderinglayer .nm-backarrow',
		'sSelectorNext': '.nm-renderinglayer .nm-nextarrow',
		'sSelectorOuterRenderingLayer': '.nm-layer-renderinglayer',
		'sSelectorRenderingLayer': '.nm-layer-renderinglayer',
		'sSelectorRenderingStageWrapper': '.nm-renderinglayer-stagewrapper',
		'sSelectorThumbnail': '.nm-renderinglayer-item .nm-rl-placeholder',
		'sSelectorThumbnailActive': '.nm-renderinglayer-item .nm-rl-placeholder.nm-active',

		'sSelectorAVEContainerActive': '.nm-md-ave-container.nm-active',

		'sSelectorActiveStageImageWrapper': '.nm-renderinglayer-imagewrapper.nm-active'
	};

	__.disableStreamReadyEvent = function() {
		__.eventBus.off(EVENTS.AVE_STREAM_READY, RENDERINGLAYER.disableFor3D);
	};

	/**
	 * layer close event handler
	 * takes care of placing 3d canvas back into page if necessary
	 * @returns {void}
	 */
	__.handlerLayerClosed = function() {
		var originalContainer, originalId;

		if (jQuery(__.oDefaults.sSelectorRenderingLayer).length > 0 && jQuery(__.oDefaults.sSelectorRenderingLayer).first().hasClass(__.oDefaults.sClassAVE)) {

			if (jQuery('.nm-3d-unloading').length > 0) {
				originalContainer = jQuery('.nm-3d-unloading').prev();
				originalId = originalContainer.attr('id');
				__.moveOptionsIntoCanvas();
				AVE_API.moveAVE(__.oDefaults.sIdCanvas, originalId);
				originalContainer.addClass(__.oDefaults.sClassActive);
			} else {
				AVE_API.deactivate(__.oDefaults.sIdCanvas);
				jQuery(__.oDefaults.sSelectorOptionsWrapper).remove();
			}
		}
	};

	/**
	 * custom handler for thumbnail clicks
	 * @returns {void}
	 */
	__.handlerThumbnailClick = function() {
		if (!jQuery(this).hasClass(__.oDefaults.sClassActive)) {
			__.activateView(this);
		}
	};

	/**
	 * left navi handler
	 * @param {Event} e - the click event
	 * @returns {void}
	 */
	__.handlerBackClick = function(e) {
		var active = jQuery(__.oDefaults.sSelectorThumbnailActive);
		var prev;

		e.preventDefault();

		if (active.length > 0) {
			prev = RENDERINGLAYER.determinePrevFromActive(active);
		}

		if (typeof prev === 'undefined') {
			prev = RENDERINGLAYER.determineDefaultPrev();
		}
		__.activateView(prev);
	};

	/**
	 * right navi handler
	 * @param {Event} e - the click event
	 * @returns {void}
	 */
	__.handlerNextClick = function(e) {
		var active = jQuery(__.oDefaults.sSelectorThumbnailActive);
		var next;

		e.preventDefault();

		if (active.length > 0) {
			next = RENDERINGLAYER.determineNextFromActive(active);
		}

		if (typeof next === 'undefined') {
			next = RENDERINGLAYER.determineDefaultNext();
		}
		__.activateView(next);
	};

	/**
	 * activate view for given thumbnail object
	 * @param {jQuery} thumbObj - the thumbnail object
	 * @returns {void}
	 */
	__.activateView = function(thumbObj) {

		var lastActive = jQuery(__.oDefaults.sSelectorThumbnailActive);
		var oldKey = lastActive.attr('data-key');
		var newKey = jQuery(thumbObj).attr('data-key');

		jQuery(__.oDefaults.sSelectorThumbnail).removeClass(__.oDefaults.sClassActive);
		jQuery(thumbObj).addClass(__.oDefaults.sClassActive);

		if (newKey !== oldKey) {
			AVE_API.showPerspective(newKey);
		}
	};

	/**
	 * avoid layer closing when moving out of the canvas during a drag
	 * @param {Event} event - the triggering event
	 * @returns {void}
	 */
	__.captureAVEDrag = function(event) {
		var isAnimationClick = event.target.closest(".nm-ave-animation-selector-wrapper");

		jQuery('body').off('click', '.nm-layer-wrapper', LAYERAPI.wrapperClickHandler);
		jQuery('.nm-layer-wrapper').off('mousedown', __.handlerAVEWrapperClick);
		jQuery('.nm-layer-wrapper').on('mousedown', __.handlerAVEWrapperClick);
		jQuery('.nm-layer-wrapper').off('touchstart', __.handlerAVEWrapperClick);
		jQuery('.nm-layer-wrapper').on('touchstart', __.handlerAVEWrapperClick);

		if (!isAnimationClick) {
			RENDERINGLAYER_TRACKER.swipeHandler("Rotate");
		}
	};

	/**
	 * activate listeners on thumbnails
	 * @returns {void}
	 */
	__.activateThumbListeners = function() {
		jQuery(__.oDefaults.sSelectorThumbnail).on('click', __.handlerThumbnailClick);
		jQuery(__.oDefaults.sSelectorBack).on('click', __.handlerBackClick);
		jQuery(__.oDefaults.sSelectorNext).on('click', __.handlerNextClick);
		jQuery('#' + __.oDefaults.sIdCanvas).off('mousedown', __.captureAVEDrag);
		jQuery('#' + __.oDefaults.sIdCanvas).off('touchstart', __.captureAVEDrag);
		jQuery('#' + __.oDefaults.sIdCanvas).on('mousedown', __.captureAVEDrag);
		jQuery('#' + __.oDefaults.sIdCanvas).on('touchstart', __.captureAVEDrag);
	};

	/**
	 * activate close handler on layer background
	 * @returns {void}
	 */
	__.handlerAVEWrapperClick = function() {
		jQuery('body').off('mousedown', '.nm-layer-wrapper', LAYERAPI.wrapperClickHandler);
		jQuery('body').on('mousedown', '.nm-layer-wrapper', LAYERAPI.wrapperClickHandler);
		jQuery('body').off('touchstart', '.nm-layer-wrapper', LAYERAPI.wrapperClickHandler);
		jQuery('body').on('touchstart', '.nm-layer-wrapper', LAYERAPI.wrapperClickHandler);
	};

	/**
	 * legacy function to allow correct styling of options within layer
	 * @returns {void}
	 */
	__.moveOptionsOutOfCanvas = function() {
		jQuery(__.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery(__.oDefaults.sSelectorStageWrapper));
	};

	/**
	 * legacy function to allow correct styling of options within layer
	 * @returns {void}
	 */
	__.moveOptionsIntoCanvas = function() {
		jQuery(__.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery('#' + __.oDefaults.sIdCanvas));
	};

	__.retrieveActiveViewPerspective = function() {
		var activeImage = jQuery(__.oDefaults.sSelectorActiveStageImageWrapper);

		if (activeImage && activeImage.attr('data-view')) {
			return activeImage.attr('data-view');
		} else {
			return 'exterior_front';
		}
	};

	/**
	 * prepare dom for ave injection
	 * @returns {void}
	 */
	__.prepareDomForAVE = function() {
		if (document.getElementById(__.oDefaults.sIdCanvas) === null) {
			jQuery(__.oDefaults.sSelectorRenderingStageWrapper).prepend('<div id="' + __.oDefaults.sIdCanvas + '" class="nm-md-ave-container"></div>');
		}
		__.eventBus.on(EVENTS.AVE_STREAM_READY, RENDERINGLAYER.disableFor3D);
		jQuery(__.oDefaults.sSelectorOuterRenderingLayer).addClass(__.oDefaults.sClassAVE);
	};

	/**
	 * handler for ave injection request (either directly or via event)
	 * @returns {void}
	 */
	__.handlerInjectAVE = function() {
		var activeAveContainer = jQuery(__.oDefaults.sSelectorAVEContainerActive);

		if (AVE_API.isAveAvailable() === true) {

			__.prepareDomForAVE();

			if (activeAveContainer.length > 0) {
				AVE_API.moveAVE(activeAveContainer.attr('id'), __.oDefaults.sIdCanvas, false);
				RENDERINGLAYER.disableFor3D();
			} else {
				AVE_API.activateAVE(__.oDefaults.sIdCanvas, __.retrieveActiveViewPerspective());
			}
			__.handlerFollowupInjection();
		} else {
			console.log("renderinginjector - no matching carline");
		}
	};

	/**
	 * necessary steps after AVE injection
	 * @returns {void}
	 */
	__.handlerFollowupInjection = function() {
		__.activateThumbListeners();
		__.moveOptionsOutOfCanvas();
	};

	/**
	 * handler for layer opening (triggered on RENDERINGLAYER_LOADED)
	 * @returns {void}
	 */
	__.handlerLayerOpened = function() {

		if (jQuery(__.oDefaults.sSelectorRenderingLayer).length > 0) {

			if (AVE_API.isActiveCarline()) {
				if (AVE_API.isAveAvailable() === true) {
					__.handlerInjectAVE();
				} else {
					__.eventBus.on(EVENTS.AVE_AVAILABLE, __.handlerInjectAVE);
				}
			} else {
				jQuery(__.oDefaults.sSelectorOuterRenderingLayer).removeClass(__.oDefaults.sClassAVE);
				jQuery('#' + __.oDefaults.sIdCanvas).remove();
			}
		} else {
			console.log("renderinginjector - no matching dom element");
		}
	};

	/**
	 * initialize
	 * @returns {void}
	 */
	__.initialize = function() {
		__.eventBus.on(EVENTS.RENDERINGLAYER_LOADED, __.handlerLayerOpened);
		__.eventBus.on( 'jslayer.close', __.handlerLayerClosed);
		__.eventBus.on( 'jslayer.close', __.disableStreamReadyEvent);
	};

	exports.initializePromise = function(eventBus_) {

		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve('module/renderinginjector.js');
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 168 */
/*!***************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/ave-canvas.tpl ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-ave-animation-selector-wrapper\">\n\t<div class=\"nm-ave-animation-selector nm-el-btn nm-el-btn-01 nm-icon-settings nm-icon-expand-white nm-hidden\">\n\t\t<div class=\"options-text\">{{=window.i18n['rendering-layer.options']}}</div>\n\t</div>\n\t<ul class=\"nm-ave-animation-selection\">\n\t\t<li class=\"nm-button-close\">\n\t\t\t<svg class=\"nm-icon-cancel\">\n\t\t\t\t<use xlink:href={{=SETUPS.get('coreci.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-cancel\"}}></use>\n\t\t\t</svg>\n\t\t</li>\n\t</ul>\n</div>"

/***/ }),
/* 169 */
/*!*********************************!*\
  !*** ./js/app/module/wallet.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! module/device */ 25)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, DEVICE) { //eslint-disable-line max-params
    'use strict';
    //Private Methods
    var __ = {},
        //Public API
        exports = {
            __: __
        };
    __.device = DEVICE;
    __.oDefaults = {
        classIsWallet: 'nm-agent-is-wallet'
    };
    __.eventBus = null;
    __.addEvents = function() {
        __.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
    };
    //handle page updates
    __.handlePageLoaded = function() {
        if (__.isWalletAgent()) {
            document.querySelector('body').classList.add(__.oDefaults.classIsWallet);
        }
    };
    __.isWalletAgent = function() {
        return (__.device.isiPod() || __.device.isiPhone());
    };
    exports.initializePromise = function(eventBus_) {
        return new Promise(function(resolve) {
            __.eventBus = eventBus_;
            __.addEvents();
            __.handlePageLoaded();
            resolve("module/wallet.js");
        });
    };
    return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 170 */
/*!************************************************!*\
  !*** ./js/app/module/engine-selection-list.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*jslint maxlen: 145 */
/*jslint maxparams: 7 */
/*global Promise*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! events */ 0), __webpack_require__(/*! configurator/dpu-api */ 3)], __WEBPACK_AMD_DEFINE_RESULT__ = function(DOM_UTILS, EVENTS, API) {
	/**
	 * @exports module/startlayer
	 */
	'use strict';
	var __ = {},
		exports = {
			__: __
		};
	__.instance = false;
	__.oDefaults = {
		sSelectorEngineSelectContainer: '.nm-engine-list-filter',
		sSelectorEngineCheckboxContainer: '.nm-engine-list-filter-wrap-checkbox .nm-engine-list-filter',
		sSelectorEngineListContainer: '.nm-engine-list-container',
		sSelectorEngineList: '.nm-engine-list',
		noResultsClass: 'nm-engine-list-filter-noresult',
		sSelectorResetBtn: '.nm-j-reset-engine-filters',
		sSelectorChecklistItem: '.nm-check-list-item',
		sSelectorVisibleCounter: '.nm-j-enginesVisible',
		sDropdownSelectionClass: "nm-engine-list-filter-selected",
		sUnsetFiltersClass: '.nm-j-configurator-unset-filters',
		sFilterCheckboxSelector: '.nm-engine-list-filter input[type="radio"]'
	};
	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.onPageLoaded);
		__.legacyEventBus.on('change', __.oDefaults.sSelectorEngineListContainer + " select", __.handleSelectChangesEvent);
		__.legacyEventBus.on('click', __.oDefaults.sFilterCheckboxSelector, __.handleCheckboxChanges);
	};
	/* reset all checkboxes and their respective classes */
	__.resetCheckboxes = function($context, selectedCheckboxWrapper) {
		var filterType;
		DOM_UTILS.getElementsArray(__.oDefaults.sFilterCheckboxSelector, selectedCheckboxWrapper).forEach(function(element) {
			element.removeAttribute("checked");
			element.classList.remove("nm-j-is-checked");
			filterType = element.getAttribute("name");
			__.removeFilterState($context, filterType);
		});
	};
	__.handleCheckboxChanges = function(event) {
		var el = this,
			isChecked,
			$context, filterType, filterValue;
		isChecked = el.checked || el.classList.contains("nm-j-is-checked");
		$context = DOM_UTILS.closest(el, __.oDefaults.sSelectorEngineListContainer);
		event.preventDefault();
		isChecked = el.classList.contains("nm-j-is-checked");
		if (isChecked) {
			el.removeAttribute("checked");
			el.classList.remove("nm-j-is-checked");
			filterType = el.getAttribute("data-filter-type");
			__.removeFilterState($context, filterType);
		} else {
			__.resetCheckboxes($context, DOM_UTILS.closest(el, __.oDefaults.sSelectorEngineSelectContainer));
			el.setAttribute("checked", true);
			el.classList.add("nm-j-is-checked");
			filterType = el.getAttribute("data-filter-type");
			filterValue = el.getAttribute('value');
			__.addFilterState($context, filterType, filterValue);
		}
		__.filterItems($context);
	};
	__.addFilterState = function($context_, filterType, filterValue) {
		$context_.setAttribute('data-filter-criteria-' + filterType, filterValue);
	};
	__.removeFilterState = function($context_, filterType) {
		$context_.removeAttribute('data-filter-criteria-' + filterType);
	};
	__.onPageLoaded = function() {
		//call resetFilters for all modules on a page
		var i, j, $modlues = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorEngineListContainer),
			module;
		for (i = 0, j = $modlues.length; i < j; i++) {
			module = $modlues[i];
			__.resetFilters(module);
		}
	};
	__.handleSelectChangesEvent = function(event) {
		var context = DOM_UTILS.closest(this, __.oDefaults.sSelectorEngineListContainer);
		__.handleSelectChanges(context);
	};
	__.handleSelectChanges = function(context_) {
		var $selectedArr, selectedElements, filterType, filterValue;
		$selectedArr = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorEngineSelectContainer + " select", context_);
		selectedElements = [];
		$selectedArr.forEach(function(item) {
			selectedElements.push(item.options[item.selectedIndex]);
		});
		//unhide groups
		DOM_UTILS.getElement(__.oDefaults.sSelectorEngineList + " .nm-md-engine-selection-group", context_).removeAttribute("nm-hidden");
		selectedElements.forEach(function(el) {
			filterType = el.parentNode.getAttribute('data-filter-type');
			filterValue = el.value;
			//remove data-filter-criteria from container
			__.removeFilterState(context_, filterType);
			//$container.find("option:selected").attr("selected",false);
			el.setAttribute("selected", "selected");
			DOM_UTILS.getElementsArray(":not([value='" + filterValue + "'])", el.parentNode).forEach(function(unselected) {
				unselected.removeAttribute("selected");
			});
			if (!!filterValue && filterValue !== "*") {
				__.addFilterState(context_, filterType, filterValue);
			}
		});
		__.filterItems(context_);
	};
	__.handleResetClick = function(event) {
		var $context = DOM_UTILS.closest(this, __.oDefaults.sSelectorEngineListContainer);
		__.resetFilters($context);
	};
	__.resetFilters = function(target_) {
		var $selects, $moduleContainer = target_,
			$trimlineDropdown, trimline;
		console.log("resetfilters ", target_);
		__.resetAllItems($moduleContainer);
		$selects = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorEngineSelectContainer + " select", $moduleContainer);
		//find trimline dropdown ("Trimline" or "trimline")
		$trimlineDropdown = DOM_UTILS.getElement(__.oDefaults.sSelectorEngineSelectContainer + " [data-filter-type*='trimline']", $moduleContainer);
		//reset all selects to default '*'
		$selects.forEach(function(sel) {
			sel.value = "*";
		});
		//set trimeline to current trimline (or "All" - also in  special case of ConfigurationContainerUnsetAllFilters set to true via CQ)
		trimline = (DOM_UTILS.getElementsArray(__.oDefaults.sUnsetFiltersClass).length) ? '*' : API.getSelectedTrimline();
		//select trimline
		if ($trimlineDropdown.length) {
			//return if current trimline has already been selected
			if ($trimlineDropdown.value === trimline && !!trimline) {
				return;
			}
			$trimlineDropdown.value = (trimline || "*");
		}
		DOM_UTILS.getElementsArray(__.oDefaults.sSelectorEngineCheckboxContainer, $moduleContainer).forEach(function(checkbox) {
			__.resetCheckboxes($moduleContainer, checkbox);
		});
		__.handleSelectChanges($moduleContainer);
	};
	__.resetAllItems = function($context_) {
		var hiddenItems;
		$context_.classList.remove('nm-engine-list-filter-noresult');
		hiddenItems = DOM_UTILS.getElementsArray(".nm-md-engine-selection-group", $context_);
		hiddenItems.forEach(function(item) {
			item.classList.remove("nm-hidden");
		});
	};
	__.filterItems = function($context_) {
		var $list, btn,
			$items,
			$filteredItems;
		__.resetAllItems($context_);
		$list = DOM_UTILS.getElement(__.oDefaults.sSelectorEngineList, $context_);
		$items = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorChecklistItem, $list);
		$filteredItems = $items.filter(function(el) {
			return el.offsetParent !== null;
		});
		DOM_UTILS.getElement(__.oDefaults.sSelectorVisibleCounter, $context_).textContent = $filteredItems.length;
		//show reset button if no items are available/visible
		if (!$filteredItems.length) {
			//hide table if no result available
			$context_.classList.add(__.oDefaults.noResultsClass);
			btn = DOM_UTILS.getElement(__.oDefaults.sSelectorResetBtn, $context_);
			btn.addEventListener("click", __.handleResetClick);
		} else {
			$context_.classList.remove(__.oDefaults.noResultsClass);
			btn = DOM_UTILS.getElement(__.oDefaults.sSelectorResetBtn, $context_);
			btn.removeEventListener("click", __.handleResetClick);
		}
		__.filterGroupedItems($list);
	};
	//hide grouped items if no items are visible within
	__.filterGroupedItems = function($listContainer_) {
		var $groups = DOM_UTILS.getElementsArray(".nm-md-engine-selection-group", $listContainer_);
		var $items;
		$groups.forEach(function(group) {
			group.classList.remove("nm-hidden");
			$items = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorChecklistItem, group);
			$items = $items.filter(function(el) {
				return el.offsetParent !== null;
			});
			if (!$items.length) {
				group.classList.add("nm-hidden");
			}
		});
	};
	__.initialize = function() {
		var contextArr;
		__.addEvents();
		contextArr = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorEngineListContainer);
		contextArr.forEach(function(module) {
			__.handleSelectChanges(module);
		});
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = DOM_UTILS.getEventDelegate('body');
			__.initialize();
			resolve("module/engine-selection-list.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 171 */
/*!************************************!*\
  !*** ./js/app/module/tdrdealer.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 24431 */
/* global google, InfoBox */

// TODO: #dealermap-001 - resolve dep html-template

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! configurator/dpu-api */ 3)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, DPU_API) {
	"use strict";
	var exports, __;
	__ = {};
	exports = {
		__: __
	};

	__.buildInfoEl = function(el) {
		var conf, renderUrl, assets, renderPath, price, prices, name, engine,
			ext_front, img, infoTextEl;
		conf = DPU_API.getConfiguration() || {};
		renderUrl = DPU_API.getRenderUrl();
		assets = DPU_API.getConfigurationAssets() || {};
		ext_front = assets.exterior_front || {};
		renderPath = ext_front['thumbnail.new'];
		prices = DPU_API.getPrices() || {};
		price = prices.total;
		name = DPU_API.getCarlineName();
		engine = conf.description;
		console.log(renderUrl, renderPath, name, engine, price);
		if(!!(renderUrl && renderPath)) {
			img = document.createElement('img');
			img.src = renderUrl + renderPath;
			el.appendChild(img);
		}
		if(!!name) {
			infoTextEl = document.createElement('div');
			infoTextEl.className = 'nm-form-configuration-info';
			infoTextEl.innerHTML = '<span class="nm-h3">' + name + '</span>' +
				'<p>' + engine + '</p>' +
				'<p><strong>' + price + '</strong></p>';
			el.appendChild(infoTextEl);
		}
	};

	__.initialize = function() {
		__.eventBus.on(EVENTS.FORM_LOADED, exports.handleFormLoaded);
	};

	exports.handleFormLoaded = function() {
		var infoEl = document.querySelector('#nm-id-custom-tdrdealerreq-configuration-info');
		if(!!infoEl) {
			__.buildInfoEl(infoEl);
		}
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/trdealer.js");
		});
	};

	return exports;

}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 172 */
/*!*************************************!*\
  !*** ./js/app/module/teasergrid.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS) {
	"use strict";

	var __ = {},
		exports = {
			__: __
		};

	// PAGE_CACHE must be included to make sure that _updateCacheUrl("cacheupdateurl"); is called when document.onReady
	// TEASERTRACKING must be included so that it can receive the events send
	/**
	 * get array with carlines sorted by their interest values
	 */
	__.getSortedCarlinesArr = function() {
		return window.bt.getAllCarlinesOrdereByLevel();
	};
	__.initialize = function() {
		setTimeout(function() {
			//show the right teasers
			jQuery(".nm-homepage-grid-container").each(function(index) {
				var $this = jQuery(this),
					rotationType = $this.find(".nm-homepage-grid-container-list").attr("data-rotation"),
					$defaultTeaser = $this.find(".nm-homepage-grid-container-default .nm-homepage-grid-teaser"),
					$nonDefaultTeasers = $this.find(".nm-homepage-grid-container-list .nm-homepage-grid-teaser");
				//filter out all teasers that should not be visible (test publishing time)
				var $possibleNonDefaultTeasers = $nonDefaultTeasers.filter(function(idx) {
					var $that = jQuery(this),
						startDate = Math.round($that.attr("data-startdate")),
						endDate = Math.round($that.attr("data-enddate"));

					//TODO: see silvans solution in homepage.js (aufbohren?)
					// Dates are written out in utc, so compare to utc time
					var currentDate = new Date().getTime();

					if (startDate === 0 && endDate === 0) {
						//neither startDate nor endDate are set
						return true;
					} else if (startDate > 0 && endDate > 0) {
						// startDate and endDate are set
						if (startDate <= currentDate && currentDate < endDate) {
							return true;
						}
					} else if (startDate > 0) {
						// only startDate is set
						if (startDate <= currentDate) {
							return true;
						}
					} else if (endDate > 0) {
						// only endDate is set
						if (currentDate < endDate) {
							return true;
						}
					}

					return false;
				});


				if (rotationType === "showFirst" && $possibleNonDefaultTeasers.length > 0) {
					$defaultTeaser.hide();
					var $firstTeaser = $possibleNonDefaultTeasers.first();
					$firstTeaser.show();
					__.eventBus.emit(EVENTS.TEASER_ACTIVATED, {
						teaser: $firstTeaser,
						rotationType: rotationType
					});

				} else if (rotationType === "showRandom" && $possibleNonDefaultTeasers.length > 0) {
					$defaultTeaser.hide();
					var randomTeaserNr = Math.round(Math.random() * ($possibleNonDefaultTeasers.length - 1)),
						$randomTeaser = $possibleNonDefaultTeasers.eq(randomTeaserNr);
					$randomTeaser.show();
					__.eventBus.emit(EVENTS.TEASER_ACTIVATED, {
						teaser: $randomTeaser,
						rotationType: rotationType
					});

				} else if (rotationType === "interestBased") {
					var $bestMatchingTeaser = $possibleNonDefaultTeasers.first(),
						bestMatchingInterest = 0,
						carline, $items, sel, carlineInterestSorted = __.getSortedCarlinesArr();
					for (var i = 0, len = carlineInterestSorted.length; i < len; i++) {
						carline = carlineInterestSorted[i].carline;
						//get carline-matching teasers
						sel = ["[data-carline='", carline, "']"].join("");
						console.log("$possibleNonDefaultTeasers.length1" + $possibleNonDefaultTeasers.length);
						$items = $possibleNonDefaultTeasers.filter(sel);
						if (!$items.length) {
							continue;
						} else {
							var interestInCarline = 0;
							try {
								interestInCarline = window.bt.getValueForCarline(carline);
							} catch (ex) {
								//ignore most likely no interest ;)
							}
							jQuery.each($items, function() {//eslint-disable-line no-loop-func
								var $that = jQuery(this);
								//var carline = $that.attr("data-carline");
								var minInterestNecessary = parseFloat($that.attr("data-interest"));
								//console.log(interestInCarline +">="+ minInterestNecessary +"&&"+ interestInCarline +">"+ bestMatchingInterest);
								if (interestInCarline >= minInterestNecessary && interestInCarline > bestMatchingInterest) {
									bestMatchingInterest = minInterestNecessary;
									$bestMatchingTeaser = $that;
								}
							});
							break;
						}
					}
					$defaultTeaser.hide();
					$bestMatchingTeaser.show();
					__.eventBus.emit(EVENTS.TEASER_ACTIVATED, {
						teaser: $bestMatchingTeaser,
						rotationType: rotationType
					});
				}
			});
			__.eventBus.emit(EVENTS.TEASER_ALL_ACTIVATED);
		}, 100);
	};

	// when we came here following an old link with an unic layer
	// replace their layer mechanism with ours
	__.checkUnicLayers = function() {
		//	setTimeout(function () {
		var hash = window.location.hash;
		if ( !!hash && hash.substr(0, 14) === "#overlay/load/") {
			hash = "#layer=/de/brand/de/tools/nemo/cms4i-over-nemo.html/" + hash.substr(14);
			window.location.hash = hash;
		}
		//	}, 100);
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/teasergrid.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 173 */
/*!**********************************!*\
  !*** ./js/app/module/bicolor.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/bicolor-options.tpl */ 174), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, API, TPL_RENDERER, OPTONS_TPL, DOM_UTILS) { //eslint-disable-line max-params
	"use strict";
	var __ = {},
		exports = {
			__: __
		};
	__.oDefaults = {
		sSelectorDropDown: '.nm-j-configurator-dropdown',
		sConfigIdsDataAttribute: 'data-configurator-id-included',
		sSelectorBicolorModule: '.nm-md-bicolor-chooser',
		sSelectorOptionList: '.nm-md-options-list .nm-configurator-container',
		sClassShowOptions: 'nm-md-bicolor-chooser-show-options'
	};
	__.addEvents = function addEvents() {
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleConfigurationUpdates);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.updateBicolorOptions);
	};
	__.handleConfigurationUpdates = function() {
		var dropDowns = DOM_UTILS.getElementsArray(__.oDefaults.sSelectorDropDown);
		__.updateDropDownStatus(dropDowns);
		__.updateBicolorOptions();
	};
	// update bicolor radio button visibility
	__.updateBicolorOptions = function() {
		var listContainer,
			ids,
			items,
			item,
			i,
			len,
			biColorModule = document.querySelector(__.oDefaults.sSelectorBicolorModule);
		if (biColorModule && biColorModule !== null) {
			listContainer = biColorModule.parentElement.querySelector(__.oDefaults.sSelectorOptionList);
		}
		if (listContainer && listContainer !== null) {
			ids = __.parseArrayFromString(listContainer.getAttribute(__.oDefaults.sConfigIdsDataAttribute));
			items = API.getItems();
			biColorModule.classList.remove(__.oDefaults.sClassShowOptions);
			for (i = 0, len = ids.length; i < len; i++) {
				item = items[ids[i]] || {};
				if (!!item.status) {
					if (item.status === "11010" || item.status === "10011") {
						biColorModule.classList.add(__.oDefaults.sClassShowOptions);
						return false;
					}
				}
			}
		}
	};
	__.updateDropDownStatus = function(dropDowns_) {
		var idArr, i, len, currDropDown;
		for (i = 0, len = dropDowns_.length; i < len; i++) {
			//get all initial ids for this dropdown
			currDropDown = dropDowns_[i];
			idArr = __.parseArrayFromString(currDropDown.getAttribute(__.oDefaults.sConfigIdsDataAttribute));
			__.redrawDropDown(currDropDown, idArr);
		}
	};
	__.redrawDropDown = function(select_, ids_) {
		var items, item, htmlItem, optionsData, i, len;
		//clear all <option>s from select container
		select_.innerHTML = '';
		items = API.getItems() || [];
		for (i = 0, len = ids_.length; i < len; i++) {
			item = items[ids_[i]] || {};
			if (!!item.status && !__.isHidden(item.status)) {
				optionsData = {
					domId: item.id,
					status: item.status,
					description: item.name || item.description || "carinfo[id] missing…",
					selected: __.isSelected(item.status)
				};
				//render fragment from emplate and addd to container (select)
				htmlItem = TPL_RENDERER.render(OPTONS_TPL, optionsData);
				DOM_UTILS.appendHtmlString(select_, htmlItem);
			}
		}
	};
	__.isSelected = function(statusString_) {
		var digitMatcher = new RegExp("(0|1){5}"),
			matcher;
		if (!statusString_.length || statusString_.length !== 5 || typeof statusString_ !== "string" || !digitMatcher.test(statusString_)) {
			return false;
		}
		matcher = new RegExp("1(1|0)01(0|1)");
		return matcher.test(statusString_);
	};
	__.isHidden = function(statusString_) {
		var digitMatcher = new RegExp("(0|1){5}"),
			matcher;
		if (!statusString_.length || statusString_.length !== 5 || typeof statusString_ !== "string" || !digitMatcher.test(statusString_)) {
			return true;
		}
		//only 11010 and 11000 are visible
		matcher = new RegExp("110(0|1)0"); // new RegExp("0(0|1){4}");
		return (!matcher.test(statusString_));
	};
	__.parseArrayFromString = function(arrayString_) {
		var arrayString = arrayString_ || "";
		var arr = arrayString.replace(/[\[\]'"]+/g, '');
		arr = (arr.length) ? arr.split(",") : [];
		return arr;
	};
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/bicolor.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 174 */
/*!********************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/bicolor-options.tpl ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<option class=\"nm-j-configurator-item nm-j-configurator-status_{{=it.status}}\" data-configurator-id=\"{{=it.domId}}\"\n{{?it.status==\"11010\" }}selected=\"selected\" {{?}} value=\"{{=it.domId}}\">\n\t{{=it.description}}\n</option>\n"

/***/ }),
/* 175 */
/*!**********************************************!*\
  !*** ./js/app/mediagallery/mg-controller.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! mediagallery/mg-model */ 26), __webpack_require__(/*! core/signal */ 4), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, MODEL, SIGNAL, DOM_UTILS) {//eslint-disable-line max-params
        'use strict';
        //Private Methods
        var __ = {},
            //Public API
            exports = {
                __: __
            };
        __.oDefaults = {
            sSelectorNextBtn: '.nm-mediagallery-browse .nm-nextarrow',
            sSelectorPrevBtn: '.nm-mediagallery-browse .nm-backarrow',
            sSelectorSliderItemLink: '.nm-mediagallery-item a',
            sSelectorSliderItem: '.nm-mediagallery-item',
            sSelectorDataCatAttr: 'data-category',
            sSelectorCategoryItem: '.nm-mediagallery-categories li',
            sSelectorModule: '.nm-md-mediagallery-media-list',
            sClassShowOverview: 'nm-md-mediagallery-media-list-overview',
            sSelectorOverviewSwitch: '.nm-mediagallery-categories-overview',
            sSelectorOverview: '.nm-mediagallery-categories-overview',
            sSelectorDownloadbox: '.nm-mediagallery-download-infobox',
            sSelectorDownloadIcon: '.nm-mediagallery-download',
            sIdDropdownList: '#nm-mediagallery-category-list-select',
            sSelectorSlideContainer: '.nm-mediagallery-detail-slide',
            sSelectorMediagalleryModule: '.nm-md-mediagallery-media-list',
            sIDprefix: 'mg_item_'
        };
        //
        __.addEvents = function() {
            __.removeEvents();
            __.eventBus.one(EVENTS.LAYER_CLOSE, __.onLayerClosing);
            jQuery("body").on("click.mg_prevnext", __.oDefaults.sSelectorPrevBtn, {
                direction: "back"
            }, __.handlePagePrevNextClick);
            jQuery("body").on("click.mg_prevnext", __.oDefaults.sSelectorNextBtn, {
                direction: "next"
            }, __.handlePagePrevNextClick);
            jQuery("body").on("mousedown.mg_stage", __.oDefaults.sSelectorSlideContainer, __.onMouseDown);
            jQuery("body").on("click.mg_slider_item", __.oDefaults.sSelectorSliderItemLink, __.handleSliderItemClick);
            jQuery("body").on("click.mg_category", __.oDefaults.sSelectorCategoryItem, __.handleCategoryChangeClick);
            jQuery("body").on("keydown.mg_browse_arrows", __.handleKeyDown);
            jQuery("body").on("change.mg_dropdown_select", __.oDefaults.sIdDropdownList, __.handleCategoryDropdownChanges);
            jQuery("body").on('keyup.mediagallery', __.handleEscKey);
            jQuery("body").on("click.mediagallery", ".nm-layer-wrapper", __.handleShaderClick);
        };
        __.removeEvents = function() {
            jQuery("body").off("click.mg_prevnext", __.oDefaults.sSelectorPrevBtn, __.handlePagePrevNextClick);
            jQuery("body").off("click.mg_prevnext", __.oDefaults.sSelectorNextBtn, __.handlePagePrevNextClick);
            jQuery("body").off("mousedown.mg_stage", __.oDefaults.sSelectorSlideContainer, __.onMouseDown);
            jQuery("body").off("click.mg_slider_item", __.oDefaults.sSelectorSliderItemLink, __.handleSliderItemClick);
            jQuery("body").off("click.mg_category", __.oDefaults.sSelectorCategoryItem, __.handleCategoryChangeClick);
            jQuery("body").off("keydown.mg_browse_arrows", __.handleKeyDown);
            jQuery("body").off("change.mg_dropdown_select", __.oDefaults.sIdDropdownList, __.handleCategoryDropdownChanges);
            jQuery("body").off('keyup.mediagallery', __.handleEscKey);
            jQuery("body").off("click.mediagallery", ".nm-layer-wrapper", __.handleShaderClick);
        };
        __.onLayerClosing = function() {
            var bodyScrollPos, htmlScrollPos;

            __.removeEvents();

            if (window.location.hash.indexOf("mediagallery=") > -1) {
                //save current scrollpos
                bodyScrollPos = document.body.scrollTop;
                htmlScrollPos = document.documentElement.scrollTop; //for FF and IE
                //remove mediagallery-param from browserhash before closing the layer
                window.location.hash = window.location.hash.replace(/(mediagallery=){1}\w*(\|){1}\d*(&)?/, "");
                //move back to original scrollpos after hash reset //FIXME: quick and dirty soluten - find a better one!
                document.body.scrollTop = bodyScrollPos;
                document.documentElement.scrollTop = htmlScrollPos;
            }
        };
        __.onMouseDown = function(event_) {
            //console.log("event_Down", event_);
            __.mousePosX = event_.pageX;
            jQuery("body").on("mousemove.mg_stage", __.oDefaults.sSelectorSlideContainer, __.onMouseMove);
            jQuery("body").one("mouseup.mg_stage", __.oDefaults.sSelectorSlideContainer, __.onMouseUp);
        };
        __.onMouseUp = function(event_) {
            if (Math.abs(__.mousePosX - event_.pageX) > 25) {
                // console.log("event_Up", event_);
                // jQuery("body").off("mousemove.mg_stage", __.oDefaults.sSelectorSlideContainer, __.onMouseMove);
                if ((__.mousePosX - event_.pageX > 0)) {
                    __.triggerNextClick();
                } else {
                    __.triggerPrevClick();
                }
            }
        };
        __.handleEscKey = function(event_) {
            if (event_.keyCode === 27) {
                __.closeLayer();
            }
        };
        __.galleryIsOpened = function() {
            return (jQuery(__.oDefaults.sSelectorMediagalleryModule).length > 0);
        };
        __.closeLayer = function() {
            jQuery([__.oDefaults.sSelectorMediagalleryModule, ".nm-button-close"].join(" ")).trigger("click");
        };
        __.handleShaderClick = function(event_) {
            if (__.galleryIsOpened()) {
                var clickedOutside = DOM_UTILS.isElementOutsideOfElementWithSelector(event_.target, __.oDefaults.sSelectorMediagalleryModule);
                if (clickedOutside && !jQuery(event_.target).hasClass("nm-mediagallery-image")) {
                    __.cancelEvent(event_);
                    __.closeLayer();
                }
            }
        };
        __.onMouseMove = function(event_) {
            //console.log("event_Move", event_);
            //  __.mousePosX = event_.pageX;
        };
        __.isInOverviewMode = function() {
            var $selModule = jQuery(__.oDefaults.sSelectorModule);
            return $selModule.hasClass(__.oDefaults.sClassShowOverview);
        };
        __.handleKeyDown = function(event_) {
            if (event_.keyCode === 37) {
                __.triggerPrevClick();
            }
            if (event_.keyCode === 39) {
                __.triggerNextClick();
            }
        };
        __.triggerNextClick = function() {
            var nextBtn = jQuery(__.oDefaults.sSelectorNextBtn);
            if (!nextBtn.hasClass("nm.hidden")) {
                nextBtn.trigger("click");
            }
        };
        __.triggerPrevClick = function() {
            var prevBtn = jQuery(__.oDefaults.sSelectorPrevBtn);
            if (!prevBtn.hasClass("nm.hidden")) {
                prevBtn.trigger("click");
            }
        };
        /*
         * handle next/previous arrow clicks
         */
        __.handlePagePrevNextClick = function(event_) {
            if (__.isInOverviewMode()) {
                return false;
            }
            __.cancelEvent(event_);
            var direction = event_.data.direction;
            var index = MODEL.getItemIndex();
            var selectedItem = (direction === "next") ? MODEL.getNextItem(index) : MODEL.getPreviousItem(index);
            __.triggerItemSelectionUpdate(selectedItem);
        };
        /*
         * handle thumbnail item clicks
         */
        __.handleSliderItemClick = function(event_) {
            __.cancelEvent(event_);
            var clickedItemID = jQuery(this).parent().attr('id');
            if (!clickedItemID) {
                console.warn("item could not be found!");
                return false;
            }
            var selectedItem = MODEL.getItemById(clickedItemID);
            __.triggerItemSelectionUpdate(selectedItem);
        };
        __.showOverview = function() {
            var $selModule = jQuery(__.oDefaults.sSelectorModule);
            var $categoryWrapper = jQuery('.nm-mediagallery-categories');
            $categoryWrapper.find(".nm-active").removeClass("nm-active");
            //show overview
            jQuery(__.oDefaults.sSelectorOverviewSwitch).addClass("nm-active");
            $selModule.addClass(__.oDefaults.sClassShowOverview);
        };
        __.hideOverview = function() {
            var $selModule = jQuery(__.oDefaults.sSelectorModule);
            var $categoryWrapper = jQuery('.nm-mediagallery-categories');
            //remove all selected states from menubar
            $categoryWrapper.find(".nm-active").removeClass("nm-active");
            //hide overview
            $selModule.removeClass(__.oDefaults.sClassShowOverview);
            //TODO: add selected state to previous selected category
            var category = MODEL.getSelectedCategory();
            $categoryWrapper.find("[data-category='" + category + "']").addClass("nm-active");
        };
        /**
         * handle category item clicks
         */
        __.handleCategoryChangeClick = function(event_) {
            __.cancelEvent(event_);
            var $clickedItem = jQuery(this);
            var selectedCategory = $clickedItem.attr(__.oDefaults.sSelectorDataCatAttr);
            if (selectedCategory === "overview") {
                if (!__.isInOverviewMode()) {
                    __.showOverview();
                } else {
                    __.hideOverview();
                }
            } else {
                if (__.isInOverviewMode()) {
                    __.hideOverview();
                }
                __.triggerCategoryUpdate(selectedCategory);
            }
        };
        /**
         * handle category dowpdown changes
         */
        __.handleCategoryDropdownChanges = function(event_) {
            __.cancelEvent(event_);
            //var optionSelected = $("option:selected", this);
            var valueSelected = this.value;
            if (valueSelected === "overview") {
                if (__.isInOverviewMode()) {
                    __.hideOverview();
                } else {
                    __.showOverview();
                }
            } else {
                if (__.isInOverviewMode()) {
                    __.hideOverview();
                }
                __.triggerCategoryUpdate(valueSelected);
            }
        };
        /**
         * dispatch Event on category updates
         */
        __.triggerCategoryUpdate = function(cat_) {
            MODEL.setSelectedCategory(cat_);
            //the current slected item exists in the previous AND the new category
            var previousItem = MODEL.getSelectedItem();
            //called for the first Time?
            if (!previousItem) {
                return false;
            }
            if (MODEL.getItemIndex() > -1) {
                __.triggerItemSelectionUpdate(MODEL.getSelectedItem());
            } else {
                //set the first Item of the new category
                __.triggerItemSelectionUpdate(MODEL.getItemByIndex(0));
            }
        };
        /**
         * dispach Event on Item selection updates
         */
        __.triggerItemSelectionUpdate = function(selectedItem_) {
            if (__.isInOverviewMode()) {
                //is item is not in current category?
                if (MODEL.getItemIndex(selectedItem_) < 0) {
                    //set category 'all'
                    MODEL.setSelectedCategory("all");
                }
                //close overview
                __.hideOverview();
            }
            MODEL.setSelectedItem(selectedItem_);
            __.updateBrowseArrows();
        };
        __.updateBrowseArrows = function() {
            var /*index = MODEL.getItemIndex(),*/ maxIndex = MODEL.getMaxIndex(),
                prevBtn = jQuery(__.oDefaults.sSelectorPrevBtn),
                nextBtn = jQuery(__.oDefaults.sSelectorNextBtn);
            if (maxIndex < 1) {
                prevBtn.addClass("nm-hidden");
                nextBtn.addClass("nm-hidden");
            } else {
                prevBtn.removeClass("nm-hidden");
                nextBtn.removeClass("nm-hidden");
            }
            //index > 0 ? prevBtn.removeClass("nm-hidden") : prevBtn.addClass("nm-hidden");
            //index < maxIndex ? nextBtn.removeClass("nm-hidden") : nextBtn.addClass("nm-hidden");
        };
        /**
         * parse loaction hash string for "mediagallery="
         * @param {string} - hashString
         * @returns {object} - preselection {category:"<category>",index:<index>}
         */
        __.parseHash = function(hashString_) {
            var preselection = {
                category: null,
                index: -1
            };
            /*preselection = {
                category: "all",
                index: 0
            };*/
            if (hashString_.indexOf("mediagallery=") > -1) {
                var mgString = hashString_.split("mediagallery=")[1];
                mgString = decodeURI(mgString);
                mgString = mgString.split("&")[0];
                var mg = mgString.split("|");
                if (mg.length === 2) {
                    preselection.category = mg[0];
                    preselection.index = parseInt(mg[1], 10);
                }
                if (mg.length === 1 && !isNaN(parseInt(mg[0], 10))) {
                    preselection.category = "all";
                    preselection.index = parseInt(mg[0], 10);
                }
                if (parseInt(preselection.index, 10) > 0) {
                    preselection.index = preselection.index - 1;
                }
            }
            return preselection;
        };
        /**
         * prevent default event behavior
         * @param  {Object} event_ e.g. e click event
         * @return {Void}
         */
        __.cancelEvent = function(event_) {
            if (!!event_ && typeof event_.preventDefault === 'function') {
                event_.preventDefault();
            }
        };
        /**
         * initialize Model with data and set initail view states
         */
        __.initializeDataAndViews = function() {
            //do nothing if no mediagallery is available
            if (__.galleryIsOpened()) {
                __.addEvents();
                __.initializeModel();
                //get preselected state from hash
                var preselection = __.parseHash(window.location.hash);
                //update item
                var items = MODEL.getAllItems();
                if (!preselection.category || !items || !items.length || preselection.index >= items.length) {
                    console.log("could not enter with preselection!");
                    return false;
                }
                var item = items[preselection.index];
                __.triggerCategoryUpdate(preselection.category);
                __.triggerItemSelectionUpdate(item);
            }
        };
        /**
         * collect items and categories from DOM
         */
        __.initializeModel = function() {
            var $selModule = jQuery(__.oDefaults.sSelectorModule);
            var $items = $selModule.find(__.oDefaults.sSelectorSliderItem);
            var $cur, items = [],
                item;
            var selectedItem;
            jQuery.each($items, function(index, val) {
                $cur = jQuery(val);
                item = {};
                item.category = !!$cur.attr("data-category") ? $cur.attr("data-category").toLowerCase() : "all";
                item.description = $cur.attr("data-description") || "";
                item.contenttype = !!$cur.attr("data-content-type") ? $cur.attr("data-content-type") : "image";
                item.imageurl = $cur.attr("data-image-url") || null;
                item.thumburl = $cur.attr("data-thumb-url");
                item.posterurl = $cur.attr("data-poster-url") || null;
                item.videosrc = $cur.attr("data-video-src") || null;
                item.downloadlink = $cur.attr("data-download-link") || null;
                item.id = $cur.attr("id");
                items.push(item);
                if ($cur.hasClass('nm-active')) {
                    selectedItem = item;
                }
            });
            selectedItem = selectedItem || items[0];
            MODEL.setAllItems(items);
            $items = jQuery(__.oDefaults.sSelectorCategoryItem);
            items = [];
            var selectedCategory;
            jQuery.each($items, function() {
                $cur = jQuery(this);
                item = $cur.attr(__.oDefaults.sSelectorDataCatAttr);
                items.push(item);
                if ($cur.hasClass('nm-active')) {
                    selectedCategory = item;
                }
            });
            MODEL.setAllCategories(items);
            selectedCategory = selectedCategory || "all";
            //set initals status without changeEvent propagation
            MODEL.setSelectedCategory(selectedCategory);
            MODEL.setSelectedItem(selectedItem);
        };
        __.initialize = function() {
            console.log("mg-controller…initialized");
            __.eventBus.on(EVENTS.LAYER_LOADED, __.initializeDataAndViews);
        };
        //get global EventEmitter Instance
        __.eventBus = SIGNAL.getEmitter();
        __.eventBus.on(EVENTS.APP_READY, __.initialize);
        return exports;
    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 176 */
/*!*******************************************!*\
  !*** ./js/app/mediagallery/mg-counter.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! core/signal */ 4)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, SIGNAL) {
        'use strict';
        //Private Methods
        var __ = {},
            //Public API
            exports = {
                __: __
            };
        __.oDefaults = {
            sSelectorCounterContainer: ".nm-md-mediagallery-media-list .nm-counter",
            sSelectorActiveTxt: ".nm-active",
            sSelectorTotalTxt: ".nm-total"
        };
        __.addEvents = function() {
            __.eventBus.on(EVENTS.MEDIAGALLERY_ITEM_CHANGED, __.handleUpdates);
        };
        __.handleUpdates = function(data_) {
            __.updateCounter(data_.index, data_.maxIndex);
        };
        __.updateCounter = function(curr_, max_) {
            var maxIndex = max_ + 1;
            var index = curr_ + 1;
			var activeEl = document.querySelector(__.oDefaults.sSelectorCounterContainer + " " + __.oDefaults.sSelectorActiveTxt);
			var totalEl = document.querySelector(__.oDefaults.sSelectorCounterContainer + " " + __.oDefaults.sSelectorTotalTxt);
			if(!!activeEl) {
				activeEl.innerHTML = index;
			}
			if(!!totalEl) {
				totalEl.innerHTML = maxIndex;
			}
        };
        exports.initialize = function() {
            __.addEvents();
        };
        //get global EventEmitter Instance
        __.eventBus = SIGNAL.getEmitter();
        __.eventBus.once(EVENTS.APP_READY, exports.initialize);
        return exports;
    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 177 */
/*!*****************************************!*\
  !*** ./js/app/mediagallery/mg-stage.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! mediagallery/mg-model */ 26),
	__webpack_require__(/*! core/signal */ 4),
	__webpack_require__(/*! module/video-new */ 35),
	__webpack_require__(/*! core/template */ 5),
	__webpack_require__(/*! text!templates/video-controls.tpl */ 178)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, MODEL, SIGNAL, VIDEO_ELEMENT, TPL_RENDERER, VIDEO_CTRLS_TPL) {//eslint-disable-line max-params
        'use strict';
        //Private Methods
        var __ = {},
            //Public API
            exports = {
                __: __
            };
        __.oDefaults = {
            sSelectorStage: ".nm-mediagallery-stage",
            sSelectorThumbsContainer: '.nm-mediagallery-thumbs',
            animationDuration: 250,
            sSelectorModule: '.nm-md-mediagallery-media-list',
            sClassShowThumbs: 'nm-md-mediagallery-media-list-detail',
            sSelectorSlideContainer: '.nm-mediagallery-detail-slide',
            sSelectorVideoSlide: '.nm-mediagallery-detail-video',
            sSelectorImageSlide: '.nm-mediagallery-detail-img',
            imageTemplateString: '<div class="nm-mediagallery-detail-img"><!--[if IE 8 ]><img src="" /><![endif]--></div>',
            videoTemplateString: '<div class="nm-mediagallery-detail-video"><div class="nm-mediaplayer nm-video"><video src="" title="" poster=""></video><!--[if IE 8 ]><img src="" /><![endif]-->'+TPL_RENDERER.render(VIDEO_CTRLS_TPL, null)+'</div></div>'
        };
        __.defaultVideoWidth = 1920;
        __.defaultVideoHeight = 1080;
        //store native dimensions for the current image/video
        __.nativeDimensions = {
            width: 0,
            height: 0
        };
        __.mousePosX=0;
        /*
         * resize/center stage
         */
        __.resizeStage = function() {
            var thumbsHeight = jQuery(__.oDefaults.sSelectorThumbsContainer).height();
            var stageHeight = jQuery("body").innerHeight() - thumbsHeight;
            if (jQuery(__.oDefaults.sSelectorModule).hasClass(__.oDefaults.sClassShowThumbs)) {
                jQuery(__.oDefaults.sSelectorSlideContainer).height(jQuery("body").innerHeight());
            } else {
                jQuery(__.oDefaults.sSelectorSlideContainer).height(stageHeight);
            }
        };

        /*
        * check if content was downscaled or is displayed in its natural size
        */
        __.contentIsResized = function() {
            var $stageContainer = jQuery(__.oDefaults.sSelectorStage),
                $slideWrapper = $stageContainer.find(__.oDefaults.sSelectorSlideContainer),
                contentWidth = $slideWrapper.width(),
                /*portraitMode = (__.nativeDimensions.width < __.nativeDimensions.height),*/
                contentHeight = __.getNewContentHeight();
            if ((__.nativeDimensions.width < contentWidth) && (__.nativeDimensions.height < contentHeight)) {
                return false;
            } else {
                return true;
            }
        };
        __.addEvents = function() {
            __.eventBus.on(EVENTS.MEDIAGALLERY_ITEM_CHANGED, __.handleItemSelectionChange);
            __.eventBus.on(EVENTS.LAYER_LOADED, __.checkNativeContentSize);
            __.eventBus.on(EVENTS.MEDIAGALLERY_RESIZED, __.checkNativeContentSize);
            jQuery(window).resize(__.checkNativeContentSize);
        };
        exports.initialize = function() {
            __.addEvents();
        };
        /**
        * read native file dimensions from a given image url
        * @prams {string} src_ - image url
        * @returns {Promise}
        */
        __.getImageInfoPromise = function(src_) {
            return new Promise(function(resolve, reject) {
                var new_img = new Image();
                new_img.onload = function() {
                    var img_width = this.width,
                        img_heigth = this.height;
                    __.nativeDimensions.width = img_width;
                    __.nativeDimensions.height = img_heigth;
                    resolve({
                        'width': img_width,
                        'height': img_heigth
                    });
                };
                new_img.onerror = function() {
                    reject("could not load image");
                };
                new_img.src = src_;
            });
        };
        /**
        * react upon model changes
        */
        __.handleItemSelectionChange = function(data_) {
            console.log("data", data_);
            if (!data_.changed) {
                console.log("nothing changed");
                return false;
            }
            //wait for description box to finish changing its size
            __.eventBus.once(EVENTS.MEDIAGALLERY_SLIDED, function() {
                __.waitForDescriptionTextboxResizing(data_);
            });
        };
        /**
        * wait until new Textheight is available to do further animations/resizings
        */
        __.waitForDescriptionTextboxResizing = function(data_) {
            if (!!data_.item && !!data_.item) {
                __.removeOldSlide().then(function($slideWrapper) {
                    return __.getNewSlide(data_.item);
                }).then(function($slide) {
                    return __.appendNewSlide($slide);
                }).then(function() {
                    if (__.isVideoSlide()) {
                        __.startVideoSlide();
                    }
                }).then(undefined, function(err) {
                    console.log("Error appending new slide:", err);
                });
            } else {
                console.warn("data missing!!!!", data_);
            }
        };
        /**
        * cretates an new slide (video or image)
        * @param {object} itemaData_ - item data
        * @returns {Promise}
        */
        __.getNewSlide = function(itemData_) {
            if (itemData_.contenttype === "video") {
                return __.createVideoSlide(itemData_);
            } else {
                return __.createImageSlide(itemData_);
            }
        };
        /**
        * checks if the current slide is a video slide (or image)
        */
        __.isVideoSlide = function() {
            return jQuery(__.oDefaults.sSelectorStage).find(__.oDefaults.sSelectorVideoSlide).length === 1;
        };
        __.stopVideoSlide = function() {
			jQuery('.nm-video video').each(function () {
				this.pause();
			});
        };
        /**
        * initialize Medialement once slide is active (animated)
        */
        __.startVideoSlide = function() {
            VIDEO_ELEMENT.handlerLayer({domElement: jQuery(__.oDefaults.sSelectorStage)});
        };
        /**
        * remove old slide from to DOM
        */
        __.removeOldSlide = function() {
            return new Promise(function(resolve, reject) {
                var $stageContainer = jQuery(__.oDefaults.sSelectorStage),
                    $slideWrapper = $stageContainer.find(__.oDefaults.sSelectorSlideContainer);
                $slideWrapper.addClass("nm-animating");
                if (__.isVideoSlide()) {
                    __.stopVideoSlide();
                }
                $slideWrapper.animate({
                    "opacity": 0
                }, __.oDefaults.animationDuration, "easeOutSine");
                setTimeout(function() {
                    $slideWrapper.empty();
                    //adjust content height for new slide
                    $slideWrapper.css("height", __.getNewContentHeight());
                    resolve($slideWrapper);
                }, __.oDefaults.animationDuration);
            });
        };
        /**
        * append and animate new slide to the DOM
        */
        __.appendNewSlide = function($newSlide) {
            return new Promise(function(resolve, reject) {
                var $stageContainer = jQuery(__.oDefaults.sSelectorStage),
                    $slideWrapper = $stageContainer.find(__.oDefaults.sSelectorSlideContainer);
                $slideWrapper.css("opacity", 0);
                //append new slide
                $newSlide.appendTo($slideWrapper);
                __.checkNativeContentSize();
                $slideWrapper.removeClass("nm-animating");
                //animate stage
                $slideWrapper.animate({
                    "opacity": 1
                }, __.oDefaults.animationDuration, "easeOutSine");
                setTimeout(function() {
                    resolve($slideWrapper);
                }, __.oDefaults.animationDuration);
            });
        };
        /**
        * create an image image slide (jQuery Element)
        */
        __.createImageSlide = function(itemData_) {
            if (!itemData_ || !itemData_.imageurl) {
                return Promise.reject("image url missing!!!");
            }
            var imageSrc = itemData_.imageurl;
            var promise = __.getImageInfoPromise(imageSrc);
            return promise.then(function(imageInfo) {
                var $stageContainer = jQuery(__.oDefaults.sSelectorStage),
                    $slideWrapper = $stageContainer.find(__.oDefaults.sSelectorSlideContainer),
                    $newSlide = jQuery(__.oDefaults.imageTemplateString),
                    contentWidth = $slideWrapper.width();
                    $newSlide.css('background-image', 'url(' + imageSrc + ')');

                return Promise.resolve($newSlide);
            });
        };
        /**
        * helper method to read image source
        */
        __.getBackgroundImageURL = function($image) {
            var url = $image.css('background-image');
            if (!!url) {
                url = url.replace(/^url\(["']?/, '').replace(/["']?\)$/, '');
            } else {
                url = $image.find("image").attr("src");
            }
            return url;
        };
        /**
        * check for native image size and resize stage
        */
        __.checkNativeContentSize = function() {
        	if(jQuery(__.oDefaults.sSelectorStage).length===0){
				return true;
			}
            //check for ResizeEnd event
            if (!!this && this.type === "resize") {
                if (__.resizeIntervalID) {
                    clearInterval(__.resizeIntervalID);
                }
                __.resizeIntervalID = setInterval(function() {
                    clearInterval(__.resizeIntervalID);
                    __.resizeIntervalID = null;
                    __.checkNativeContentSize();
                }, 250);
                return false;
            }
            __.resizeStage();
            var promise;
            //initial call on layer.loaded
            if (__.nativeDimensions.width === 0) {
                if (__.isVideoSlide()) {
                    __.nativeDimensions.width = __.defaultVideoWidth;
                    __.nativeDimensions.height = __.defaultVideoHeight;
                } else {
                    var $initialImage = jQuery(__.oDefaults.sSelectorImageSlide);
                    var imageSrc = __.getBackgroundImageURL($initialImage);
                    promise = __.getImageInfoPromise(imageSrc);
                }
            }
            if(!promise) {
                promise = Promise.resolve();
            }
            promise.then(function() {
                console.log("checkNativeContentSize");
                var $stageContainer = jQuery(__.oDefaults.sSelectorStage),
                    $slideWrapper = $stageContainer.find(__.oDefaults.sSelectorSlideContainer),
                    //get video or image slide
                    $slide = $slideWrapper.find([__.oDefaults.sSelectorVideoSlide, __.oDefaults.sSelectorImageSlide].join(","));
                //image´s/video´s native size is smalles than the actual content stage?
                if (!__.contentIsResized()) {
                    $slide.addClass("nm-mediagallery-detail-img-native-size");
                } else {
                    $slide.removeClass("nm-mediagallery-detail-img-native-size");
                }
                //resize Video slide
                if (__.isVideoSlide()) {
                    __.resizeVideoSlideContainer();
                }
            });
        };
        /**
        * create an video image slide (jQuery Element)
        */
        __.createVideoSlide = function(itemData_) {
            if (!itemData_ || !itemData_.videosrc) {
                return Promise.reject("invalid video slide");
            }
            return new Promise(function(resolve, reject) {
                var $stageContainer = jQuery(__.oDefaults.sSelectorStage),
                    $slideWrapper = $stageContainer.find(__.oDefaults.sSelectorSlideContainer),
                    $newSlide = jQuery(__.oDefaults.videoTemplateString),
                    contentWidth = $slideWrapper.width();
                //static size for Videos?
                __.nativeDimensions.width = __.defaultVideoWidth; // "1920",
                __.nativeDimensions.height = __.defaultVideoHeight; //"1080";
                //image native size is smaller than the actual content stage?
                if ((__.nativeDimensions.width < contentWidth)) {
                    $newSlide.addClass("nm-mediagallery-detail-img-native-size");
                }
                $newSlide.find("video").attr({
                    'src': itemData_.videosrc,
                    'poster': itemData_.posterurl
                });
                __.resizeVideoSlideContainer($newSlide);
                resolve($newSlide);
            });
        };
        /*
        * special resizing/calculation for video (mediaelement)
        */
        __.resizeVideoSlideContainer = function($videoContainer) {
            var $stageContainer = jQuery(__.oDefaults.sSelectorStage),
                $slideWrapper = $stageContainer.find(__.oDefaults.sSelectorSlideContainer),
                h = __.getNewContentHeight(),
                w = $slideWrapper.width(),
                ratioVideo = __.nativeDimensions.width / __.nativeDimensions.height,
                resultingHeight = 0,
                targetWidth = 0;
            $videoContainer = $videoContainer || $slideWrapper.find(__.oDefaults.sSelectorVideoSlide);
            if ($videoContainer.length) {
                resultingHeight = (w / __.nativeDimensions.width) * __.nativeDimensions.height;
                //does the resulting height fit into the stage?
                if (resultingHeight < h) {
                    //use stage width to resize videocontent
                    targetWidth = (w / __.nativeDimensions.width);
                } else {
                    //limit videocontent to stage height
                    targetWidth = ((h * ratioVideo) / __.nativeDimensions.width);
                }
                targetWidth = ((targetWidth * __.nativeDimensions.width) / w) * 100;
                //set container´s new width
                $videoContainer.css("width", targetWidth + "%");
            }
        };
        /**
        * get current content height within the stage
        */
        __.getNewContentHeight = function() {
            var thumbsHeight = jQuery(__.oDefaults.sSelectorThumbsContainer).height();
            var stageHeight = jQuery("body").innerHeight() - thumbsHeight;
            console.log("THUMBS: " + thumbsHeight + " - BROWSER: " + jQuery("body").innerHeight() + " - " + stageHeight);
            return stageHeight;
        };
        exports.initialize = function() {
        	console.log("mg-stage…initialized");
            __.addEvents();
        };
        //get global EventEmitter Instance
        __.eventBus = SIGNAL.getEmitter();
        __.eventBus.once(EVENTS.APP_READY, exports.initialize);
        return exports;
    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 178 */
/*!*******************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/video-controls.tpl ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-prevent-video-click\"></div>\n<div class=\"nm-controls-wrap-video\">\n\n    <div class=\"nm-video-loader\">\n        <div class=\"nm-loader-played\"></div>\n        <div class=\"nm-loader-loaded\"></div>\n    </div>\n    <div class=\"nm-controls-video clearfix\">\n        <div class=\"nm-button-play-pause nm-play nm-j-play-btn\">\n            <button class=\"nm-video-button-play\" type=\"button\" title=\"Play/Pause\"></button>\n            <button class=\"nm-video-button-pause\" type=\"button\" title=\"Play/Pause\"></button>\n        </div>\n        <div class=\"nm-title-wrap\">\n            <div class=\"nm-title\"><span class=\"nm-el-lbl nm-el-lbl-01 nm-at-lbl-inv\"></span></div>\n            <div class=\"nm-time\"><span class=\"nm-time-played \">00:00</span><span\n                    class=\"nm-time-break\"> | </span><span\n                    class=\"nm-time-duration\">00:00</span></div>\n        </div>\n\n        <div class=\"nm-button-fullscreen nm-j-fullscreen-btn\">\n            <button class=\"\" type=\"button\" title=\"Fullscreen\"></button>\n        </div>\n\n        <div class=\"nm-button-mute nm-mute nm-j-mute-btn\">\n            <button class=\"\" type=\"button\" title=\"Mute\"></button>\n        </div>\n    </div>\n</div>\n<div class=\"nm-button-play nm-button-overlay nm-j-play-btn\">\n    <button class=\"nm-video-button-play\" type=\"button\" title=\"Play\"><span class=\"nm-image-replace\">Play</span></button>\n</div>\n"

/***/ }),
/* 179 */
/*!***************************************************!*\
  !*** ./js/app/mediagallery/mg-thumbnailslider.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! mediagallery/mg-model */ 26), __webpack_require__(/*! core/signal */ 4)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, MODEL, SIGNAL) {
        'use strict';
        //Private Methods
        var __ = {},
            //Public API
            exports = {
                __: __
            };
        __.oDefaults = {
            sSelectorModule: '.nm-md-mediagallery-media-list',
            sSelectorCategoryItem: '.nm-mediagallery-categories li',
            sSelectorDescription: ".nm-mediagallery-thumbs-description p",
            sSelectorThumbs: '.nm-mediagallery-show-thumbs',
            sClassShowThumbs: 'nm-md-mediagallery-media-list-detail',
            sSelectorMediaItem: '.nm-mediagallery-item',
            sSelectorThumbslider: '.nm-mediagallery-thumbs-slider',
            sSelectorThumbList: '.nm-mediagallery-thumbs-slider ul',
            animationDuration: 800
        };
        __.addEvents = function() {
            __.eventBus.on(EVENTS.MEDIAGALLERY_ITEM_CHANGED, __.handleItemUpdates);
            __.eventBus.on(EVENTS.MEDIAGALLERY_CATEGORY_CHANGED, __.handleCategoryUpdates);
            jQuery("body").on("click", __.oDefaults.sSelectorThumbs, __.handleShowThumbs);
        };
        /**
         * update selected status for selected item
         */
        __.handleItemUpdates = function(data_) {
            __.centerSelectedItem(data_);
            if (!data_.changed) {
                return false;
            }
            var $sliderItems = jQuery(__.oDefaults.sSelectorMediaItem);
            var selectedItem = data_.item;
            var itemID = selectedItem.id;
            $sliderItems.removeClass("nm-active");
            jQuery("#" + itemID).addClass("nm-active");
            __.updateDescriptionText(data_.item.description);
        };
        __.centerSelectedItem = function(data_) {
            if (!!data_ && !!data_.item && data_.item.id) {
                var $sliderContainer = jQuery(__.oDefaults.sSelectorThumbslider);
                var $sliderList = jQuery(__.oDefaults.sSelectorThumbList);
                //slides are scollable?
                if ($sliderContainer.width() < $sliderList.width()) {
                    var $selectedItem = jQuery("#" + data_.item.id),
                        itemWidth = $selectedItem.width(),
                        //item´s x-center
                        xPos = $selectedItem.offset().left + (itemWidth * 0.5),
                        stageCenter = $sliderContainer.width() * 0.5,
                        deltaCenter = (stageCenter - xPos),
                        currentMargin = parseInt($sliderList.css("margin-left"), 10),
                        newMargin = currentMargin + deltaCenter + (itemWidth * 0.5),
                        maxMargin = $sliderContainer.width() - $sliderList.width();
                    if (newMargin < 0) {
                        //do not move is item is on the end
                        newMargin = (newMargin < maxMargin) ? maxMargin : newMargin;
                        $sliderList.css({
                            "margin-left": Math.round(newMargin) + "px"
                        });
                    } else {
                        $sliderList.removeAttr("style");
                    }
                } else {
                    $sliderList.removeAttr("style");
                }
            }
        };
        /*
         * show/hide thumbnailslider
         */
        __.handleShowThumbs = function(event_) {
            __.cancelEvent(event_);
            jQuery(__.oDefaults.sSelectorModule).toggleClass(__.oDefaults.sClassShowThumbs);
            var delay = __.oDefaults.animationDuration;
            if (jQuery(__.oDefaults.sSelectorModule).hasClass(__.oDefaults.sClassShowThumbs)) {
                delay = 0;
            }
            setTimeout(function() {
                __.eventBus.emit(EVENTS.MEDIAGALLERY_RESIZED);
            }, delay);
        };
        /**
         * update all visible items within the selected category
         */
        __.handleCategoryUpdates = function(data_) {
            var $categoryItems = jQuery(__.oDefaults.sSelectorCategoryItem);
            //hide all category items
            $categoryItems.removeClass("nm-active");
            //show slected category´s items only
            $categoryItems.filter("[data-category='" + data_.category + "']").addClass("nm-active");
            var $sliderItems = jQuery(__.oDefaults.sSelectorMediaItem);
            if (data_.category === "all") {
                $sliderItems.addClass("nm-selected");
            } else {
                //hide all items
                $sliderItems.removeClass("nm-selected");
                //show slected items matching the selected category only
                $sliderItems.filter("[data-category='" + data_.category + "']").addClass("nm-selected");
            }
        };
        /**
         * update description textfield and resize/center content
         */
        __.updateDescriptionText = function(text_) {
            var delay = 300;
            jQuery(__.oDefaults.sSelectorDescription).css('opacity', '0');
            setTimeout(function() {
                document.querySelectorAll(__.oDefaults.sSelectorDescription)[0].innerHTML = text_;
                __.eventBus.emit(EVENTS.MEDIAGALLERY_SLIDED);
            }, delay);
            setTimeout(function() {
                jQuery(__.oDefaults.sSelectorDescription).css('opacity', '1');
            }, (__.oDefaults.animationDuration + delay));
        };
        /**
         * prevent default event behavior
         * @param  {Object} event_ e.g. e click event
         * @return {Void}
         */
        __.cancelEvent = function(event_) {
            if ( !!event_ && typeof event_.preventDefault === 'function') {
                event_.preventDefault();
            }
        };
        exports.initialize = function() {
            console.log("mg-thumbnailslider…initialized");
            __.addEvents();
        };
        //get global EventEmitter Instance
        __.eventBus = SIGNAL.getEmitter();
        __.eventBus.once(EVENTS.APP_READY, exports.initialize);
        return exports;
    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 180 */
/*!********************************************!*\
  !*** ./js/app/mediagallery/mg-download.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! core/signal */ 4)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, SIGNAL) {
        'use strict';
        //Private Methods
        var __ = {},
            //Public API
            exports = {
                __: __
            };
        __.oDefaults = {
            sSelectorCurrentDownloadBtn: ".nm-mediagallery-download-current",
            sSelectorDownloadAllBtn: ".nm-mediagallery-download-all",
            sIdCheckBox: '#nm-mediagallery-download-checkbox',
            sSelectorLinks: '.nm-mediagallery-download a',
            sSelectorDownloadBox: '.mediagallery-download-infobox'
        };
        __.addEvents = function() {
            __.eventBus.on(EVENTS.MEDIAGALLERY_ITEM_CHANGED, __.handleUpdates);
            jQuery("body").on("click.mg_download_link", __.oDefaults.sSelectorLinks, __.closeDownloadBox);
        };
        //update item´d downloadlink
        __.handleUpdates = function(data_) {
            var $currentBtn = jQuery([__.oDefaults.sSelectorCurrentDownloadBtn, " a"].join(""));
            var $downloadBox = jQuery(".nm-mediagallery-download");
            if (!!data_ && data_.item) {
                if (!!data_.item.downloadlink) {
                    $currentBtn.attr('href', data_.item.downloadlink).removeClass("nm-hidden");
                } else {
                    $currentBtn.addClass("nm-hidden");
                    //hide box if no download allBtn is available
                    if (jQuery(__.oDefaults.sSelectorDownloadAllBtn).length < 1) {
                        $downloadBox.addClass("nm-hidden");
                    } else {
                        $downloadBox.removeClass("nm-hidden");
                    }
                }
                if (data_.item.contenttype === "video") {
                    $currentBtn.addClass("nm-hidden");
                } else {
                    $currentBtn.removeClass("nm-hidden");
                }
            } else {
                console.warn('no link url to update!!');
            }
        };
        __.closeDownloadBox = function() {
            jQuery(__.oDefaults.sIdCheckBox).prop("checked", false);
            jQuery(__.oDefaults.sSelectorDownloadBox).removeClass('nm-checked');
        };
        exports.initialize = function() {
        	console.log("mg-download…initialized");
            __.addEvents();
        };
        //get global EventEmitter Instance∂
        __.eventBus = SIGNAL.getEmitter();
        __.eventBus.once(EVENTS.APP_READY, exports.initialize);
        return exports;
    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 181 */
/*!********************************************!*\
  !*** ./js/app/core/legacy-eventemitter.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! core/signal */ 4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, EMITTER) {
		"use strict";
		var __ = {},
			//Public API
			exports = {
				__: __
			};
		__.redispatchEvent = function () {
			//console.log("redispatchEvent eventname:" + event_.type + "." + event_.namespace, 'data_', data_);
			var args = [].slice.call(arguments),
				event_ = args.shift(),
				data = args,
				eventName;
			//get original Event with correct Namespace
			eventName = event_.type + "." + event_.namespace;
			//handle multiple jQuery data params via Array e.g. jQuery("body").trigger("nemo.error",["foor","bar"]);
			data = (data.length && data.length === 1) ? data[0] : data;
			__.eventBus.emit(eventName, data);
		};
		__.addEvents = function ($eventBus) {
			$eventBus.on(EVENTS.FORM_LOADED, __.redispatchEvent);
			$eventBus.on(EVENTS.FORM_FINISHED, __.redispatchEvent);
			$eventBus.on(EVENTS.LAYER_LOADED, __.redispatchEvent);
			$eventBus.on(EVENTS.LAYER_CLOSED, __.redispatchEvent);
			$eventBus.on(EVENTS.APP_READY, __.redispatchEvent);
			$eventBus.on(EVENTS.PAGE_READY, __.redispatchEvent);
			$eventBus.on(EVENTS.PAGE_OPEN, __.redispatchEvent);
			$eventBus.on(EVENTS.PAGE_LEAVE, __.redispatchEvent);
			$eventBus.on(EVENTS.PAGE_LOADED, __.redispatchEvent);
			$eventBus.on(EVENTS.CONFIG_UPDATE, __.redispatchEvent);
			$eventBus.on(EVENTS.CONFIG_START, __.redispatchEvent);
			$eventBus.on(EVENTS.ERROR, __.redispatchEvent);
			$eventBus.on(EVENTS.CONFIG_CHANGEREQUEST_START, __.redispatchEvent);
		};
		exports.initializePromise = function (eventBus_) {
			return new Promise(function (resolve) {
				__.eventBus = eventBus_;
				__.addEvents(jQuery('body'));
				resolve("core/legacy-eventemitter.js");
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 182 */
/*!********************************************!*\
  !*** ./js/app/module/layer-multi-stage.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 140 */
/* jshint maxparams: 8 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
		__webpack_require__(/*! jquery */ 1),
		__webpack_require__(/*! events */ 0)
	], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS) {

		"use strict";

		var __, exports;
		__ = {};
		exports = {
			__: __
		};

		__.oDefaults = {
			sClassActive: 'nm-active',
			sClassDuringAnimation: 'nm-animating',
			sClassNoAnimation: 'no-animation',
			sClassForwardAnimation: 'nm-animation-forward',
			sClassBackwardAnimation: 'nm-animation-backward',

			sSelectorStage: '.nm-layer-multi-stage',
			sSelectorNext: '.nm-nextarrow',
			sSelectorPrevious: '.nm-backarrow',
			sSelectorLayerStageImageActive: '.nm-layer-image.nm-active',
			sSelectorLayerStageImage: '.nm-layer-image'
		};

		__.initialize = function() {
			__.addEvents();
		};

		__.addEvents = function() {
			__.eventBus.on(EVENTS.PAGE_LOADED, __.handleLayerLoaded);
			__.eventBus.on(EVENTS.LAYER_LOADED, __.handleLayerLoaded);
		};

		__.handleLayerLoaded = function(payload) {

			var domElement;

			if (payload.domElement) {
				domElement = payload.domElement;
			} else if (payload.element) {
				domElement = payload.element;
			}

			if (domElement) {
				__.addStageEvents(domElement);
			} else {
				console.log("no dom element available");
			}
		};

		__.addStageEvents = function(stageElement) {
			jQuery(stageElement).on('click', __.oDefaults.sSelectorNext, __.handleNextClick);
			jQuery(stageElement).on('click', __.oDefaults.sSelectorPrevious, __.handlePrevClick);
			jQuery(__.oDefaults.sSelectorStage).on('mousedown', __.activateSwipe);
			jQuery(__.oDefaults.sSelectorStage).on('touchstart', __.activateSwipe);
			jQuery(document).on('mouseup', __.deactivateSwipe);
			jQuery(document).on('touchend', __.deactivateSwipe);
		};

		__.handleNextClick = function(e) {
			var activeImg;
			e.preventDefault();
			if (jQuery(__.oDefaults.sSelectorStage).hasClass(__.oDefaults.sClassDuringAnimation)) {
				return;
			}
			jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassDuringAnimation);
			activeImg = jQuery(__.oDefaults.sSelectorLayerStageImageActive);
			jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassNoAnimation);
			jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassForwardAnimation);
			setTimeout(function() {
				jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassNoAnimation);

				setTimeout(function() {
					jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassNoAnimation);
					jQuery(__.oDefaults.sSelectorLayerStageImage).each(function() {
						if ($(this).is(activeImg)) {
							$(this).removeClass(__.oDefaults.sClassActive);
						} else {
							$(this).addClass(__.oDefaults.sClassActive);
						}
					});
					jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassForwardAnimation);
					setTimeout(function() {
						jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassNoAnimation);
						jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassDuringAnimation);
					}, 10);
				}, 600);
			}, 10);
		};
		__.handlePrevClick = function(e) {
			var activeImg;
			e.preventDefault();
			if (jQuery(__.oDefaults.sSelectorStage).hasClass(__.oDefaults.sClassDuringAnimation)) {
				return;
			}
			jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassDuringAnimation);
			activeImg = jQuery(__.oDefaults.sSelectorLayerStageImageActive);
			jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassNoAnimation);
			jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassBackwardAnimation);
			setTimeout(function() {
				jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassNoAnimation);

				setTimeout(function() {
					jQuery(__.oDefaults.sSelectorStage).addClass(__.oDefaults.sClassNoAnimation);
					jQuery(__.oDefaults.sSelectorLayerStageImage).each(function() {
						if ($(this).is(activeImg)) {
							$(this).removeClass(__.oDefaults.sClassActive);
						} else {
							$(this).addClass(__.oDefaults.sClassActive);
						}
					});
					jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassBackwardAnimation);
					setTimeout(function() {
						jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassNoAnimation);
						jQuery(__.oDefaults.sSelectorStage).removeClass(__.oDefaults.sClassDuringAnimation);
					}, 10);
				}, 600);
			}, 10);
		};

		__.activateSwipe = function(e) {
			if (e.type === 'touchstart') {
				__.swipeX = e.originalEvent.pageX;
			} else {
				__.swipeX = e.pageX;
			}
			jQuery(document).on('mousemove', __.swipe);
			jQuery(document).on('touchmove', __.swipe);
		};

		__.deactivateSwipe = function() {
			jQuery(document).off('mousemove', __.swipe);
			jQuery(document).off('touchmove', __.swipe);
		};

		__.swipe = function(e) {
			var pos;
			if (e.type === 'touchmove') {
				pos = e.originalEvent.pageX;
			} else {
				pos = e.pageX;
			}
			if (pos >= __.swipeX + 5) {
				__.deactivateSwipe(e);
				__.handlePrevClick(e);
			} else if (pos <= __.swipeX - 5) {
				__.deactivateSwipe(e);
				__.handleNextClick(e);
			}
		};

		exports.initializePromise = function(eventBus_) {
			return new Promise(function(resolve) {
				__.eventBus = eventBus_;
				__.initialize();
				resolve("module/layer-multi-stage.js");
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 183 */
/*!*************************************!*\
  !*** ./js/app/module/vtp-teaser.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/ajax */ 6), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/vtp-teaser.tpl */ 184), __webpack_require__(/*! configurator/dpu-api */ 3)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, AJAX, RENDER, VTP_TPL, CONFIGURATOR_API) {//eslint-disable-line max-params
    /**
     * @exports module/vtp-teaser
     */
    'use strict';
    var
    //Private
        __ = {},
        //Public API
        exports = {
            __: __
        };
    //lookup for CSS selectors etc.
    __.oDefaults = {
        selectorModuleContainer: '.nm-md-vtp-teaser',
        selectorTplContainer: '.nm-j-vtp-container'
    };

    /**
     * add listeners to events of interest for this modeule
     */
    __.addEvents = function() {
        __.eventBus.on(EVENTS.PAGE_LOADED, __.handlePageLoaded);
    };
    /**
     * main initialization method (global EventEmitter)
     * @param  {Obect} eventBus_
     **/
    __.initialize = function() {
        __.addEvents();
        __.handlePageLoaded();
    };
    /**
     * page.loaded handler
     * @return {[type]} [description]
     */
    __.handlePageLoaded = function() {
        var module = jQuery(__.oDefaults.selectorModuleContainer);
        if (module.length) {
            __.getVtpData().then(function(data) {
                __.handleVtpResponse(data);
            }, function(err) {
                console.log("Error loading VTP-JSON", err);
            });
        }
    };
    /**
     * handle raw VTP-JSON response
     * @param  {object} data_ raw JSON data
     */
    __.handleVtpResponse = function(data_) {
        var merged = __.parseResonse(data_);
        __.renderSlots(merged);
    };
    /**
     * parse VTP response/prepare data for the template model
     * @param  {object} data_ JSON rsponse
     * @return {object} cleaned moject for use in the template model
     */
    __.parseResonse = function(data_) {
        var parsed = {};
        parsed.cars = [];
        var carItem, items;
        if (!!data_.header && !!data_.header.result_url &&!!data_.car_list && data_.car_list.length) {
            var len = data_.car_list.length;
            len = len < 5 ? len : 4;
            for (var i = 0, j = len; i < j; i++) {
                carItem = {};
                items = data_.car_list[i].items.reduce(function(map, obj) {
                    map[obj.id] = obj.value;
                    return map;
                }, {});
                carItem.image = __.patchRenderImageSizeUrl((!!data_.car_list[i].images&&data_.car_list[i].images.length)?data_.car_list[i].images[0]:'');
                carItem.price = items.price;
                carItem.model = CONFIGURATOR_API.getCarlineName();
                carItem.engine = __.patchModelDescription(items.model,carItem.model);
                carItem.carid = data_.car_list[i].carid;
                carItem.result_url = data_.header.result_url;
                carItem.link = __.patchVtpEntryUrl(carItem.result_url, carItem.carid);
                parsed.cars.push(carItem);
            }
        }
        //TODO prepare data for template
        return parsed;
    };
    /** get url to the VTP service */
    __.getVTPbaseUrl = function() {
        var url = jQuery(__.oDefaults.selectorModuleContainer).data('vtp-url');
        return url;
    };
    /**
     * render template to the dom
     * @param  {object} renderData_ [template data model
     */
    __.renderSlots = function(renderData_) {
        var $module = jQuery(__.oDefaults.selectorModuleContainer);
        //TODO:empty container
        //more than 4 cars available?
        if (renderData_.cars.length > 3) {
            //render template with data
            var tpl_string = RENDER.render(VTP_TPL, renderData_);
            var $tplContainer = $module.find(__.oDefaults.selectorTplContainer);
            $tplContainer.empty();
            $tplContainer.append(tpl_string);
            //show/unhide module
            $module.removeClass('nm-hidden');
        }
    };
    /**
     * build correct url segments for the JSON request from the VTP service
     */
    __.getRequestUrl = function() {
        var baseUrl = CONFIGURATOR_API.getVtpRequestUrl(),
            colorCode = CONFIGURATOR_API.getExtColor(),
            modelYear = CONFIGURATOR_API.getModelYear(),
            engineCode = CONFIGURATOR_API.getEngine(),
            url_, suffix;
        //ColorCode - A (for Audi) - Modelyear - Motorcode
        suffix = colorCode + "-A-" + modelYear + "-" + engineCode;
        url_ = baseUrl + "s|9010," + engineCode + "|9091," + suffix + "?v=5";
        return url_;
    };
    /**
     * patch image-size param within the imageUrl
     * to recieve the render image in the correct size
     */
    __.patchRenderImageSizeUrl = function(imageUrl) {
        imageUrl = imageUrl || '';
        return imageUrl.replace("/xm/", /axsn1o/);
    };
    /**
     * patch entry url
     */
    __.patchVtpEntryUrl = function(entryUrl_, carId_) {
        entryUrl_ = entryUrl_ || '';
        return entryUrl_.replace("/controller.do", "/d|" + carId_ + "/controller.do");
    };

    /**
     * patch model description
     */
    __.patchModelDescription = function(descr_,carlineName_) {
    	var claimPrefix=window.i18n['vtp.prefix-replace'],
        regEx;

        descr_ = descr_ || '';
        if(!!claimPrefix){
        regEx=new RegExp('('+claimPrefix+' )*'+carlineName_+' ');
    }
        return descr_.replace(regEx,"");
    };
    /**
     * load VTP JSON from the Service
     * @return {Promise} Ajax Promise
     */
    __.getVtpData = function() {
        var reqUrl = __.getRequestUrl();
        return AJAX.getJSON(reqUrl, {}, {
            "withCredentials": false
        });
    };

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/vtp-teaser.js");
		});
	};
    return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 184 */
/*!***************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/vtp-teaser.tpl ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "\t<ul class=\"nm-vtp-teaser-list\">\n\t{{~ it.cars :car }}\n\t\t<li class=\"nm-vtp-teaser-item\">\n\t\t\t<img src=\"{{=car.image}}\"/>\n\t\t\t<span class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=car.model}}</span>\n\t\t\t<div class=\"nm-el-pg nm-el-pg-03\">\n\t\t\t\t<span>{{=car.engine}}</span>\n\t\t\t\t<span> {{=car.price}} {{=window.i18n['price.currency.extended']}}</span>\n\t\t\t</div>\n\t\t\t<a href=\"{{=car.link}}\" target=\"_blank\" class=\"nm-el-btn nm-el-btn-01 nm-el-btn-ast\">{{=window.i18n['vtp.detail.linktext']}}</a>\n\t\t</li>\n\t\t{{~}}\n\t</ul>\n"

/***/ }),
/* 185 */
/*!***************************************!*\
  !*** ./js/app/module/your-payment.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(CONFIGURATOR_API, EVENTS, DOM_UTILS) { //eslint-disable-line max-params
    'use strict';
    //Private Methods
    var __ = {},
        //Public API
        exports = {
            __: __
        };

    __.oDefaults = {
        sSelectorModule:                '.nm-md-yourpayment',
        sSelectorRateSwitchCart:        '#nm-price-rate-switch',
        sSelectorRateSwitchYP:          '#nm-price-rate-switch-yp',
        sSelectorTable:                 '.nm-yourpayment-costs-list',
        sSelectorSnippetText:           '.nm-j-configurator-text-',
        sShowErrorClass:                'nm-j-yourpayment-show-error'
    };
    __.eventBus = null;
    __.addEvents = function() {
        __.eventBus.on(EVENTS.PAGE_LOADED, __.handleConfigUpdate);
        __.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleConfigUpdate);
    };

    /**
     * react to config update event
     * @param {Object} event_ - the Event data to collect data from
     * @returns {void}
     */
    __.handleConfigUpdate = function() {
        var configurationData;

        if(!document.querySelector(__.oDefaults.sSelectorModule)) {
            return;
        }

        //Configuration possible?
        if (CONFIGURATOR_API.isConfigurable()) {

            configurationData = CONFIGURATOR_API.getConfiguration();
            // configuration available?
            if (!configurationData) {
                return;
            }

            if(configurationData.rate === "") {
                document.querySelector(__.oDefaults.sSelectorModule).classList.add(__.oDefaults.sShowErrorClass);
            } else {
                document.querySelector(__.oDefaults.sSelectorModule).classList.remove(__.oDefaults.sShowErrorClass);
                __.updatePriceMode(configurationData);
            }

        }
    };

    /**
     * updates price mode displayed via checkboxes
     * @param {Object} configData_ - the configuration data received from the DPU
     * @returns {void}
     */
    __.updatePriceMode = function(configData_) {
        var financeParameterList;
        var checkboxYP = document.querySelector(__.oDefaults.sSelectorRateSwitchYP),
        checkboxCart = document.querySelector(__.oDefaults.sSelectorRateSwitchCart);

        if(!checkboxYP || !checkboxCart) {
            return;
        }

        //update price mode for YP checkbox in case it was updated via cart
        if(checkboxCart.getAttribute('checked') !== checkboxYP.getAttribute('checked')) {
            checkboxYP.setAttribute('checked', checkboxCart.getAttribute('checked'));
        }

         financeParameterList = (configData_.financeParameterList)? configData_.financeParameterList : null;
        __.popuplatePricesByRate(financeParameterList);
    };

    /**
     * update price list to show rates, received from DPU
     * @param {Array} ratesList_ - array of objects with rates
     * @returns {void}
     */
    __.popuplatePricesByRate = function(ratesList_) {
        var l, item, id, value, i = 0;
        var listContainer = document.querySelector(__.oDefaults.sSelectorTable);

        if(!listContainer || !ratesList_) {
            return;
        }

        l = ratesList_.length;

        while(i < l) {
            id = ratesList_[i].id;
            value = ratesList_[i].textAndUnit;//ratesList_[i].value + " " +ratesList_[i].unit;//
            if(id && value) {
                item = DOM_UTILS.getElement(__.oDefaults.sSelectorSnippetText + id, listContainer);
                item.text(value);
            }
            i++;
        }
    };

    /**
     * public initialize method
     * @param {EventBus} eventBus_ - tbd
     * @return {Promise} returns Promise
     */
    exports.initializePromise = function(eventBus_) {
        return new Promise(function(resolve) {
            __.eventBus = eventBus_;
            __.addEvents();
            __.handleConfigUpdate();

            resolve("module/your-payment.js");
        });
    };
    return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 186 */
/*!******************************************!*\
  !*** ./js/app/module/inlinerendering.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! module/ave/ave-api */ 34),
	__webpack_require__(/*! tracking/renderinglayer-tracker */ 20)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, AVE_API, RENDERINGLAYER_TRACKER) {
	"use strict";

	var __ = {},
		exports = {
			'__': __
		};

	__.oDefaults = {
		'sIdCanvas': 'nm-ave-canvas',

		'sClassActive': 'nm-active',
		'sClassLoading': 'nm-3d-loading',
		'sClassUnLoading': 'nm-3d-unloading',
		'sClassAVECandidate': 'nm-ave-candidate',
		'sClassModeAuto': 'nm-md-in-mode-automatic',
		'sClassLandscapeWrapper': 'nm-md-in-landscape-wrapper',
		'sClassPortraitWrapper': 'nm-md-in-portrait-wrapper',

		'sSelectorInlineRenderingModule': '.nm-md-inline-rendering',
		'sSelectorAVEContainer': '.nm-md-ave-container',
		'sSelectorAVEContainerActive': '.nm-md-ave-container.nm-active',

		'sSelectorInlineRendering': '.nm-j-configurator-renderimage',
		'sSelectorInlineRenderingButton360': '.nm-md-inline-rendering .nm-icon-360-view',
		'sSelectorInlineRenderingButton2d': '.nm-md-inline-rendering .nm-icon-2d-view',
		'sSelectorButton360': '.nm-icon-360-view',
		'sSelectorButton2d': '.nm-icon-2d-view',
		'sSelectorAVECandidate': '.nm-ave-candidate',
		'sSelectorLandscapeWrapper': '.nm-md-in-landscape-wrapper',
		'sSelectorPortraitWrapper': '.nm-md-in-portrait-wrapper',
		'sSelectorLoading': '.nm-3d-loading'
	};

	__.addEvents = function() {
		__.eventBus.on(EVENTS.AVE_AVAILABLE, __.handlerEnable360);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handlerPageLoaded);
		__.eventBus.on(EVENTS.AVE_STREAM_READY, __.aveStreamReadyHandler);
		__.eventBus.on(EVENTS.PAGE_OPEN, __.handlerPageOpen);
	};

	/**
	 * enable 360 facilities on page loaded event
	 * @param {Object} payload - the page content domElement (jQuery)
	 * @return {void}
	 */
	__.handlerPageLoaded = function(payload) {
		if (AVE_API.isAveAvailable() === true) {
			if (!payload.domElement.find(__.oDefaults.sSelectorInlineRenderingButton360).is(":visible")) {
				payload.domElement.find(__.oDefaults.sSelectorInlineRenderingButton360).show();
				payload.domElement.find(__.oDefaults.sSelectorInlineRenderingButton360).off('click', __.handlerActivate3d);
				payload.domElement.find(__.oDefaults.sSelectorInlineRenderingButton2d).off('click', __.handlerActivate2d);
				payload.domElement.find(__.oDefaults.sSelectorInlineRenderingButton360).on('click', __.handlerActivate3d);
				payload.domElement.find(__.oDefaults.sSelectorInlineRenderingButton2d).on('click', __.handlerActivate2d);
			}
		}
	};

	/**
	 * enable 360 facilities, i.e. show button and activate listener
	 * @returns {void}
	 */
	__.handlerEnable360 = function() {
		if (AVE_API.isAveAvailable() === true) {
			if (!jQuery(__.oDefaults.sSelectorInlineRenderingButton360).is(":visible")) {
				jQuery(__.oDefaults.sSelectorInlineRenderingButton360).show();
				jQuery(__.oDefaults.sSelectorInlineRenderingButton360).off('click', __.handlerActivate3d);
				jQuery(__.oDefaults.sSelectorInlineRenderingButton2d).off('click', __.handlerActivate2d);
				jQuery(__.oDefaults.sSelectorInlineRenderingButton360).on('click', __.handlerActivate3d);
				jQuery(__.oDefaults.sSelectorInlineRenderingButton2d).on('click', __.handlerActivate2d);
			}
		}
	};

	/**
	 * handler to disable possible 3d stream on page leave (e.g. in-page navi)
	 * @returns {void}
	 */
	__.handlerPageOpen = function() {
		var activeAveContainer = jQuery(__.oDefaults.sSelectorAVEContainerActive);

		if (activeAveContainer.length > 0) {
			// deactivate active 3d frames
			__.setContainerTo2d(activeAveContainer);
			AVE_API.deactivate(activeAveContainer.attr('id'));
		}
	};

	/**
	 * handler for click on 360° button
	 * @param {object} e - the click event
	 * @returns {void}
	 */
	__.handlerActivate3d = function(e) {
		var eventTarget = jQuery(e.currentTarget);
		var activeAveContainer = jQuery(__.oDefaults.sSelectorAVEContainerActive);
		var newContainerWrapper = eventTarget.parent().parent();

		e.preventDefault();

		// activate 3d for new container
		__.activate3dForContainer(newContainerWrapper, activeAveContainer);

		// listen to resize to move AVE if necessary
		__.enableResizeHandler();
	};

	/**
	 * activate 3d for container
	 * @param {JQuery} newContainerWrapper - the new container to activate
	 * @param {JQuery} activeAveContainer - possibly already active container, which will be deactived (may be empty)
	 * @returns {void}
	 */
	__.activate3dForContainer = function(newContainerWrapper, activeAveContainer) {

		var renderImg = newContainerWrapper.find(__.oDefaults.sSelectorInlineRendering);
        var newAveContainer = newContainerWrapper.children(__.oDefaults.sSelectorAVEContainer);
        var newAveContainerId = newAveContainer.attr('id');
        var viewPerspective = renderImg.attr('data-renderimage-view');

		// deactivate other possible 3d frames
		__.setContainerTo2d(activeAveContainer);

		// activate new container
		__.setContainerTo3d(newContainerWrapper, activeAveContainer);


        // move possible other active ave to this place or activate new one
        if (activeAveContainer.length > 0) {
            AVE_API.moveAVE(activeAveContainer.attr('id'), newAveContainerId, viewPerspective);
            __.removeLoadingImg(jQuery(__.oDefaults.sSelectorAVECandidate));
        } else {
            AVE_API.activateAVE(newAveContainerId, viewPerspective);
        }
	};

	/**
	 * do animation and style classes on new 3d container
	 * @param {jQuery} newContainerWrapper - the new container wrapper
	 * @returns {void}
	 */
	__.setContainerTo3d = function(newContainerWrapper) {
		var renderImg = newContainerWrapper.find(__.oDefaults.sSelectorInlineRendering);
		var newAveContainer = newContainerWrapper.children(__.oDefaults.sSelectorAVEContainer);
		newContainerWrapper.find(__.oDefaults.sSelectorButton360).hide();
		newContainerWrapper.find(__.oDefaults.sSelectorButton2d).show();
		renderImg.addClass(__.oDefaults.sClassLoading);
		renderImg.addClass(__.oDefaults.sClassAVECandidate);
		newAveContainer.addClass(__.oDefaults.sClassActive);
	};

	/**
	 * handler for click on 2D button
	 * @param {object} e - the click event
	 * @returns {void}
	 */
	__.handlerActivate2d = function(e) {
		var activeAveContainer = jQuery(__.oDefaults.sSelectorAVEContainerActive);

		e.preventDefault();

		__.setContainerTo2d(activeAveContainer);
		AVE_API.deactivate(activeAveContainer.attr('id'));
	};

	/**
	 * reset active ave container to 2D mode
	 * @param {JQuery} activeAveContainer - the active AVE container to reset
	 * @returns {void}
	 */
	__.setContainerTo2d = function(activeAveContainer) {

		if (activeAveContainer.length > 0) {
			activeAveContainer.parent().find(__.oDefaults.sSelectorButton2d).hide();
			activeAveContainer.parent().find(__.oDefaults.sSelectorButton360).show();
			setTimeout(function() {
				activeAveContainer.next().removeClass(__.oDefaults.sClassUnLoading);
			}, 1000);

			activeAveContainer.parent().find(__.oDefaults.sSelectorInlineRendering).removeClass(__.oDefaults.sClassLoading);
			activeAveContainer.parent().find(__.oDefaults.sSelectorInlineRendering).removeClass(__.oDefaults.sClassAVECandidate);

			activeAveContainer.removeClass(__.oDefaults.sClassActive);
		}
	};

	/**
	 * remove loading image from target object
	 * @param {jQuery} targetObj - the obj from which to remove the loading image
	 * @returns {void}
	 */
	__.removeLoadingImg = function(targetObj) {
		console.log("removeLoadingImg");
		targetObj.addClass(__.oDefaults.sClassUnLoading);
		targetObj.removeClass(__.oDefaults.sClassLoading);
	};


	__.triggerSwipeTracker = function(event) {
		var isAnimationClick = event.target.closest(".nm-ave-animation-selector-wrapper");

		if (!isAnimationClick) {
			RENDERINGLAYER_TRACKER.swipeInlineHandler("Rotate");
		}
	};

	/**
	 * remove loading image when ZL stream ready event fires
	 * @returns {void}
	 */
	__.aveStreamReadyHandler = function() {
		var activeAveContainer = jQuery(__.oDefaults.sSelectorAVEContainerActive);
		__.removeLoadingImg(jQuery(__.oDefaults.sSelectorLoading));

		if (activeAveContainer.length > 0) {
			activeAveContainer.off('mousedown', __.triggerSwipeTracker);
			activeAveContainer.off('touchstart', __.triggerSwipeTracker);
			activeAveContainer.on('mousedown', __.triggerSwipeTracker);
			activeAveContainer.on('touchstart', __.triggerSwipeTracker);
		}
	};

	/**
	 * enable resize handler
	 * @returns {void}
	 */
	__.enableResizeHandler = function() {
		jQuery(window).off('resize', __.handlerResize);
		jQuery(window).on('resize', __.handlerResize);
	};

	/**
	 * resize handler to move AVE elem when changing from portrait to landscape
	 * @returns {void}
	 */
	__.handlerResize = function() {
		var activeAveContainer = jQuery(__.oDefaults.sSelectorAVEContainerActive);

		var activeLandscape = activeAveContainer.parent().hasClass(__.oDefaults.sClassLandscapeWrapper);
		var activePortrait = activeAveContainer.parent().hasClass(__.oDefaults.sClassPortraitWrapper);
		var correspondingElem;

		//portrait switch
		if (jQuery(window).width() < jQuery(window).height() && activeLandscape) {
			correspondingElem = activeAveContainer.closest(__.oDefaults.sSelectorInlineRenderingModule).find(__.oDefaults.sSelectorPortraitWrapper);
		}
		//landscape mode
		else if (jQuery(window).width() >= jQuery(window).height() && activePortrait) {
			correspondingElem = activeAveContainer.closest(__.oDefaults.sSelectorInlineRenderingModule).find(__.oDefaults.sSelectorLandscapeWrapper);
		}
		if (correspondingElem) {
			__.activate3dForContainer(correspondingElem, activeAveContainer);
		}
	};

	/**
	 * initialize
	 * @param {JQuery} eventBus_ - the event bus
	 * @returns {void}
	 */
	exports.initializePromise = function(eventBus_) {

		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve('module/inlinerendering.js');
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 187 */
/*!*************************************************!*\
  !*** ./js/app/module/dynamic-recommendation.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function($) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 8 */

/**
 * Parses and displays 'recommendations' for a given configuration. (NEMOBA-621)
 *
 * author:  Frank Schiemann <fs@dasburo.com>
 * version: 2.0
 * ticket:  https://imt.dasburo.com/browse/NEMOBA-621
 *
 */

!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
    __webpack_require__(/*! jquery */ 1),
    __webpack_require__(/*! doT */ 7),
    __webpack_require__(/*! configurator/dpu-api */ 3),
    __webpack_require__(/*! events */ 0),
    __webpack_require__(/*! core/template */ 5),
    __webpack_require__(/*! text!templates/dynamic-recommendation.tpl */ 188),
    __webpack_require__(/*! utils/dom */ 2),
    __webpack_require__(/*! module/entry-scroll */ 54)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, doT, API, EVENTS,TPL_RENDERER,TEMPLATE_LIST, DOM_UTILS, ENTRY_SCROLL) {//eslint-disable-line max-params
    'use strict';
    var
    //Private
    __ = {},
        //Public API
        exports = {
            __: __
        };

    __.oDefaults={

        // the query selector to insert rendered html
        sSelectorTemplateClass :'.nm-md-summary-dyn-recommendation',
        hideModuleClass : 'nm-hidden'
    };
    // get the template function from doTJS
    __.tplFunc = null;

    // doT tpl func for no recommendations
    __.tplFuncNoRecs = function() { return ''; };

    // private helper


    /*
     * Find elementId in DOM or return empty string.
     */
    __.getTplString = function (elementSelector) {
        var element = $(elementSelector);
        if(element.length > 0) {
            return element.html();
        }
        return '';
    };

    __.containerAvailable = function _available () {
        return (jQuery(__.oDefaults.sSelectorTemplateClass).length > 0);
    };

    __.addEvents = function () {
        __.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleUpdate);
        __.eventBus.on(EVENTS.PAGE_LOADED, __.handleUpdate);
        //__.eventBus.on(EVENTS.LAYER_LOADED, __.handleUpdate);
    };

    __.updateView = function () {

        if (__.containerAvailable()) {
            // noop - do nothing to left the recommendation intact in layer
            return;
        }
        else {
            if (__.recommendationsAvailable()) {
                __.render();
            }
        }
    };

    __.handleUpdate = function() {
        var recommendations = API.getDynamicRecommendations();
        var items;

        if (__.containerAvailable()) {
            if(recommendations.length && recommendations.length > 0) {
                items = __.parseRecommendationItems(recommendations);
                __.render(items);
                __.hideModule(false);
            }
            else {
                __.hideModule(true);
                return false;
            }
        }
    };

    __.parseRecommendationItems = function(items_) {
        var parsedItems = [];
        var maxItems = (!!items_ && items_.length)? items_.length : 0;
        var x, tempItem;

        maxItems = Math.min(maxItems, 5);

        for(x = 0; x < maxItems; x++) {
            tempItem = API.getItem((items_[x]).id);
            if(tempItem) {
                parsedItems.push( __.mergeItem(items_[x], tempItem) );
            }
        }

        return parsedItems;
    };

    __.mergeItem = function(recItem_, configItem_) {
        configItem_.name = recItem_.name;
        configItem_.einbaurate = recItem_.einbaurate;
        configItem_.einbauratePercent = recItem_.einbauratePercent;

        return configItem_;
    };

    __.hideModule = function(bool_) {
        jQuery(__.oDefaults.sSelectorTemplateClass).toggleClass(__.oDefaults.hideModuleClass, bool_);
    };

    __.render = function(items_) {
        var htmlString = TPL_RENDERER.render(TEMPLATE_LIST, items_);
        __.appendToDom(htmlString);
    };

    __.appendToDom = function(htmlString_) {
        jQuery(__.oDefaults.sSelectorTemplateClass).html(htmlString_);
    };

    __.initialize = function () {
       __.addEvents();
       __.handleUpdate();
       ENTRY_SCROLL.register('recommendations', 'summary-dynamic-recommendation');
    };

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			resolve("module/dynamic-recommendation.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 188 */
/*!***************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/dynamic-recommendation.tpl ***!
  \***************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-el-summary-dyn-recommendation-head\">\n\t<h2 class=\"nm-el-hdl nm-el-hdl-02 nm-at-hdl-b\">{{=window.i18n['dynamic-recommendations.others-choose-headline']}}</h2>\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['dynamic-recommendations.others-choose']}}</p>\n</div>\n\n<ul class=\"nm-options-list nm-list-summary-dyn-recommendation\">\n\t{{~it :value :index}}\n\t<li id=\"nm-sdr-item-{{=index}}\" class=\"nm-j-configurator-item nm-j-configurator-status_{{=value.status}}\" {{?value.id}}data-configurator-id=\"{{=value.id}}\"{{?}} {{?value.RadioGroup}} data-configurator-group=\"{{value.RadioGroup}}\"{{?}}>\n\n\t\t<div class=\"nm-options-list-cell-cb\">\n\t\t{{?value.RadioGroup}}\n\t\t\t<a class=\"nm-checkbox-3 nm-j-configurator-delegate-click\" x-cq-linkchecker=\"skip\" href=\"#\"></a>\n\t\t{{?}}\n\t\t{{?!value.RadioGroup}}\n\t\t\t<a class=\"nm-checkbox-1 nm-j-configurator-delegate-click\" x-cq-linkchecker=\"skip\" href=\"#\"></a>\n\t\t{{?}}\n\t\t</div>\n\t\t<div class=\"nm-options-cell-additional\">\n\t\t\t{{?value.image}}\n\t\t\t\t<div class=\"nm-list-item-additional\">\n\t\t\t\t\t{{?value.url}}\n\t\t\t\t\t<a class=\"nm-layerLink\" x-cq-linkchecker=\"skip\" href=\"{{=value.url}}\">\n\t\t\t\t\t{{?}}\n\t\t\t\t\t\t<div class=\"nm-list-item-image{{?value.video}} nm-list-item-video{{?}}\"><img src=\"{{=value.image}}\" alt=\"{{=value.name}}\" /></div>\n\t\t\t\t\t{{?value.url}}</a>{{?}}\n\t\t\t\t</div>\n\t\t\t{{?}}\n\t\t\t<div class=\"nm-list-item-text nm-el-pg nm-el-pg-04\">{{=value.name}}\n\t\t\t{{?value.nonrenderable}}\n\t\t\t\t<span class=\"nm-non-renderable nm-el-pg nm-el-pg-04 nm-at-pg-variant\"><span class=\"nm-at-pg-b\">{{=window.i18n['nemo.ui.common.note']}}: </span>{{=window.i18n['configuration.not-rendable-message']}}</span>\n\t\t\t{{?}}\n\t\t\t{{?!value.RadioGroup}}\n\t\t\t\t<div class=\"nm-j-configurator-text-packageDescription nm-package-description nm-el-pg nm-el-pg-04\"></div>\n\t\t\t{{?}}\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t{{?value.url}}\n\t\t\t<div class=\"nm-info-wrap\">\n\t\t\t\t<a class=\"nm-info nm-layerLink\" data-tracking-link=\"{&quot;prop39&quot;:&quot;derivate more info:{{=value.name}}&quot; , &quot;prop46&quot;:&quot;:derivate more info:{{=value.name}}&quot;}\" x-cq-linkchecker=\"skip\" href=\"{{=value.url}}\" title=\"{{=window.i18n['more-information']}}\"></a>\n                <span class=\"nm-conflict-icon\" title=\"{{=window.i18n['nemo.ui.common.conflict']}}\"></span>\n                <span class=\"nm-conflict-tooltip nm-el-lbl nm-el-lbl-01\">{{=window.i18n['nemo.ui.conflict.force-deselection']}}</span>\n\t\t\t</div>\n\t\t{{?}}\n\t\t<div class=\"nm-el-summary-dyn-recommendation-circle\" data-percentage=\"{{=value.einbaurate}}\">\n\t\t  <div class=\"circle\">\n\t\t  \t{{var degree = parseInt(parseFloat(value.einbaurate) * 180);}}\n\n\t\t  \t<style>\n\t\t  \t\t#nm-sdr-item-{{=index}} .nm-el-summary-dyn-recommendation-circle .circle .mask.full,\n\t\t\t\t#nm-sdr-item-{{=index}} .nm-el-summary-dyn-recommendation-circle .circle .fill {\n\t\t\t\t\tanimation: fill-{{=index}}  ease-in-out 3s;\n\t\t\t\t\t-webkit-animation: fill-{{=index}}  ease-in-out 3s;\n\t\t\t\t\ttransform: rotate({{=degree}}deg);\n\t\t\t\t\t-webkit-transform: rotate({{=degree}}deg);\n\t\t\t\t}\n\n\t\t\t\t@keyframes fill-{{=index}}  {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t-webkit-transform: rotate(0deg);\n\n\t\t\t\t\t}\n\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: rotate({{=degree}}deg);\n\t\t\t\t\t\t-webkit-transform: rotate({{=degree}}deg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t  \t</style>\n\t\t    <div class=\"mask full\">\n\t\t      <div class=\"fill\"></div>\n\t\t    </div>\n\t\t    <div class=\"mask half\">\n\t\t      <div class=\"fill\"></div>\n\t\t    </div>\n\t\t    <div class=\"inside-circle\">{{=value.einbauratePercent}}</div>\n\t\t  </div>\n\t\t</div>\n\n\t\t{{?value.Series || value.price}}\n\t\t\t<div class=\"nm-price nm-el-pg nm-el-pg-04 clearfix\">\n\t\t\t\t<span class=\"nm-j-configurator-text-price nm-price\">\n\t\t\t\t{{?value.Series}}\n\t\t\t\t\t{{=window.i18n['nemo.common.serie']}}\n\t\t\t\t{{?}}\n\t\t\t\t{{?value.price}}\n\t\t\t\t\t{{=value.price}}\n\t\t\t\t{{?}}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t{{?}}\n\t</li>\n\t{{~}}\n</ul>\n\n<div class=\"nm-el-summary-dyn-recommendation-footer\">\n\t<h2 class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=window.i18n['dynamic-recommendations.legend-headline']}}</h2>\n\t<div class=\"nm-el-summary-legend-content\">\n\t\t<div class=\"nm-el-summary-dyn-recommendation-circle\">\n\t\t\t<div class=\"circle\">\n\t\t\t    <div class=\"mask full\">\n\t\t\t      <div class=\"fill\"></div>\n\t\t\t    </div>\n\t\t\t    <div class=\"mask half\">\n\t\t\t      <div class=\"fill\"></div>\n\t\t\t    </div>\n\t\t\t    <div class=\"inside-circle\"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['dynamic-recommendations.legend-info']}}</p>\n\t</div>\n</div>\n"

/***/ }),
/* 189 */
/*!***************************************!*\
  !*** ./js/app/module/scs-matching.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! utils/ajax */ 6),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! core/signal */ 4),
	__webpack_require__(/*! utils/polling */ 17)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, AJAX, CONFIGURATOR_API, EMITTER, POLLING) { //eslint-disable-line max-params
	/**
	 * @exports module/scs-matching
	 */
	'use strict';
	var
	//Private
		__ = {},
		//Public API
		exports = {
			__: __
		};
	//lookup for CSS selectors etc.
	__.oDefaults = {
		'classBasketMatchingContainer': '.nm-basket-matching'
	};
	//reference to the global eventEmitter
	__.eventBus = null;
	//reference to the stcokcar eventEmitter
	__.stckEventBus = EMITTER.getEmitter('stockcar');
	//store the last mathcing
	__.currentMatching = null;
	//default number uf matching cars to load
	__.matchingSize = 6;
	//svd version
	__.currentSvdVersion = null;
	/**
	 * add listeners to events of interest for this modeule
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.triggerStckRequest);
		__.eventBus.on(EVENTS.PAGE_READY, __.triggerStckRequest);
	};
	/**
	 * check whether matching is active, i.e. Scopes STCK and STCK_MATCHING are active
	 * @returns {boolean} true, if matching active, false else
	 */
	__.isMatchingActive = function() {
		var matchingActive = false;
		var stockCarScope = !!SETUPS.get('stockcar.scs.market');
		var stockCarMatchingScope = !!SETUPS.get('nemo.scs-matching');

		if ((stockCarScope === true || stockCarScope === "true") &&
				(stockCarMatchingScope === true || stockCarMatchingScope === "true")) {
			matchingActive = true;
		}
		return matchingActive;
	};
	/**
	 * main initialization method (global EventEmitter)
	 * @param  {Obect} eventBus_ - global EventEmitter
	 * @returns {void}
	 **/
	__.initialize = function() {
		//is stockcar market?
		if (__.isMatchingActive() === true) {
			__.stckEventBus.on(EVENTS.SC_VERSION_LOADED,function(svdVersion_){
				__.currentSvdVersion = svdVersion_;
			});
			POLLING.wait(function() {
				return !!__.currentSvdVersion;},2000).then(function () {
					__.triggerStckRequest();
					__.addEvents();
			}).catch(function (err) {
				console.log(err);
			});
		}
	};
	/**
	 * getMatchingUrl (get url to the scs matching request)
	 *@returns {string} - url
	 */
	__.getMatchingUrl=function(){
		var url,versionId,market,baseUrl;
		baseUrl=SETUPS.get('stockcar.scs.base.url');
		market=SETUPS.get('stockcar.scs.market.path');
		versionId=SETUPS.get('stockcar.scs.version') ? SETUPS.get('stockcar.scs.version') + '/' : '';
		if(!!baseUrl&&!!versionId&&!!market){
		// Example: http://j10:8080/api/v1/search/match/es/es
		url = baseUrl+versionId + 'search/match/' + market;
		}
		return url;
	};
	/**
	 * trigger Stockcar matching request on pageLoad and configuration updates
	 * starts request to STCK and emits Event on result
	 * @returns {Promise} request Promise
	 */
	__.triggerStckRequest = function() {
		if (__.isMatchingActive() === true) {
			return __.startStckRequests().then(function(response) {
				return __.parseStckMatches(response);
			}).then(function(parsedResult) {
				return __.broadcastStckMatching(parsedResult);
			}).catch(function(error) {
				console.log(error);
			});
		}
	};
	/**
	 * start AJAX request
	 *@returns {Promise} - AJAX result json wrapped in a Promise
	 */
	__.startStckRequests = function() {
		var matchUrl = __.getMatchingUrl(),params;
		if (!!matchUrl) {
			params = __.getRequestParams(__.currentSvdVersion);
			if (!params) {
				return Promise.reject("missing SCS Attributes…");
			}
			return AJAX.getJSON(matchUrl, params, {
				"withCredentials": false
			});
		}
		else{
			return Promise.reject("no version and matchUrl…");
		}
	};

	__.getBasketContainer=function(){
		return document.querySelector(__.oDefaults.classBasketMatchingContainer);
	};
	/**
	* get SCS Mathcing attributes for this configuration
	* @returns {string} matching attributes
	*/
	__.getMatchingAttributes=function(){
		var matchingAttr,configurationMatchingAttr,
			basketContainer = __.getBasketContainer();
		configurationMatchingAttr = CONFIGURATOR_API.getSCSmatchingAttributes();
		//read scs matching attributes from configuration
		if(!!configurationMatchingAttr && configurationMatchingAttr.length > 0) {
			matchingAttr=configurationMatchingAttr.join(",");
			return matchingAttr;
		}
		//read scs matching attributes from basket data-attr
		if(basketContainer) {
			matchingAttr = basketContainer.getAttribute('data-attributes');
			matchingAttr = matchingAttr.replace(/[\[\s\]']+/g,'');
			return !!matchingAttr?matchingAttr:null;
		}
		return null;
	};

	/**
	* getRequestParams for scs matching request
	* @param {string} svdVersion_ - svd version
	* @return {string} param request string
	*/
	__.getRequestParams = function(svdVersion_) {
		//{{protocol}}://{{host}}:{{port}}/scs/search/v1/match/es/es?svd={{svd}}&size=3&attributes=color-type.pearl,carline.a3sb,carline.a4avant
		var paramString = [],
			matchingAttr = __.getMatchingAttributes();
		if (!!matchingAttr && matchingAttr.length && !!svdVersion_) {
			paramString.push("svd=" + svdVersion_);
			paramString.push("size=" + __.matchingSize);
			paramString.push("attributes=" + matchingAttr);
			paramString = paramString.join("&");
			return paramString;
		} else {
			return null;
		}
	};
	/**
	 * parse raw result and return parsed model data
	 * @param {object} response_ - response object
	 *@returns {Promise} - result wrapped in a Promise
	 */
	__.parseStckMatches = function(response_) {
		var response=response_||{},matches = response.vehicleBasic || [];
		matches=matches.map(__.addSvdVersion);
		return response;
	};
	/**
	 * broadcast Matching result via EventEmitter
	 *@param {object} payload_ - event Payload
	 *@returns {void}
	 */
	__.broadcastStckMatching = function(payload_) {
		__.currentMatching = payload_;
		 // payload_ = payload_.map(__.addSvdVersion);
		__.stckEventBus.emit(EVENTS.STOCKCAR_UPDATE, payload_);
		return payload_;
	};

	__.addSvdVersion = function(value){
		value.svdVersion = __.currentSvdVersion;
		return value;
	};
	//module initialization
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.eventBus.once(EVENTS.APP_INITIALIZED,__.initialize);
			resolve("module/scs-matching.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 190 */
/*!**********************************************!*\
  !*** ./js/app/module/scs-matching-basket.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/scs-matching-basket.tpl */ 191), __webpack_require__(/*! core/signal */ 4), __webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! sc/utils/swipe */ 192)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, RENDER, MATCHING_TPL, EMITTER, DOM_UTILS, SWIPE) { //eslint-disable-line max-params
	/**
	 * @exports module/scs-matching-basket
	 */
	'use strict';
	var
	//Private
		__ = {},
		//Public API
		exports = {
			__: __
		};
	//lookup for CSS selectors etc.
	__.oDefaults = {
		'classBasketMatchingContainer': '.nm-basket-matching',
		'classBasketMatchingCarousel': '.nm-basket-matching-car-slider',
		'classBasketArrowLeft': '.nm-basket-matching-prev',
		'classBasketArrowRight': '.nm-basket-matching-next',
		'classBasketThumb': '.nm-basket-matching-list-small ul li label'
	};
	__.currentMatchingVehicles = null;
	//reference to the global eventEmitter
	__.eventBus = null;
	//reference to the stockcar eventEmitter
	__.stckEventBus = EMITTER.getEmitter('stockcar');
	//detail link
	__.scDetailLinkPattern = null;

	// global carousel variables
	__.carouselItemCount = null;
	__.carouselItemWidth = null;
	__.carouselItemHeight = null;
	__.carouselWidth = null;
	__.carouselIndex = 0;
	__.carouselLabelStep = false;
	__.carouselItemWidthTransform = null;
	/**
	 * add listeners to events of interest for this modeule
	 * @returns {void}
	 */
	__.addEvents = function() {
		var domDelegate = DOM_UTILS.getEventDelegate('body');
		__.stckEventBus.on(EVENTS.STOCKCAR_UPDATE, __.handleStockcarResults);
		// __.eventBus.on(EVENTS.PAGE_READY, __.handlePageLoaded);
		__.addClickEvents();
	};
	__.addClickEvents = function() {
		var domDelegate = DOM_UTILS.getEventDelegate('body');
		domDelegate.on('click', __.oDefaults.classBasketArrowLeft, __.prevArrowClickHandler);
		domDelegate.on('click', __.oDefaults.classBasketArrowRight, __.nextArrowClickHandler);
		domDelegate.on('click', __.oDefaults.classBasketThumb, __.thumbClickHandler);
	};
	__.removeClickEvents = function() {
		var domDelegate = DOM_UTILS.getEventDelegate('body');
		domDelegate.off('click', __.oDefaults.classBasketArrowLeft, __.prevArrowClickHandler);
		domDelegate.off('click', __.oDefaults.classBasketArrowRight, __.nextArrowClickHandler);
		domDelegate.off('click', __.oDefaults.classBasketThumb, __.thumbClickHandler);
	};
	/**
	 * handle page load and check if no mathcing is available
	 * @returns {void}
	 */
	__.handlePageLoaded = function() {
		//only render if STCK matching-result exist
		if (__.currentMatching && document.querySelector(__.oDefaults.selectorModuleContainer)) {
			__.handleStockcarResults(__.currentMatching);
		}
	};
	/**
	 * handleStockcarResults on stockcar.update event
	 * stockcar.update handler
	 * @param {object} payload_ - Stockcar EventEmitter payload
	 * @return {void}
	 */
	__.handleStockcarResults = function(payload_) {
		var renderData;
		if (!!payload_) {
			__.currentMatchingVehicles = payload_.vehicleBasic ? payload_.vehicleBasic : [];
			renderData = __.parseResonse(payload_);
			__.renderTemplate(renderData);
		}
	};
	/**
	 * parse VTP response/prepare data for the template model
	 * @param  {object} response_ - JSON rsponse
	 * @returns {object} cleaned oject for use in the template model
	 */
	__.parseResonse = function(response_) {
		var parsed = {
				'cars': []
			},
			i, j,car,
			carItem,
			len = response_.vehicleBasic.length;
		for (i = 0, j = len; i < j; i++) {
			car = response_.vehicleBasic[i];
			if(!!car){
			carItem = {
				id: car.id,
				model: car.symbolicCarline.description,
				engine: car.modelCode.description,
				image: __.setImageSrc(car.pictures),
				price: __.getFormattedPrice(car.typedPrices, 'retail'),
				link: __.setDetailsURL(car.id),
				svdVersion: car.svdVersion,
				percentage: Math.round(car.percentage||car.displayPercentage)
			};
			parsed.cars.push(carItem);
		}
		}
		parsed.result_link = __.setResultsURL(response_.filterExpression);
		parsed.totalCount = len;
		return parsed;
	};
	__.setImageSrc = function(images_) {
		var image,images;
		images=images_||[];
		images.forEach(function(img){
			if(img.key === "n5c01") {
				image = img.url;
			}
		});
		return image;
	};
	/**
	 * sets Results url
	 *
	 * @method setResultsURL
	 * @param {string} _vehicleId - id of the current vehicle
	 * @return {void} returns nothing
	 */
	__.setResultsURL = function(_filterExpression) {
		var url = __.getResultsLinkUrl()||'';
		url = url.replace(/SC_ATTR_FILTERS/i, _filterExpression);
		return url;
	};
	/**
	 * returns result link url
	 *
	 * @method getResultLinkUrl
	 * @return {String} returns url
	 */
	__.getResultsLinkUrl = function() {
		var el = document.querySelector(__.oDefaults.classBasketMatchingContainer);
		return el ? el.getAttribute("data-result-url") : null;
	};
	/**
	 * sets Details url
	 *
	 * @method setDetailsURL
	 * @param {string} _vehicleId - id of the current vehicle
	 * @return {void} returns nothing
	 */
	__.setDetailsURL = function(_vehicleId) {
		var url = __.getDetailsLinkUrl()||'';
		url = url.replace(/SC_VEHICLE_ID/i, _vehicleId);
		return url;
	};
	/**
	 * returns detail link url
	 *
	 * @method getDetailsLinkUrl
	 * @return {String} returns url
	 */
	__.getDetailsLinkUrl = function() {
		var el = document.querySelector(__.oDefaults.classBasketMatchingContainer);
		return el ? el.getAttribute("data-detail-url") : null;
	};
	__.getFormattedPrice = function(array, type) {
		var len = array.length;
		while (len--) {
			if (array[len].type === type) {
				return array[len].formatted;
			}
		}
		return null;
	};

	/**
	 * render template to the dom
	 * @param  {object} renderData_ [template data model
	 * @returns {void}
	 */
	__.renderTemplate = function(renderData_) {
		var module = document.querySelector(__.oDefaults.classBasketMatchingContainer),
			tpl_string, $tplContainer;
		if (module) {
			module.innerHTML = "";
			if (renderData_.cars.length > 1) {
				tpl_string = RENDER.render(MATCHING_TPL, renderData_);
				module.innerHTML = tpl_string;
				__.initCarousel();
			}
		}
	};
	/**
	 * init carousel
	 * @returns {void}
	 **/
	__.initCarousel = function() {
		var carousel = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul'),
			itemLast = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul li:last-child');
		__.carouselItemCount = parseInt(carousel.childNodes.length,10);
		__.carouselItemWidthTransform = (100/__.carouselItemCount);
		__.carouselItemWidth = "100";
		__.carouselWidth = (100*__.carouselItemCount) + "%";
		carousel.setAttribute("style","width:" + __.carouselWidth + ";transform: translate(-" + __.carouselItemWidthTransform + "%);");
		carousel.insertBefore(itemLast, carousel.firstChild);
		SWIPE.register(__.onSwipeFinishHandler, __.oDefaults.classBasketMatchingCarousel, {
			swipedistance: 50
		});
	};
	/**
	 * get current index
	 * @returns {Number} index of last selected item
	 **/
	__.getCurrentIndex = function() {
		var inputs=DOM_UTILS.getElementsArray(".nm-basket-matching-list-slider"),c_index=0;
		inputs.forEach(function(itm,index){
			if(itm.checked){
				c_index=index;
			}
		});
		return c_index;
	};
	/**
	 * set current index
	 * @param  {Number} index_ - index of new selected element
	 * @returns {void}
	 **/
	__.setCurrentIndex = function(index_) {
		var oldIndex = __.getCurrentIndex();
		if(index_ === oldIndex){
			return;
		}
		__.updateThumbPosition(index_);
		__.updateCounter(index_+1);
		__.animation(oldIndex,index_);
	};
	/**
	 * next arrow click handler
	 * @returns {void}
	 **/
	__.nextArrowClickHandler = function() {
		var index = __.getCurrentIndex();

		index = ++index%__.carouselItemCount;
		__.setCurrentIndex(index);
	};
	/**
	 * prev arrow click handler
	 * @returns {void}
	 **/
	__.prevArrowClickHandler = function() {
		var index = __.getCurrentIndex();

		index = --index;
		if(index < 0) {
			index = __.carouselItemCount-1;
		}
		__.setCurrentIndex(index);
	};

	/**
	 * onSwipeFinishHandler
	 * @param {tbd} data_ - tbd
	 * @param {tbd} target_ - tbd
	 * @return {null} returns nothing
	 */
	__.onSwipeFinishHandler = function(data_, target_) {
		console.log('onSwipeFinishHandler --> target_: ', target_);
		console.log('onSwipeFinishHandler --> direction: ', data_.direction);
		if (data_.direction && data_.move !== 0) {
			switch (data_.direction.horizontal) {
				case SWIPE.LEFT:
					__.nextArrowClickHandler();
					break;
				default:
					__.prevArrowClickHandler();
					break;
			}
		}
	};
	/**
	 * animation
	 * @param  {Number} oldIndex_ - index of last selected element
	 * @param  {Number} newIndex_ - index of new selected element
	 * @returns {void}
	 **/
	__.animation = function(oldIndex_,newIndex_) {
		__.removeClickEvents();
		var direction;
		if(oldIndex_ < newIndex_) {
			direction = "next";
			if(oldIndex_ === 0 && newIndex_ === __.carouselItemCount-1) {
				direction = "prev";
			}
		}
		else
		{
			direction = "prev";
			if(oldIndex_ === __.carouselItemCount-1 && newIndex_ === 0) {
				direction = "next";
			}
		}
		console.log("Direction: ", direction);
		if(direction === "prev") {
			__.animatePrev(oldIndex_,newIndex_);
		}
		else {
			__.animateNext(oldIndex_,newIndex_);
		}
	};
	/**
	 * animate prev
	 * @param  {Number} oldIndex_ - index of last selected element
	 * @param  {Number} newIndex_ - index of new selected element
	 * @returns {void}
	 **/
	__.animatePrev = function(oldIndex_,newIndex_) {
		var carousel = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul'),
			itemLast = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul li:last-child');

		DOM_UTILS.handleTransition(carousel).then(function(el){
			el.classList.remove("slide-transition");
			if(oldIndex_- newIndex_> 1) {
				itemLast = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul li:last-child');
			}
			carousel.insertBefore(itemLast, carousel.firstChild);
			carousel.setAttribute("style","width:" + __.carouselWidth + ";transform: translate(-" + __.carouselItemWidthTransform + "%);");
			__.addClickEvents();
		});

		if(oldIndex_- newIndex_> 1) {
			carousel.insertBefore(itemLast, carousel.firstChild);
			carousel.setAttribute("style","width:" + __.carouselWidth + ";transform: translate(-" + __.carouselItemWidthTransform*2 + "%);");
			carousel.classList.add("slide-transition");
			carousel.setAttribute("style","width:" + __.carouselWidth + ";transform: translate(0)");
		}
		else {
			carousel.classList.add("slide-transition");
			carousel.setAttribute("style","width:"+ __.carouselWidth +";transform: translate(0)");
		}
	};
	/**
	 * animate next
	 * @param  {Number} oldIndex_ - index of last selected element
	 * @param  {Number} newIndex_ - index of new selected element
	 * @returns {void}
	 **/
	__.animateNext = function(oldIndex_,newIndex_) {
		var carousel = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul'),
			itemfirst = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul li:first-child');
		DOM_UTILS.handleTransition(carousel).then(function(el){
			el.classList.remove("slide-transition");
			el.appendChild(itemfirst, el.firstChild);
			if(newIndex_ - oldIndex_> 1) {
				itemfirst = document.querySelector(__.oDefaults.classBasketMatchingCarousel + ' ul li:first-child');
				el.appendChild(itemfirst, el.firstChild);
			}
			el.setAttribute("style","width:" + __.carouselWidth + ";transform: translate(-" + __.carouselItemWidthTransform + "%);");
			__.addClickEvents();
		}).catch(function(err) {
			console.log("Promise not completed ", err);
		});
		carousel.classList.add("slide-transition");
		carousel.setAttribute("style","width:"+ __.carouselWidth + ";transform: translate(-"+ __.carouselItemWidthTransform*((newIndex_ - oldIndex_)<0 ? 2 :(newIndex_ - oldIndex_ +1)) +"%);");
	};
	/**
	 * thumb click handler
	 * @param  {Target} target_ - current thumbnail target
	 * @returns {void}
	 **/
	__.thumbClickHandler = function(target_) {
		var index = parseInt(target_.target.getAttribute("data-index"),10);
		__.setCurrentIndex(index);
	};
	/**
	 * update thumb position
	 * @param  {Number} index_ - set correct index
	 * @returns {void}
	 **/
	__.updateThumbPosition = function(index_) {
		var inputs = DOM_UTILS.getElementsArray(".nm-basket-matching-list-slider");
		inputs.map(function(el){
			el.checked=false;
		});
		inputs[index_].checked=true;
	};
	/**
	 * update counter method
	 * @param  {Number} counter_ - current carousel count
	 * @returns {void}
	 **/
	__.updateCounter = function(counter_) {
		document.querySelector(".nm-basket-matching-counter-current").innerHTML=counter_;
	};
	/**
	 * main initialization method
	 * @param  {Obect} eventBus_ - global EventBus/EventEmitter
	 * @returns {void}
	 **/
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("scs-matching-basket.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 191 */
/*!************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/scs-matching-basket.tpl ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "{{~ it.cars :car :index }}\n<input type=\"radio\" id=\"nm-basket-matching-list-car{{=index+1}}\" name=\"nm-basket-matching-list-slider\" class=\"nm-basket-matching-list-slider\" data-index=\"{{=index}}\" {{? index === 0}}checked=\"checked\" {{?}} />\n{{~}}\n<label class=\"nm-basket-toggle-widgets-label-fullarea\" for=\"nm-basket-toggle-widgets\"></label>\n<label class=\"nm-basket-toggle-widgets-label\" for=\"nm-basket-toggle-widgets\">\n\t<span class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=window.i18n['basket.matching.headline'] || \"Verfügbare Neuwagen\"}}</span>\n</label>\n<div class=\"nm-basket-matching-wrap\">\n\t<div class=\"nm-basket-matching-car-slider\">\n\n\t\t<div class=\"nm-basket-matching-next\"></div>\n\t\t<div class=\"nm-basket-matching-prev\"></div>\n\t\t<div class=\"nm-basket-matching-counter nm-el-lbl nm-el-lbl-01\">\n\t\t\t<span class=\"nm-basket-matching-counter-current\">1</span>/<span class=\"nm-basket-matching-counter-total\">{{=it.totalCount}}</span>\n\t\t</div>\n\t\t<ul>\n\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t<li data-index=\"{{=index}}\">\n\t\t\t\t\t<div class=\"nm-basket-matching-car-container\">\n\t\t\t\t\t\t<a class=\"nm-layerLink\" href=\"{{=car.link}}\">\n\t\t\t\t\t\t\t<div {{? car.image !== 'undefined' && car.image !== '' }} style=\"background-image: url({{=car.image}});\" class=\"nm-basket-matching-car-image\" {{??}} class=\"nm-basket-matching-car-image nm-basket-matching-car-fallback\" {{?}} ></div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a class=\"nm-layerLink\" href=\"{{=car.link}}\">\n\t\t\t\t\t\t<div class=\"nm-basket-matching-car-info\">\n\t\t\t\t\t\t\t<span class=\"nm-basket-matching-car-model nm-el-lbl nm-el-lbl-01 nm-at-lbl-b\">{{=car.model}}</span>\n\t\t\t\t\t\t\t<span class=\"nm-basket-matching-car-description nm-el-lbl nm-el-lbl-01\">{{=car.engine}}</span>\n\t\t\t\t\t\t\t<span class=\"nm-basket-matching-car-price nm-el-lbl nm-el-lbl-01\">{{=car.price}}</span>\n\n\t\t\t\t\t\t\t<div class=\"nm-basket-matching-circle\" data-progress=\"{{=car.percentage}}\">\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t{{var circle_degree = parseInt(car.percentage * 1.8);}}\n\t\t\t\t\t\t\t\t{{var circle_degree_fix = parseInt(circle_degree * 2);}}\n\t\t\t\t\t\t\t\t{{var full_percentage = car.percentage<50 ? 0 : car.percentage;}}\n\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tclip: rect(0px, 25px, {{=full_percentage}}px, 0px);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask .fill {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-{{=index}}  ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask .fill.fix {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-fix-{{=index}} ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-fix-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t<div class=\"outer-circle\"></div>\n\t\t\t\t\t\t\t\t<div class=\"circle-{{=index}}\">\n\t\t\t\t\t\t\t\t\t<div class=\"mask full\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"fill\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"mask half\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"fill\"></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"fill fix\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"inner-circle\">{{=car.percentage}}%</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n\t<div class=\"nm-basket-matching-list-small-wrap\">\n\t\t<div class=\"nm-basket-matching-list-small\">\n\t\t\t<ul>\n\t\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<label for=\"nm-basket-matching-list-car{{=index+1}}\" {{? !!car.image }} style=\"background-image: url({{=car.image}});\" {{??}} class=\"nm-basket-matching-car-fallback\" {{?}} data-index=\"{{=index}}\"></label>\n\t\t\t\t\t</li>\n\t\t\t\t{{~}}\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class=\"nm-basket-matching-more-btn\">\n\t\t<a href=\"{{=it.result_link}}\" class=\"nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-at-btn-inv\"><span>{{=window.i18n['basket.matching.button.label'] || \"Weitere Neuwagen\"}}</span></a>\n\t</div>\n</div>\n"

/***/ }),
/* 192 */
/*!*****************************************!*\
  !*** ./js-stockcars/app/utils/swipe.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 170 */
/*global Promise,getComputedStyle,console,define*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! core/signal */ 4), __webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(SIGNAL, EVENTS, DOM_UTILS) {
		"use strict";
		var __ = {},
			api = {
				__: __
			},
			registered = [],
			options = {
				touchonly : false,
				swipedistance : 15
			},

			UP = "up",
			DOWN = "down",
			LEFT = "left",
			RIGHT = "right"
		;

		__.mouseMoveTimeout = null;

		__.swipeEventBus = null;

		__.swipePosition =
			{
				direction : {
					vertical : '',
					horizontal : ''
				},
				vertical : 0,
				horizontal : 0
			}
		;

		__.deactivateSwipe = function(event_, target_, object_) {
			//console.log('deactivateSwipe --> object_.position: ', object_);
			DOM_UTILS.getEventDelegate('body').off('mousemove', object_.selector);
			DOM_UTILS.getEventDelegate('body').off('mouseup', object_.selector);
			DOM_UTILS.getEventDelegate('body').off('touchmove', object_.selector);
			DOM_UTILS.getEventDelegate('body').off('touchend', object_.selector);

			if (object_.position.move) {
				object_.callback(object_.position, target_);
			}
			object_.position.move = null;

			if(__.mouseMoveTimeout) {
				clearTimeout(__.mouseMoveTimeout);
			}
		};

		__.getEventPos = function (event_) {
			var pos = {};
			if (event_.type === 'touchmove' || event_.type === 'touchend') {
				if(event_.originalEvent) {
					pos.x = event_.originalEvent.pageX;
					pos.y = event_.originalEvent.pageY;
				} else if (event_.changedTouches) {
					pos.x = event_.changedTouches[0].pageX;
					pos.y = event_.changedTouches[0].pageY;
				}
			} else {
				pos.x = event_.pageX;
				pos.y = event_.pageY;
			}

			return pos;
		};

		__.swipe = function(event_, target_, object_) {
			var pos = __.getEventPos(event_),
				objectWidth = DOM_UTILS.getElement(object_.selector).offsetWidth;
			if (pos.x >= object_.position.x + object_.options.swipedistance) {
				object_.position.direction.horizontal = RIGHT;
			} else if (pos.x <= object_.position.x - object_.options.swipedistance) {
				object_.position.direction.horizontal = LEFT;
			}

			if (pos.y >= object_.position.y + object_.options.swipedistance) {
				object_.position.direction.vertical = DOWN;
			} else if (pos.y <= object_.position.y - object_.options.swipedistance) {
				object_.position.direction.vertical = UP;
			}
			object_.position.endX = pos.x;
			object_.position.endY = pos.y;

			object_.position.move = (pos.x - object_.position.x) / objectWidth * 100;

			if(object_.swipeCallback) {
				object_.swipeCallback(object_.position, target_);
			}

		};

		__.activateSwipe = function(event_, swipeTarget_, object_) {
			var mouseEvent;
			// reset values
			object_.position.direction.horizontal = "";
			object_.position.direction.vertical = "";

			object_.position.x = 0;
			object_.position.endX = 0;
			object_.position.y = 0;
			object_.position.endY = 0;

			if (event_.type === 'touchstart') {
				if(event_.originalEvent) {
					object_.position.x = event_.originalEvent.pageX;
					object_.position.y = event_.originalEvent.pageY;
				} else if (event_.changedTouches) {
					object_.position.x = event_.changedTouches[0].pageX;
					object_.position.y = event_.changedTouches[0].pageY;
				}
			} else {
				object_.position.x = event_.pageX;
				object_.position.y = event_.pageY;
			}

			if(!object_.options.touchonly) {
				DOM_UTILS.getEventDelegate('body').on(
					'mousemove',
					object_.selector, function (e, target_) {
						__.swipe(e, target_, object_);
					}
				);
				DOM_UTILS.getEventDelegate('body').on(
					'mouseup',
					object_.selector, function (e, target_) {
						__.deactivateSwipe(e, target_, object_);
					}
				);
			}
			DOM_UTILS.getEventDelegate('body').on(
				'touchmove',
				object_.selector, function (e, target_) {
					__.swipe(e, target_, object_);
				}
			);
			DOM_UTILS.getEventDelegate('body').on(
				'touchend',
				object_.selector, function (e, target_) {
					__.swipe(e, target_, object_);
				}
			);

			if(__.mouseMoveTimeout) {
				clearTimeout(__.mouseMoveTimeout);
			}
			__.mouseMoveTimeout = setTimeout(function () {
				if(document.createEvent) {
					mouseEvent = document.createEvent("MouseEvent");
				} else {
					mouseEvent = new MouseEvent('click');
				}
				__.deactivateSwipe(mouseEvent, swipeTarget_, object_);
			}, 300);
		};

		__.onStart = function (swipeObject_) {
			return function (e, target_) {
				__.activateSwipe(e, target_, swipeObject_);
			};
		};

		__.addEvents = function () {
			var i, swipeObject
				;

			for( i = 0; i < registered.length; i++) {
				if(!registered[i].registered) {
					swipeObject = registered[i];

					if(!registered[i].options.touchonly) {
						DOM_UTILS.getEventDelegate('body').on('mousedown',swipeObject.selector, __.onStart(swipeObject));
					}
					DOM_UTILS.getEventDelegate('body').on('touchstart',swipeObject.selector, __.onStart(swipeObject));

					registered[i].registered = true;
				}
			}
		};

		__.checkOptions = function (options_, swipeObject_) {
			var swipeObjectOptions = options,
				swipeObject = swipeObject_;

			if(options_) {
				if(options_.touchonly) {
					swipeObjectOptions.touchonly = options_.touchonly;
				}
				if(options_.swipedistance) {
					swipeObjectOptions.swipedistance = options_.swipedistance;
				}
			}
			swipeObject.options = swipeObjectOptions;

			return swipeObject;
		};

		__.register = function(callback_, selector_, options_, swipeCallback_) {
			var swipeObject = {};
			if(callback_) {
				if(selector_ && selector_.length > 0) {

					swipeObject.selector = selector_;
					swipeObject.item = document.querySelector(selector_);
					swipeObject.callback = callback_;
					swipeObject.swipeCallback = swipeCallback_;
					swipeObject.initialized = false;
					swipeObject.position = __.swipePosition;
					swipeObject = __.checkOptions(options_, swipeObject);

					registered.push(swipeObject);
					__.addEvents();
				} else {
					throw new Error('swipe.js --> no selector defined');
				}
			} else {
				throw new Error('swipe.js --> no callback function defined');
			}
		};

		api.initialize = function() {
			__.swipeEventBus = SIGNAL.getEmitter("swipe");
			return Promise.resolve('swipe.js');
		};

		api.initializePromise = api.initialize;
		api.register = __.register;
		api.UP = UP;
		api.DOWN = DOWN;
		api.RIGHT = RIGHT;
		api.LEFT = LEFT;

		return api;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 193 */
/*!*********************************!*\
  !*** ./js/app/error-logging.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! module/error */ 48)], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, ERROR) {
		'use strict';
		//Private Methods
		/**
		 * Privat API
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		/**
		 * default Values used several times
		 * @member {Object} oDefaults
		 * @example
		 * //To call inner values:
		 * __.oDefaults = { 'className' : '.my-name' };
		 * console.log(__.oDefaults.className);
		 */
		__.oDefaults = {
			disableTrackJSLinkSelector: '.j-trackjs-optout'
		};
		/**
		 * add DOM events
		 *@returns {void} nothing
		 */
		__.addEvents = function () {
			var storage = __.getStorage();
			//read settings for trackJS Logging from local storage on init and disable if necessary
			if (storage && storage.getItem('trackJsLogging') === 'false') {
				__.disableTrackJSLogging(true);
			}
			//disable TrackJS logging by setting a persistent flag in the localStorage
			jQuery('body').on('click', __.oDefaults.disableTrackJSLinkSelector, __.disableTrackJSLogging);
			window.addEventListener('unhandledrejection', __.handleUnhandledRejectionErrors);

		};
		/**
		* add ErrorHandler for unhandled Promise rejections
		* @param {Object} event - Events
		* @returns {void} nothing
		*/
		__.handleUnhandledRejectionErrors = function (event) {
			console.error(event);
			if (window._trackJs && window._trackJs.track) {
				window._trackJs.track(event.reason);//eslint-disable-line
			}
		};
		/*
		 * get an storage object
		 * @returns {object} localStorage
		 */
		__.getStorage = function () {
			return window.localStorage;
		};
		/**
		 * disable trackJS Error logging for dataPrivacy reasons
		 * sets a persistent flag in the local storage
		 * @param {Boolean} flag true if trackJS was deactivated before, else empty
		 * @returns {void} nothing
		 */
		__.disableTrackJSLogging = function (flag) {
			var storage = __.getStorage(),
				status = storage.getItem('trackJsLogging') || 'true',
				message = window.i18n['nemo.ui.optout.message'],
				headline = window.i18n['nemo.ui.optout.headline'];
			if (flag !== true) {
				status = (status === 'true') ? 'false' : 'true';
				if (status === 'true') {
					message = window.i18n['nemo.ui.optin.message'];
					headline = window.i18n['nemo.ui.optin.headline'];
				}
				ERROR.handleError({
					errorMessage: message,
					errorSubheadline: "",
					errorHeadline: headline
				});
			}
			if (window._trackJs && window._trackJs.onError) {
				window._trackJs.onError = function (payload, error) {//eslint-disable-line
					return status !== 'false';
				};
			}
			if (storage) {
				storage.setItem('trackJsLogging', status);
			}

		};
		/**
		 * public initialize method
		 * @param {EventEmitter2} globalEventBus - Event Bus
		 * @return {Promise} returns Promise
		 */
		exports.initializePromise = function (globalEventBus) {
			return new Promise(function (resolve) {
				__.globalEventBus = globalEventBus;
				__.addEvents();
				resolve('error-logging.js');
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 194 */
/*!**********************************************!*\
  !*** ./js/app/module/inlinerendering-aoz.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! jquery */ 1),
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! configurator/dpu-controller */ 11)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (jQuery, EVENTS, DPU_API, DPU_CONTROLLER) {
	"use strict";

	var __ = {},
		exports = {
			'__': __
		};
	__.oDefaults = {
		'sAttributeInitialCaption': 'data-initialcaption',
		'sAttributePrNumber': 'data-partprnumber',
		'sClassAozActive': 'nm-aoz-active',
		'sClassAozButton': 'nm-aoz-btn',
		'sClassAozDescription': 'nm-aoz-description',
		'sClassAozHintText': 'nm-aoz-hinttext',
		'sClassAozInvisible': 'nm-aoz-invisible',
		'sClassAozItem': 'nm-aoz-item',
		'sClassAozModule': 'nm-md-aoz',
		'sClassAozPrice': 'nm-aoz-price',
		'sSelectorAozButton': '.nm-aoz-btn a',
		'sSelectorAozItem': '.nm-aoz-item'
	};
	/**
	 * add events
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handleSelectionUpdated);
		__.eventBus.on(EVENTS.APP_INITIALIZED, __.handleSelectionUpdated);
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleSelectionUpdated);
		__.legacyEventBus.on('click', __.oDefaults.sSelectorAozItem, __.toggleItem);
		__.legacyEventBus.on('click', __.oDefaults.sSelectorAozButton, __.toggleConfigItem);
	};
	/**
	 * toggle item
	 * @param {Event} e - the click event on an item
	 * @returns {void}
	 */
	__.toggleItem = function(e) {
		var closestModule = __.getClosestElementWithClass(e.target, __.oDefaults.sClassAozModule);
		var closestItem = __.getClosestElementWithClass(e.target, __.oDefaults.sClassAozItem);
		e.preventDefault();
		e.stopPropagation();

		if (closestModule && closestItem) {
			if (closestItem.classList.contains(__.oDefaults.sClassAozActive)) {
				__.unsetSelection(closestModule);
			} else {
				__.setNewSelection(closestModule, closestItem);
			}
		}
		__.handleSelectionUpdated();
	};
	/**
	 * toggle config item
	 * @param {Event} e - click event on config button
	 * @returns {void}
	 */
	__.toggleConfigItem = function(e) {
		var closestModule = __.getClosestElementWithClass(e.target, __.oDefaults.sClassAozModule);
		var activeItem = closestModule.getElementsByClassName(__.oDefaults.sClassAozActive)[0];
		var prNumber = activeItem.getAttribute(__.oDefaults.sAttributePrNumber);
		var configuratorId = prNumber.split(" ").join("_");

		e.preventDefault();

		if (DPU_API.isInCurrentConfiguration(configuratorId)) {
			__.updateButtonWrapperClass(closestModule, activeItem);
		} else {
			__.updateButtonWrapperClass(closestModule, activeItem);
		}
	};
	/**
	 * retrieve pr numbers from active module
	 * these pr numbers have to be filtered from the dpu request, because they
	 * might overrule the call to the stateless render service
	 * @param {Element} closestModule - the active module
	 * @returns {Array} - prNumbers
	 */
	__.retrievePrNumbersToFilter = function(closestModule) {
		var i, tilesLength;
		var tiles = closestModule.getElementsByClassName(__.oDefaults.sClassAozItem);
		var prNumbersToFilter = [];

		for (i=0, tilesLength = tiles.length; i<tilesLength; i++) {
			prNumbersToFilter.push(tiles[i].getAttribute('data-configurator-id'));
		}
		return prNumbersToFilter;
	};
	/**
	 * update render image (calls stateless render service)
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @param {String} prNumber - the pr number to retrieve image from
	 * @returns {void}
	 */
	__.updateRenderImage = function(closestModule, prNumber) {
		var i, renderImagesCount, currentRenderView, currentRenderType, imageUrl;
		var renderViews = [], renderSizes = [];
		var renderImages = closestModule.getElementsByClassName('nm-j-configurator-renderimage');
		var prNumbersToFilter = __.retrievePrNumbersToFilter(closestModule);

		for (i=0, renderImagesCount = renderImages.length; i<renderImagesCount; i++) {
			renderSizes.push(renderImages[i].getAttribute('data-renderimage-type'));
			currentRenderView = renderImages[i].getAttribute('data-renderimage-view');
			if (renderViews.indexOf(currentRenderView) <= -1) {
				renderViews.push(currentRenderView);
			}
		}
		DPU_API.sendRenderServiceRequest(prNumbersToFilter, prNumber, renderViews.join(','), renderSizes.join(',')).then(function(result) {
			for (i=0, renderImagesCount = renderImages.length; i<renderImagesCount; i++) {
				currentRenderType = renderImages[i].getAttribute('data-renderimage-type');
				currentRenderView = renderImages[i].getAttribute('data-renderimage-view');
				imageUrl = result['render-results'][prNumber][currentRenderView][currentRenderType];
				renderImages[i].setAttribute('style', 'background-image: url('+imageUrl+')');
			}
		});
	};
	/**
	 * reset render image to default render image
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @returns {void}
	 */
	__.resetRenderImage = function(closestModule) {
		var i, renderImagesCount, origImageUrl;
		var renderImages = closestModule.getElementsByClassName('nm-j-configurator-renderimage');

		for (i=0, renderImagesCount = renderImages.length; i<renderImagesCount; i++) {
			origImageUrl = renderImages[i].getAttribute('data-url');
			renderImages[i].setAttribute('style', 'background-image: url('+origImageUrl+')');
		}
	};
	/**
	 * get a classname with only known substring of this class
	 * @param {Element} element - the html element to check classlist
	 * @param {String} substring - the known substring of the classname to match
	 * @returns {String} the complete classname compliant to the pattern
	 */
	__.getClassBySubstring = function(element, substring) {
		var i, classListLength;
		var retrievedClass = false;
		for (i=0, classListLength=element.classList.length; i<classListLength; i++) {
			if (element.classList[i].indexOf(substring) > -1) {
				retrievedClass = element.classList[i];
				break;
			}
		}
		return retrievedClass;
	};
	/**
	 * the button wrapper needs to get the correct nm-j-configurator-status_xxxx class
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @param {Element} closestItem - the active aoz item ("closest to click")
	 * @returns {void}
	 */
	__.updateButtonWrapperClass = function(closestModule, closestItem) {
		var activeButton = closestModule.getElementsByClassName(__.oDefaults.sClassAozButton)[0];
		var newStatusClass = __.getClassBySubstring(closestItem, 'nm-j-configurator-status_');
		var oldStatusClass = __.getClassBySubstring(activeButton, 'nm-j-configurator-status_');

		if (oldStatusClass) {
			activeButton.classList.remove(oldStatusClass);
		}

		if (newStatusClass) {
			activeButton.classList.add(newStatusClass);
		}
		__.updateButtonTrackingAttributes(closestModule, closestItem);
	};
	/**
	 * update tracking attributes
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @param {Element} closestItem - the active aoz item ("closest to click")
	 * @returns {void}
	 */
	__.updateButtonTrackingAttributes = function(closestModule, closestItem) {
		var buttonToClick = closestModule.getElementsByClassName('nm-el-btn')[0];
		var configItemName = closestItem.getAttribute('data-name');
		var configItemFamilyGroup = closestItem.getAttribute('data-familygroup');
		var configItemFamily = closestItem.getAttribute('data-family');
		configItemName = configItemFamily !== "" ? configItemFamily + ':' + configItemName : configItemName;
		configItemName = configItemFamilyGroup !== "" ? configItemFamilyGroup + ':' + configItemName : configItemName;
		configItemName = configItemName.replace(/"/g, '\\"');

		buttonToClick.parentNode.setAttribute('data-configurator-id', closestItem.getAttribute('data-configurator-id'));
	};
	/**
	 * update description
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @param {String} text - the new text to set
	 * @returns {void}
	 */
	__.updateDescription = function(closestModule, text) {
		var descriptionTag = closestModule.getElementsByClassName(__.oDefaults.sClassAozDescription)[0];

		if (text === false) {
			descriptionTag.innerHTML = descriptionTag.getAttribute(__.oDefaults.sAttributeInitialCaption);
		} else {
			descriptionTag.innerHTML = text;
		}
	};
	/**
	 * update price
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @param {String} text - the new text to set
	 * @returns {void}
	 */
	__.updatePrice = function(closestModule, text) {
		var priceTag = closestModule.getElementsByClassName(__.oDefaults.sClassAozPrice)[0];
		priceTag.innerHTML = text;
	};
	/**
	 * update hint text
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @param {String} text - the new text to set
	 * @returns {void}
	 */
	__.updateHintText = function(closestModule, text) {
		var hintTextTag = closestModule.getElementsByClassName(__.oDefaults.sClassAozHintText)[0];
		hintTextTag.innerHTML = text;
	};
	/**
	 * unset selection (i.e. no aoz item is selected anymore)
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @returns {void}
	 */
	__.unsetSelection = function(closestModule) {
		__.removeClassFromElementsWithClassWithinDomFragment(closestModule, __.oDefaults.sClassAozItem, __.oDefaults.sClassAozActive);
		__.updateDescription(closestModule, false);
		__.updatePrice(closestModule, '&nbsp;');
		__.updateHintText(closestModule, '&nbsp;');
		__.addClassToElementsWithClassWithinDomFragment(closestModule, __.oDefaults.sClassAozButton, __.oDefaults.sClassAozInvisible);
		__.resetRenderImage(closestModule);
	};
	/**
	 * set new selection
	 * @param {Element} closestModule - the active aoz module ("closest to click")
	 * @param {Element} closestItem - the actuve aoz item
	 * @returns {void}
	 */
	__.setNewSelection = function(closestModule, closestItem) {
		__.updateDescription(closestModule, closestItem.getAttribute('data-name'));
		__.updatePrice(closestModule, closestItem.getAttribute('data-price'));
		__.updateHintText(closestModule, closestItem.getAttribute('data-hinttext'));
		__.removeClassFromElementsWithClassWithinDomFragment(closestModule, __.oDefaults.sClassAozItem, __.oDefaults.sClassAozActive);
		closestItem.classList.add(__.oDefaults.sClassAozActive);
		__.removeClassFromElementsWithClassWithinDomFragment(closestModule, __.oDefaults.sClassAozButton, __.oDefaults.sClassAozInvisible);
		__.updateButtonWrapperClass(closestModule, closestItem);
	};
	/**
	 * get closest element (same or up the parent tree) with given class
	 * @param {Element} inputElem - the element to search from
	 * @param {String} selectorClass - the selector class
	 * @returns {Element} matched element or false if no match
	 */
	__.getClosestElementWithClass = function(inputElem, selectorClass) {
		var elemToCheck = inputElem;

		while (elemToCheck.classList && !elemToCheck.classList.contains(selectorClass)) {
			if (elemToCheck.parentNode) {
				elemToCheck = elemToCheck.parentNode;
			} else {
				return false;
			}
		}
		return elemToCheck.parentNode ? elemToCheck : false;
	};
	/**
	 * remove class from all elements within given dom fragment
	 * @param {Element} domFragment - the dom fragment to operate on
	 * @param {String} selectorClass - the selector class for elements to match
	 * @param {String} classToRemove - the class to remove
	 * @returns {void}
	 */
	__.removeClassFromElementsWithClassWithinDomFragment = function(domFragment, selectorClass, classToRemove) {
		var i, itemCount;
		var items = domFragment.getElementsByClassName(selectorClass);

		for (i=0, itemCount=items.length; i<itemCount; i++) {
			items[i].classList.remove(classToRemove);
		}
	};
	/**
	 * add class to all elements within given dom fragment
	 * @param {Element} domFragment - the dom fragment to operate on
	 * @param {String} selectorClass - the selector class for elements to match
	 * @param {String} classToAdd - the class to add
	 * @returns {void}
	 */
	__.addClassToElementsWithClassWithinDomFragment = function(domFragment, selectorClass, classToAdd) {
		var i, itemCount;
		var items = domFragment.getElementsByClassName(selectorClass);

		for (i=0, itemCount=items.length; i<itemCount; i++) {
			items[i].classList.add(classToAdd);
		}
	};
	/**
	 * update status class for aoz item
	 * @param {Element} aozItem - the aoz item to operate on
	 * @param {String} newStatus - the new status to set
	 * @return {void}
	 */
	__.updateStatusClass = function(aozItem, newStatus) {
		var oldStatusClass = __.getClassBySubstring(aozItem, 'nm-j-configurator-status_');
		aozItem.classList.remove(oldStatusClass);
		aozItem.classList.add('nm-j-configurator-status_'+newStatus);
	};
	/**
	 * handle updated selection (on click selection change and on config update)
	 * @returns {void}
	 */
	__.handleSelectionUpdated = function() {
		var i, aozItemsCount, aozData, partPrNumber, closestModule, statusString;
		var aozItems = document.body.getElementsByClassName(__.oDefaults.sClassAozItem);

		for (i=0, aozItemsCount=aozItems.length; i<aozItemsCount; i++) {
			partPrNumber = aozItems[i].getAttribute(__.oDefaults.sAttributePrNumber).split(" ").join("_");
			aozData = DPU_API.getItem(partPrNumber);

			if (aozData.status) {
				__.updateStatusClass(aozItems[i], aozData.status);
			}

			if (aozItems[i].classList.contains(__.oDefaults.sClassAozActive)) {
				closestModule = __.getClosestElementWithClass(aozItems[i], __.oDefaults.sClassAozModule);
				__.updateRenderImage(closestModule, partPrNumber);
			}
		}
	};
	/**
	 * initialize
	 * @param {EventEmitter} eventBus_ - the event bus
	 * @returns {void}
	 */
	exports.initializePromise = function(eventBus_) {

		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.addEvents();
			resolve('module/inlinerendering-aoz.js');
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 195 */
/*!*******************************************!*\
  !*** ./js/app/module/notification-bar.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ 1), __webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/dom */ 2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jQuery, EVENTS, DOM_UTILS) {
	"use strict";
	var __ = {},
		exports = {
			'__': __
		};
	__.oDefaults = {
		'sClassNotificationBar': 'nm-md-notification-bar',
		'sSelectorNotificationBarCancel': '.nm-md-nb-cancel',
		'sSelectorNotificationBarLink': '.nm-md-nb-link',
		'sValueNotificationCanceled': 'nb-canceled'
	};
	/**
	 * add events
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.eventBus.on(EVENTS.PAGE_LOADED, __.checkForNotificationBar);
		__.eventBus.on(EVENTS.APP_INITIALIZED, __.checkForNotificationBar);
		__.domDelegate.on('click', __.oDefaults.sSelectorNotificationBarCancel, __.cancelNotificationbar);
		__.domDelegate.on('click', __.oDefaults.sSelectorNotificationBarLink, __.cancelNotificationbar);
	};
	/**
	 * read an item from local storage
	 * @param {String} key - key of the item to read
	 * @returns {Object} item from local storage
	 */
	__.readLocalStorageFlag = function(key) {
		return localStorage.getItem(key);
	};
	/**
	 * write a boolean to local storage
	 * @param {String} key - key of the item to set
	 * @returns {void}
	 */
	__.writeLocalStorageFlag = function(key) {
		localStorage.setItem(key, true);
	};
	/**
	 * check whether notification bar should be displayed
	 * @returns {void}
	 */
	__.checkForNotificationBar = function() {
		if (!__.readLocalStorageFlag(__.oDefaults.sValueNotificationCanceled)) {
			__.showNotificationBar();
		}
	};
	/**
	 * show notification bar
	 * @returns {void}
	 */
	__.showNotificationBar = function() {
		if (document.getElementsByClassName(__.oDefaults.sClassNotificationBar) && document.getElementsByClassName(__.oDefaults.sClassNotificationBar).length > 0) {
			document.getElementsByClassName(__.oDefaults.sClassNotificationBar)[0].style['max-height'] = '999px';
		}
	};
	/**
	 * hide notification bar
	 * @returns {void}
	 */
	__.hideNotificationBar = function() {
		if (document.getElementsByClassName(__.oDefaults.sClassNotificationBar) && document.getElementsByClassName(__.oDefaults.sClassNotificationBar).length > 0) {
			document.getElementsByClassName(__.oDefaults.sClassNotificationBar)[0].style['max-height'] = '0';
		}
	};
	/**
	 * never again show the notification bar
	 * @returns {void}
	 */
	__.cancelNotificationbar = function() {
		__.writeLocalStorageFlag(__.oDefaults.sValueNotificationCanceled);
		__.hideNotificationBar();
	};
	/**
	 * initialize
	 * @param {EventEmitter} eventBus_ - the event bus
	 * @returns {void}
	 */
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.domDelegate = DOM_UTILS.getEventDelegate('body');
			__.addEvents();
			resolve('module/notification-bar.js');
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 196 */
/*!***********************************!*\
  !*** ./js/app/module/usabilla.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! jquery */ 1)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, jQuery) { //eslint-disable-line max-params
	'use strict';
	//Private Methods
	var __ = {},
		//Public API
		exports = {
			__: __
		};

	__.oDefaults = {
		sSelectorModule: 	'j-action-usabilla'
	};

	__.eventBus = null;
	__.addEvents = function() {
		/*USED JQUERY*/
		__.legacyEventBus.on('click', '.j-action-usabilla', __.callExternalUsabillaModul);
	};

	__.callExternalUsabillaModul = function(e) {

		if(!!e && !!e.preventDefault) {
			e.preventDefault();
		}

		try {
			if( typeof (window.usabilla_live) === 'function' ){
				console.log("USABILLA: window.usabilla_live EXISTS");
				window.usabilla_live("click");
			}else{
				console.warn("NO USABILLA: window.usabilla_live NOT EXISTING");

				/*USED JQUERY*/
				__.legacyEventBus.trigger(EVENTS.ERROR);
			}
		} catch(e) {
			console.warn("USABILLA ERROR: something went wrong in window.usabilla_live: ", e);

			/*USED JQUERY*/
			__.legacyEventBus.trigger(EVENTS.ERROR);
		}

	};

	/**
	 * public initialize method
	 * @param {EventBus} eventBus_ - tbd
	 * @return {Promise} returns Promise
	 */
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.addEvents();
			resolve("module/usabilla.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 197 */
/*!*************************************************!*\
  !*** ./js/app/tracking/events/user-tracking.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! tracking/apis/dtm-api */ 21),
	__webpack_require__(/*! tracking/objects/event-object */ 22),
	__webpack_require__(/*! tracking/objects/user-object */ 41)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, DTM_API, EVENT_OBJ, USER_OBJ) {
	'use strict';
	var __ = {},
		exports = {
			__: __
		};
	/**
	 * add events
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.eventBus.on(EVENTS.MYAUDI_LOGIN, __.handleLogin);
	};
	/**
	 * handle login
	 * @param {String} userId - the visitor id
	 * @returns {void}
	 */
	__.handleLogin = function(userId) {
		if (!!userId) {
			return new Promise(function(resolve) {
				EVENT_OBJ.getData({}, 'login', '', 'user', {'userID': userId}).
					then(USER_OBJ.getData).
					then(DTM_API.sendData).then(resolve).
					catch(function(err) {
						console.log("user tracking error: " + err);
					});
			});
		} else {
			return new Promise(function(resolve) {
				console.warn("user tracking w/o visitor ID");
				resolve();
			});
		}
	};
	/**
	 * public initialize method
	 * @param {EventBus} globalEventBus - tbd
	 * @return {Promise} returns Promise
	 */
	exports.initializePromise = function(globalEventBus) {
		return new Promise(function(resolve) {
			__.eventBus = globalEventBus;
			__.addEvents();
			resolve('tracking/events/user-tracking.js');
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 198 */
/*!**************************************************!*\
  !*** ./js/app/tracking/events/video-tracking.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! utils/dom */ 2),
	__webpack_require__(/*! tracking/apis/dtm-api */ 21),
	__webpack_require__(/*! tracking/objects/event-object */ 22)
], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, DOM_UTILS, DTM_API, EVENT_OBJ) {
	'use strict';
	var __ = {},
		exports = {
			__: __
		};
	/**
	 * initialize
	 * @returns {void}
	 */
	__.initialize = function() {
		__.lastPosition = 0.0;
		__.addEvents();
	};
	/**
	 * add events
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.playedOnceInLoop = false;
		__.eventBus.on(EVENTS.APP_INITIALIZED, __.handleVideoListeners);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.handleVideoListeners);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handleVideoListeners);
	};
	/**
	 * get context of loaded DOM
	 * @param {Object|HtmlElement} data_ - the event's context payload
	 * @returns {HTMLElement} - DOM Fragment of the context
	 **/
	__.getContext = function(data_) {
		var contextElement;

		if (!!data_ && !data_.context) {
			contextElement = (!!data_.domElement ? data_.domElement[0] : data_.element);
		} else {
			contextElement = document;
		}
		return contextElement;
	};
	__.removeVideoEventListener = function(video) {
		var noTrackingAttribute = video.hasAttribute('data-video-notracking');

		if (noTrackingAttribute === false) {
			try {
				video.removeEventListener('playing', __.handleVideoPlay);
				video.removeEventListener('pause', __.handleVideoPause);
				video.removeEventListener('ended', __.handleVideoEnded);
				video.removeEventListener('timeupdate', __.handleVideoTimeupdate);
			} catch(err) {
				console.log("video-tracking error (add event listener): " + err);
			}
		}
	};
	__.addVideoEventListener = function(video) {
		var noTrackingAttribute = video.hasAttribute('data-video-notracking');

		if (noTrackingAttribute === false) {
			try {
				video.addEventListener('playing', __.handleVideoPlay);
				video.addEventListener('pause', __.handleVideoPause);
				video.addEventListener('ended', __.handleVideoEnded);
				video.addEventListener('timeupdate', __.handleVideoTimeupdate);
			} catch(err) {
				console.log("video-tracking error (add event listener): " + err);
			}
		}
	};
	__.handleVideoListeners = function(data_) {
		var context = __.getContext(data_),
			oldVideoElements = DOM_UTILS.getElementsArray('video'),
			newVideoElements = DOM_UTILS.getElementsArray('video', context),
			i;

		for (i=0; i<oldVideoElements.length; i++) {
			__.removeVideoEventListener(oldVideoElements[i]);
		}

		for (i=0; i<newVideoElements.length; i++) {
			__.addVideoEventListener(newVideoElements[i]);
		}
	};
	/**
	 * track a parametrized video action
	 * @param {HTMLElement} video - the video element
	 * @param {String} action - the video action
	 * @param {Object} attributes - the video attributes
	 * @returns {void}
	 */
	__.trackGenericVideoAction = function(video, action, attributes) {
		var videoFilename;

		if (!!video.currentSrc) {
			videoFilename = video.currentSrc.split('/').slice(-1)[0];
			EVENT_OBJ.getData({}, 'video_'+action, videoFilename, 'video', attributes).
				then(DTM_API.sendData).
				catch(function(err) {
					console.log("video-tracking error (" + action + "): " + err);
				});
		}
	};
	__.handleVideoPlay = function() {
		// special case for videos with real loop attribute - they do not provide an ended event
		// thus have to be treated to stop tracking after first complete view
		var remaining = this.duration;
		if (__.lastPosition !== 0.0) {
			remaining = this.duration - __.lastPosition;
		}
		if (!!this.loop && remaining !== this.duration && remaining <= 1.0) {
			__.playedOnceInLoop = true;
		}

		if (__.playedOnceInLoop === false) {
			__.trackGenericVideoAction(this, 'play', {'url': this.currentSrc});
		}
	};
	__.handleVideoPause = function() {
		if (__.playedOnceInLoop === false) {
			__.trackGenericVideoAction(this, 'pause', {'url': this.currentSrc});
		}
	};
	__.handleVideoEnded = function() {
		var autoplayAttribute = this.parentNode.getAttribute('data-autoplay');

		if (__.playedOnceInLoop === false) {
			__.trackGenericVideoAction(this, 'end', {'url': this.currentSrc});
		}
		if (!!this.loop && this.loop === true ||
			!!this.autoplay && this.autoplay === true ||
			autoplayAttribute === true || autoplayAttribute === "true")
		{
			__.playedOnceInLoop = true;
		}
	};
	__.handleVideoTimeupdate = function() {
		var timeDelta, percentage;

		if (__.playedOnceInLoop === false) {
			if (!!this.currentTime && !!this.duration && !!this.currentSrc) {
				timeDelta = Math.abs(__.lastPosition - this.currentTime);

				if (timeDelta >= 1) {
					__.lastPosition = this.currentTime;
					percentage = Math.floor(__.lastPosition / this.duration * 100.0);
					__.trackGenericVideoAction(this, 'progress', {'url': this.currentSrc, 'duration': percentage});
				}
			}
		}
	};
	exports.initializePromise = function(globalEventBus) {
		return new Promise(function(resolve) {
			__.eventBus = globalEventBus;
			__.initialize();
			resolve('tracking/events/video-tracking.js');
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 199 */
/*!*******************************************!*\
  !*** ./js/app/module/equipment-search.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxlen: 206 */
/*eslint max-params: [2, 7]*/
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! core/template */ 5), __webpack_require__(/*! text!templates/equipment-search.tpl */ 200), __webpack_require__(/*! text!templates/equipment-search-results.tpl */ 201), __webpack_require__(/*! configurator/dpu-api */ 3), __webpack_require__(/*! core/layer/jslayer */ 28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (EVENTS, TPL_RENDERER, EQUIPMENTSEARCH_TPL, EQUIPMENTSEARCH_RESULTS_TPL, API, JSLAYER) { //eslint-disable-line max-params
	"use strict";
	var __ = {},
		exports = {
			'__': __
		};
	exports.initialized = false;
	__.oDefaults = {
		// selectors
		sSelectorLayerOuter: '.nm-layer-equipment-search-layer',
		sSelectorSnippetText: '.nm-j-configurator-text-',
		sSelectorFooter: '.nm-equipment-search-footer',
		sSelectorResultsWrap: '.nm-equipment-search-result-container',
		sSelectorSearchInput: '.nm-equipment-search-input',
		sSelectorSearchForm: '.nm-equipment-search-form form'
	};
	__.searchListArr = [];
	/**
	 * Retrieve all available Items from configuration for Search Result List and parse into Array for later use
	 * @returns {Array} Array of Families with items
	 */
	__.getAllItems = function () {
		var family, items, item, group, i, families = API.getFamilies();
		__.searchListArr = [];
		if (families) {
			for (family in families) {
				if (family && families[family].type === "equipment") {
					group = {
						'family': families[family]
					};
					items = API.getItemsByFamily(family);
					if (items) {
						group.items = [];
						for (item in items) {
							if (item) {
								i = API.getItem(item);
								group.items.push(i);
							}
						}
						__.searchListArr.push(group);
					}
				}
			}
		}
		return __.searchListArr;
	};
	/**
	 * handle Configuration Update - update result list based on current configuration and footer section
	 * @returns {void}
	 */
	__.handleConfigUpdate = function () {
		var items, layer = __.getLayer(),
			searchString, resultList, parsedItems;
		//if layer doesn't exist. don't do anything
		if (!layer) {
			return;
		}
		//set carline infos
		__.updateFooterText(layer);
		items = __.getAllItems();
		if (items) {
			//in case configuration was made during a search, populate according to search input
			searchString = __.getSearchString();
			if (searchString.length > 1) {
				resultList = __.validateSearchString(searchString);
				parsedItems = __.parseResults(resultList.search);
				__.populateResultList(parsedItems);
			} else {
				__.populateResultList(items);
			}
		}
	};
	/**
	 * parse result list based on form input to match tpl setup
	 * @param {Array} results_ - Array of config items
	 * @returns {Array} items -  Array of parsed items
	 */
	__.parseResults = function (results_) {
		var result, items = [];
		if (results_) {
			for (result in results_) {
				if (result && results_[result].value) {
					items.push(results_[result].value);
				}
			}
		}
		return items;
	};
	/**
	 * fill results template part
	 * @param {Array} items_ - Array of config items
	 * @returns {void}
	 */
	__.populateResultList = function (items_) {
		var innerHtml, wrap = __.getResultsWrapContainer();
		if (items_ && wrap) {
			innerHtml = TPL_RENDERER.render(EQUIPMENTSEARCH_RESULTS_TPL, items_);
			wrap.innerHTML = innerHtml;
		}
	};
	/**
	 * Returns Layer Container
	 * @returns {Object} Results Layer Object (HTML) if existent
	 */
	__.getLayer = function () {
		return (document.querySelector(__.oDefaults.sSelectorLayerOuter)) ? document.querySelector(__.oDefaults.sSelectorLayerOuter) : false;
	};
	/**
	 * Returns empty Results Wrap Container
	 * @returns {Object} Results Container (HTML) if existent
	 */
	__.getResultsWrapContainer = function () {
		var wrap = document.querySelector(__.oDefaults.sSelectorResultsWrap);
		if (wrap) {
			//empty just in case
			while (wrap.firstChild) {
				wrap.removeChild(wrap.firstChild);
			}
			return wrap;
		}
		return false;
	};
	/**
	 * retrieves configuration and updates display in footer (carline, description, price, rate)
	 * @param {Object} layer_ - HTML Markup
	 * @returns {void}
	 */
	__.updateFooterText = function (layer_) {
		var searchKey, item, prop, hasRate = false;
		if (!layer_) {
			return;
		}
		//Configuration possible && configuration available?
		if (API.isConfigurable() && API.getConfiguration()) {
			prop = API.getConfiguration();
			for (searchKey in prop) {
				if (prop[searchKey]) {
					//console.log("searchkey ", searchKey, prop[searchKey]);
					if (searchKey === "rate") {
						hasRate = true;
					}
					item = layer_.querySelector(__.oDefaults.sSelectorFooter + " " + __.oDefaults.sSelectorSnippetText + searchKey);
					if (item) {
						item.textContent = prop[searchKey];
					}
				}
			}
			layer_.querySelector(__.oDefaults.sSelectorFooter + " > span").classList.remove("nm-hidden");
			if (!hasRate) {
				layer_.querySelector('.nm-equipment-search-rate').classList.add("nm-hidden");
			} else {
				layer_.querySelector('.nm-equipment-search-rate').classList.remove("nm-hidden");
			}
		} else {
			//hide fields if no configuration is available
			layer_.querySelector(__.oDefaults.sSelectorFooter + " > span").classList.add("nm-hidden");
		}
	};
	/**
	 * Retrieve Search String from Form Input
	 * @returns {String} Searchstring
	 */
	__.getSearchString = function () {
		// get the user input
		var searchString, input = document.querySelector(__.oDefaults.sSelectorSearchInput);
		searchString = (input) ? input.value : "";
		//remove leading and trailing whitespaces
		searchString = searchString.replace(/^\s+/g, "").replace(/</g, "").replace(/>/g, "");
		return searchString;
	};
	/**
	 * handle search input change
	 * @param {Event} event - jQuery Event
	 * @returns {void}
	 */
	__.handleSearch = function (event) {
		var parsedItems, searchString = __.getSearchString(),
			currentInput, changed,
			resultList = {},
			form = document.querySelector(__.oDefaults.sSelectorSearchForm);
		if (form) {
			//check if input changed
			currentInput = form.getAttribute("data-current") || '';
			changed = (currentInput !== searchString) || event.type === "click";
			event.preventDefault();
			event.stopImmediatePropagation();
			if (event.keyCode === 16 || event.keyCode === 13) {
				return;
			}
			form.setAttribute("data-current", searchString);
			if (searchString.length > 1 && changed) {
				resultList = __.validateSearchString(searchString);
				parsedItems = __.parseResults(resultList.search);
				__.populateResultList(parsedItems);
			} else if (searchString.length === 0 && changed) {
				__.resetSearch();
			}
		}
		return;
	};
	/**
	 * validateSearchString - checks and cleans up search input
	 * @param {String} searchString_ - Search String
	 * @returns {Object} resultList - Result Object List
	 */
	__.validateSearchString = function (searchString_) {
		var searchString = searchString_,
			replaceSearchStopWordsRegExp, resultList = {};
		if (!searchString || searchString.length === 0) {
			return [];
		}
		if (searchString.indexOf('|') !== -1) {
			resultList.prstring = searchString;
		}
		//remove stop words from search string
		if (!!API.getSearchStopWords()) {
			replaceSearchStopWordsRegExp = new RegExp("\\b(?:i|" + API.getSearchStopWords() + ")\\b\\s*", "gi");
			searchString = searchString.replace(replaceSearchStopWordsRegExp, "");
		}
		//console.log("<<" + searchString, API.search(searchString, true));
		//show search result only for inputs with at least 2 Chars
		resultList.search = (!!searchString && searchString.length) > 1 ? API.search(searchString, true) : [];
		resultList.searchString = !!searchString ? searchString : __.getSearchString();
		return resultList;
	};
	/**
	 * resets search result list  to all currently availble items from current configuration, stored in searchlistArray
	 * @returns {void}
	 */
	__.resetSearch = function () {
		if (__.searchListArr&&__.searchListArr.length) {
			__.populateResultList(__.searchListArr);
		}
	};
	/**
	 * generate base html for layer
	 * @returns {String} html for layer
	 */
	__.generateLayerHtml = function () {
		return '<div class="nm-layer-wrapper nm-layer-wrapper-equipment-search-layer"><div class="nm-layer-equipment-search-layer nm-j-jslayer nm-layer"></div></div>';
	};
	/**
	 * vertically position footer (fixed)
	 * @returns {void}
	 */
	__.positionFooter = function () {
		var footer = document.querySelector(__.oDefaults.sSelectorFooter),
			layerWrapper = document.querySelector(".nm-layer-wrapper-equipment-search-layer"),
			layerWrapperScrollPos;
		if (footer) {
			layerWrapperScrollPos = (layerWrapper ? layerWrapper.scrollTop : 0);
			footer.style.top = ((document.documentElement.clientHeight + layerWrapperScrollPos - footer.offsetHeight - 15) + "px");
		}
	};
	/**
	 * upon layer Loaded event create inner markup and add event listeners to search form
	 * @returns {void}
	 */
	__.handleLayerLoaded = function () {
		var tplContent = TPL_RENDERER.render(EQUIPMENTSEARCH_TPL, null),
			layerWrapper = document.querySelector('.nm-layer-wrapper-equipment-search-layer'),
			container = document.querySelector(__.oDefaults.sSelectorLayerOuter);
		if (container) {
			container.innerHTML = tplContent;
			__.legacyEventBus.on('keyup', '.nm-equipment-search-input', __.handleSearch);
			__.legacyEventBus.on('paste', '.nm-equipment-search-input', __.handleSearch);
			__.legacyEventBus.on('click', '.nm-equipment-search-input', __.handleSearch);
			__.legacyEventBus.on('click', '.nm-equipment-search-submit', __.handleSearch);
			__.legacyEventBus.on('click', '.nm-equipment-search-reset', __.resetSearch);
			__.legacyEventBus.on('submit', '.nm-equipment-search-form form', __.handleSearch);
			if (layerWrapper) {
				layerWrapper.addEventListener("scroll", __.positionFooter);
			}
		}
		__.handleConfigUpdate();
	};
	/**
	 * register jslayer and add event listeners
	 * @returns {void}
	 */
	__.addEvents = function () {
		JSLAYER.register('equipmentSearchlayer', __.generateLayerHtml);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.handleLayerLoaded);
		__.eventBus.on(EVENTS.CONFIG_UPDATE, __.handleConfigUpdate);
		exports.initialized = true;
	};
	/**
	 * remove listeners from search form and remove all other listeners, too
	 * @returns {void}
	 */
	exports.dispose = function () {
		var layerWrapper = document.querySelector('.nm-layer-wrapper-equipment-search-layer');
		console.log("dispose esmd");
		__.legacyEventBus.off('keyup', '.nm-equipment-search-input', __.handleSearch);
		__.legacyEventBus.off('paste', '.nm-equipment-search-input', __.handleSearch);
		__.legacyEventBus.off('click', '.nm-equipment-search-input', __.handleSearch);
		__.legacyEventBus.off('click', '.nm-equipment-search-submit', __.handleSearch);
		__.legacyEventBus.off('click', '.nm-equipment-search-reset', __.resetSearch);
		__.legacyEventBus.off('submit', '.nm-equipment-search-form form', __.handleSearch);
		__.eventBus.off(EVENTS.LAYER_LOADED, __.handleLayerLoaded);
		__.eventBus.off(EVENTS.CONFIG_UPDATE, __.handleConfigUpdate);
		if (layerWrapper) {
			layerWrapper.removeEventListener("scroll");
		}
	};
	exports.initializePromise = function (eventBus_) {
		return new Promise(function (resolve) {
			__.eventBus = eventBus_;
			__.legacyEventBus = jQuery('body');
			__.addEvents();
			resolve('module/equipment-search.js');
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 1)))

/***/ }),
/* 200 */
/*!*********************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/equipment-search.tpl ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "<div class=\"nm-layer-toolbar\">\n\t<div class=\"nm-button-close\">\n\t\t<svg class=\"nm-icon-cancel\">\n\t\t\t<use xlink:href={{=SETUPS.get('coreci.url.assets')+\"/icons/svg/sprite/sprite.svg#nm-icon-cancel\"}}></use>\n\t\t</svg>\n\t</div>\n</div>\n<div class=\"nm-layer-inner nm-equipment-search-layer-wrapper\">\n\t<div class=\"nm-md-equipment-search\">\n\t\t<header class=\"nm-equipment-search-header\">\n\t\t\t<h2 class=\"nm-el-hdl nm-el-hdl-02\">{{=window.i18n['nemo.ui.equipment-search.headline']}}</h2>\n\n\t\t\t<div class=\"nm-equipment-search-form\">\n\t\t\t\t<form action=\"#search=\" method=\"GET\">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<input name=\"q\" class=\"nm-equipment-search-input\" type=\"text\" placeholder='{{=window.i18n[\"search-layer.equipment-search-input-placeholder\"]}}'/>\n\t\t\t\t\t\t<input type=\"reset\" class=\"nm-equipment-search-reset\" value=\"X\" />\n\t\t\t\t\t</fieldset>\n\t\t\t\t</form>\n\t\t\t\t<div class=\"nm-equipment-search-result-container\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t\t<footer class=\"nm-equipment-search-footer\">\n\t\t\t<span class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\"><span class=\"nm-j-configurator-text-carlineName\"></span> <span class=\"nm-j-configurator-text-description nm-el-lbl nm-el-lbl-01\"></span></span>\n\t\t\t<span class=\"\"><span class=\"nm-j-configurator-text-price nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\"></span> <span class=\"nm-el-lbl nm-el-lbl-01 nm-equipment-search-rate\">({{=window.i18n[\"nemo.ui.equipment-search.rate\"]}} <span class=\"nm-j-configurator-text-rate\"></span>)</span></span>\n\t\t</footer>\n\t\t<main class=\"nm-equipment-search-main\">\n\t\t</main>\n\t</div>\n</div>\n"

/***/ }),
/* 201 */
/*!*****************************************************************************************!*\
  !*** /opt/app/nemo/node_modules/raw-loader!./js/templates/equipment-search-results.tpl ***!
  \*****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

module.exports = "{{?it.length}}\n\t{{~ it :group }}\n\t\t{{? !!group.family}}\n\t\t\t{{? !!group.items}}\n\n\n\t\t\t/*hide groups where all elements have hidden status*/\n\t\t\t{{var $hideGroup = false;}}\n\t\t\t{{~ group.items :itemcheck }}\n\t\t\t\t{{? !!itemcheck.status && itemcheck.status == \"00000\"}}\n\t\t\t\t\t{{$hideGroup = true;}}\n\t\t\t\t{{?}}\n\t\t\t{{~}}\n\n\t\t\t{{? !$hideGroup}}\n\t\t\t<ul class=\"nm-equipment-search-result-group\">\n\t\t\t\t<li>\n\t\t\t\t\t<div class=\"nm-el-hdl nm-el-hdl-04 nm-at-hdl-b\">{{=group.family.name}}</div>\n\t\t\t\t\t<ul class=\"nm-equipment-search-result-list\">\n\t\t\t\t\t{{~ group.items :item }}\n\t\t\t\t\t\t<li class=\"nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix\"\n\t\t\t\t\t\tdata-configurator-id=\"{{=item.id}}\">\n\t\t\t\t\t\t\t<div class=\"nm-equipment-search-result-item-wrap\">\n\t\t\t\t\t\t\t\t<div class=\"nm-equipment-search-result-image\">\n\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t<img src=\"{{=item.image}}\" alt=\"{{=item.name}}\" class=\"nm-image\" />\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"nm-equipment-search-result-content-wrap\">\n\t\t\t\t\t\t\t\t\t<div class=\"nm-equipment-search-result-desc\">\n\t\t\t\t\t\t\t\t\t\t<p class=\"nm-j-configurator-name nm-el-lbl nm-el-lbl-01 nm-at-lbl-b\">\n\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"nm-el-pg nm-el-pg-04\"><br />{{=window.i18n['configuration.not-rendable-message']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t<p class=\"nm-equipment-search-result-description nm-el-pg nm-el-pg-04\">\n\t\t\t\t\t\t\t\t\t\t\t{{= item.description || ''}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"nm-equipment-search-result-icons\">\n\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t<a class=\"nm-info nm-layerLink\" href=\"{{=item.url}}\" title=\"{{=window.i18n['more-information']}}\" data-tracking-link=\"{&quot;prop5&quot;:&quot;{{=window.i18n['more-information']}}&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}\"></a>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t<span class=\"nm-conflict-icon\" title=\"#I18N(\"nemo.ui.common.conflict\" \"Konflikt\")\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"nm-equipment-search-result-price nm-el-lbl nm-el-lbl-01\">\n\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t<span class=\"nm-j-configurator-text-price\">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"nm-equipment-search-result-add-btn\">\n\t\t\t\t\t\t\t\t\t\t<a class=\"nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t    <span class=\"nm-at-btn-state01\">{{=window.i18n['search-layer.add-item']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class=\"nm-at-btn-state02\">{{=window.i18n['search-layer.item-included']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class=\"nm-at-btn-state03\">{{=window.i18n['search-layer.remove-item']}}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t{{?}}\n\t\t{{?}}\n\t{{~}}\n{{?}}\n"

/***/ }),
/* 202 */
/*!*******************************************!*\
  !*** ./js/app/module/pdf-service-link.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* jshint maxparams: 7 */
/* jshint maxlen: 140 */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! module/pattern-matching/pattern-matching */ 12)], __WEBPACK_AMD_DEFINE_RESULT__ = function( EVENTS, DOM_UTILS, PATTERN_MATCHING) {
	'use strict';
	//Private Methods
	var __ = {},
		//Public API
		exports = {
			__: __
		};

	__.oDefaults = {
		sSelectorModule: 	'.j-pdf-configuration'
	};

	__.eventBus = null;
	__.addEvents = function() {
		DOM_UTILS.getEventDelegate('body').on('click', __.oDefaults.sSelectorModule, __.callPDFServiceWithAudicode);
	};

	__.callPDFServiceWithAudicode = function(e) {
		var pdfUrl; //"https://pdf.eu-west-1.apps.msi.audi.com"
		var windowReference;
		pdfUrl = SETUPS.get("nemo.pdf.url"); //$ENV.PdfServiceBaseUrl
		console.log("PDFURl: ", pdfUrl);

		if(!!pdfUrl) {
			windowReference = window.open();
			PATTERN_MATCHING
				.getReplacedUrl(pdfUrl+"/audicode/{{audicode}}", "audi.de")
				.then(
					function(urlWithAudiCode) {
						windowReference.location = urlWithAudiCode;
					}
				)
				.catch(
					function(e) {
						console.warn("PDF SERVICE LINK ERROR: something went wrong in pattern matching: ", e);
					}
				);
		}

	};

	/**
	 * public initialize method
	 * @param {EventBus} eventBus_ - tbd
	 * @return {Promise} returns Promise
	 */
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve("module/pdf-service-link.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 203 */
/*!***************************************!*\
  !*** ./js/app/module/svg-polyfill.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! svg4everybody */ 204),
	__webpack_require__(/*! events */ 0)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (SVG, EVENTS) {
	"use strict";
	var __ = {},
	exports = {__: __};

	__.callSvg4Everybody = function() {
		SVG();
	};

	__.initialize = function() {
		__.addEvents();
	};

	__.addEvents = function() {
		__.eventBus.on(EVENTS.LAYER_LOADED, __.callSvg4Everybody);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.callSvg4Everybody);
	};

	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.initialize();
			__.callSvg4Everybody();
			resolve("module/svg-polyfill.js");
		});
	};
	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 204 */
/*!*********************************!*\
  !*** ./js/lib/svg4everybody.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!function(root, factory) {
     true ? // AMD. Register as an anonymous module unless amdModuleId is set
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {
        return root.svg4everybody = factory();
    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : "object" == typeof exports ? // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory() : root.svg4everybody = factory();
}(this, function() {
    /*! svg4everybody v2.1.0 | github.com/jonathantneal/svg4everybody */
    function embed(svg, target) {
        // if the target exists
        if (target) {
            // create a document fragment to hold the contents of the target
            var fragment = document.createDocumentFragment(), viewBox = !svg.getAttribute("viewBox") && target.getAttribute("viewBox");
            // conditionally set the viewBox on the svg
            viewBox && svg.setAttribute("viewBox", viewBox);
            // copy the contents of the clone into the fragment
            for (// clone the target
            var clone = target.cloneNode(!0); clone.childNodes.length; ) {
                fragment.appendChild(clone.firstChild);
            }
            // append the fragment into the svg
            svg.appendChild(fragment);
        }
    }
    function loadreadystatechange(xhr) {
        // listen to changes in the request
        xhr.onreadystatechange = function() {
            // if the request is ready
            if (4 === xhr.readyState) {
                // get the cached html document
                var cachedDocument = xhr._cachedDocument;
                // ensure the cached html document based on the xhr response
                cachedDocument || (cachedDocument = xhr._cachedDocument = document.implementation.createHTMLDocument(""),
                cachedDocument.body.innerHTML = xhr.responseText, xhr._cachedTarget = {}), // clear the xhr embeds list and embed each item
                xhr._embeds.splice(0).map(function(item) {
                    // get the cached target
                    var target = xhr._cachedTarget[item.id];
                    // ensure the cached target
                    target || (target = xhr._cachedTarget[item.id] = cachedDocument.getElementById(item.id)),
                    // embed the target into the svg
                    embed(item.svg, target);
                });
            }
        }, // test the ready state change immediately
        xhr.onreadystatechange();
    }
    function svg4everybody(rawopts) {
        function oninterval() {
            // while the index exists in the live <use> collection
            for (// get the cached <use> index
            var index = 0; index < uses.length; ) {
                // get the current <use>
                var use = uses[index], svg = use.parentNode;
                if (svg && /svg/i.test(svg.nodeName)) {
                    var src = use.getAttribute("xlink:href");
                    if (polyfill && (!opts.validate || opts.validate(src, svg, use))) {
                        // remove the <use> element
                        svg.removeChild(use);
                        // parse the src and get the url and id
                        var srcSplit = src.split("#"), url = srcSplit.shift(), id = srcSplit.join("#");
                        // if the link is external
                        if (url.length) {
                            // get the cached xhr request
                            var xhr = requests[url];
                            // ensure the xhr request exists
                            xhr || (xhr = requests[url] = new XMLHttpRequest(), xhr.open("GET", url), xhr.send(),
                            xhr._embeds = []), // add the svg and id as an item to the xhr embeds list
                            xhr._embeds.push({
                                svg: svg,
                                id: id
                            }), // prepare the xhr ready state change event
                            loadreadystatechange(xhr);
                        } else {
                            // embed the local id into the svg
                            embed(svg, document.getElementById(id));
                        }
                    }
                } else {
                    // increase the index when the previous value was not "valid"
                    ++index;
                }
            }
            // continue the interval
            requestAnimationFrame(oninterval, 67);
        }
        var polyfill, opts = Object(rawopts), newerIEUA = /\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/, webkitUA = /\bAppleWebKit\/(\d+)\b/, olderEdgeUA = /\bEdge\/12\.(\d+)\b/;
        polyfill = "polyfill" in opts ? opts.polyfill : newerIEUA.test(navigator.userAgent) || (navigator.userAgent.match(olderEdgeUA) || [])[1] < 10547 || (navigator.userAgent.match(webkitUA) || [])[1] < 537;
        // create xhr requests object
        var requests = {}, requestAnimationFrame = window.requestAnimationFrame || setTimeout, uses = document.getElementsByTagName("use");
        // conditionally start the interval if the polyfill is active
        polyfill && oninterval();
    }
    return svg4everybody;
});


/***/ }),
/* 205 */
/*!**********************************************!*\
  !*** ./js/app/module/inline-mediagallery.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global Promise,getComputedStyle,console,define */
/* eslint max-statements: [1, 14, {"ignoreTopLevelFunctions": true}] */
!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! events */ 0), __webpack_require__(/*! utils/dom */ 2), __webpack_require__(/*! module/video-new */ 35)], __WEBPACK_AMD_DEFINE_RESULT__ = function(EVENTS, DOM_UTILS, VIDEO_NEW) { //eslint-disable-line max-params
		'use strict';
		//Private Methods
		/**
		 * Private API
		 *
		 * @var {Object} __
		 */
		var __ = {},
			/**
			 * Public API
			 * @var {Object} exports
			 */
			exports = {
				'__': __
			};
		__.NEXT = "next";
		__.PREV = "prev";
		__.itemPadding = 6;
		__.mobile = false;
		__.swipeStarted = false;
		__.clickTimer = null; /* timer property to detect double or single touch*/
		//reference to the global eventEmitter
		__.eventBus = null;
		__.galleries = {};
		/**
		 * default Values used several times
		 */
		__.oDefaults = {
			module: '.nm-md-inline-mediagallery',
			arrowNext: '.nm-inline-mediagallery-next',
			arrowPrev: '.nm-inline-mediagallery-prev',
			imageContainer: '.nm-inline-mediagallery-image-container',
			imageWrap: '.nm-inline-mediagallery-big-image-wrap',
			image: '.nm-inline-mediagallery-image-wrap',
			innerImage: '.nm-inline-mediagallery-image',
			closeFullscreenBtn: '.nm-inline-mediagallery-fullscreen-close-btn',
			classFullscreen: 'nm-md-mediagallery-fullscreen-mode',
			thumbnails: '.nm-inline-mediagallery-slider-item',
			sliderList: '.nm-inline-mediagallery-image-list',
			thumbSliderList: '.nm-inline-mediagallery-slider-list',
			sliderWrap: '.nm-inline-mediagallery-slider-list-wrap',
			sliderPrev: '.nm-inline-mediagallery-slider-prev',
			sliderNext: '.nm-inline-mediagallery-slider-next',
			videoPlayerPlay: '.nm-md-inline-mediagallery .nm-video .nm-j-play-btn',
			videoPlayerPause: '.nm-md-inline-mediagallery .nm-video .nm-j-play-btn .nm-video-button-pause',
			videoTarget: '.nm-prevent-video-click'
		};
		/**
		 * init
		 * public initialize method
		 * @return {Void} returns nothing
		 */
		exports.init = function(){
			if(!__.init) {
				__.addEvents();
				__.resizeHandler();
			}
			__.init=true;
		};


		/**
		 * setCurrentGallery
		 * @param  {HTMLElement} target_ target to get closest module
		 * @return {Void} returns nothing
		 */
		__.setCurrentGallery = function(target_) {
			__.currentGallery = DOM_UTILS.closest(target_, __.oDefaults.module);
		};
		/**
		 * nextArrowClickHandler
		 * handles next arrow click
		 * @param  {Event} event - click event
		 * @return {Void} returns nothing
		 */
		__.nextArrowClickHandler = function(event) {
			if (event && event.preventDefault) {
				event.preventDefault();
			}
			__.setCurrentGallery(event.target);
			__.setCurrentIndex(__.NEXT);
		};
		/**
		 * prevArrowClickHandler
		 * handles prev arrow click
		 * @param  {Event} event - click event
		 * @return {Void} returns nothing
		 */
		__.prevArrowClickHandler = function(event) {
			if (event && event.preventDefault) {
				event.preventDefault();
			}
			__.setCurrentGallery(event.target);
			__.setCurrentIndex(__.PREV);
		};
		/**
		 * getCurrentIndex
		 * the checked element from checkboxes to get selected image index
		 * @return {Number} returns current index
		 */
		__.getCurrentIndex = function() {
			var imageInputs = DOM_UTILS.getElementsArray(__.oDefaults.sliderList, __.currentGallery),
				currentIndex;
			imageInputs.forEach(function(item, index) {
				if (item.checked) {
					currentIndex = index;
				}
			});
			return currentIndex;
		};
		/**
		 * getInputsCount
		 * @return {Number} returns the count of slides in gallery
		 */
		__.getInputsCount = function() {
			var imageInputs = DOM_UTILS.getElementsArray(__.oDefaults.sliderList, __.currentGallery);
			return imageInputs.length;
		};
		/**
		 * changeInputPos
		 * set checked attribute at newIndex
		 * @param  {Number} newIndex_ - the new index
		 * @return {void} returns nothing
		 */
		__.changeInputPos = function(newIndex_) {
			var inputs = DOM_UTILS.getElementsArray(__.oDefaults.sliderList, __.currentGallery);
			inputs.map(function(element) {
				element.checked = false;
			});
			inputs[newIndex_].checked = true;
		};
		/**
		 * setCurrentIndex
		 * calucate new index and call functions to swap images and add animatin..
		 * @param {String} direction direction to animate
		 * @return {void} returns nothing
		 */
		__.setCurrentIndex = function(direction) {
			var oldIndex = __.getCurrentIndex(),
				imagesLen = __.getInputsCount(),
				newIndex = -1,
				thumbs = DOM_UTILS.getElementsArray(__.oDefaults.thumbnails, __.currentGallery);
			if (direction === __.NEXT) {
				newIndex = oldIndex < imagesLen ? oldIndex + 1 : oldIndex;
			} else if (direction === __.PREV) {
				newIndex = oldIndex > 0 ? oldIndex - 1 : oldIndex;
			}
			if ((newIndex < 0) || (newIndex === imagesLen)) {
				return;
			}
			__.makeAnimation(thumbs, newIndex, direction);
		};
		/**
		 * swapImageUrl
		 * @param  {number} index_ - new index to find url from thumb list
		 * @param {number} imageNumber_ - specify which image container
		 * @return {void} - returns nothing
		 */
		__.swapImageUrl = function(index_, imageNumber_) {
			var images = DOM_UTILS.getElementsArray(__.oDefaults.image, __.currentGallery),
				urls = __.getThumbUrls(index_),
				newUrl = urls.imageUrl,
				videoPosterUrl = urls.posterUrl,
				imageTag = DOM_UTILS.getElement('img', images[imageNumber_]),
				wrap = DOM_UTILS.getElement(__.oDefaults.imageWrap, __.currentGallery);

			__.setArrowStyle(index_);
			if (videoPosterUrl) {
				__.addVideoClassToGalleryImages();
				imageTag.src = videoPosterUrl;
			} else {
				imageTag.src = newUrl;
				DOM_UTILS.handleTransition(wrap).then(function () {
					__.removeVideoClassFromGalleryImages();
				});
			}
		};
		/**
		 * setArrowStyle
		 * @param {Number} index_ thums array index
		 * @returns {void} returns nothing
		 */
		__.setArrowStyle = function (index_) {
			var navigation = DOM_UTILS.getElement('.nm-inline-mediagallery-navigation', __.currentGallery),
				thumbs = DOM_UTILS.getElementsArray(__.oDefaults.thumbnails, __.currentGallery),
				arrowStyle = thumbs[index_].getAttribute('data-arrow-style');

				if(arrowStyle === "light"){
					navigation.classList.add('nm-inline-mediagallery-arrow-dark');
				} else {
					navigation.classList.remove('nm-inline-mediagallery-arrow-dark');
				}
		};
		/**
		 * hideVideoPlayer
		 * @returns {Void} returns nothing
		 */
		__.hideVideoPlayer = function () {
			var videoPlayer = __.getVideoPlayer();
			if(videoPlayer){
				videoPlayer.style.display = "none";
			}
		};
		/**
		 * addAnimationClass - adds animation class postfixed with direction
		 * and removes class when animation has finished.
		 * @param {String} direction_ - direction to animate
		 * @param {Number} index_ - index
		 * @return {void} returns nothing
		 */
		__.addAnimationClass = function(direction_, index_) {
			var wrap = DOM_UTILS.getElement(__.oDefaults.imageWrap, __.currentGallery),
				animationClass = "nm-inline-mediagallery-animate-" + direction_;

			DOM_UTILS.handleTransition(wrap).then(function () {
				__.hideVideoPlayer();
				__.swapImageUrl(index_, 0);
				__.showVideoPlayer(index_);
				wrap.classList.remove(animationClass);
			});
			wrap.classList.add(animationClass);
		};
		/**
		 * getThumbUrls
		 * function to get next image url from thumbnails with index
		 * @param  {Number} index_ number of image in thumbnail list
		 * @return {Object} returns object with all thumb urls
		 */
		__.getThumbUrls = function(index_) {
			var thumbs = DOM_UTILS.getElementsArray(__.oDefaults.thumbnails, __.currentGallery),
				thumb = {};
			thumb.imageUrl = thumbs[index_].getAttribute('data-full-image-url');
			thumb.posterUrl = thumbs[index_].getAttribute('data-video-poster');
			thumb.videoUrl = thumbs[index_].getAttribute('data-video-slide');
			thumb.vmsUrl = thumbs[index_].getAttribute('data-video-vms-slide');

			return thumb;
		};
		/**
		 * showVideoPlayer
		 * show or hide video player depending on video url
		 * @param  {Number} index_ index to find video url
		 * @return {Void} returns nothing
		 */
		__.showVideoPlayer = function(index_) {
			var urls = __.getThumbUrls(index_),
				videoUrl = urls.videoUrl,
				vmsUrl = urls.vmsUrl,
				poster = urls.posterUrl,
				videoPlayer = __.getVideoPlayer(),
				video = videoPlayer.querySelector('video'),
				vmsExtension;
			if (videoUrl) {
				video.pause();
				VIDEO_NEW.resetVideoPlayer(videoPlayer, videoUrl, poster);
				videoPlayer.style.display = "block";
			} else if (vmsUrl){
				vmsExtension = __.getVmsExtension(screen.width);
				video.pause();
				VIDEO_NEW.resetVideoPlayer(videoPlayer, vmsUrl+vmsExtension, poster);
				videoPlayer.style.display = "block";
			} else {
				video.pause();
				VIDEO_NEW.resetVideoPlayer(videoPlayer);
				videoPlayer.style.display = "none";
			}
		};
		/**
		 * getVmsExtension
		 * depending on screen size get the vms url extension
		 * @param  {Number} screenSize_ size of the users screen
		 * @return {String} returns vms extension string
		 */
		__.getVmsExtension = function (screenSize_) {
			var vmsExtension = "_Content270p-Web.mp4";
			if(screenSize_ > 1281) {
				vmsExtension = "_Content1080p-Web.mp4";
			} else if(screenSize_ >= 890 && screenSize_ <= 1280){
				vmsExtension = "_Content720p-Web.mp4";
			} else if(screenSize_ >= 705 && screenSize_ <= 889){
				vmsExtension = "_Content500p-Web.mp4";
			} else if(screenSize_ >= 481 && screenSize_ <= 704){
				vmsExtension = "_Content396p-Web.mp4";
			}
			return vmsExtension;
		};
		/**
		 * addVideoClassToGalleryImages add class to set the correct css prop
		 * @returns {Void} returns nothing
		 */
		__.addVideoClassToGalleryImages = function () {
			var images = DOM_UTILS.getElementsArray('.nm-inline-mediagallery-image', __.currentGallery),
				bigImageWrap = DOM_UTILS.getElement('.nm-inline-mediagallery-big-image-wrap', __.currentGallery);
			images.forEach(function (image) {
				image.classList.add('nm-inline-mediagallery-video');
			});
			bigImageWrap.classList.add('nm-inline-mediagallery-video-hover');
		};
		/**
		 * removeVideoClassFromGalleryImages add class to set the correct css prop
		 * @returns {Void} returns nothing
		 */
		__.removeVideoClassFromGalleryImages = function () {
			var images = DOM_UTILS.getElementsArray('.nm-inline-mediagallery-image', __.currentGallery),
				bigImageWrap = DOM_UTILS.getElement('.nm-inline-mediagallery-big-image-wrap', __.currentGallery);
			images.forEach(function (image) {
				image.classList.remove('nm-inline-mediagallery-video');
			});
			bigImageWrap.classList.remove('nm-inline-mediagallery-video-hover');

		};
		/**
		 * getVideoPlayer - get video container inside media gallery
		 * @return {HtmlElement} Video container element
		 */
		__.getVideoPlayer = function() {
			return DOM_UTILS.getElement('.nm-inline-mediagallery-image-container .nm-mediaplayer.nm-video', __.currentGallery);
		};
		/**
		 * onSwipeStart
		 * gets called when mousedown or touchstart event is fired.
		 * Caches start click/touch point and registering end event which calls onSwipeEnd
		 * @param  {Event} startEvent_ click/touch start x
		 * @return {Void} returns nothing
		 */
		__.onSwipeStart = function(startEvent_) {
			__.swipeStarted=true;
			__.setCurrentGallery(startEvent_.target);
			var swipeStart = __.getEventPos(startEvent_),
				videoControls = DOM_UTILS.getElement('.nm-inline-mediagallery-image .nm-controls-wrap-video', __.currentGallery),
				overlayPlayBtn = DOM_UTILS.getElement('nm-inline-mediagallery-image .nm-video-button-play', __.currentGallery),
				eventType = startEvent_.type === "touchstart" ? "touchend" : "mouseup",
				startTarget = startEvent_.target;
			if (startTarget === videoControls || videoControls.contains(startTarget) || startTarget === overlayPlayBtn) {
				return;
			}
			__.domEventDelegate.on(eventType, __.oDefaults.imageContainer, function bbb(endEvent) {
				if(__.swipeStarted){
				__.swipeStarted=false;
				__.domEventDelegate.off(eventType, __.oDefaults.imageContainer,bbb);
				__.onSwipeEnd(eventType, startTarget, endEvent, swipeStart);
				}
			});
		};
		/**
		 * onSwipeEnd description
		 * gets called when mouseup or touchend event is fired
		 * @param  {String} eventType type of the event (mouseup/touchend)
		 * @param  {HtmlElement} startTarget startTarget
		 * @param  {HtmlElement} endTarget endTarget
		 * @param  {Number} swipeStart  start position
		 * @return {Void} returns nothing
		 */
		__.onSwipeEnd = function(eventType, startTarget, endTarget, swipeStart) {
			var swipeEnd,
				swipeDirection,
				swipeDifference,
				swipeHeightDiff;
			swipeEnd = __.getEventPos(endTarget);
			swipeDirection = __.calculateSwipeDirection(swipeStart.x, swipeEnd.x);
			swipeDifference = (swipeStart.x > swipeEnd.x) ? swipeStart.x - swipeEnd.x : swipeEnd.x - swipeStart.x;
			swipeHeightDiff = (swipeStart.y > swipeEnd.y) ? swipeStart.y - swipeEnd.y : swipeEnd.y - swipeStart.y;

			if (swipeDifference > 50 && swipeHeightDiff <= 50) {
				__.setCurrentIndex(swipeDirection);
			} else if (swipeDifference === 0 && eventType === "touchend") {
				if (__.clickTimer === null) {
					__.clickTimer = setTimeout(function () {
						__.clickTimer = null;
						__.openFullscreen(startTarget);
					}, 500);
				} else {
					clearTimeout(__.clickTimer);
					__.clickTimer = null;
				}
			}
		};
		/**
		 * calculateSwipeDirection
		 * @param  {Number} swipeStart start click/touch point
		 * @param  {Number} swipeEnd   end click/touch point
		 * @return {String} swipeDirection __.PREV/__.NEXT
		 */
		__.calculateSwipeDirection = function(swipeStart, swipeEnd) {
			var swipeDirection,
				currentIndex = __.getCurrentIndex(),
				inputsCount = __.getInputsCount();
			if (swipeEnd > swipeStart) {
				swipeDirection = __.PREV;
				if (currentIndex === 0) {
					return;
				}
			} else {
				swipeDirection = __.NEXT;
				if (currentIndex === inputsCount - 1) {
					return;
				}
			}
			return swipeDirection;
		};
		/**
		 * getEventPos
		 * return the event click/touch position
		 * @param  {Event} event_ click/touch event
		 * @return {Number} event position
		 */
		__.getEventPos = function(event_) {
			var pos = {};
			if (event_.type === 'touchmove' || event_.type === 'touchend') {
				if (event_.originalEvent) {
					pos.x = event_.originalEvent.pageX;
					pos.y = event_.originalEvent.pageY;
				} else if (event_.changedTouches) {
					pos.x = event_.changedTouches[0].pageX;
					pos.y = event_.changedTouches[0].pageY;
				}
			} else {
				if(event_.type === 'touchstart'){
					pos.x = event_.touches[0].pageX;
					pos.y = event_.touches[0].pageY;
				} else {
					pos.x = event_.pageX;
					pos.y = event_.clientY;
				}
			}
			return pos;
		};
		/**
		 * openFullscreen - opens the native fullscreen mode
		 * @param {Event} event_ - event
		 * @return {void} returns nothing
		 */
		__.openFullscreen = function(event_) {
			var element,
				target = event_.target || event_;
			__.setCurrentGallery(target);
			if (__.isFullScreen()) {
				return;
			}
			element = DOM_UTILS.getElement(__.oDefaults.imageWrap, __.currentGallery);
			document.addEventListener('webkitfullscreenchange', __.toggleFullscreenClass, false);
			document.addEventListener('mozfullscreenchange', __.toggleFullscreenClass, false);
			document.addEventListener('fullscreenchange', __.toggleFullscreenClass, false);
			document.addEventListener('MSFullscreenChange', __.toggleFullscreenClass, false);
			if (element.requestFullScreen) {
				element.requestFullScreen();
			} else if (element.mozRequestFullScreen) {
				element.mozRequestFullScreen();
			} else if (element.webkitRequestFullScreen) {
				element.webkitRequestFullScreen();
			}
		};
		/**
		 * closeFullscreen - closes the native fullscreen mode
		 * @return {void} returns nothing
		 */
		__.closeFullscreen = function() {
			document.exitFullscreen = document.exitFullscreen || document.mozCancelFullScreen || document.webkitCancelFullScreen || document.webkitExitFullscreen || document.msExitFullscreen;
			if (document.exitFullscreen) {
				document.exitFullscreen();
			}
		};
		/**
		 * isFullScreen - checks if browser is in fullscreen mode
		 * @return {boolean} returns true/false
		 */
		__.isFullScreen = function() {
			return !!(document.fullScreen || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || document.fullscreenElement);
		};
		/**
		 * toggleFullscreenClass - toggles a class on module
		 * @return {void} returns nothing
		 */
		__.toggleFullscreenClass = function() {
			var module = DOM_UTILS.closest(event.target, __.oDefaults.module);
			if (__.isFullScreen()) {
				module.classList.add(__.oDefaults.classFullscreen);
			} else if (!__.isFullScreen()) {
				module.classList.remove(__.oDefaults.classFullscreen);
				document.removeEventListener('webkitfullscreenchange', __.toggleFullscreenClass, false);
				document.removeEventListener('mozfullscreenchange', __.toggleFullscreenClass, false);
				document.removeEventListener('fullscreenchange', __.toggleFullscreenClass, false);
				document.removeEventListener('MSFullscreenChange', __.toggleFullscreenClass, false);
			}
		};
		/**
		 * thumbClickHandler
		 * handles click on gallery thumbnails ...
		 * @param  {Event} event event
		 * @return {void} returns nothing
		 */
		__.thumbCLickHandler = function(event) {
			__.setCurrentGallery(event.target);
			var clickedItem = event.target,
				thumbs = DOM_UTILS.getElementsArray(__.oDefaults.thumbnails, __.currentGallery),
				currentIndex = __.getCurrentIndex(),
				newIndex,
				direction;
			if (!__.drag) {
				thumbs.forEach(function(thumbItem, index) {
					if (thumbItem === clickedItem.parentElement) {
						newIndex = index;
					}
				});
				if (currentIndex === newIndex) {
					return;
				}
				direction = currentIndex < newIndex ? __.NEXT : __.PREV;
				__.makeAnimation(thumbs, newIndex, direction);
			}
		};
		/**
		 * makeAnimation
		 * @param  {Array[HtmlElement]} sliderItems_ Array of slider items
		 * @param  {Number} newIndex_ newIndex
		 * @param  {Number} containerNumber_ image container number to set url in correct container
		 * @param  {String} direction_ direction for animation
		 * @return {Void} returns nothing
		 */
		__.makeAnimation = function(sliderItems_, newIndex_, direction_) {
			if (!__.isVisible(sliderItems_[newIndex_], true)) {
				__.centerHiddenThumb(sliderItems_, newIndex_);
			}
			__.changeInputPos(newIndex_);
			__.swapImageUrl(newIndex_, 1);
			__.addAnimationClass(direction_, newIndex_);
		};

		__.centerHiddenThumb = function (sliderItems_, newIndex_) {
			var xValue = sliderItems_[newIndex_],
				slider = DOM_UTILS.getElement(__.oDefaults.thumbSliderList, __.currentGallery),
				sliderWrap = DOM_UTILS.getElement(__.oDefaults.sliderWrap, __.currentGallery),
				sliderNav = __.getSliderNavigation(__.currentGallery);

			var targetValue = xValue.offsetLeft - ((sliderWrap.clientWidth - xValue.clientWidth)/2),
				maxValue = slider.clientWidth - sliderWrap.clientWidth;
			if (targetValue > maxValue) {
				targetValue = maxValue;
			}
			__.scrollElementToX(sliderWrap, targetValue, 300).then(function () {
				__.hideSliderNavigation(sliderItems_, sliderNav);
			});
		};
		 /*
		 * scrollXvalue animation method
		 * @param {HtmlElement} element - scroll container
		 * @param {number} scrollXFinal - scroll to value
		 * @param {number} scrollDuration - duration im milliseconds
		 */
		var _leftAnimation,
			_rightAnimation;
		__.scrollElementToX = function(element, scrollXFinal, scrollDuration) {
			return new Promise(function(resolve, reject) {
				if (scrollXFinal < 0) {
					scrollXFinal = 0;
				}
				if (_leftAnimation) {
					cancelAnimationFrame(_leftAnimation);
					_leftAnimation = undefined;
				}
				if (_rightAnimation) {
					cancelAnimationFrame(_rightAnimation);
					_rightAnimation = undefined;
				}
				var scrollLeft = element.scrollLeft,
					scrollStep = Math.PI / (scrollDuration / 15),
					cosParameter = scrollLeft / 2,
					scrollCount = 0,
					finalValue,
					scrollMargin;
				if (scrollXFinal < element.scrollLeft) {
					_leftAnimation = window.requestAnimationFrame(stepLeft);
				} else {
					cosParameter = scrollXFinal / 2;
					_rightAnimation = window.requestAnimationFrame(stepRight);
				}

				function stepLeft() {
					setTimeout(function() {
						if (element.scrollLeft > Math.round(scrollXFinal)) {
							_leftAnimation = window.requestAnimationFrame(stepLeft);
							scrollCount = scrollCount + 1;
							scrollMargin = cosParameter - cosParameter * Math.cos(scrollCount * scrollStep);
							finalValue = scrollLeft - scrollMargin;
							if (finalValue < scrollXFinal) {
								finalValue = scrollXFinal;
							}
							element.scrollLeft = finalValue;
						} else {
							cancelAnimationFrame(_leftAnimation);
							resolve();
						}
					}, 15);
				}

				function stepRight() {
					setTimeout(function() {
						if (Math.round(element.scrollLeft) < Math.round(scrollXFinal)-1) {
							_leftAnimation = window.requestAnimationFrame(stepRight);
							scrollCount = scrollCount + 1;
							scrollMargin = cosParameter - cosParameter * Math.cos(scrollCount * scrollStep);
							finalValue = scrollLeft + scrollMargin;
							if (finalValue > scrollXFinal) {
								finalValue = scrollXFinal;
							}
							element.scrollLeft = finalValue;
						} else {
							cancelAnimationFrame(_leftAnimation);
							resolve();
						}
					}, 15);
				}
			});
		};

		/**
		 * isElementVisible
		 * @param  {HtmlElement} element_ to check if visible
		 * @param {Boolean} fullVisible_ if true only returns true if the all object rect is visible
		 * @return {Boolean} returns if element is visible
		 */
		__.isVisible = function(element_, fullVisible_) {
			var parentBound = element_.parentNode.parentNode.getBoundingClientRect(),
				rectBound = element_.getBoundingClientRect(),
				rechts = (parseInt(rectBound.right, 10) <= parseInt(parentBound.right, 10)+2) && (parseInt(rectBound.right, 10) >= parseInt(parentBound.left, 10)),
				links = parseInt(rectBound.left, 10) >= parseInt(parentBound.left, 10) && parseInt(rectBound.left, 10) <= parseInt(parentBound.right, 10);
			if (fullVisible_) {
				return rechts && links;
			}
			return rechts || links;
		};

		/**
		 * sliderArrowClickHandler
		 * @param  {Event} event_ event to set __.currentGallery
		 * @return {Void} returns nothing
		 */
		__.sliderArrowClickHandler = function(event_) {
			event_.preventDefault();
			__.setCurrentGallery(this);
			var width = 0,
				maxDistance,
				scrollToValue = 0,
				direction = this.getAttribute('data-direction'),
				slider = DOM_UTILS.getElement(__.oDefaults.thumbSliderList, __.currentGallery),
				sliderElements = DOM_UTILS.getElementsArray(__.oDefaults.thumbnails, __.currentGallery),
				sliderWrap = DOM_UTILS.getElement(__.oDefaults.sliderWrap, __.currentGallery),
				activeBoarder = DOM_UTILS.getElement('.nm-inline-mediagallery-slider-item.nm-inline-mediagallery-slider-item-active', __.currentGallery),
				left = sliderWrap.scrollLeft;

			__.sliderWrapWidth = __.getClientWidth(sliderWrap);
			__.sliderWidth = __.getClientWidth(slider);
			maxDistance = (__.sliderWidth - __.sliderWrapWidth) + 2; // plus 2 pixels because of the active boarder

			sliderElements.forEach(function(item) {
				if (__.isVisible(item, true) && item !== activeBoarder) {
					width = width + item.clientWidth + __.itemPadding;
				}
			});

			if(direction === __.PREV) {
				//GO LEFT
				scrollToValue = (left - width) > 0 ? (left - width): 0;
			}else {
				// GO RIGHT
				scrollToValue = (left + width) > maxDistance ? maxDistance : (left + width);
			}
			__.scrollElementToX(sliderWrap,scrollToValue - 2,300);
		};
		/**
		 * scrollHandler
		 *
		 */
		__.scrollHandler = function (event_) {
			__.setCurrentGallery(this);
			var sliderNav = __.getSliderNavigation(__.currentGallery),
				sliderElements = DOM_UTILS.getElementsArray(__.oDefaults.thumbnails, __.currentGallery);
			__.hideSliderNavigation(sliderElements, sliderNav);
			__.setGalleryCenterMostElement(event_.target);
		};

		/**
		 * hideSliderNavigation
		 * @param  {Array[HtmlElement]} sliderArray Array with slider elements
		 * @param  {HTMLELement} sliderNav slider navigation
		 * @return {Void} returns nothing
		 */
		__.hideSliderNavigation = function(sliderArray, sliderNav) {
			__.isVisible(sliderArray[0], true) ? sliderNav.prev.style.display = 'none' : sliderNav.prev.style.display = 'block';
			// we use sliderArray-2 for the last item because -1 ist the active border
			__.isVisible(sliderArray[sliderArray.length - 2], true) ? sliderNav.next.style.display = 'none' : sliderNav.next.style.display = 'block';
		};
		/**
		 * getSliderNavigation
		 * get slider next and prev button
		 * @return {Object} returns slider navigation elements object
		 */
		__.getSliderNavigation = function(gallery_) {
			var sliderNavigation = {};
			sliderNavigation.prev = DOM_UTILS.getElement(__.oDefaults.sliderPrev, gallery_);
			sliderNavigation.next = DOM_UTILS.getElement(__.oDefaults.sliderNext, gallery_);
			return sliderNavigation;
		};
		/**
		 * getClientWidth
		 * @param  {HtmlElement} element element to get client width from
		 * @return {Number} return width of element
		 */
		__.getClientWidth = function(element) {
			return element.clientWidth;
		};
		/**
		 * addPreventDefault
		 * @param {Event} e event to add prevent default
		 * @return {void} returns nothing
		 */
		__.addPreventDefault = function(e) {
			if (!__.mobile) {
				e.preventDefault();
			}
		};
		/**
		 * addGalleryVideoEvents
		 * @return {Void} returns noting
		 */
		__.addGalleryVideoEvents = function() {
			var videos = DOM_UTILS.getElementsArray('.nm-inline-mediagallery-image video');
			videos.forEach(function(video) {
				video.addEventListener('playing', __.addPlayingClass);
			});
		};
		/**
		 * addPlayingClass
		 * @param {Event} event  - target is video element
		 * @return {Void} returns nothing
		 */
		__.addPlayingClass = function(event) {
			__.setCurrentGallery(event.target);
			var imageContainer = DOM_UTILS.getElement('.nm-inline-mediagallery-image-container', __.currentGallery),
				video = event.target;
			imageContainer.classList.add('nm-inline-mediagallery-video-playing');
			__.hideNavigation();
			video.addEventListener('pause', __.removePlayingClass);
			video.addEventListener('ended', __.removePlayingClass);
		};
		/**
		 * removePlayingClass
		 * @param {Event} event  - target is video element
		 * @return {Void} returns nothing
		 */
		__.removePlayingClass = function(event) {
			var imageContainer = DOM_UTILS.getElement('.nm-inline-mediagallery-image-container', __.currentGallery),
				video = event.target;
			imageContainer.classList.remove('nm-inline-mediagallery-video-playing');
			__.showNavigation();
			video.removeEventListener('pause', __.removePlayingClass);
			video.removeEventListener('ended', __.removePlayingClass);
		};

		/**
		 * showNavigation - shows gallery navigation and gradient
		 * @return {void} returns noting
		 */
		__.showNavigation = function () {
			var gradientContainer = DOM_UTILS.getElement('.nm-inline-mediagallery-navigation-gradients', __.currentGallery),
				galleryNavigation = DOM_UTILS.getElement('.nm-inline-mediagallery-navigation', __.currentGallery);
			gradientContainer.classList.remove('nm-hidden');
			galleryNavigation.classList.remove('nm-hidden');
		};

		/**
		 * hideNavigation - hides gallery navigation and gradient
		 * @return {void} returns noting
		 */
		__.hideNavigation = function () {
			var gradientContainer = DOM_UTILS.getElement('.nm-inline-mediagallery-navigation-gradients', __.currentGallery),
				galleryNavigation = DOM_UTILS.getElement('.nm-inline-mediagallery-navigation', __.currentGallery);
			gradientContainer.classList.add('nm-hidden');
			galleryNavigation.classList.add('nm-hidden');
		};
		/**
		 * preventImgDrag - prevents gallery image from dragging
		 * @returns{Boolean} returns always false
		 */
		__.preventImgDrag = function () {
			return false;
		};
		/**
		 * orientationChangeHandler gets called when device orientation changes
		 * @return {void} return nothing
		 */
		__.orientationChangeHandler = function () {
			__.centerAllGalleryThumbs();
		};
		/**
		 * setGalleryCenterMostElement add centermost thumbnail for gallery module
		 * @param {HTMLElement} target_ target from scroll handler
		 * @returns {void} returns nothing
		 */
		__.setGalleryCenterMostElement = function (target_) {
			var centermost = __.getCenterMostElementOfParent(target_),
				currGalleryId = __.currentGallery.getAttribute('data-gallery-id');
			__.galleries[currGalleryId] = centermost;
		};
		/**
		 * getCenterMostElementOfParent - get the centermost element inside of scroll container
		 * @param  {HTMLElement} parentElement_ - wrapper element
		 * @return {HTMLElement} centermost element
		 */
		__.getCenterMostElementOfParent = function (parentElement_) {
			var sliderElements = DOM_UTILS.getElementsArray('.nm-inline-mediagallery-slider-item', parentElement_),
				wrapCenter = parentElement_.getBoundingClientRect().right - (parentElement_.clientWidth/2),
				centerMostElement,
				elementCenter,
				elementsCenterToParentCenter;

			sliderElements.forEach(function (ele) {
				if(__.isVisible(ele, true)){
					elementCenter = ele.getBoundingClientRect().right - (ele.clientWidth/2);
					elementsCenterToParentCenter = Math.abs(wrapCenter - elementCenter);
					if(!centerMostElement){
						centerMostElement = {};
						centerMostElement.abstand = elementsCenterToParentCenter;
						centerMostElement.element = ele;
					} else {
						if(elementsCenterToParentCenter < centerMostElement.abstand){
							centerMostElement.abstand = elementsCenterToParentCenter;
							centerMostElement.element = ele;
						}
					}
				}
			});
			return centerMostElement.element;
		};
		/**
		 * centerAllGalleryThumbs - centers last centermost thumbnail after orientation change
		 * @return {void} returns nothing
		 */
		__.centerAllGalleryThumbs = function () {
			var wrap;
			Object.keys(__.galleries).forEach(function(key) {
				wrap = DOM_UTILS.closest(__.galleries[key], __.oDefaults.sliderWrap);
				__.centerThumb(wrap, __.galleries[key]);
			});
		};
		/**
		 * centerThumb - calculates thumbs center position and sets scroll left value
		 * @param  {HTMLElelemt} sliderWrap wrapper which has overflow scroll set
		 * @param  {HTMLElement} thumb_ single thumb element
		 * @returns {void} returns nothing
		 */
		__.centerThumb = function (sliderWrap, thumb_) {
			var targetValue = thumb_.offsetLeft - ((sliderWrap.clientWidth - thumb_.clientWidth)/2);
			sliderWrap.scrollLeft = targetValue;
		};
		/**
		 * saveAllGalleryInstancesToGlobalObject - saves all instances of inline gallery with current centermost thumbnail
		 * @returns {void} returns nothing
		 */
		__.saveAllGalleryInstancesToGlobalObject = function () {
			var galleyModules = DOM_UTILS.getElementsArray(__.oDefaults.module),
				wrap;
			galleyModules.forEach(function (gallery) {
				wrap = DOM_UTILS.getElement(__.oDefaults.sliderWrap, gallery);
				__.galleries[gallery.getAttribute('data-gallery-id')] = __.getCenterMostElementOfParent(wrap);
			});
		};

		/**
		 * stopVideoOnScrollOut
		 * gets called on gallery video play
		 * @param  {HTML Event} event_ - click event
		 * @returns {Void} returns nothing
		 */
		__.stopVideoOnScrollOut = function (event_) {
			var videoContainer = DOM_UTILS.closest(event_.target, '.nm-video'),
				video = DOM_UTILS.getElement('video', videoContainer);

			__.videoScrollHandler = DOM_UTILS.throttle(__.handleScrollVideo.bind(video), 15);
			document.addEventListener('scroll', __.videoScrollHandler);
		};

		/**
		 * handleScrollVideo - checks if gallery video is out of viewport and stops video if true
		 * @returns {Void} - returns nothing
		 */
		__.handleScrollVideo = function () {
			var video = this,
				videoContainer,
				galleryContainer,
				videoVisibility = DOM_UTILS.getVisibleVerticalPercentageInViewport(video);

			if(videoVisibility === 0) {
				videoContainer = DOM_UTILS.closest(video, '.nm-video');
				galleryContainer = DOM_UTILS.closest(videoContainer, '.nm-inline-mediagallery-image-container.nm-inline-mediagallery-video-playing');
				video.pause();
				// remove classes to show play buttons and gradients
				if(videoContainer && galleryContainer){
					videoContainer.classList.remove('nm-video-playing');
					galleryContainer.classList.remove('nm-inline-mediagallery-video-playing');
				}
				document.removeEventListener('scroll', __.videoScrollHandler);
			}
		};

		/**
		 * addEvents - adds several dom events
		 * @return {void} returns nothing
		 */
		__.addEvents = function() {
			__.domEventDelegate.on('click', __.oDefaults.arrowNext, __.nextArrowClickHandler);
			__.domEventDelegate.on('click', __.oDefaults.arrowPrev, __.prevArrowClickHandler);
			__.domEventDelegate.on('click', __.oDefaults.thumbnails, __.thumbCLickHandler);
			__.domEventDelegate.on('mousedown', __.oDefaults.imageContainer, __.onSwipeStart);
			__.domEventDelegate.on('touchstart', __.oDefaults.imageContainer, __.onSwipeStart);
			__.domEventDelegate.on('dblclick', '.nm-inline-mediagallery-image', __.openFullscreen);
			__.domEventDelegate.on('keyup', 'body', __.closeFullscreen);
			__.domEventDelegate.on('click', __.oDefaults.closeFullscreenBtn, __.closeFullscreen);
			__.domEventDelegate.on('click', __.oDefaults.sliderPrev, __.sliderArrowClickHandler);
			__.domEventDelegate.on('click', __.oDefaults.sliderNext, __.sliderArrowClickHandler);
			__.domEventDelegate.on('scroll', __.oDefaults.sliderWrap, DOM_UTILS.throttle(__.scrollHandler, 15));
			__.domEventDelegate.on('dragstart', '.nm-inline-mediagallery-image img', __.preventImgDrag);
			__.domEventDelegate.on('click', __.oDefaults.videoPlayerPlay, __.stopVideoOnScrollOut);
			__.eventBus.on(EVENTS.APP_INITIALIZED, __.addGalleryVideoEvents);
			__.eventBus.on(EVENTS.APP_INITIALIZED, __.saveAllGalleryInstancesToGlobalObject);
			__.eventBus.on(EVENTS.LAYER_LOADED, __.addGalleryVideoEvents);
			__.eventBus.on(EVENTS.LAYER_LOADED, __.saveAllGalleryInstancesToGlobalObject);
			__.eventBus.on(EVENTS.LAYER_LOADED, __.resizeHandler);
			window.addEventListener('resize', __.resizeHandler);
			window.addEventListener('orientationchange', __.orientationChangeHandler);


		};
		/**
		 * resizeHandler - checks all galleries if sliderNavigation is visible
		 * @return {void} returns nothing
		 */
		__.resizeHandler = function() {
			var galleries = DOM_UTILS.getElementsArray(__.oDefaults.module);
			galleries.forEach(function(gallery) {
				var sliderNav = __.getSliderNavigation(gallery),
				sliderElements = DOM_UTILS.getElementsArray(__.oDefaults.thumbnails, gallery);
				__.hideSliderNavigation(sliderElements, sliderNav);
			});
		};

		exports.initializePromise = function(globalEventBus) {
			return new Promise(function(resolve) {
				__.eventBus = globalEventBus;
				__.domEventDelegate = DOM_UTILS.getEventDelegate('body');
				exports.init();
				resolve('inline-mediagallery.js');
			});
		};
		return exports;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 206 */
/*!***********************************************!*\
  !*** ./js/app/module/hidden-version-items.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
	__webpack_require__(/*! events */ 0),
	__webpack_require__(/*! configurator/dpu-api */ 3),
	__webpack_require__(/*! utils/dom */ 2)
], __WEBPACK_AMD_DEFINE_RESULT__ = function (EVENTS, DPU_API, DOM_UTILS) {
	"use strict";

	var __ = {},
		exports = {
			'__': __
		};
	/**
	 * add events
	 * @returns {void}
	 */
	__.addEvents = function() {
		__.eventBus.on(EVENTS.VERSION_LOAD_COMPLETE, __.setHiddenItemsFromVersionResponse);
		__.eventBus.on(EVENTS.PAGE_LOADED, __.setHiddenItemsFromVersionResponse);
		__.eventBus.on(EVENTS.LAYER_LOADED, __.setHiddenItemsFromVersionResponse);
	};
	/**
	 * set hidden items from version response
	 * @param {Object} eventData - the domElement from the event to operator on
	 * @returns {void}
	 */
	__.setHiddenItemsFromVersionResponse = function(eventData) {
		var domElement = !!eventData && !!eventData.domElement && !!eventData.domElement[0] ? eventData.domElement[0] : document;
		var items = DOM_UTILS.getElementsArray('.nm-j-configurator-item', domElement);
		var hiddenItems = DPU_API.getHiddenItemIDsFromVersion();
		var i, j;

		if (!!hiddenItems && hiddenItems !== null) {
			for (i=0; i<hiddenItems.length; i++) {
				for (j=0; j<items.length; j++) {
					if (hiddenItems[i] === items[j].getAttribute('data-configurator-id')) {
						items[j].setAttribute('data-visibility', 'hidden');
					}
				}
			}
		}
	};
	/**
	 * initialize
	 * @param {EventEmitter} eventBus_ - the event bus
	 * @returns {void}
	 */
	exports.initializePromise = function(eventBus_) {
		return new Promise(function(resolve) {
			__.eventBus = eventBus_;
			__.addEvents();
			resolve('module/hidden-version-items.js');
		});
	};

	return exports;
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }),
/* 207 */,
/* 208 */,
/* 209 */,
/* 210 */,
/* 211 */,
/* 212 */,
/* 213 */,
/* 214 */,
/* 215 */,
/* 216 */,
/* 217 */,
/* 218 */,
/* 219 */,
/* 220 */,
/* 221 */,
/* 222 */,
/* 223 */,
/* 224 */,
/* 225 */,
/* 226 */,
/* 227 */,
/* 228 */,
/* 229 */,
/* 230 */,
/* 231 */,
/* 232 */,
/* 233 */,
/* 234 */,
/* 235 */,
/* 236 */,
/* 237 */
/*!*******************************!*\
  !*** ./js/app/app_webpack.js ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

/* global requirejs */
/*eslint strict:1*/
//Gloabl Error Handler fpr Require Loader
/*
requirejs.onError = function(err) {
	console.log(err.requireType);
	if (err.requireType === 'timeout') {
		console.log('modules: ' + err.requireModules);
	}

	throw err;
};
*/
__webpack_require__.p = window.webpack_public_path;
//global internationalization key|value storage
window.i18n=window.i18n||{};
/*========================================
Global Util functions
========================================*/
/**
 * @description Nemo app namespace
 * @namespace
 */
nemo = window.nemo || {};
window.nemo = nemo;

/**
 * @description Creates additional namespaces.
 * @method namespace
 * @param {String} sNamespace_ Namespace to create
 * @example nemo.namespace('example.namespace') will create a new object: nemo.example.namespace = {};
 * It's not necessary to create nemo.example first.
 * @return {Object}
 */
nemo.namespace = function(sNamespace_) {
	var _i;
	var _col = sNamespace_.split('.');
	// set namespace
	var _oBase = nemo;
	for (_i = 0; _i < _col.length; _i++) {
		// don't have current obj
		if (typeof _oBase[_col[_i]] === 'undefined') {
			// add obj
			_oBase[_col[_i]] = {};
		}
		_oBase = _oBase[_col[_i]];
	}
	return _oBase;
};

// trim for IE8
if (typeof String.prototype.trim !== 'function') {
	String.prototype.trim = function() {
		//Your implementation here. Might be worth looking at perf comparison at
		return this.replace(/^\s+|\s+$/g, '');
	};
}
//Array.indexOf for IE8
if (!Array.prototype.indexOf) {
	Array.prototype.indexOf = function(obj, start) {
		for (var i = (start || 0), j = this.length; i < j; i++) {
			if (this[i] === obj) {
				return i;
			}
		}
		return -1;
	};
}

if (typeof window.XDomainRequest==='function') {

	// minor workaround for IP based access
	// from within an "Virtual Machine"
	//
	var isIpAdress = (/(\d{3}\.?){1,}/).test(window.location.hostname),
		domain;

	if (isIpAdress) {
		domain = window.location.hostname;
	} else {
		domain = window.location.hostname.split('.').slice(-2).join('.');
	}

	document.domain = domain;
}

if (!window.XMLHttpRequest) {
	window.XMLHttpRequest = function() {
		try {
			return new window.ActiveXObject('MSXML2.XMLHTTP.3.0');
		} catch (ex) {
			return null;
		}
	};
}
// Polyfill for creating CustomEvents on IE>=9
// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill
(function () {
	var evt,params;
  if (typeof window.CustomEvent === "function"){return false;}
  function CustomEvent ( event, params_ ) {
    params = params_ || { bubbles: false, cancelable: false, detail: undefined};
    evt = document.createEvent( 'CustomEvent' );
    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
    return evt;
   }
  CustomEvent.prototype = window.Event.prototype;
  window.CustomEvent = CustomEvent;
})();

window.addEventListener('unhandledrejection',function(event){
	console.error('Unhandled rejection (promise: ', event.promise, ', reason: ', event.reason, ').');
});
__webpack_require__(/*! init */ 91);


/***/ })
],[237]);
});
//# sourceMappingURL=bundle.nemo.modules.js.map